# 対象プロジェクト情報

## ファイル一覧

docs/Colors.stories.mdx
docs/Contribution.stories.mdx
docs/Design/Layout/Layout.stories.mdx
docs/Design/Readme.stories.mdx
docs/Readme.stories.mdx
docs/Storybook.stories.mdx
docs/Stylesheets.stories.mdx
docs/TypeScript.stories.mdx
examples/Collection.mdx
examples/Collection.stories.tsx
examples/Forms.mdx
examples/Forms.stories.tsx
examples/ImportWizard.mdx
examples/ImportWizard.stories.tsx
examples/Pages.stories.tsx
examples/ResponsiveLayout.mdx
examples/ResponsiveLayout.stories.tsx
examples/ThroughCommonProps.mdx
examples/ThroughCommonProps.stories.tsx
src/constants/Color.ts
src/constants/Font.ts
src/constants/Size.ts
src/constants/ZIndex.ts
src/constants/index.ts
src/lv1/a11y/FocusHighlight.stories.tsx
src/lv1/a11y/FocusHighlight.tsx
src/lv1/a11y/FocusTrap.stories.tsx
src/lv1/a11y/FocusTrap.tsx
src/lv1/a11y/VisuallyHidden.stories.tsx
src/lv1/a11y/VisuallyHidden.tsx
src/lv1/bases/Balloon.stories.tsx
src/lv1/bases/Balloon.tsx
src/lv1/bases/CardBase.stories.tsx
src/lv1/bases/CardBase.tsx
src/lv1/bases/ColumnBase.stories.tsx
src/lv1/bases/ColumnBase.tsx
src/lv1/bases/Container.stories.tsx
src/lv1/bases/Container.tsx
src/lv1/bases/ContentsBase.stories.tsx
src/lv1/bases/ContentsBase.tsx
src/lv1/bases/DialogBase.stories.tsx
src/lv1/bases/DialogBase.tsx
src/lv1/bases/FloatingBase.stories.tsx
src/lv1/bases/FloatingBase.tsx
src/lv1/bases/MarginBase.stories.tsx
src/lv1/bases/MarginBase.tsx
src/lv1/bases/NegativeContentsBase.stories.tsx
src/lv1/bases/NegativeContentsBase.tsx
src/lv1/bases/NegativeMarginBase.stories.tsx
src/lv1/bases/NegativeMarginBase.tsx
src/lv1/bases/PopupBase.stories.tsx
src/lv1/bases/PopupBase.tsx
src/lv1/bases/ScrimBase.stories.tsx
src/lv1/bases/ScrimBase.tsx
src/lv1/bases/ScrollableBase.stories.tsx
src/lv1/bases/ScrollableBase.tsx
src/lv1/bases/ZebraBase.stories.tsx
src/lv1/bases/ZebraBase.tsx
src/lv1/buttons/BackwardButton.stories.tsx
src/lv1/buttons/BackwardButton.tsx
src/lv1/buttons/Button.stories.tsx
src/lv1/buttons/Button.tsx
src/lv1/buttons/GlobalNaviButton.stories.tsx
src/lv1/buttons/GlobalNaviButton.tsx
src/lv1/buttons/IconOnlyBackwardButton.stories.tsx
src/lv1/buttons/IconOnlyBackwardButton.tsx
src/lv1/buttons/IconOnlyButton.stories.tsx
src/lv1/buttons/IconOnlyButton.tsx
src/lv1/buttons/IconOnlyJumpButton.stories.tsx
src/lv1/buttons/IconOnlyJumpButton.tsx
src/lv1/buttons/InlineLink.stories.tsx
src/lv1/buttons/InlineLink.tsx
src/lv1/buttons/JumpButton.stories.tsx
src/lv1/buttons/JumpButton.tsx
src/lv1/buttons/LeftIconButton.stories.tsx
src/lv1/buttons/LeftIconButton.tsx
src/lv1/buttons/ListButton.stories.tsx
src/lv1/buttons/ListButton.tsx
src/lv1/buttons/PagerButton.stories.tsx
src/lv1/buttons/PagerButton.tsx
src/lv1/buttons/RightIconButton.stories.tsx
src/lv1/buttons/RightIconButton.tsx
src/lv1/buttons/TabButton.stories.tsx
src/lv1/buttons/TabButton.tsx
src/lv1/buttons/TextButton.stories.tsx
src/lv1/buttons/TextButton.tsx
src/lv1/calendar/CalendarDate.stories.tsx
src/lv1/calendar/CalendarDate.tsx
src/lv1/calendar/CalendarHead.stories.tsx
src/lv1/calendar/CalendarHead.tsx
src/lv1/forms/CheckBox.stories.tsx
src/lv1/forms/CheckBox.tsx
src/lv1/forms/FormControlLabel.stories.tsx
src/lv1/forms/FormControlLabel.tsx
src/lv1/forms/NumeralField.stories.tsx
src/lv1/forms/NumeralField.tsx
src/lv1/forms/OptionButton.stories.tsx
src/lv1/forms/OptionButton.tsx
src/lv1/forms/RadioButton.stories.tsx
src/lv1/forms/RadioButton.tsx
src/lv1/forms/ReadOnlyField.stories.tsx
src/lv1/forms/ReadOnlyField.tsx
src/lv1/forms/SearchField.stories.tsx
src/lv1/forms/SearchField.tsx
src/lv1/forms/SelectBox.stories.tsx
src/lv1/forms/SelectBox.tsx
src/lv1/forms/TextArea.stories.tsx
src/lv1/forms/TextArea.tsx
src/lv1/forms/TextField.stories.tsx
src/lv1/forms/TextField.tsx
src/lv1/forms/ToggleButton.stories.tsx
src/lv1/forms/ToggleButton.tsx
src/lv1/grids/GridBlock.tsx
src/lv1/grids/GridWrapper.tsx
src/lv1/grids/Grids.stories.tsx
src/lv1/icons/Avatar.stories.tsx
src/lv1/icons/Avatar.tsx
src/lv1/icons/MaterialIcon.stories.tsx
src/lv1/icons/MaterialIcon.tsx
src/lv1/icons/RequiredIcon.stories.tsx
src/lv1/icons/RequiredIcon.tsx
src/lv1/icons/StatusIcon.stories.tsx
src/lv1/icons/StatusIcon.tsx
src/lv1/images/AlertSwallow.stories.tsx
src/lv1/images/AlertSwallow.tsx
src/lv1/images/AppStoreBadge.stories.tsx
src/lv1/images/AppStoreBadge.tsx
src/lv1/images/CloudSkeletonIllust.stories.tsx
src/lv1/images/CloudSkeletonIllust.tsx
src/lv1/images/CloudUploadIllust.stories.tsx
src/lv1/images/CloudUploadIllust.tsx
src/lv1/images/CsvUploadIllust.stories.tsx
src/lv1/images/CsvUploadIllust.tsx
src/lv1/images/DiscoveryIllust.stories.tsx
src/lv1/images/DiscoveryIllust.tsx
src/lv1/images/FileUploadIllust.stories.tsx
src/lv1/images/FileUploadIllust.tsx
src/lv1/images/FinishTaskIllust.stories.tsx
src/lv1/images/FinishTaskIllust.tsx
src/lv1/images/GooglePlayBadge.stories.tsx
src/lv1/images/GooglePlayBadge.tsx
src/lv1/images/ImageUploadIllust.stories.tsx
src/lv1/images/ImageUploadIllust.tsx
src/lv1/images/NoDataIllust.stories.tsx
src/lv1/images/NoDataIllust.tsx
src/lv1/images/NoSearchResultsIllust.stories.tsx
src/lv1/images/NoSearchResultsIllust.tsx
src/lv1/images/NotFoundSwallow.stories.tsx
src/lv1/images/NotFoundSwallow.tsx
src/lv1/images/SwallowContainer.tsx
src/lv1/interactiveParts/SegmentControlButton.stories.tsx
src/lv1/interactiveParts/SegmentControlButton.tsx
src/lv1/interactiveParts/StepBlock.stories.tsx
src/lv1/interactiveParts/StepBlock.tsx
src/lv1/interactiveParts/StepBorder.stories.tsx
src/lv1/interactiveParts/StepBorder.tsx
src/lv1/interactiveParts/StepNumber.stories.tsx
src/lv1/interactiveParts/StepNumber.tsx
src/lv1/interactiveParts/Tab.stories.tsx
src/lv1/interactiveParts/Tab.tsx
src/lv1/layout/HStack.stories.tsx
src/lv1/layout/HStack.tsx
src/lv1/layout/Stack.stories.tsx
src/lv1/layout/Stack.tsx
src/lv1/layout/VStack.stories.tsx
src/lv1/layout/VStack.tsx
src/lv1/layout/WithDescriptionContent.stories.tsx
src/lv1/layout/WithDescriptionContent.tsx
src/lv1/layout/WithSideContent.stories.tsx
src/lv1/layout/WithSideContent.tsx
src/lv1/lists/BorderTableListCell.stories.tsx
src/lv1/lists/BorderTableListCell.tsx
src/lv1/lists/CheckBoxCell.stories.tsx
src/lv1/lists/CheckBoxCell.tsx
src/lv1/lists/DescriptionListCell.stories.tsx
src/lv1/lists/DescriptionListCell.tsx
src/lv1/lists/DescriptionListHeadCell.stories.tsx
src/lv1/lists/DescriptionListHeadCell.tsx
src/lv1/lists/TableListCell.stories.tsx
src/lv1/lists/TableListCell.tsx
src/lv1/lists/TableListHead.stories.tsx
src/lv1/lists/TableListHead.tsx
src/lv1/lists/TableListHeadCell.stories.tsx
src/lv1/lists/TableListHeadCell.tsx
src/lv1/lists/TableListRow.stories.tsx
src/lv1/lists/TableListRow.tsx
src/lv1/lists/TreeFoldingButtonCell.stories.tsx
src/lv1/lists/TreeFoldingButtonCell.tsx
src/lv1/messages/Message.stories.tsx
src/lv1/messages/Message.tsx
src/lv1/progress/ProgressBar.stories.tsx
src/lv1/progress/ProgressBar.tsx
src/lv1/skeleton/SkeletonBase.tsx
src/lv1/typography/InternalHeadline.tsx
src/lv1/typography/Note.stories.tsx
src/lv1/typography/Note.tsx
src/lv1/typography/PageTitle.stories.tsx
src/lv1/typography/PageTitle.tsx
src/lv1/typography/Paragraph.stories.tsx
src/lv1/typography/Paragraph.tsx
src/lv1/typography/SectionTitle.stories.tsx
src/lv1/typography/SectionTitle.tsx
src/lv1/typography/SubSectionTitle.stories.tsx
src/lv1/typography/SubSectionTitle.tsx
src/lv1/typography/Text.stories.tsx
src/lv1/typography/Text.tsx
src/lv2/accordionPanel/AccordionPanel.stories.tsx
src/lv2/accordionPanel/AccordionPanel.tsx
src/lv2/basicTable/BasicTable.stories.tsx
src/lv2/basicTable/BasicTable.tsx
src/lv2/breadcrumbs/Breadcrumbs.stories.tsx
src/lv2/breadcrumbs/Breadcrumbs.tsx
src/lv2/bulletedList/BulletedList.stories.tsx
src/lv2/bulletedList/BulletedList.tsx
src/lv2/buttonGroup/ButtonGroup.stories.tsx
src/lv2/buttonGroup/ButtonGroup.tsx
src/lv2/calendar/Calendar.stories.tsx
src/lv2/calendar/Calendar.tsx
src/lv2/calendar/DatePicker.stories.tsx
src/lv2/calendar/DatePicker.tsx
src/lv2/calendar/Week.tsx
src/lv2/calendar/Weeks.tsx
src/lv2/cardNavigation/CardNavigation.stories.tsx
src/lv2/cardNavigation/CardNavigation.tsx
src/lv2/combobox/ApiComboBox.stories.tsx
src/lv2/combobox/ApiComboBox.tsx
src/lv2/combobox/ApiMultiComboBox.stories.tsx
src/lv2/combobox/ApiMultiComboBox.tsx
src/lv2/combobox/CreateNewItem.tsx
src/lv2/combobox/ItemLabel.tsx
src/lv2/combobox/LoadMoreItem.tsx
src/lv2/combobox/MultiComboBox.stories.tsx
src/lv2/combobox/MultiComboBox.tsx
src/lv2/combobox/MultiComboBoxField.tsx
src/lv2/combobox/SingleComboBox.stories.tsx
src/lv2/combobox/SingleComboBox.tsx
src/lv2/descriptionList/DescriptionList.stories.tsx
src/lv2/descriptionList/DescriptionList.tsx
src/lv2/dialogs/GuideDialog.stories.tsx
src/lv2/dialogs/GuideDialog.tsx
src/lv2/dialogs/MessageDialog.stories.tsx
src/lv2/dialogs/MessageDialog.tsx
src/lv2/dialogs/MessageDialogConfirm.stories.tsx
src/lv2/dialogs/MessageDialogConfirm.tsx
src/lv2/dialogs/TaskDialog.stories.tsx
src/lv2/dialogs/TaskDialog.tsx
src/lv2/dialogs/ToggleDialog.tsx
src/lv2/dialogs/parts/DialogFooter.stories.tsx
src/lv2/dialogs/parts/DialogFooter.tsx
src/lv2/dialogs/parts/GuideStepCount.tsx
src/lv2/dropdown/Dropdown.stories.tsx
src/lv2/dropdown/Dropdown.tsx
src/lv2/dropdown/DropdownMenuContent.stories.tsx
src/lv2/dropdown/DropdownMenuContent.tsx
src/lv2/dropdown/Item.tsx
src/lv2/dropdownButton/DropdownButton.stories.tsx
src/lv2/dropdownButton/DropdownButton.tsx
src/lv2/emptyStates/NoDataCreated.stories.tsx
src/lv2/emptyStates/NoDataCreated.tsx
src/lv2/emptyStates/NoSearchResults.stories.tsx
src/lv2/emptyStates/NoSearchResults.tsx
src/lv2/fileUploader/FileDropArea.stories.tsx
src/lv2/fileUploader/FileDropArea.tsx
src/lv2/fileUploader/FileUploader.stories.tsx
src/lv2/fileUploader/FileUploader.tsx
src/lv2/filterTag/FilterTag.stories.tsx
src/lv2/filterTag/FilterTag.tsx
src/lv2/filterableDropdownButton/FilterableDropdownButton.stories.tsx
src/lv2/filterableDropdownButton/FilterableDropdownButton.tsx
src/lv2/footer/Footer.stories.tsx
src/lv2/footer/Footer.tsx
src/lv2/formBlock/DateField.stories.tsx
src/lv2/formBlock/DateField.tsx
src/lv2/formBlock/FormActions.stories.tsx
src/lv2/formBlock/FormActions.tsx
src/lv2/formBlock/NameField.stories.tsx
src/lv2/formBlock/NameField.tsx
src/lv2/formBlock/PhoneNumberField.stories.tsx
src/lv2/formBlock/PhoneNumberField.tsx
src/lv2/formControl/FormControl.stories.tsx
src/lv2/formControl/FormControl.tsx
src/lv2/formControl/FormControlGroup.stories.tsx
src/lv2/formControl/FormControlGroup.tsx
src/lv2/formFields/AmountRangeField.stories.tsx
src/lv2/formFields/AmountRangeField.tsx
src/lv2/formFields/DateDurationField.stories.tsx
src/lv2/formFields/DateDurationField.tsx
src/lv2/formFields/DateInput.stories.tsx
src/lv2/formFields/DateInput.tsx
src/lv2/formFields/DecimalInput.stories.tsx
src/lv2/formFields/DecimalInput.tsx
src/lv2/formFields/DigitsInput.stories.tsx
src/lv2/formFields/DigitsInput.tsx
src/lv2/formFields/FormattedTextField.stories.tsx
src/lv2/formFields/FormattedTextField.tsx
src/lv2/formFields/NumeralCodeInput.stories.tsx
src/lv2/formFields/NumeralCodeInput.tsx
src/lv2/formFields/PasswordField.stories.tsx
src/lv2/formFields/PasswordField.tsx
src/lv2/formFields/TimeInput.stories.tsx
src/lv2/formFields/TimeInput.tsx
src/lv2/formFields/TimeLengthInput.stories.tsx
src/lv2/formFields/TimeLengthInput.tsx
src/lv2/globalNavi/GlobalNavi.stories.tsx
src/lv2/globalNavi/GlobalNavi.tsx
src/lv2/guidanceMessage/GuidanceMessage.stories.tsx
src/lv2/guidanceMessage/GuidanceMessage.tsx
src/lv2/guidedContent/GuidedContent.stories.tsx
src/lv2/guidedContent/GuidedContent.tsx
src/lv2/header/Header.stories.tsx
src/lv2/header/Header.tsx
src/lv2/header/HeaderSectionContent.tsx
src/lv2/headlineArea/HeadlineArea.stories.tsx
src/lv2/headlineArea/HeadlineArea.tsx
src/lv2/hierarchicalTable/HierarchicalTable.stories.tsx
src/lv2/hierarchicalTable/HierarchicalTable.tsx
src/lv2/hierarchicalTable/HierarchicalTableRowHeaderCell.tsx
src/lv2/indexSearchField/IndexSearchField.stories.tsx
src/lv2/indexSearchField/IndexSearchField.tsx
src/lv2/lineSeparatedList/LineSeparatedList.stories.tsx
src/lv2/lineSeparatedList/LineSeparatedList.tsx
src/lv2/listButtonSelector/ListButtonSelector.stories.tsx
src/lv2/listButtonSelector/ListButtonSelector.tsx
src/lv2/listButtons/ListButtons.stories.tsx
src/lv2/listButtons/ListButtons.tsx
src/lv2/listCard/ListCard.stories.tsx
src/lv2/listCard/ListCard.tsx
src/lv2/listTable/GroupedListTable.stories.tsx
src/lv2/listTable/GroupedListTable.tsx
src/lv2/listTable/ListTable.stories.tsx
src/lv2/listTable/ListTable.tsx
src/lv2/messageBlock/FloatingMessageBlock.stories.tsx
src/lv2/messageBlock/FloatingMessageBlock.tsx
src/lv2/messageBlock/MessageBlock.stories.tsx
src/lv2/messageBlock/MessageBlock.tsx
src/lv2/messageIcon/MessageIcon.stories.tsx
src/lv2/messageIcon/MessageIcon.tsx
src/lv2/modals/FullScreenModal.stories.tsx
src/lv2/modals/FullScreenModal.tsx
src/lv2/numericTable/NumericTable.stories.tsx
src/lv2/numericTable/NumericTable.tsx
src/lv2/pageSelector/PageSelector.stories.tsx
src/lv2/pageSelector/PageSelector.tsx
src/lv2/pager/Pager.stories.tsx
src/lv2/pager/Pager.tsx
src/lv2/pager/PagerBreak.tsx
src/lv2/pager/Pagination.stories.tsx
src/lv2/pager/Pagination.tsx
src/lv2/personTag/PersonTag.stories.tsx
src/lv2/personTag/PersonTag.tsx
src/lv2/popupProgressBar/PopupProgressBar.stories.tsx
src/lv2/popupProgressBar/PopupProgressBar.tsx
src/lv2/popupProgressBarPortal/PopupProgressBarPortal.stories.tsx
src/lv2/popupProgressBarPortal/PopupProgressBarPortal.tsx
src/lv2/propsListForm/PropsListForm.stories.tsx
src/lv2/propsListForm/PropsListForm.tsx
src/lv2/scrimCoveredContent/ScrimCoveredContent.stories.tsx
src/lv2/scrimCoveredContent/ScrimCoveredContent.tsx
src/lv2/selectableButton/SelectableButton.stories.tsx
src/lv2/selectableButton/SelectableButton.tsx
src/lv2/skeleton/SkeletonBlock.stories.tsx
src/lv2/skeleton/SkeletonBlock.tsx
src/lv2/skeleton/SkeletonCircle.stories.tsx
src/lv2/skeleton/SkeletonCircle.tsx
src/lv2/skeleton/SkeletonDescriptionList.stories.tsx
src/lv2/skeleton/SkeletonDescriptionList.tsx
src/lv2/skeleton/SkeletonIcon.stories.tsx
src/lv2/skeleton/SkeletonIcon.tsx
src/lv2/skeleton/SkeletonInput.stories.tsx
src/lv2/skeleton/SkeletonInput.tsx
src/lv2/skeleton/SkeletonListTable.stories.tsx
src/lv2/skeleton/SkeletonListTable.tsx
src/lv2/skeleton/SkeletonPageTitle.stories.tsx
src/lv2/skeleton/SkeletonPageTitle.tsx
src/lv2/skeleton/SkeletonParagraph.stories.tsx
src/lv2/skeleton/SkeletonParagraph.tsx
src/lv2/skeleton/SkeletonRectangle.stories.tsx
src/lv2/skeleton/SkeletonRectangle.tsx
src/lv2/skeleton/SkeletonSectionTitle.stories.tsx
src/lv2/skeleton/SkeletonSectionTitle.tsx
src/lv2/skeleton/SkeletonStackedBarChart.stories.tsx
src/lv2/skeleton/SkeletonStackedBarChart.tsx
src/lv2/stackedBarChart/StackedBarChart.stories.tsx
src/lv2/stackedBarChart/StackedBarChart.tsx
src/lv2/statusSelector/StatusSelector.stories.tsx
src/lv2/statusSelector/StatusSelector.tsx
src/lv2/stepper/Stepper.stories.tsx
src/lv2/stepper/Stepper.tsx
src/lv2/stepper/VerticalSteps.stories.tsx
src/lv2/stepper/VerticalSteps.tsx
src/lv2/tabBar/TabBar.stories.tsx
src/lv2/tabBar/TabBar.tsx
src/lv2/tagBox/MiniTag.stories.tsx
src/lv2/tagBox/MiniTag.tsx
src/lv2/tagBox/TagBox.stories.tsx
src/lv2/tagBox/TagBox.tsx
src/lv2/withAccordionContent/WithAccordionContent.stories.tsx
src/lv2/withAccordionContent/WithAccordionContent.tsx
src/lv2/withBalloon/WithBalloon.stories.tsx
src/lv2/withBalloon/WithBalloon.tsx
src/lv2/withDropdown/WithDropdown.stories.tsx
src/lv2/withDropdown/WithDropdown.tsx
src/lv2/withFilterableDropdown/WithFilterableDropdown.stories.tsx
src/lv2/withFilterableDropdown/WithFilterableDropdown.tsx
src/lv2/withPopup/WithPopup.stories.tsx
src/lv2/withPopup/WithPopup.tsx
src/lv2/withTOC/WithTOC.stories.tsx
src/lv2/withTOC/WithTOC.tsx

## ファイルの詳細内容

### docs/Colors.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

<Meta title="doc/Colors" />

# 色についての方針

vibes 内で使用する色、ならびに vibes を使用するプロダクトで使用する色は、[freee のブランドカラー](https://brand.freee.co.jp/designelements/color/)から選定してください。

また、コントラスト比の確保に留意してください（[コントラスト比確保の重要性](https://a11y-guidelines.freee.co.jp/explanations/contrast.html)）

- テキストコンテンツに関しては 4.5:1 のコントラスト比を確保してください
- テキストコンテンツ以外に関しては、画面の情報を読み解くのに必要な部分に関しては 3:1 のコントラスト比を確保してください

# vibes 内で使用されるセマンティックカラー

特定の意味を伝えるために、いくつかの色はその意味と紐付いた **セマンティックカラー** として定義します。
これらの意味を伝える場合、または色を使用する場合は、色と意味の組み合わせに一貫性があるようにしてください。

## P5 (<span style={{background: "#2864f0", color: "#FFFFFF"}}>#2864f0</span>)

- **[DO]** freee のブランドを象徴する色で、ロゴはこの色を使用します
- **[DO]** UI では「現在いる場所」「現在表示しているもの」「（処理などの）成功」を表現するのにも使用されています
- **[DO NOT]** P7 とあわせて、リンクやボタンの色と誤認しやすいため、「非インタラクティブ要素を目立たせるため」だけの使用は避けてください l

## P7 (<span style={{background: "#285ac8", color: "#FFFFFF"}}>#285ac8</span>)

- **[DO]** リンクやボタンに使用するために、P5 よりやや暗くしたメインカラーです
- **[DO NOT]** P5 とあわせて、リンクやボタンの色と誤認しやすいため、「非インタラクティブ要素を目立たせるため」だけの使用は避けてください l

## RE5 (<span style={{background: "#dc1e32", color: "#ffffff"}}>#dc1e32</span>)

- **[DO]** エラーの表現や、削除などの致命的な動作に使用してください

## YE7, YE10 (<span style={{background:"#be8c14", color: "#ffffff"}}>#be8c14</span>, <span style={{background:"#825a0f", color: "#ffffff"}}>#825a0f</span>)

- **[DO]** 先の挙動に注意が必要な場合など、ユーザーに注意をうながす際に使用してください
- **[DO NOT]** YE7 は白 #FFFFFF に対してのコントラスト比が 4.5:1 を満たしません。テキストを書く場合は「30px = 1.875rem 以上」または「22px = 1.375rem 以上の太字」にするか、YE10 を使用してください（[freee アクセシビリティー・ガイドライン: コントラスト比の確保](https://a11y-guidelines.freee.co.jp/categories/text.html#gl-text-contrast)）。

## GY7 (<span style={{background: "#323232", color: "#ffffff"}}>#323232</span>)

- **[DO]** 通常の文字色に使用してください

## S9 (<span style={{background: "#6e6b6b", color: "#ffffff"}}>#6e6b6b</span>)

- **[DO]** GY7 よりも目立たせたくない場所の文字色に使用してください

## S1 (<span style={{background:"#f7f5f5"}}>#f7f5f5</span>)

- **[DO]** コラム領域などテキストを乗せる領域の地色に使用してください

# 外部への提供

Color 定数として vibes 内に定義された 16 進数カラーコードを提供します。

変数名は歴史的な経緯で名付けられているものもあり、必ずしもその色の使用目的を表現していないことに注意してください。

## Examples

### with styled-components [css prop](https://styled-components.com/docs/api#css-prop)

```typescript
import * as React from 'react';
import { VibesBackgroundColor } from '@freee_jp/vibes';

// Defined: background-color: ${VibesBackgroundColor}
const Component: React.FC = ({ children }) => {
  return (
    <div
      css={`
        background-color: ${VibesBackgroundColor};
      `}
    >
      {children}
    </div>
  );
};

export default Component;
```

### Example with styled-components basic

```typescript
import * as React from 'react';
import { VibesBackgroundColor } from '@freee_jp/vibes';
import styled from 'styled-components';

// Defined: background-color: ${VibesBackgroundColor}
const StyledInner = styled.div`
  background-color: ${VibesBackgroundColor};
`;

const Component: React.FC = ({ children }) => {
  return <StyledInner>{children}</StyledInner>;
};

export default Component;
```

```

### docs/Contribution.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

<Meta title='doc/Contribution' />

# vibes の開発に参加する

このドキュメントを読んでいただいてありがとうございます。
きっとこれを読んでいるあなたはvibesの開発に参加しようと思ってくれている方かなと思います。そういう人向けの情報を書いていきます。


## Issue を立てる

TBD

## Pull Request する

vibesは誰でもPull RequestしてOKです。あなたからのPull Requestをお待ちしております。

### 開発環境の準備

開発時に必要となる依存パッケージの導入、および初期セットアップを行ってください。

```sh
$ npm install
$ npm run setup
```

### コードの修正

- JavaScript (TypeScript) の修正が必要な場合は `src/` 内のファイルを修正してください
- スタイルシート (CSS, SCSS, SASS) を修正する場合は `stylesheets/` 内のファイルを修正してください

**ルートディレクトリ内にある `vibes_2021.css` や、`dist/` ディレクトリ内のファイルはビルド生成物です**。
これらのファイルはリリース時以外には変更する必要はありません。
あなたの修正がこれらのファイルに反映されていなくても、Pull RequestしてOKです。

### 動作確認する

動作確認は主にStorybookで行います。Storybookは以下の方法で立ち上がります。

```sh
# npm で立ち上げる場合
$ npm run storybook
# access to localhost:6006
```

## コーディング規約・方針

以下のページをそれぞれ参照してください。

- [TypeScript](?path=/docs/doc-typescript--page)
- [Stylesheets](?path=/docs/doc-stylesheets--page)


## リリース
### リリース手順

TBD

#### majorバージョンに該当する変更

vibesを利用する側のプロダクトで、バージョンアップ時に確認や変更が強いられるもの（破壊的変更が含まれるもの）は `major` ラベルを付与します。

- vibesを利用する側で、コードの変更が強いられるもの
  - 既存コンポーネントの削除
  - 既存のpropsの意味が変わってしまうもの
- vibesを利用する側で、画面デザインの変更が強いられるもの
  - コンポーネントの外形の大きさが大きく変わってしまうような変更
- vibesを利用する側で設定の変更が必要となるもの
  - ビルドまわりの設定変更が必要となりそうなもの
  - peerDependenciesが増えるもの・減るもの
- vibes側で大きな方針の変更をするもの
  - バージョン指定基準が決まるとか
- その他、盛大に祝ったり気持ちを盛り上げ（バイブスを上げ）たりしたいもの

#### minorバージョンに該当するもの

コンポーネントの追加・改善などを含み、vibesを利用するプロダクト側で変更や確認が強いられない場合には `minor` ラベルを付与します。

- コンポーネントの追加
- コンポーネントの機能改善
  - propsの追加や、取り得る値の追加
- コンポーネントのデザイン改善
  - その改善が加わることによってvibesを使う側の画面のデザインを変更する必要のないもの
- その他、新機能や機能改善がありつつ、vibesを使う側ではコードや画面デザインの変更が不要な変更

#### patchバージョンに該当するもの

`major`, `minor` に該当する変更がない場合は、 `patch` ラベルを付与してください。

- APIに変化のないバグフィックス
- vibes内で使用しているnpmモジュールのバージョンアップ
- vibes内のリファクタリング
- その他、新機能や機能改善でもなく、vibes利用側でのコードや画面デザインの不要な変更

```

### docs/Design/Layout/Layout.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

import widthImg from './width.png';
import heightImg from './height.jpg';

<Meta title='doc/Design/Layout' />

このドキュメントでは、標準画面サイズなど画面全体のレイアウトについての方針を記載します。

# 画面サイズ

## 最小コンテンツ幅
- デスクトップWeb向けの画面では最低画面幅1152pxで表示が崩れないように設計してください。
  - 1152px（72rem） = コンテンツ幅1120px（70rem） + 左右マージン 16px（1rem）
  - <img src={widthImg} alt="上記計算式の解説画像" width="480" />
  - 会計Webにアクセスされる端末のほとんどが幅1280px以上（2021年9月現在で約98%）であるため、それよりも小さい範囲でrem計算しやすい値としてコンテンツ幅70remになっています
- 大きな表が求められるレポート画面など、コンテンツが1120pxでは収まらない場合、適宜その部分を横スクロールで表示できるようにしてください。
- 幅1120pxよりも小さい幅でレイアウトすることも可能です。
  - 「1280pxの画面解像度でアクセスしたときに画面幅が足りずに表示崩れを起こしてしまう」のを防ぐ意図なので、それより小さいコンテンツ幅のほうが使いやすいと考えられる場合はそれに合わせてもらってOKです（下記の narrow とか）


## ブラウザ幅に合わせてコンテンツ幅をどう表示するか
コンテンツをブラウザの横幅にあわせて無尽蔵に広げられると、右端に配置したボタン等がユーザーの目に入りにくくなります。そのためコンテンツの最大幅を設定しています。
現在のVibesでは Container コンポーネントのオプションによって、以下からレイアウトを選択することができます。
- narrow: 640px = 40rem固定
  - ウィザードUIなど、左右幅を大きく必要としない場合に使用します
- normal: 1120px = 70rem固定
- wide: ブラウザの左右端までコンテンツ幅が広がる（最小 1120px = 70rem、 最大 1600px = 100rem）
  - 画面幅が大きいときにどこまでコンテンツ幅を大きくするかはその画面における情報量を考慮して判断してください。
  - コレクション画面などの一行あたりの情報量が多いことが想定される場合には wide にすることを推奨しています。

## 画面高さ
ユーザーがスクロールしたりせずに見ることができるUIの範囲の高さ（ブラウザのウィンドウの縦幅）は630pxを前提にしてください。
- ファーストビューを考慮する必要がある設計の場合は630pxを前提にしてください。
  - <img src={heightImg} alt="画面高さ630pxはブラウザのコンテンツ部分の上端から下端までに収まる高さとして設定されています" width="480"/>
  - 会計Webにアクセスする端末のほとんどが高さ720px以上である（2021年9月現在で99.4%）ことから、そこからブラウザのツールバーなどの分を差し引いた値として定義された数字です
- fixedの要素がある場合などは630pxで成立するように画面設計を行うか、630pxを基準にメディアクエリを追加してレイアウトを可変にできるように実装するよう仕様を作成してください。

```

### docs/Design/Readme.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

<Meta title='doc/Design/Readme' />


# コンポーネント設計の指針

Vibesのコンポーネントを設計するときには以下のような方針で行っています。
Vibesを使用して画面を設計する際にも意識することで、デザインの一貫性を保ち、アクセシビリティを高め、実装コストを最小限にすることができます。

- [Vibesのカラーパレット](?path=/docs/doc-colors--page) を使用し、適切なコントラスト比を持つ組み合わせにする
- CSSで `rem` によるサイズ指定を行うため、コンポーネントのサイズは16の倍数ピクセルを基準として設計する
- コンポーネントにはマージンのオプションをつけるため、コンポーネント自体には固定のマージンをつけない
- ユーザーがインタラクションできるものの輪郭は角を丸くし、そうでないものは角を丸くしない

# Vibesのコンポーネントを使った画面設計

Sketch CloudからlibraryとしてSketchファイルを提供しています。
これを使うことで、簡単にSketch内でVibesコンポーネントのシンボルを使用できます。

## Storybookを使った確認

実際のコンポーネントの挙動はStorybookで確認していくことができます。
Knobsを使うことで、使おうとしているものに近い状態のコンポーネントを確認できます。

特にサイズ変更に関してはコンポーネントごとに制約があるので、コンポーネントを使う前に必ず実際のコンポーネントを確認するようにしてください。

## マージン

ほとんどのVibesのコンポーネントにはマージンを付けるためのオプションが用意されています。
そのため、コンポーネントにマージンをつけるときにはこのオプションが使用できるサイズでマージンをつける必要があります。

- マージンの大きさは 0.5rem(8px), 1rem(16px), 1.5rem(24px), 2rem(32px), 3rem(48px) である必要があります
- 現在、マージンを付けるオプションの実装を移行しています
  - 旧仕様(`marginTop` `marginBottom` `marginLeft` `marginRight`)しか使えないコンポーネントでは、各方向のマージンの大きさはすべて同じにするか、 `MarginBase` のようなコンポーネントを噛ませる必要があります
  - 新仕様(`ma` `mt` `mb` `ml` `mr`)が使えるコンポーネントでは、各方向に別々のサイズのマージンを与えることができます。

コンポーネントは外側から内側に向かってマージンが小さくなるように設計されています。
多くの要素が配置されるはずのContentsBaseに1.5remのpaddingが付けられているため、画面設計では1remや0.5remの使用頻度が高くなるはずです。


```

### docs/Readme.stories.mdx
```
markdown
import { Meta } from '@storybook/addon-docs';

<Meta title="doc/Readme" />

# vibes

コンポーネントベースのデザインシステムです。

## vibes の動作ブラウザ

vibes の動作想定環境は[freee の動作環境](https://support.freee.co.jp/hc/ja/articles/202848120) に準じます。
スクリーンリーダーに関しては[アクセシビリティー・ガイドラインの標準環境](https://a11y-guidelines.freee.co.jp/explanations/screen-reader-check.html#id79)に準じますが、簡便なテストのために VoiceOver を併用します。

- 以下のブラウザで必要に応じて動作確認をしています
  - Google Chrome
  - Microsoft Edge (Chromium ベース)
  - Firefox
  - Safari
- スクリーンリーダーでの挙動・バグについては Windows 上の Chrome と NVDA での動作確認に基きます
- 一部のブラウザにのみ発生する不具合に関してはバグとして対応しない判断をする場合があります

## vibes の使い方

### vibes を使った画面デザイン

コーディングをせずに画面デザインを行う場合には Sketch を使用してください。vibes の Library ファイルは Sketch Cloud で配布しています。
必要な場合は UX チームにお問い合わせください。

- vibes のコンポーネントには、Figma では表現しきれない制約が存在しています。使おうとしているコンポーネントの仕様は Storybook で確認してください
- その他の注意点などを [Design ページ](/?path=/docs/doc-design--page) に記載してあります。ご確認ください

### Storybook からコンポーネントを探す

vibes のコンポーネントは他のどのコンポーネントにも依存しない `lv1` と、他のコンポーネントを組み合わせてある `lv2` に大別されています

- コンポーネントを探す際は `lv2` から探し、作ろうとしているものが `lv2` で実現できない場合は `lv1` を組み合わせて使うことを検討してください
- Storybook に `examples` として、レイアウトのサンプルを用意しています。こちらも参考にしてください

### 作ろうとしているものが vibes だけでは実現不可能なとき

vibes に追加されているコンポーネントは、プロダクトを跨いで使用するような汎用的なものを想定しています。
そのため、プロダクト固有のドメインに強く紐付くもの、ユーザーに強くアトラクトする必要のあるものについては、vibes を使用しないほうが効果的な場合があります。

- あなた自身が画面デザインを作成している場合は、vibes のコンポーネントのみの組みあわせで目的を達成できるか検討してください
  - vibes で完結する画面設計であれば、工数の削減や品質の向上が見込めます。画面デザインで期待する効果と比較したうえで意思決定してください
  - vibes を使用しない場合でも、vibes や freee 全体のトーン＆マナーを意識して、全体の統一感を著しく損わないよう注意してください
- デザイナーから渡されたものをコーディングしている場合は、まずデザイナーに問い合わせてください
  - デザイナーがコンポーネントの技術制約を認識できていない場合も考えられます。まずはデザイナーの意思を確認してください
  - 必要に応じて、vibes の仕様変更や、プロダクト側での UI コンポーネント実装を検討してください
- プロダクト側で実装する場合には、今後のアップデートに耐えられる実装を意識してください
  - **vibes のコンポーネントへのスタイル上書きはしないでください** 。`.vb-` で始まるクラス名や、内部の要素セレクタへのスタイル指定を行わないでください。スタイルの上書きは影響範囲を読みづらく、メンテナンス性を下げてしまいます
  - **`.vb-` で始まる className をプロダクト内で使用しないでください**。vibes コンポーネントの DOM 構造は今後変更することがあり、その場合に vibes のアップデートが困難になります
    - vibes 内で使用していない `.vb-` で始まる className も、使用しないでください。
- vibes と組み合わせてスタイルシートを記述する場合は、文字サイズ変更時の整合性を保つため、 `px` ではなく `rem` を使用してください

### アクセシビリティ

vibes を使用しただけでは、必ずしもアクセシビリティの配慮が要らなくなるというものではありません。

- Storybook 内の Examples や各コンポーネントのドキュメントにはあちこちにアクセシビリティの向上に必要な情報が書かれています
  - アクセシビリティ向上のために用意された `prop` には、使い方を誤るとかえってアクセシビリティを下げてしまうものもあるため、ドキュメントをよく読んで使用してください
- デザイン・コード・プロダクトを対象に必ず [アクセシビリティチェック](https://a11y-guidelines.freee.co.jp/checks/index.html) を実行してください

## プロダクトへの導入方法

### インストール

TBD

### CSS の読み込み

スタイルを適用するため `node_modules/@freee_jp/vibes/vibes_2021.css` を読み込んでください。

from Sass:

```sass
@import 'node_modules/@freee_jp/vibes/vibes_2021';
```

from JavaScript with CSS Modules:

```js
import '@freee_jp/vibes/css';
```

- CSS の読み込み方法は、プロジェクトの技術選定状況にあわせて検討してください

### vibes コンポーネントの使用

`vibes` から 個別のコンポーネントを import して使用してください

```tsx
import * as React from 'react';
import { ColumnBase, FormControlGroup, FormControl, TextField } from '@freee_jp/vibes';

const Component = () =>
  <ColumnBase>
    <FormControlGroup>
      <FormControl label="日付" fieldId="dateField" mb={1} mr={1}>
        <TextField id="dateField" name="dateField" />
      </FormControl>
      <FormControl label="備考" fieldId="noteField" mb={1} mr={1}>
        <TextField id="noteField" name="noteField" />
      </FormControl>
      ...
    </FormControlGroup>
    <Button onClick={() => doSubmit()}>送信</Button>
  </ColumnBase>
}
```

- vibes では TypeScript をサポートしています。プロジェクトで使用できる場合には TypeScript を使用してください。
  - Flow にも対応していますが、新規に採用するのは **非推奨** です。Flow の型定義ファイルは手作業によるメンテナンスとなっており、TypeScript との差異がある状態になっています。
- `vibes/dist` や `vibes/src` からの import は **禁止** です。

### コンポーネント共通の `props`

`commonProps` として、全コンポーネントで使用可能な `props` を定義しています

- `ma` `mt` `mb` `mr` `ml`
  - マージン用の `prop` で、それぞれ全方向・上方向・下方向・右方向・左方向へのマージンを `rem` 単位で指定できます
  - 指定できる値は `0.25` `0.5` `1` `1.5` `2` `3` および `-0.25` `-0.5` `-1` `-1.5` `-2` `-3` です。
  - 一部のコンポーネントでは `marginTop` `marginBottom` `marginLeft` `marginRight` `marginSize` の指定も可能ですが、指定内容・利用可能コンポーネントが限定的なので、使用は推奨しません
- `data-guide`
  - peacemaker 等によるユーザガイド用で使用することを想定しています。DOM に `data-guide` 属性としてレンダリングされます
- `data-test`
  - Selenium や Puppeteer による E2E テストで使用することを想定しています。DOM に `data-test` 属性としてレンダリングされます
- `data-tracking`
  - Google Tag Manager などによるトラッキング用途に使用することを想定しています。DOM に `data-tracking` 属性としてレンダリングされます
- `data-masking`
  - 行動追跡ツールでのマスキングが必要な要素に指定することを想定しています。DOM に `data-masking` 属性としてレンダリングされます

### VibesContext

vibes コンポーネント共通の設定を、`VibesContext` から変更して使うことができます

```tsx
import { VibesProvider } from '@freee_jp/vibes';

<VibesProvider fixedLayout={true} portalParent={document.body} lang="ja">
  ...
</VibesProvider>;
```

設定できる項目は以下のとおりです

- `fixedLayout`: ウインドウ幅に関わらずレイアウトを固定するかどうか。
  - デフォルトは `false` で、レスポンシブ対応が有効となり、一部のコンポーネントが画面幅にあわせた表示になります。
  - `true` の場合は、画面幅に関わらずレイアウトが固定され、常に PC 向けの表示となります。
- `portalParent`: ポップアップやダイアログなど、通常時は body 要素の直下に挿入されるコンポーネントの挿入先を変更できます。
- `lang`: コンポーネントの文言の言語を変更できます。デフォルトは `ja` です。

```

### docs/Storybook.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

<Meta title='doc/Storybook' />

## Storybookの使い方

Storybookではコンポーネントの見た目や挙動や仕様を確かめることができます。

### コンポーネントの探し方

Vibesのコンポーネントは、どのコンポーネントからも独立しているLv1と、他のコンポーネントに依存するLv2があります。
車輪の再発明を防ぐため、コンポーネントはまずLv2から探すようにしてください。

また、サイドバーには検索機能があります。使いたいコンポーネントの名前がわかっている場合はこちらもご利用ください。


### Storybookの画面構成

Storybookの画面は、Sidebar, Canvas, Docs, Addonsからなります。

- Sidebarはコンポーネントが一覧になっている部分です。Sキーで表示・非表示にできます。
- Canvasはコンポーネントが表示される部分です。上部のタブでDocsと切り変えられます
- Docsはコンポーネントのコードコメントから生成されたドキュメントが表示される部分です。上部のタブでCanvasと切り変えられます。
- AddonsはCanvasのコンポーネントに対する操作ができます。Aキーで表示・非表示にできます。

### Knobs/Controlsの使用

Canvasに表示されたコンポーネントは、AddonsパネルのKnobs/Controlsタブで表示のカスタマイズをして確認することができます。
サイズに関するオプションなどを試したい場合に使用してください。


## Storybookの書き方

Storybookはコンポーネントのドキュメンテーションであると同時に、その挙動を保証するテストにもなります。その両方の意味において、書き方がある程度統一されていることが求められます。
本章では、vibesに置ける標準的なStorybookの書き方を説明します。

### 前提
2023年12月6日時点で利用している`storybook@7.6.1`における書き方になります。

### 記法
#### Component Story Format 3（CSF3）で記載する（必須）
[CSF3](https://storybook.js.org/blog/component-story-format-3-0)を利用します。現時点ではそうではない書き方が多く残っていますが、既存のものに修正を入れる場合や新しく書く場合は書き換えてください。

#### パラメータの検証はaddon-knobsではなくaddon-controlsを利用する（必須）
addon-knobsは非推奨です。現時点では利用箇所が多く残っていますが、既存のものに修正を入れる場合や新しく書く場合は[addon-controls](https://storybook.js.org/docs/essentials/controls)を利用してください。

#### 関数のmockはaddon-actionsではなくstorybook-testのfnを利用する（推奨）
addon-actionsは、後述するinteraction testでの再利用ができません。そのため、storybook-testのfnを利用してください。

#### 一番上にBasicというstoryを用意する（推奨）
addon-docsの仕様上、一番上のstoryがメインのstoryとなります。そのため、そのコンポーネントの基本的な利用の確認ができるようなstoryを書いてください。
またこのBasicは、後述するinteraction testでも再利用する想定です。
2つ目以降のstoryは、必要に応じて色々なパターンを見せる用に記載してください。

#### コンポーネントにコメントを付与する（任意）
addon-docsによってコードコメントがStorybookにも表示されるようになります。必要に応じて、コンポーネントの利用に関する注意事項を記載してください。

```jsx
// good example
import { fn } from '@storybook/test';
import { Meta, StoryObj } from '@storybook/react';
import Button from './Button';

export default {
  component: Button,
} as Meta<typeof Button>;

type Story = StoryObj<typeof Button>;

export const Basic: Story = {
  args: {
    onClick: fn(),
    onSelfWindowNavigation: fn(),
    onFocus: fn(),
    onBlur: fn(),
    children: 'ボタン',
  },
  render: (args) => {
    const ref = React.createRef<HTMLButtonElement | HTMLAnchorElement>();

    return <Button {...args} ref={ref} />;
  },
};

// bad example
import { action } from '@storybook/addon-actions';
import { text } from '@storybook/addon-knobs';
import Button from './Button';

export const ButtonComponent = () => {
  const ref = React.createRef<HTMLButtonElement | HTMLAnchorElement>();
  return (
    <Button
    onClick={action('click')}
    onSelfWindowNavigation={action('self window navigation')}
    onFocus={action('focus')}
    onBlur={action('blur')}
    ref={ref}
  >
    {text('Children', 'ボタン', 'Button')}
  </Button>
  );
};
```

### テスト
storybook を利用したテストとしては以下の2つを考えています。
- intreaction test
- visual regression test

#### interaction test
ここでいうinteraction testとは、コンポーネントの画面上での表示や操作した時の振る舞いを確認するテストです。
必要に応じてaddon-intreactionを利用し、interaction testを書いてください。Button.stories.tsxが参考になると思います。

#### visual regression test
visual regression testとは、修正が入る前後でコンポーネントがどのように表示されるかの画像比較を行うテストです。
コンポーネントのバリエーションを一覧できるようなstoryを用意してください。必要に応じてaddon-pseudo-statesを利用し、擬似クラスの表示も確認できるようにしてください。Button.stories.tsxが参考になると思います。

なお、現時点ではどのようにvisual regression testを行うかは未定です。

```

### docs/Stylesheets.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

<Meta title='doc/Stylesheets' />

# CSS

変更する場合は **stylesheetsディレクトリに格納されているSCSSファイル** を変更してください。
ルートディレクトリにある `vibes.css` や `vibes_hr.css` はビルド成果物です。取り違えに気をつけてください。

vibes では [BEM](https://en.bem.info/methodology/) をベースにしたコーディングルールを採用しています。


## styled-components

部分的にstyled-componentsを導入しはじめています。
styled-componentsについては、[?path=/docs/doc-typescript--page](TypeScript)のページを参照してください。

## コーディング規約

### Block

基本的には各 Lv でディレクトリごとに区切られた modules や components ごとに 1 つの Block として扱います。ただし、 `button` と `textButton`, `TextField` と `TextArea` のように振る舞いや DOM 構造が大きく異なる場合は同じ modules であっても Modifier ではなく別の Block として定義することを推奨します。

### Element

Block の構成要素で、スタイルはその Block の子要素である場合のみ有効となります。

### Modifier

Block と Element の状態やバリエーションを表します。`primary, danger, active, small` といったものが該当します。上述のように、振る舞いや DOM 構造が大きく変わる場合は別の Block や Element として扱うことを検討してください。

### 命名規則

`vb-Block__Element--Modifier`

#### 接頭辞として `vb-` をつける

```css
.vb-block
```

#### Block と Element はアンダースコア 2 つ `__` で繋ぐ

```css
.vb-block__text
.vb-block__image
```

#### Block または Element と Modifier はハイフン 2 つ `--` で繋ぐ

```css
.vb-block--active
.vb-block__button--primary
```

#### 2 単語以上を含む名前はキャメルケース `camelCase` で記述する

```css
.vb-form-block      // NG
.vb-formBlock       // OK
.vb-block--text-only // NG
.vb-block--textOnly // OK
```

### Element はネストさせない

並列に記述する。要素がネストしていてもクラス名には反映させない。

```css
.vb-block__text__image // NG
.vb-block__text        // OK
.vb-block__image // OK
```

### 複数の Modifier の組み合わせによって状態が変化しうる場合は、 Modifier をネストさせてもよい

ただし、ネストせずに記述できそうな場合は極力避ける。

```css
.vb-block--primary--disable // OK
.vb-block--primary         // better
.vb-block--disable // better
```

### マークアップ

#### Block を入れ子にしたスタイルの指定をしない。

```css
// NG
.vb-block {
  display: block;
  .vb-form {
    line-height: 1;
  }
}

// OK
.vb-block {
  display: block;
}
.vb-form {
  line-height: 1;
}
```

#### Modifier をつける時は必ず元の Block, Element のクラスと併記する

Modifier 単体で使えるようにしない。

```html
// NG
<div class="vb-block--active"></div>
// OK
<div class="vb-block vb-block--active"></div>
```

```css
// NG
.vb-block {
  display: block;
  color: #000;
}
.vb-block--active {
  display: block;
  color: #f00;
}

// OK
.vb-block {
  display: block;
  color: #f00;
  &--active {
    color: #f00;
  }
}
```

#### 要素セレクタを使わない

必要な場合は Element として定義する。

```html
<!-- NG -->
<div class="vb-block">
  <a href="/foo">foo</a>
</div>

<!-- OK -->
<div class="vb-block">
  <a className="vb-block__link" href="/foo">foo</a>
</div>
```

```css
// NG
.vb-block {
  a {
    text-decoration: underline;
  }
}

// OK
.vb-block {
  &__link {
    text-decoration: underline;
  }
}
```

```

### docs/TypeScript.stories.mdx
```
markdown
import { Meta } from "@storybook/addon-docs";

<Meta title='doc/TypeScript' />

# TypeScript (JavaScript)

変更する場合は **srcディレクトリに格納されているts(x)ファイル** を変更してください。`dist` ディレクトリ内にあるファイルはビルド成果物です。取り間違いに気をつけてください。

### コンポーネントの追加時の注意点

コンポーネントを追加するときは、同名の `stories.tsx` ファイルを作成し、Storybookで閲覧できるようにしてください。

また、追加したコンポーネントをプロダクト側から参照できるよう、 `src/lv1/index.ts` `src/lv2/index.ts` で `export` してください。

### 型定義ファイルについて

TypeScriptの型定義に加えて、Flowでの型定義を `lv1.js.flow` `lv2.js.flow` に（手作業で）記述しています。
こちらはコンポーネントを追加したり変更したりした際に必ず修正してください。

## styled-components について

部分的にstyled-componentsを採用しはじめていますが、以下をルールとします

- Vibesの外部から利用できるかたちでstyled-components由来のpropを提供しない
  - 特に as をexportしない。as を提供する場合は、使用できるtagNameを限定する
- コンポーネントは `CommonStyle` (`src/internal/CommonStyle.ts`) を extendしたもの（`styled(CommonStyle)`）が最外層にあるようにする
  - ここに `ma` `mt` `mb` `mr` `mr` のようなマージンを提供するpropや、共通のフォント設定などが定義されています

以下のようなかたちになります

```ts

import { CommonStyle } from '../../internal/CommonStyle';

const ComponentStyle = styled(commonStyle)`
/* ここにコンポーネントのスタイルを書く */
`

type Props = {
  //...
} & CommonProps;

export const Component: React.FC<Props> = (props: Props) =>{

  return (
    <ComponentStyle>
      ...
    </ComponentStyle>
  );
}
```



```

### examples/Collection.mdx
```
markdown
import { Story, Canvas } from '@storybook/addon-docs/blocks';

# コレクション画面

オブジェクトを一覧表示し、それぞれのオブジェクト個別の画面（シングル画面）に遷移させたり、フィルタやソートによってオブジェクトを検索させたりする画面をコレクション画面と呼びます。

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-collection--collection-page" inline={false} height={800} />
</Canvas>

## コレクション画面の構成

コレクション画面は以下の3種類のエリアに分解されます

1. フィルターされたオブジェクトの表示エリア
2. フィルターされたオブジェクトに対する操作エリア
3. オブジェクト全体に対する操作エリア

### フィルターされたオブジェクトの表示エリア

`ListTable` や `ListCard` を用いてデータを表示します。

ユーザーが初めて機能を使う場合や、検索条件にマッチするオブジェクトが無い場合には 「検索条件に該当するオブジェクトが無いこと」を示したり、機能の説明をして使用を促したりするEmpty UIを用意してください。

{/* TODO: Empty UIのサンプルを用意する */}

#### `ListTable` を用いた表示

* 可能なかぎりすべてのカラムをソート可能にしてください
* 一括操作可能な場合には、左端にチェックボックスを表示します（`withCheckbox` propをつけるとチェックボックスが表示されます）
  * ヘッダー行のチェックボックスは現在表示されている範囲のすべてのオブジェクトのチェックボックスを制御します
  * データの表示条件（フィルタ、ソート、ページングなど）が変更された場合、チェックボックスを未選択状態に戻してください
* 各行をクリックすることで、それぞれのオブジェクト個別の画面（シングル画面）に遷移させるか、シングルを表現するダイアログを開くことができます
* 各オブジェクトに対して行えるアクションのショートカットボタンを行内に配置することができます。ただし、それらのアクションはシングル画面やダイアログでも実行可能にしてください。
* リストの下には `Pager` を配置して、件数が多い場合に辿れるようにしてください。
  * いわゆる「無限スクロール」にはしないでください

<Canvas>
  <Story id="examples-collection--list-table-with-check-box" />
</Canvas>

{/* TODO: ListTableのサンプルを用意する */}

### フィルターされたオブジェクトに対する操作エリア

検索機能によってフィルターされた範囲のデータに対する操作を行います。

* 一括操作、表示件数の変更、フィルターされた範囲のエクスポートがおもに該当します。
* フィルターされたオブジェクトの表示エリアで左端にチェックボックスを置いているため、チェックを入れたオブジェクトを対象とする一括操作は左端に配置しています

<Canvas>
  <Story id="examples-collection--filtered-objects-action-area" />
</Canvas>



### オブジェクト全体に対する操作エリア

オブジェクトの新規作成やインポート、フィルターの操作をまとめるエリアです。

<Canvas>
  <Story id="examples-collection--all-objects-action-area" />
</Canvas>

## コレクション画面のバリエーション

表示するオブジェクトの種類や、想定される使われ方によってコレクション表示を最適な状態にしてください。

### 詳細なフィルタをもつコレクション

詳細なフィルターによって絞り込み表示が可能となったコレクション表示です。一覧性を高めるために、フィルター部分の折り畳みを検討しても良いでしょう。

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-collection--with-complex-filter" inline={false} height={800} />
</Canvas>

### 一括操作なしのコレクション

一括操作を可能としない場合にはチェックボックスを配置せず、フィルターされたオブジェクトに対する操作エリアを右に寄せることもできます。

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-collection--without-checkbox" inline={false} height={800} />
</Canvas>

### emptyStates（検索結果が空の場合）

検索結果が空の場合にはemptyUIを表示します。vibesではemptyStates/ NoSearchResultsにデフォルトのemptyUIを用意しています。

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-collection--no-search-results-found" inline={false} height={800} />
</Canvas>

### emptyStates（データがまだ作成されていない場合）

データがまだ作成されていない場合にはemptyUIを表示します。vibesではemptyStates/ NoDataCreatedにデフォルトのemptyUIを用意しています。

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-collection--no-data-created-yet" inline={false} height={800} />
</Canvas>

```

### examples/Collection.stories.tsx
```
typescript
import * as React from 'react';
import { MdAdd, MdFilterList } from 'react-icons/md';
import Collection from './Collection.mdx';

import {
  Container,
  ContentsBase,
  Breadcrumbs,
  MarginBase,
  JumpButton,
  Button,
  SearchField,
  SelectBox,
  Paragraph,
  WithSideContent,
  ListTable,
  HeadlineArea,
  DropdownButton,
  Pagination,
  Pager,
  Digits,
  FormControl,
  FormControlGroup,
  TextField,
  DigitsInput,
  DateInput,
  ColumnBase,
  SectionTitle,
  VisuallyHidden,
  NoSearchResults,
  NoDataCreated,
} from '../src';
import { Order } from '../src/lv1/lists/TableListHeadCell';

export default {
  title: 'examples/Collection',
  parameters: { docs: { page: Collection } },
};

type ListElm = {
  title: string;
  user: string;
  amount: number;
  status: string;
  date: string;
};
const useData = () => {
  const data: ListElm[] = [
    {
      title: '打ち合わせ費用',
      user: 'フリー太郎',
      amount: 100000,
      status: '申請中',
      date: '2020-10-01',
    },
    {
      title: '書籍購入費',
      user: 'user.email@example.com',
      amount: 123000,
      status: '申請中',
      date: '2020-09-23',
    },
    {
      title: '交通費',
      user: '佐々木大輔',
      amount: 2000,
      status: '精算済',
      date: '2020-10-11',
    },
    {
      title: 'UFO撮影ロケ',
      user: '五反田花子',
      amount: 3000000,
      status: '却下',
      date: '2020-09-12',
    },
    {
      title: 'ツチノコ捜索費',
      user: '三田次郎',
      amount: 1000000,
      status: '申請中',
      date: '2020-11-01',
    },
    {
      title: 'オフィス備品',
      user: 'フリー太郎',
      amount: 48000,
      status: '精算済',
      date: '2020-09-12',
    },
    {
      title: '書籍購入費',
      user: 'user.email@example.com',
      amount: 2800,
      status: '申請中',
      date: '2020-10-12',
    },
    {
      title: 'ネコのエサ代',
      user: '三田次郎',
      amount: 3000,
      status: '申請中',
      date: '2020-10-27',
    },
    {
      title: '駐車場代',
      user: 'フリー太郎',
      amount: 4000,
      status: '申請中',
      date: '2020-10-05',
    },
    {
      title: 'PC用品',
      user: '五反田花子',
      amount: 800000,
      status: '申請中',
      date: '2020-10-21',
    },
  ];

  const [sortKey, setSortKey] = React.useState<keyof ListElm>('date');
  const [sortOrder, setSortOrder] = React.useState<Order>('desc');
  const [statuses, setStatuses] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  const nextOrder: { [key in Order]: Order } = {
    asc: 'desc',
    desc: 'init',
    init: 'asc',
  };

  const sort = (newKey: keyof ListElm) => {
    if (sortKey === newKey) {
      setSortOrder((prev) => nextOrder[prev]);
    } else {
      setSortKey(newKey);
      setSortOrder('asc');
    }
    // ソートしたときはチェックボックスの状態をリセット
    setStatuses(Array(data.length).fill(false));
  };

  const changeAllStatus = (newStatus: boolean) => {
    setStatuses(Array(data.length).fill(newStatus));
  };

  const changeRowStatus = (newStatus: boolean, rowIndex: number) => {
    const newStatuses = statuses.slice();
    newStatuses[rowIndex] = newStatus;
    setStatuses(newStatuses);
  };

  const sortedData =
    sortOrder === 'init'
      ? data
      : data
          .slice()
          .sort(
            (a, b) =>
              (typeof a[sortKey] === 'number' && typeof b[sortKey] === 'number'
                ? Number(a[sortKey]) - Number(b[sortKey])
                : String(a[sortKey]).localeCompare(String(b[sortKey]))) *
              (sortOrder === 'desc' ? -1 : 1)
          );

  const noResults: ListElm[] = [];

  return {
    sortKey,
    sortOrder,
    statuses,
    sort,
    sortedData,
    noResults,
    changeRowStatus,
    changeAllStatus,
  };
};

export const CollectionPage = () => {
  const {
    sort,
    sortKey,
    sortOrder,
    statuses,
    sortedData,
    changeAllStatus,
    changeRowStatus,
  } = useData();

  return (
    <Container width="wide">
      <ContentsBase>
        <Breadcrumbs
          mb={1}
          links={[
            { title: 'ホーム', url: '/' },
            { title: '申請一覧', url: '/path/' },
          ]}
        />
        <HeadlineArea
          pageTitle="コレクション表示"
          relatedMenus={
            <>
              <JumpButton url="/path/to/related/1" mr={1}>
                関連機能1
              </JumpButton>
              <JumpButton url="/path/to/related/2" mr={1}>
                関連機能2
              </JumpButton>
              <DropdownButton
                dropdownContents={[
                  {
                    type: 'selectable',
                    url: '/path/to/service1',
                    text: 'サービス1',
                    target: '_blank',
                  },
                  {
                    type: 'selectable',
                    url: '/path/to/service2',
                    text: 'サービス2',
                    target: '_blank',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    url: '/path/to/service3',
                    text: '関連するアプリを探す',
                    target: '_blank',
                  },
                ]}
                buttonLabel="関連サービス・アプリ"
              />
            </>
          }
        >
          これはコレクション表示のサンプルです。ここにはこの画面の説明を書きます。説明が必要ないような画面だったら無理して書かなくてええんやで。
        </HeadlineArea>
        <MarginBase mb={1}>
          <Button IconComponent={MdAdd} mr={1}>
            新規追加
          </Button>
          <JumpButton url="/path/to/import">インポート</JumpButton>
        </MarginBase>
        <MarginBase mb={2}>
          <SearchField
            width="large"
            placeholder="タイトル、ユーザー名、メールアドレスなどで検索"
            marginRight
            marginSize="small"
          />
          <Button>検索</Button>
        </MarginBase>

        <WithSideContent
          mb={1}
          sideContent={
            <>
              <Pagination
                rowsPerPageOptions={[
                  { value: '10' },
                  { value: '20' },
                  { value: '50' },
                  { value: '100' },
                  { value: '200' },
                ]}
                rowsPerPageValue={20}
                currentPage={1}
                rowCount={999}
                mr={1}
              />
              <DropdownButton
                buttonLabel="エクスポート"
                dropdownContents={[
                  {
                    type: 'selectable',
                    text: 'CSV形式でエクスポート',
                  },
                  {
                    type: 'selectable',
                    text: 'JSON形式でエクスポート',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    text: 'エクスポート履歴',
                  },
                ]}
              />
            </>
          }
        >
          <DropdownButton
            buttonLabel="一括操作"
            dropdownContents={[
              {
                type: 'selectable',
                text: 'ステータスを変更',
              },
              { type: 'selectable', text: '削除' },
            ]}
            mr={0.5}
          />
          {statuses.filter((e) => e).length > 0 && (
            <Paragraph inline>
              {statuses.filter((e) => e).length}件を選択中
            </Paragraph>
          )}
        </WithSideContent>
        <ListTable
          mr={-1.5}
          ml={-1.5}
          headers={[
            {
              value: 'タイトル',
              minWidth: 15,
              onClick: () => sort('title'),
              ordering: (sortKey == 'title' && sortOrder) || 'init',
            },
            {
              value: 'ユーザー',
              minWidth: 10,
              onClick: () => sort('user'),
              ordering: (sortKey == 'user' && sortOrder) || 'init',
            },
            {
              value: '金額',
              minWidth: 5,
              alignRight: true,
              onClick: () => sort('amount'),
              ordering: (sortKey == 'amount' && sortOrder) || 'init',
            },
            {
              value: 'ステータス',
              onClick: () => sort('status'),
              ordering: (sortKey == 'status' && sortOrder) || 'init',
            },
            {
              value: '作成日',
              onClick: () => sort('date'),
              ordering: (sortKey == 'date' && sortOrder) || 'init',
            },
            { value: '操作' },
          ]}
          onChangeHeaderCheckBox={(e) => changeAllStatus(e.target.checked)}
          rows={sortedData.map((row, i) => ({
            checked: statuses[i],
            onChangeCheckBox: (e) => {
              changeRowStatus(e.target.checked, i);
            },
            url: `/path/to/single/${i}`,
            cells: [
              { value: row.title },
              { value: row.user, breakWord: true },
              { value: Digits.formalize(row.amount), alignRight: true },
              { value: row.status },
              { value: row.date },
              {
                value: (
                  <>
                    <Button mr={0.5} small appearance="tertiary">
                      コピー
                    </Button>
                    <Button mr={0.5} danger small appearance="tertiary">
                      削除
                    </Button>
                  </>
                ),
              },
            ],
          }))}
          withCheckBox
        ></ListTable>
        <Pager
          currentPage={1}
          pageCount={99}
          onPageChange={() => {
            /* 2ページ目以降作ってないので許して */
          }}
        />
      </ContentsBase>
    </Container>
  );
};

export const ListTableWithCheckBox = () => {
  const {
    sort,
    sortKey,
    sortOrder,
    statuses,
    sortedData,
    changeAllStatus,
    changeRowStatus,
  } = useData();

  return (
    <>
      <ListTable
        mr={-1.5}
        ml={-1.5}
        headers={[
          {
            value: 'タイトル',
            minWidth: 15,
            onClick: () => sort('title'),
            ordering: (sortKey == 'title' && sortOrder) || 'init',
          },
          {
            value: 'ユーザー',
            minWidth: 10,
            onClick: () => sort('user'),
            ordering: (sortKey == 'user' && sortOrder) || 'init',
          },
          {
            value: '金額',
            minWidth: 5,
            alignRight: true,
            onClick: () => sort('amount'),
            ordering: (sortKey == 'amount' && sortOrder) || 'init',
          },
          {
            value: 'ステータス',
            onClick: () => sort('status'),
            ordering: (sortKey == 'status' && sortOrder) || 'init',
          },
          {
            value: '作成日',
            onClick: () => sort('date'),
            ordering: (sortKey == 'date' && sortOrder) || 'init',
          },
          { value: '操作' },
        ]}
        onChangeHeaderCheckBox={(e) => changeAllStatus(e.target.checked)}
        rows={sortedData.map((row, i) => ({
          checked: statuses[i],
          onChangeCheckBox: (e) => {
            changeRowStatus(e.target.checked, i);
          },
          url: `/path/to/single/${i}`,
          cells: [
            { value: row.title },
            { value: row.user, breakWord: true },
            { value: Digits.formalize(row.amount), alignRight: true },
            { value: row.status },
            { value: row.date },
            {
              value: (
                <>
                  <Button mr={0.5} small appearance="tertiary">
                    コピー
                  </Button>
                  <Button mr={0.5} danger small appearance="tertiary">
                    削除
                  </Button>
                </>
              ),
            },
          ],
        }))}
        withCheckBox
      ></ListTable>
      <Pager
        currentPage={1}
        pageCount={99}
        onPageChange={() => {
          /* 2ページ目以降作ってないので許して */
        }}
      />
    </>
  );
};

export const FilteredObjectsActionArea = () => (
  <WithSideContent
    mb={1}
    sideContent={
      <>
        <Pagination
          rowsPerPageOptions={[
            { value: '10' },
            { value: '20' },
            { value: '50' },
            { value: '100' },
            { value: '200' },
          ]}
          rowsPerPageValue={20}
          currentPage={1}
          rowCount={999}
          mr={1}
        />
        <DropdownButton
          buttonLabel="エクスポート"
          dropdownContents={[
            {
              type: 'selectable',
              text: 'CSV形式でエクスポート',
            },
            {
              type: 'selectable',
              text: 'JSON形式でエクスポート',
            },
            { type: 'rule' },
            {
              type: 'selectable',
              text: 'エクスポート履歴',
            },
          ]}
        />
      </>
    }
  >
    <DropdownButton
      buttonLabel="一括操作"
      dropdownContents={[
        {
          type: 'selectable',
          text: 'ステータスを変更',
        },
        { type: 'selectable', text: '削除' },
      ]}
    />
  </WithSideContent>
);

export const AllObjectsActionArea = () => (
  <>
    <MarginBase mb={1}>
      <Button IconComponent={MdAdd} mr={1}>
        新規追加
      </Button>
      <JumpButton url="/path/to/import">インポート</JumpButton>
    </MarginBase>
    <MarginBase mb={2}>
      <SearchField
        width="large"
        placeholder="タイトル、ユーザー名、メールアドレスなどで検索"
        marginRight
        marginSize="small"
      />
      <Button>検索</Button>
    </MarginBase>
  </>
);

export const WithComplexFilter = () => {
  const {
    sort,
    sortKey,
    sortOrder,
    statuses,
    sortedData,
    changeAllStatus,
    changeRowStatus,
  } = useData();

  return (
    <Container width="wide">
      <ContentsBase>
        <Breadcrumbs
          mb={1}
          links={[
            { title: 'ホーム', url: '/' },
            { title: '申請一覧', url: '/path/' },
          ]}
        />
        <HeadlineArea
          pageTitle="コレクション表示"
          relatedMenus={
            <>
              <JumpButton url="/path/to/related/1" mr={1}>
                関連機能1
              </JumpButton>
              <JumpButton url="/path/to/related/2" mr={1}>
                関連機能2
              </JumpButton>
              <DropdownButton
                dropdownContents={[
                  {
                    type: 'selectable',
                    url: '/path/to/service1',
                    text: 'サービス1',
                    target: '_blank',
                  },
                  {
                    type: 'selectable',
                    url: '/path/to/service2',
                    text: 'サービス2',
                    target: '_blank',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    url: '/path/to/service3',
                    text: '関連するアプリを探す',
                    target: '_blank',
                  },
                ]}
                buttonLabel="関連サービス・アプリ"
              />
            </>
          }
        >
          これはコレクション表示のサンプルです。ここにはこの画面の説明を書きます。説明が必要ないような画面だったら無理して書かなくてええんやで。
        </HeadlineArea>
        <MarginBase mb={1}>
          <Button IconComponent={MdAdd} mr={1}>
            新規追加
          </Button>
          <JumpButton url="/path/to/import">インポート</JumpButton>
        </MarginBase>
        <ColumnBase paddingSize="small" mb={2}>
          <WithSideContent
            verticalAlign="middle"
            sideContent={
              <Button appearance="tertiary">検索条件をクリア</Button>
            }
          >
            <SectionTitle>検索条件</SectionTitle>
          </WithSideContent>
          <FormControlGroup>
            <FormControl label="タイトル" fieldId="form1-title" mr={1} mb={1}>
              <TextField id="form1-title" />
            </FormControl>
            <FormControl label="ユーザー" fieldId="form1-user" mr={1} mb={1}>
              <TextField id="form1-user" width="small" />
            </FormControl>
            <FormControl label="金額" mr={1} mb={1}>
              <DigitsInput nullable label="金額の下限" width="small" />
              〜
              <DigitsInput nullable label="金額の上限" width="small" />
            </FormControl>
            <FormControl
              label="ステータス"
              fieldId="form1-status"
              mr={1}
              mb={1}
            >
              <SelectBox
                options={[
                  { name: '申請中' },
                  { name: '精算済' },
                  { name: '却下' },
                ]}
                id="form1-status"
                width="small"
              />
            </FormControl>
            <FormControl label="日付" mr={1} mb={1}>
              <DateInput label="日付の下限" width="small" />
              〜
              <DateInput label="日付の上限" width="small" />
            </FormControl>
          </FormControlGroup>
          <Button IconComponent={MdFilterList}>絞り込む</Button>
        </ColumnBase>

        <VisuallyHidden>
          {/* 検索条件の見出しを立てているため、一覧部分にも視覚的には見えないかたちで見出しを立てる */}
          <SectionTitle>申請の一覧</SectionTitle>
        </VisuallyHidden>
        <WithSideContent
          mb={1}
          sideContent={
            <>
              <Pagination
                rowsPerPageOptions={[
                  { value: '10' },
                  { value: '20' },
                  { value: '50' },
                  { value: '100' },
                  { value: '200' },
                ]}
                rowsPerPageValue={20}
                currentPage={1}
                rowCount={999}
                mr={1}
              />
              <DropdownButton
                buttonLabel="エクスポート"
                dropdownContents={[
                  {
                    type: 'selectable',
                    text: 'CSV形式でエクスポート',
                  },
                  {
                    type: 'selectable',
                    text: 'JSON形式でエクスポート',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    text: 'エクスポート履歴',
                  },
                ]}
              />
            </>
          }
        >
          <DropdownButton
            buttonLabel="一括操作"
            dropdownContents={[
              {
                type: 'selectable',
                text: 'ステータスを変更',
              },
              { type: 'selectable', text: '削除' },
            ]}
            mr={0.5}
          />
          {statuses.filter((e) => e).length > 0 && (
            <Paragraph inline>
              {statuses.filter((e) => e).length}件を選択中
            </Paragraph>
          )}
        </WithSideContent>
        <ListTable
          mr={-1.5}
          ml={-1.5}
          headers={[
            {
              value: 'タイトル',
              minWidth: 15,
              onClick: () => sort('title'),
              ordering: (sortKey == 'title' && sortOrder) || 'init',
            },
            {
              value: 'ユーザー',
              minWidth: 10,
              onClick: () => sort('user'),
              ordering: (sortKey == 'user' && sortOrder) || 'init',
            },
            {
              value: '金額',
              minWidth: 5,
              alignRight: true,
              onClick: () => sort('amount'),
              ordering: (sortKey == 'amount' && sortOrder) || 'init',
            },
            {
              value: 'ステータス',
              onClick: () => sort('status'),
              ordering: (sortKey == 'status' && sortOrder) || 'init',
            },
            {
              value: '作成日',
              onClick: () => sort('date'),
              ordering: (sortKey == 'date' && sortOrder) || 'init',
            },
            { value: '操作' },
          ]}
          onChangeHeaderCheckBox={(e) => changeAllStatus(e.target.checked)}
          rows={sortedData.map((row, i) => ({
            checked: statuses[i],
            onChangeCheckBox: (e) => {
              changeRowStatus(e.target.checked, i);
            },
            url: `/path/to/single/${i}`,
            cells: [
              { value: row.title },
              { value: row.user, breakWord: true },
              { value: Digits.formalize(row.amount), alignRight: true },
              { value: row.status },
              { value: row.date },
              {
                value: (
                  <>
                    <Button mr={0.5} small appearance="tertiary">
                      コピー
                    </Button>
                    <Button mr={0.5} danger small appearance="tertiary">
                      削除
                    </Button>
                  </>
                ),
              },
            ],
          }))}
          withCheckBox
        ></ListTable>
        <Pager
          currentPage={1}
          pageCount={99}
          onPageChange={() => {
            /* 2ページ目以降作ってないので許して */
          }}
        />
      </ContentsBase>
    </Container>
  );
};

export const WithoutCheckbox = () => {
  const { sort, sortKey, sortOrder, sortedData } = useData();

  return (
    <Container width="wide">
      <ContentsBase>
        <Breadcrumbs
          mb={1}
          links={[
            { title: 'ホーム', url: '/' },
            { title: '申請一覧', url: '/path/' },
          ]}
        />
        <HeadlineArea
          pageTitle="コレクション表示"
          relatedMenus={
            <>
              <JumpButton url="/path/to/related/1" mr={1}>
                関連機能1
              </JumpButton>
              <JumpButton url="/path/to/related/2" mr={1}>
                関連機能2
              </JumpButton>
              <DropdownButton
                dropdownContents={[
                  {
                    type: 'selectable',
                    url: '/path/to/service1',
                    text: 'サービス1',
                    target: '_blank',
                  },
                  {
                    type: 'selectable',
                    url: '/path/to/service2',
                    text: 'サービス2',
                    target: '_blank',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    url: '/path/to/service3',
                    text: '関連するアプリを探す',
                    target: '_blank',
                  },
                ]}
                buttonLabel="関連サービス・アプリ"
              />
            </>
          }
        >
          これはコレクション表示のサンプルです。ここにはこの画面の説明を書きます。説明が必要ないような画面だったら無理して書かなくてええんやで。
        </HeadlineArea>
        <MarginBase mb={1}>
          <Button IconComponent={MdAdd} mr={1}>
            新規追加
          </Button>
          <JumpButton url="/path/to/import">インポート</JumpButton>
        </MarginBase>

        <WithSideContent
          mb={1}
          sideContent={
            <>
              <Pagination
                rowsPerPageOptions={[
                  { value: '10' },
                  { value: '20' },
                  { value: '50' },
                  { value: '100' },
                  { value: '200' },
                ]}
                rowsPerPageValue={20}
                currentPage={1}
                rowCount={999}
                mr={1}
              />
              <DropdownButton
                buttonLabel="エクスポート"
                dropdownContents={[
                  {
                    type: 'selectable',
                    text: 'CSV形式でエクスポート',
                  },
                  {
                    type: 'selectable',
                    text: 'JSON形式でエクスポート',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    text: 'エクスポート履歴',
                  },
                ]}
              />
            </>
          }
        >
          <SearchField
            width="large"
            placeholder="タイトル、ユーザー名、メールアドレスなどで検索"
            marginRight
            marginSize="small"
          />
          <Button>検索</Button>
        </WithSideContent>
        <ListTable
          mr={-1.5}
          ml={-1.5}
          headers={[
            {
              value: 'タイトル',
              minWidth: 15,
              onClick: () => sort('title'),
              ordering: (sortKey == 'title' && sortOrder) || 'init',
            },
            {
              value: 'ユーザー',
              minWidth: 10,
              onClick: () => sort('user'),
              ordering: (sortKey == 'user' && sortOrder) || 'init',
            },
            {
              value: '金額',
              minWidth: 5,
              alignRight: true,
              onClick: () => sort('amount'),
              ordering: (sortKey == 'amount' && sortOrder) || 'init',
            },
            {
              value: 'ステータス',
              onClick: () => sort('status'),
              ordering: (sortKey == 'status' && sortOrder) || 'init',
            },
            {
              value: '作成日',
              onClick: () => sort('date'),
              ordering: (sortKey == 'date' && sortOrder) || 'init',
            },
            { value: '操作' },
          ]}
          rows={sortedData.map((row, i) => ({
            url: `/path/to/single/${i}`,
            cells: [
              { value: row.title },
              { value: row.user, breakWord: true },
              { value: Digits.formalize(row.amount), alignRight: true },
              { value: row.status },
              { value: row.date },
              {
                value: (
                  <>
                    <Button mr={0.5} small appearance="tertiary">
                      コピー
                    </Button>
                    <Button mr={0.5} danger small appearance="tertiary">
                      削除
                    </Button>
                  </>
                ),
              },
            ],
          }))}
        ></ListTable>
        <Pager
          currentPage={1}
          pageCount={99}
          onPageChange={() => {
            /* 2ページ目以降作ってないので許して */
          }}
        />
      </ContentsBase>
    </Container>
  );
};

export const NoSearchResultsFound = () => {
  const { sort, sortKey, sortOrder, noResults } = useData();

  return (
    <Container width="wide">
      <ContentsBase>
        <Breadcrumbs
          mb={1}
          links={[
            { title: 'ホーム', url: '/' },
            { title: '申請一覧', url: '/path/' },
          ]}
        />
        <HeadlineArea
          pageTitle="コレクション表示"
          relatedMenus={
            <>
              <JumpButton url="/path/to/related/1" mr={1}>
                関連機能1
              </JumpButton>
              <JumpButton url="/path/to/related/2" mr={1}>
                関連機能2
              </JumpButton>
              <DropdownButton
                dropdownContents={[
                  {
                    type: 'selectable',
                    url: '/path/to/service1',
                    text: 'サービス1',
                    target: '_blank',
                  },
                  {
                    type: 'selectable',
                    url: '/path/to/service2',
                    text: 'サービス2',
                    target: '_blank',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    url: '/path/to/service3',
                    text: '関連するアプリを探す',
                    target: '_blank',
                  },
                ]}
                buttonLabel="関連サービス・アプリ"
              />
            </>
          }
        >
          これはコレクション表示のサンプルです。ここにはこの画面の説明を書きます。説明が必要ないような画面だったら無理して書かなくてええんやで。
        </HeadlineArea>
        <MarginBase mb={1}>
          <Button IconComponent={MdAdd} mr={1}>
            新規追加
          </Button>
          <JumpButton url="/path/to/import">インポート</JumpButton>
        </MarginBase>

        <WithSideContent
          mb={1}
          sideContent={
            <>
              <Paragraph inline mr={0.5}>
                <label htmlFor="examples__collection__collectionPage__limitSelect">
                  表示件数:
                </label>
              </Paragraph>
              <SelectBox
                id="examples__collection__collectionPage__limitSelect"
                width="xSmall"
                options={[
                  { name: '10件' },
                  { name: '20件' },
                  { name: '50件' },
                  { name: '100件' },
                  { name: '200件' },
                ]}
                mr={1}
              />
              <Paragraph inline mr={1}>
                0 / 0
              </Paragraph>
              <DropdownButton
                buttonLabel="エクスポート"
                dropdownContents={[
                  {
                    type: 'selectable',
                    text: 'CSV形式でエクスポート',
                  },
                  {
                    type: 'selectable',
                    text: 'JSON形式でエクスポート',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    text: 'エクスポート履歴',
                  },
                ]}
              />
            </>
          }
        >
          <SearchField
            width="large"
            placeholder="タイトル、ユーザー名、メールアドレスなどで検索"
            marginRight
            marginSize="small"
          />
          <Button>検索</Button>
        </WithSideContent>
        {noResults.length > 0 ? (
          <ListTable
            mr={-1.5}
            ml={-1.5}
            headers={[
              {
                value: 'タイトル',
                minWidth: 15,
                onClick: () => sort('title'),
                ordering: (sortKey == 'title' && sortOrder) || 'init',
              },
              {
                value: 'ユーザー',
                minWidth: 10,
                onClick: () => sort('user'),
                ordering: (sortKey == 'user' && sortOrder) || 'init',
              },
              {
                value: '金額',
                minWidth: 5,
                alignRight: true,
                onClick: () => sort('amount'),
                ordering: (sortKey == 'amount' && sortOrder) || 'init',
              },
              {
                value: 'ステータス',
                onClick: () => sort('status'),
                ordering: (sortKey == 'status' && sortOrder) || 'init',
              },
              {
                value: '作成日',
                onClick: () => sort('date'),
                ordering: (sortKey == 'date' && sortOrder) || 'init',
              },
              { value: '操作' },
            ]}
            rows={noResults.map((row, i) => ({
              url: `/path/to/single/${i}`,
              cells: [
                { value: row.title },
                { value: row.user, breakWord: true },
                { value: Digits.formalize(row.amount), alignRight: true },
                { value: row.status },
                { value: row.date },
                {
                  value: (
                    <>
                      <Button mr={0.5} small appearance="tertiary">
                        コピー
                      </Button>
                      <Button mr={0.5} danger small appearance="tertiary">
                        削除
                      </Button>
                    </>
                  ),
                },
              ],
            }))}
          ></ListTable>
        ) : (
          <NoSearchResults mt={1} />
        )}
      </ContentsBase>
    </Container>
  );
};

export const NoDataCreatedYet = () => {
  const { sort, sortKey, sortOrder, noResults } = useData();

  return (
    <Container width="wide">
      <ContentsBase>
        <Breadcrumbs
          mb={1}
          links={[
            { title: 'ホーム', url: '/' },
            { title: '申請一覧', url: '/path/' },
          ]}
        />
        <HeadlineArea
          pageTitle="コレクション表示"
          relatedMenus={
            <>
              <JumpButton url="/path/to/related/1" mr={1}>
                関連機能1
              </JumpButton>
              <JumpButton url="/path/to/related/2" mr={1}>
                関連機能2
              </JumpButton>
              <DropdownButton
                dropdownContents={[
                  {
                    type: 'selectable',
                    url: '/path/to/service1',
                    text: 'サービス1',
                    target: '_blank',
                  },
                  {
                    type: 'selectable',
                    url: '/path/to/service2',
                    text: 'サービス2',
                    target: '_blank',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    url: '/path/to/service3',
                    text: '関連するアプリを探す',
                    target: '_blank',
                  },
                ]}
                buttonLabel="関連サービス・アプリ"
              />
            </>
          }
        >
          これはコレクション表示のサンプルです。ここにはこの画面の説明を書きます。説明が必要ないような画面だったら無理して書かなくてええんやで。
        </HeadlineArea>
        <MarginBase mb={1}>
          <Button IconComponent={MdAdd} mr={1}>
            新規追加
          </Button>
          <JumpButton url="/path/to/import">インポート</JumpButton>
        </MarginBase>

        <WithSideContent
          mb={1}
          sideContent={
            <>
              <Paragraph inline mr={0.5}>
                <label htmlFor="examples__collection__collectionPage__limitSelect">
                  表示件数:
                </label>
              </Paragraph>
              <SelectBox
                id="examples__collection__collectionPage__limitSelect"
                width="xSmall"
                options={[
                  { name: '10件' },
                  { name: '20件' },
                  { name: '50件' },
                  { name: '100件' },
                  { name: '200件' },
                ]}
                mr={1}
              />
              <Paragraph inline mr={1}>
                0 / 0
              </Paragraph>
              <DropdownButton
                buttonLabel="エクスポート"
                dropdownContents={[
                  {
                    type: 'selectable',
                    text: 'CSV形式でエクスポート',
                  },
                  {
                    type: 'selectable',
                    text: 'JSON形式でエクスポート',
                  },
                  { type: 'rule' },
                  {
                    type: 'selectable',
                    text: 'エクスポート履歴',
                  },
                ]}
              />
            </>
          }
        >
          <SearchField
            width="large"
            placeholder="タイトル、ユーザー名、メールアドレスなどで検索"
            marginRight
            marginSize="small"
          />
          <Button>検索</Button>
        </WithSideContent>
        {noResults.length > 0 ? (
          <ListTable
            mr={-1.5}
            ml={-1.5}
            headers={[
              {
                value: 'タイトル',
                minWidth: 15,
                onClick: () => sort('title'),
                ordering: (sortKey == 'title' && sortOrder) || 'init',
              },
              {
                value: 'ユーザー',
                minWidth: 10,
                onClick: () => sort('user'),
                ordering: (sortKey == 'user' && sortOrder) || 'init',
              },
              {
                value: '金額',
                minWidth: 5,
                alignRight: true,
                onClick: () => sort('amount'),
                ordering: (sortKey == 'amount' && sortOrder) || 'init',
              },
              {
                value: 'ステータス',
                onClick: () => sort('status'),
                ordering: (sortKey == 'status' && sortOrder) || 'init',
              },
              {
                value: '作成日',
                onClick: () => sort('date'),
                ordering: (sortKey == 'date' && sortOrder) || 'init',
              },
              { value: '操作' },
            ]}
            rows={noResults.map((row, i) => ({
              url: `/path/to/single/${i}`,
              cells: [
                { value: row.title },
                { value: row.user, breakWord: true },
                { value: Digits.formalize(row.amount), alignRight: true },
                { value: row.status },
                { value: row.date },
                {
                  value: (
                    <>
                      <Button mr={0.5} small appearance="tertiary">
                        コピー
                      </Button>
                      <Button mr={0.5} danger small appearance="tertiary">
                        削除
                      </Button>
                    </>
                  ),
                },
              ],
            }))}
          ></ListTable>
        ) : (
          <NoDataCreated mt={3}>
            <Button appearance="primary" mt={1}>
              新規作成
            </Button>
          </NoDataCreated>
        )}
      </ContentsBase>
    </Container>
  );
};

```

### examples/Forms.mdx
```
markdown
import { Story, Canvas } from '@storybook/addon-docs/blocks';

# フォーム

vibes では3種類のフォームの組み方を提供しています

- 縦フォーム
- 横フォーム
- リストフォーム

いずれの場合にも、**アクセシビリティの確保** と **エラーの表示方法** に注意を払ってください。

## 縦フォーム

`DescriptionList` を使用して項目を縦方向に並べるフォーム形式です。

- 入力欄の説明を丁寧に表記したり、グルーピングの表現をしたりしやすい形式です
- 利用頻度が低く、ユーザーの学習効果を期待しづらい場所での使用に適しています
- 行にフィールドが1つしかない場合には `DescriptionList` の `title` = 左側カラムに `<label>` 要素を、
  複数ある場合にはそれぞれのフィールドにラベルを配置し（ `value` = 右側カラム内に横フォームを配置するのを推奨 ）、
  必ずフィールドとラベルが紐付けられている状態にしてください
  - aXe または Lighthouse で紐付けが行われているか確認することを推奨します

<Canvas>
  <Story id="examples-forms--vertical-form" />
</Canvas>

## 横フォーム

`FormControl` と `FormControlGroup` を使用して項目を横方向に並べるフォーム形式です

- たくさんの入力欄をコンパクトに配置する形式です。
- 利用頻度が高く、ユーザーの学習効果を期待でき、描画領域を節約したい場所に適しています
- `FormControl` 内にフィールドが1つしかない場合には、`FormControl` の `fieldId` propにフィールドの `id` を渡し、
  必ずフィールドとラベルが紐付けられている状態にしてください
  - `FormControl` は `<fieldset>` 要素になっているため、ラジオボタンが配置される場合や複数のフィールドが配置される場合は `fieldId` による紐付けは不要です
  - aXe または Lighthouse で紐付けが行われているか確認することを推奨します

<Canvas>
  <Story id="examples-forms--horizontal-form" />
</Canvas>

## リストフォーム

オブジェクトが複数持つ子オブジェクトをシングル画面で一括で編集する際などに使用するフォーム形式です。

- たくさんの小さなオブジェクトを一度に編集する場所で使用します
  - 子オブジェクトの編集項目が多い場合は、別画面にしたり、`TaskDialog` に切り出すなどを検討してください
  - 一度にたくさん編集することが想定されない場合も、別画面にしたり、`TaskDialog` に切り出すなどを検討してください
- ひとつの項目名に対してたくさんのフィールドが紐付くため、`<label>` 要素は使用しません
  - `aria-label` にて、 `1行目の日付` のように、何行目を操作しているのかわかるラベルを指定してください
  - aXe または Lighthouse で紐付けが行われているか確認することを推奨します

<Canvas>
  <Story id="examples-forms--list-form" />
</Canvas>


## フォーム送信のインタラクション

ボタンのラベルが「保存」「作成」「登録」などであっても、ここでは「送信」として扱います。

- 送信中は送信ボタンやその他のアクションボタンを `disabled` にし、マウス操作だけでなくキーボード操作でもアクションできないようにしてください
  - `Loading` 等で覆われる場合でも、必ず `disabled` にしてください
- 送信が成功した場合はページ遷移やモーダルの開閉、フォーカスの移動、`FloatingMessageBlock` などによってユーザーに送信が完了したフィードバックをしてください
- 送信が失敗した場合は `FloatingMessageBlock` を `error` で表示し、ユーザーに送信が失敗したフィードバックをしてください

<Canvas>
  <Story id="examples-forms--submit-success-interaction" />
</Canvas>


### フォームのエラー表示

- 送信の失敗時には、 `FloatingMessageBlock` でエラーの存在をユーザーに伝え（スクリーンメッセージ）、`Message` で個別のエラーの詳細をユーザーに伝えてください（インラインメッセージ）
  - `FloatingMessageBlock` を使用すると、 `aria-live` 属性によりスクリーンリーダー等の支援技術にエラーが起きていることを伝えることができます
- 複数のセクションのある長大なフォームの場合、エラーが発生しているセクションに `MessageBlock` を配置してください（セクションメッセージ）
- 多くの場合、サーバー側でエラーの検証が必須となるため、送信ボタンを押すまで入力内容がエラーとなるかどうかを予測することができません。
  そのため、必ずしも「クライアント側でエラー検証を行い、エラーが無くなるまで送信ボタンを押せなくする」必要は **ありません**
  - クライアント側で検証できなかったエラーがサーバー側で発見された場合、ユーザーは両方のエラーを修正する2度手間を強いられてしまいます
  - もしクライアント側でエラーを修正するまで送信できなくする場合は、送信ボタンの周囲にエラーの修正が必要であることがわかるよう、メッセージを記載してください
- もし入力フィールドごとのエラーメッセージを記載できない場合は、フォーム上部に `MessageBlock` でまとめて記載しても構いません
  - その場合でも、同時に `FloatingMessageBlock` を表示し、「エラーが起きていること」に気付けるようにしてください。
  - 可能なかぎり、フィールドごとにエラーメッセージを記載するようにしてください

<Canvas>
  <Story id="examples-forms--submit-error-interaction" />
</Canvas>

#### ダイアログ内のエラー表示

- `TaskDialog` 内にフォームを配置している場合でも、 `FloatingMessageBlock` を使用してスクリーンメッセージを表示してください

<Canvas>
  <Story id="examples-forms--error-on-task-dialog" />
</Canvas>


### フロントエンドでのバリデーション

- フォームのバリデーション（入力内容の検証）はサーバーサイドで必ず行う必要があるため、フロントエンドで行う必要はありません
  - フロントエンドで入力内容のバリデーションを行う場合、ユーザーが正しく入力するための補助と位置付けてください
- 入力中のユーザーにストレスを与えないよう、フロントエンでのバリデーションはエラーとは別の形で表現し、送信ボタンを押すなどの形でユーザーが入力を終えた意思が明らかになってからエラーとして表示してください
  - 通常、サーバーサイドでも同じようなバリデーションを行うことになるため、エラーとしての表示はそちらの結果を表示するかたちに寄せてしまうのが良いでしょう
- `Balloon` や `Note` コンポーネントによる注釈は、スクリーンリーダーや拡大表示を使用しているユーザーは気付かない可能性があることに注意してください
  - `氏名（カタカナ）` のような入力形式がわかりやすい項目名にしたり、「ハイフンなしで 1410031 のように入力してください」という注釈文を表示したりして、入力開始前に正しい記入方法がわかるようにしてください
  - `DigitsInput` のように全角半角などの文字種別を自動的に修正したり、郵便番号のハイフン有り・無しどちらも許容したりするなど、入力形式のエラーが起こりにくい工夫をすることを検討してください

<Canvas>
  <Story id="examples-forms--frontend-validation" />
</Canvas>

#### バリデーションエラー時の送信ボタン無効化

- サーバーサイドでバリデーションを行う前提があるため、フロントエンドでのバリデーションが通るまで送信ボタンを無効化したりする必要はありません
- もし無効化する場合はなぜ送信ボタンが無効であるのか、ユーザーが理解できるようにしてください
  - ボタンの周囲に注釈テキストを表示したり、バルーンでメッセージを表示したりしてください
  - `aria-describedby` によって、それらのメッセージを無効化されたボタンに紐付けてください
- どの入力項目が原因で送信できないのかがわかりにくくなるため、入力項目が多い入力フォームや、必須項目とそうでない項目が順番的に混在しているフォームでの使用は避けてください
  - 必須項目とそうでない項目が存在する場合、必須項目を先に、そうでない項目を後に並べるようにしてください
- バリデーション結果をエラーとして表示する場合にはBlur時以降に表示するようにするなど、入力中・入力前のユーザーへのストレスに配慮してください
　

<Canvas>
  <Story id="examples-forms--disable-button-if-invalid" />
</Canvas>

## フォーム作成の注意点

- ラベルとフィールドの紐付けを必ず行ってください
  - freeeアクセシビリティー・ガイドライン: [フォーム・コントロールのラベル付けの必要性](https://a11y-guidelines.freee.co.jp/explanations/form-labeling.html)
  - aXe または Lighthouse で紐付けが行われているか確認することを推奨します
- ユーザーが自分自身の情報を入力するフォームでは、 `autoComplete` 属性を使用して自動補完が効く状態にしてください
  - ただし、自分自身 **以外** の情報を入力するフォームでは、 `autoComplete` を `off` にしてください
  - `autoComplete` 属性に何を指定するべきかは、MDN: [HTML の autocomplete 属性](https://developer.mozilla.org/ja/docs/Web/HTML/Attributes/autocomplete) を参照してください
- 安易な `placeholder` の使用は推奨しません
  - `placeholder` の文字列は通常のテキストよりもコントラストの低い色の組み合わせになっているため、可読性が下がります
    - コントラストの高い色を使用すると、入力済み文字列との区別が付かなくなるおそれがあります
  - 記入をし始めてしまうと `placeholder` の内容が確認できなくなります。可読性の問題もあるので記入に必要な情報を `placeholder` にするべきではありません

```

### examples/Forms.stories.tsx
```
typescript
import * as React from 'react';
import Forms from './Forms.mdx';
import {
  Button,
  CheckBox,
  DateField,
  DateInput,
  DescriptionList,
  DigitsInput,
  FloatingMessageBlock,
  FormActions,
  FormControl,
  FormControlGroup,
  InlineLink,
  ListTable,
  Loading,
  Message,
  MessageBlock,
  MessageIcon,
  NameField,
  Note,
  SelectBox,
  TaskDialog,
  TextField,
  ToggleButton,
  VisuallyHidden,
  WithDescriptionContent,
  WithBalloon,
  RequiredIcon,
} from '../src';
import { MdAdd } from 'react-icons/md';

export default {
  title: 'examples/Forms',
  parameters: { docs: { page: Forms } },
};

export const VerticalForm = () => (
  <>
    <DescriptionList
      mb={1}
      listContents={[
        {
          // 単体でフィールドを置くときはlabel の htmlFor を忘れない！！！
          title: (
            <label htmlFor="vertical-form__employee-code">従業員番号</label>
          ),
          value: <TextField id="vertical-form__employee-code" />,
        },
        // 姓名でフィールドが分かれているので、ここはlabelを使用しない
        {
          title: (
            <>
              氏名
              <RequiredIcon ml={0.5} />
            </>
          ),
          value: <NameField autoComplete="name" required />,
        },
        {
          // 姓名でフィールドが分かれているので、ここはlabelを使用しない
          title: '氏名（カタカナ）',
          value: (
            <WithDescriptionContent
              renderContent={() => (
                <NameField
                  lastNamePlaceholder="セイ"
                  firstNamePlaceholder="メイ"
                  label="氏名（カタカナ）"
                  autoComplete="name"
                  required
                />
              )}
              renderDescriptionContent={() => (
                <Note mt={0.5}>全角カタカナで入力してください</Note>
              )}
            />
          ),
        },
        {
          title: <label htmlFor="vertical-form__display-name">表示名</label>,
          value: (
            <WithDescriptionContent
              renderDescriptionContent={() => (
                <Note mt={0.5}>
                  空欄にした場合、氏名が表示名として使用されます
                </Note>
              )}
              renderContent={(descId) => (
                <TextField
                  // renderDescriptionContentの内容がフィールドの説明として渡されるよう、aria-describedbyに渡している
                  aria-describedby={descId}
                  id="vertical-form__display-name"
                />
              )}
            />
          ),
        },
        {
          // 「性別」はSelectBoxのラベルなので、htmlFor で紐付ける
          title: <label htmlFor="vertical-form__sex">性別</label>,
          value: (
            <>
              <SelectBox
                id="vertical-form__sex"
                width="small"
                options={[
                  { value: '0', name: '未選択' },
                  { value: '1', name: '男性' },
                  { value: '2', name: '女性' },
                  { value: '9', name: 'その他' },
                ]}
              />
              <CheckBox ml={1}>性別を自分以外のメンバーに公開する</CheckBox>
            </>
          ),
        },
        {
          // 複数のフィールドがあるので、ここはlabelを使用しない
          title: '住所',
          value: (
            <>
              <FormControlGroup>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="郵便番号"
                  fieldId="vertical-form__postal"
                  required
                  mb={1}
                  mr={1}
                >
                  <TextField
                    id="vertical-form__postal"
                    width="small"
                    autoComplete="postal-code"
                  />
                </FormControl>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="都道府県"
                  fieldId="vertical-form__pref"
                  required
                  mb={1}
                  mr={1}
                >
                  {/* 都道府県のSelectBoxを作るのめんどくさい（許して） */}
                  <TextField
                    id="vertical-form__pref"
                    width="medium"
                    autoComplete="address-level1"
                  />
                </FormControl>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="市区町村"
                  fieldId="vertical-form__city"
                  required
                  mb={1}
                  mr={1}
                >
                  {/* 都道府県のSelectBoxを作るのめんどくさい（許して） */}
                  <TextField
                    id="vertical-form__city"
                    width="medium"
                    autoComplete="address-level2"
                  />
                </FormControl>
              </FormControlGroup>
              <FormControlGroup>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="町名・番地"
                  fieldId="vertical-form__address-line-1"
                  required
                  mb={1}
                  mr={1}
                >
                  <TextField
                    id="vertical-form__address-line-1"
                    width="large"
                    autoComplete="street-address"
                  />
                </FormControl>
              </FormControlGroup>
              <FormControlGroup>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="建物名・部屋番号"
                  fieldId="vertical-form__address-line-2"
                  mb={1}
                  mr={1}
                >
                  <TextField
                    id="vertical-form__address-line-2"
                    width="large"
                    autoComplete="street-address"
                  />
                </FormControl>
              </FormControlGroup>
            </>
          ),
        },
        {
          // 年月日でフィールドが分かれているので、<label>を使用しない
          title: '生年月日',
          value: (
            <DateField
              selectedDate="1990-01-01"
              startDate="1900-01-01"
              endDate="2021-12-31"
              autoComplete="bday"
            />
          ),
        },
        {
          // 単体でフィールドを置くときはlabel の htmlFor を忘れない！！！
          title: (
            <label htmlFor="vertical-form__pension_num">基礎年金番号</label>
          ),
          value: (
            <WithDescriptionContent
              renderDescriptionContent={() => (
                <Note mt={0.5}>
                  基礎年金番号は10桁の数字で表され、4桁と6桁の組み合わせとなっています。
                  <InlineLink
                    href="https://www.nenkin.go.jp/faq/n_net/toroku/moshikomi/20150519.html"
                    target="_blank"
                  >
                    基礎年金番号の調べ方
                  </InlineLink>
                </Note>
              )}
              renderContent={(descId) => (
                <TextField
                  id="vertical-form__pension_num"
                  // renderDescriptionContentの内容がフィールドの説明として渡されるよう、aria-describedbyに渡している
                  aria-describedby={descId}
                />
              )}
            />
          ),
        },
      ]}
    />
    <FormActions>
      <Button appearance="primary">保存</Button>
      <Button>キャンセル</Button>
    </FormActions>
  </>
);

export const HorizontalForm = () => (
  <>
    <FormControlGroup>
      <FormControl mb={1} mr={1} label="種別">
        <ToggleButton name="horizontal-form__type" type="radio">
          収入
        </ToggleButton>
        <ToggleButton name="horizontal-form__type" type="radio">
          支出
        </ToggleButton>
      </FormControl>
      <FormControl
        mb={1}
        mr={1}
        label="口座"
        fieldId="horizontal-form__account"
      >
        <SelectBox
          id="horizontal-form__account"
          width="small"
          options={[
            { name: '現金' },
            { name: 'freee銀行' },
            { name: '五反田銀行' },
          ]}
        />
      </FormControl>
      <FormControl
        mb={1}
        mr={1}
        label="取引先"
        required
        help="入出金の相手となる会社名や個人名を入力します"
        fieldId="horizontal-form__partner"
      >
        <TextField id="horizontal-form__partner" required />
      </FormControl>
      <FormControl
        mb={1}
        mr={1}
        label="金額"
        required
        fieldId="horizontal-form__amount"
      >
        <DigitsInput id="horizontal-form__amount" />
      </FormControl>
      <FormControl
        mb={1}
        mr={1}
        label="摘要"
        fieldId="hofizontal-form__description"
        help="入出金の目的などを記載します"
      >
        <TextField width="large" id="hofizontal-form__description" required />
      </FormControl>
    </FormControlGroup>
    <FormActions>
      <Button appearance="primary">登録</Button>
    </FormActions>
  </>
);

export const ListForm = () => {
  const [values, setValues] = React.useState<
    {
      date: string;
      type: 'income' | 'expense';
      amount: number;
      note: string;
    }[]
  >([{ date: '2021-04-01', type: 'income', amount: 0, note: '' }]);
  return (
    <>
      <ListTable
        mb={0.5}
        headers={[
          { value: '日付' },
          { value: '収支' },
          // 通常のListTableでは金額は右寄せで配置するが、DigitsInput内が右寄せであり、DigitsInputの左端と揃えたいため、見出しセルは左寄せで配置する
          { value: '金額' },
          {
            value: (
              <>
                備考
                <MessageIcon label="ヘルプ" small>
                  メモとして自由に使える欄です
                </MessageIcon>
              </>
            ),
          },
          { value: <VisuallyHidden>行の操作</VisuallyHidden> },
        ]}
        rows={values.map((v, i) => ({
          cells: [
            {
              value: (
                <DateInput
                  value={v.date}
                  // 何行目の何の項目なのかわかるラベルにする
                  label={`${i + 1}行目の日付`}
                  width="small"
                  onChange={(d) =>
                    setValues([
                      ...values.slice(0, i),
                      { ...v, date: d },
                      ...values.slice(i + 1),
                    ])
                  }
                />
              ),
            },
            {
              value: (
                <SelectBox
                  value={v.type}
                  // 何行目の何の項目なのかわかるラベルにする
                  // 視覚的に見えるラベルとN:1なので、<label>要素は使用せず、aria-labelで表現する
                  label={`${i + 1}行目の収支`}
                  width="xSmall"
                  onChange={(e) =>
                    setValues([
                      ...values.slice(0, i),
                      {
                        ...v,
                        type:
                          e.target.value === 'income' ? 'income' : 'expense',
                      },
                      ...values.slice(i + 1),
                    ])
                  }
                  options={[
                    { value: 'income', name: '収入' },
                    { value: 'expense', name: '支出' },
                  ]}
                />
              ),
            },

            {
              value: (
                <DigitsInput
                  value={v.amount}
                  // 何行目の何の項目なのかわかるラベルにする
                  // 視覚的に見えるラベルとN:1なので、<label>要素は使用せず、aria-labelで表現する
                  label={`${i + 1}行目の金額`}
                  onChange={(a) =>
                    setValues([
                      ...values.slice(0, i),
                      { ...v, amount: a || 0 },
                      ...values.slice(i + 1),
                    ])
                  }
                />
              ),
            },
            {
              value: (
                <TextField
                  value={v.note}
                  // 何行目の何の項目なのかわかるラベルにする
                  // 視覚的に見えるラベルとN:1なので、<label>要素は使用せず、aria-labelで表現する
                  label={`${i + 1}行目の備考`}
                  width="large"
                  onChange={(e) =>
                    setValues([
                      ...values.slice(0, i),
                      { ...v, note: e.target.value },
                      ...values.slice(i + 1),
                    ])
                  }
                />
              ),
            },
            {
              alignRight: true,
              value: (
                <Button
                  onClick={() =>
                    setValues([...values.slice(0, i), ...values.slice(i + 1)])
                  }
                  appearance="tertiary"
                  small
                  disabled={values.length === 1}
                >
                  行を削除
                </Button>
              ),
            },
          ],
        }))}
      />
      <Button
        IconComponent={MdAdd}
        iconPosition="left"
        onClick={() =>
          setValues([
            ...values,
            { date: '2021-04-01', amount: 0, type: 'income', note: '' },
          ])
        }
        // ListTableと左端を揃えるため、左側に1.5remのマージンを持たせている。
        // 通常の使用では、ListTableの側に-1.5remのネガティブマージンを付けることも多いはず
        ml={1.5}
      >
        行を追加
      </Button>
    </>
  );
};

export const SubmitSuccessInteraction = () => {
  const [message, setMessage] = React.useState('');
  const [sending, setSending] = React.useState(false);

  return (
    <>
      <Note mb={1}>
        「保存」ボタンで送信中〜送信完了の動きを試すことができます
      </Note>
      <FormActions>
        <Button
          appearance="primary"
          disabled={sending}
          onClick={() => {
            setMessage('');
            setSending(true);
            setTimeout(() => {
              setMessage('保存しました');
              setSending(false);
            }, 600);
          }}
        >
          保存
        </Button>
        <Button disabled={sending}>キャンセル</Button>
      </FormActions>
      <Loading coverAll isLoading={sending} />
      {message && <FloatingMessageBlock success message={message} />}
    </>
  );
};

export const ErrorOnTaskDialog = () => {
  const [message, setMessage] = React.useState('');
  const [sending, setSending] = React.useState(false);
  const [error, setError] = React.useState(false);
  const [modalOpen, setModalOpen] = React.useState(false);

  return (
    <>
      <Button onClick={() => setModalOpen(true)}>編集ダイアログを開く</Button>
      <TaskDialog
        isOpen={modalOpen}
        title="編集"
        primaryButtonLabel="保存"
        closeButtonLabel="閉じる"
        onRequestClose={() => setModalOpen(false)}
        onPrimaryAction={() => {
          setMessage('');
          setSending(true);
          setError(false);
          setTimeout(() => {
            setMessage(
              '入力内容にエラーがあります。修正のうえ、再度お試しください'
            );
            setError(true);
            setSending(false);
          }, 600);
        }}
        disabled={sending}
      >
        {message && <MessageBlock error mb={1} message={message} />}
        <DescriptionList
          mr={-1.5}
          ml={-1.5}
          listContents={[
            {
              title: (
                <label htmlFor="submit-error-interaction__amount">
                  振込金額
                  <RequiredIcon ml={0.5} />
                </label>
              ),
              value: (
                <>
                  <DigitsInput
                    id="submit-error-interaction__amount"
                    required
                    error={error}
                    value={0}
                  />
                  {error && (
                    <Message ml={1} error>
                      0より大きい数値を入力してください
                    </Message>
                  )}
                </>
              ),
            },
            {
              title: (
                <label htmlFor="submit-error-interaction__account-from">
                  振込元口座
                  <RequiredIcon ml={0.5} />
                </label>
              ),
              value: (
                <>
                  <SelectBox
                    id="submit-error-interaction__account-from"
                    options={[
                      { name: '選択してください', value: 'default' },
                      { name: 'freee銀行' },
                      { name: '五反田銀行' },
                      { name: '品川信用金庫' },
                    ]}
                    error={error}
                    value="default"
                    required
                  />
                  {error && (
                    <Message ml={1} error>
                      口座を選択してください
                    </Message>
                  )}
                </>
              ),
            },
            {
              title: (
                <label htmlFor="submit-error-interaction__name-from">
                  振込名義
                </label>
              ),
              value: (
                <>
                  <WithDescriptionContent
                    renderContent={(descId) => (
                      <>
                        <TextField
                          id="submit-error-interaction__name-from"
                          // エラーメッセージがaria-desdribedbyになっているべきか悩ましいが、
                          // ここでは他のフィールドと仕様をあわせやすいよう、エラーメッセージをaria-describedに入れない判断をした
                          aria-describedby={descId}
                          error={error}
                          value="ふりーたろう"
                        />
                        {error && (
                          <Message ml={1} error>
                            半角カタカナで記入してください
                          </Message>
                        )}
                      </>
                    )}
                    renderDescriptionContent={() => (
                      <Note mt={0.5}>
                        振込先に通知される名義を半角カタカナで記入してください。空欄にした場合は口座名義がそのまま使用されます。
                      </Note>
                    )}
                  />
                </>
              ),
            },
            {
              title: '振込先口座',
              value: (
                <>
                  <FormControlGroup>
                    <FormControl
                      label="銀行コード"
                      fieldId="submit-error-interaction__bank_to"
                      help="銀行ごとに指定されている4桁の数字です"
                      required
                      mr={1.5}
                      mb={1}
                    >
                      <TextField
                        id="submit-error-interaction__bank_to"
                        width="small"
                        required
                        value={'123'}
                        error={error}
                      />
                      {error && (
                        <MessageIcon error label="エラー" ml={0.5}>
                          4桁の半角数字で記入してください
                        </MessageIcon>
                      )}
                    </FormControl>
                    <FormControl
                      label="支店コード"
                      fieldId="submit-error-interaction__branch_to"
                      help="支店ごとに指定されている3桁の数字です"
                      required
                      mr={1.5}
                      mb={1}
                    >
                      <TextField
                        id="submit-error-interaction__branch_to"
                        width="xSmall"
                        required
                        value=""
                        error={error}
                      />
                      {error && (
                        <MessageIcon error label="エラー" ml={0.5}>
                          3桁の半角数字で記入してください
                        </MessageIcon>
                      )}
                    </FormControl>
                  </FormControlGroup>
                  <FormControlGroup>
                    <FormControl
                      // ここだけエラー内容が思いつかんかった
                      label="口座種別"
                      fieldId="submit-error-interaction__account_type_to"
                      required
                      mr={1.5}
                    >
                      <SelectBox
                        id="submit-error-interaction__account_type_to"
                        options={[
                          { name: '普通' },
                          { name: '当座' },
                          { name: '定期' },
                        ]}
                        width="xSmall"
                        required
                      />
                    </FormControl>
                    <FormControl
                      label="口座番号"
                      fieldId="submit-error-interaction__account_number_to"
                      required
                      mr={1.5}
                      mb={1}
                    >
                      <TextField
                        id="submit-error-interaction__account_number_to"
                        width="medium"
                        required
                        value=""
                        error={error}
                      />
                      {error && (
                        <MessageIcon error label="エラー" ml={0.5}>
                          7桁の半角数字で記入してください
                        </MessageIcon>
                      )}
                    </FormControl>
                    <FormControl
                      label="口座名義"
                      fieldId="submit-error-interaction__account_name_to"
                      required
                      mr={1.5}
                      mb={1}
                    >
                      <TextField
                        id="submit-error-interaction__account_name_to"
                        width="medium"
                        required
                        value="ふりーはなこ"
                        error={error}
                      />
                      {error && (
                        <MessageIcon error label="エラー" ml={0.5}>
                          半角カタカナで記入してください
                        </MessageIcon>
                      )}
                    </FormControl>
                  </FormControlGroup>
                </>
              ),
            },
          ]}
        />
        <Loading coverAll isLoading={sending} />
        {message && <FloatingMessageBlock error message={message} />}
      </TaskDialog>
    </>
  );
};

export const SubmitErrorInteraction = () => {
  const [message, setMessage] = React.useState('');
  const [sending, setSending] = React.useState(false);
  const [error, setError] = React.useState(false);

  return (
    <>
      <Note mb={1}>
        「保存」ボタンで送信中〜エラー時の動きを試すことができます
      </Note>

      {message && <MessageBlock error mb={1} message={message} />}
      <DescriptionList
        mb={1}
        listContents={[
          {
            title: (
              <label htmlFor="submit-error-interaction__amount">
                振込金額
                <RequiredIcon ml={0.5} />
              </label>
            ),
            value: (
              <>
                <DigitsInput
                  id="submit-error-interaction__amount"
                  required
                  error={error}
                  value={0}
                />
                {error && (
                  <Message ml={1} error>
                    0より大きい数値を入力してください
                  </Message>
                )}
              </>
            ),
          },
          {
            title: (
              <label htmlFor="submit-error-interaction__account-from">
                振込元口座
                <RequiredIcon ml={0.5} />
              </label>
            ),
            value: (
              <>
                <SelectBox
                  id="submit-error-interaction__account-from"
                  options={[
                    { name: '選択してください', value: 'default' },
                    { name: 'freee銀行' },
                    { name: '五反田銀行' },
                    { name: '品川信用金庫' },
                  ]}
                  error={error}
                  value="default"
                  required
                />
                {error && (
                  <Message ml={1} error>
                    口座を選択してください
                  </Message>
                )}
              </>
            ),
          },
          {
            title: (
              <label htmlFor="submit-error-interaction__name-from">
                振込名義
              </label>
            ),
            value: (
              <>
                <WithDescriptionContent
                  renderContent={(descId) => (
                    <>
                      <TextField
                        id="submit-error-interaction__name-from"
                        // エラーメッセージがaria-desdribedbyになっているべきか悩ましいが、
                        // ここでは他のフィールドと仕様をあわせやすいよう、エラーメッセージをaria-describedに入れない判断をした
                        aria-describedby={descId}
                        error={error}
                        value="ふりーたろう"
                      />
                      {error && (
                        <Message ml={1} error>
                          半角カタカナで記入してください
                        </Message>
                      )}
                    </>
                  )}
                  renderDescriptionContent={() => (
                    <Note mt={0.5}>
                      振込先に通知される名義を半角カタカナで記入してください。空欄にした場合は口座名義がそのまま使用されます。
                    </Note>
                  )}
                />
              </>
            ),
          },
          {
            title: '振込先口座',
            value: (
              <>
                <FormControlGroup>
                  <FormControl
                    label="銀行コード"
                    fieldId="submit-error-interaction__bank_to"
                    help="銀行ごとに指定されている4桁の数字です"
                    required
                    mr={1.5}
                    mb={1}
                  >
                    <TextField
                      id="submit-error-interaction__bank_to"
                      width="small"
                      required
                      value={'123'}
                      error={error}
                    />
                    {error && (
                      <MessageIcon error label="エラー" ml={0.5}>
                        4桁の半角数字で記入してください
                      </MessageIcon>
                    )}
                  </FormControl>
                  <FormControl
                    label="支店コード"
                    fieldId="submit-error-interaction__branch_to"
                    help="支店ごとに指定されている3桁の数字です"
                    required
                    mr={1.5}
                    mb={1}
                  >
                    <TextField
                      id="submit-error-interaction__branch_to"
                      width="xSmall"
                      required
                      value=""
                      error={error}
                    />
                    {error && (
                      <MessageIcon error label="エラー" ml={0.5}>
                        3桁の半角数字で記入してください
                      </MessageIcon>
                    )}
                  </FormControl>
                </FormControlGroup>
                <FormControlGroup>
                  <FormControl
                    // ここだけエラー内容が思いつかんかった
                    label="口座種別"
                    fieldId="submit-error-interaction__account_type_to"
                    required
                    mr={1.5}
                  >
                    <SelectBox
                      id="submit-error-interaction__account_type_to"
                      options={[
                        { name: '普通' },
                        { name: '当座' },
                        { name: '定期' },
                      ]}
                      width="xSmall"
                      required
                    />
                  </FormControl>
                  <FormControl
                    label="口座番号"
                    fieldId="submit-error-interaction__account_number_to"
                    required
                    mr={1.5}
                    mb={1}
                  >
                    <TextField
                      id="submit-error-interaction__account_number_to"
                      width="medium"
                      required
                      value=""
                      error={error}
                    />
                    {error && (
                      <MessageIcon error label="エラー" ml={0.5}>
                        7桁の半角数字で記入してください
                      </MessageIcon>
                    )}
                  </FormControl>
                  <FormControl
                    label="口座名義"
                    fieldId="submit-error-interaction__account_name_to"
                    required
                    mr={1.5}
                    mb={1}
                  >
                    <TextField
                      id="submit-error-interaction__account_name_to"
                      width="medium"
                      required
                      value="ふりーはなこ"
                      error={error}
                    />
                    {error && (
                      <MessageIcon error label="エラー" ml={0.5}>
                        半角カタカナで記入してください
                      </MessageIcon>
                    )}
                  </FormControl>
                </FormControlGroup>
              </>
            ),
          },
        ]}
      />

      <FormActions>
        <Button
          appearance="primary"
          disabled={sending}
          onClick={() => {
            setMessage('');
            setSending(true);
            setError(false);
            setTimeout(() => {
              setMessage(
                '入力内容にエラーがあります。修正のうえ、再度お試しください'
              );
              setError(true);
              setSending(false);
            }, 600);
          }}
        >
          保存
        </Button>
        <Button disabled={sending}>キャンセル</Button>
      </FormActions>
      <Loading coverAll isLoading={sending} />
      {message && <FloatingMessageBlock error message={message} />}
    </>
  );
};

export const FrontendValidation = () => {
  const [value, setValue] = React.useState('');
  const validationMessage = !value.match(/^[ァ-ヾ]*$/)
    ? '全角カタカナで入力してください'
    : '';

  const [error, setError] = React.useState(false);
  const [statusMessage, setStatusMessage] = React.useState('');
  const [serverValidationMessage, setServerValidationMessage] =
    React.useState('');
  const [sending, setSending] = React.useState(false);

  return (
    <>
      <FormControl
        fieldId="frontend-validation__corporate-name-kana"
        label="事業所名（カタカナ）"
        mb={1}
      >
        <WithBalloon
          border="notice"
          balloonDisabled={!validationMessage}
          renderBalloonContent={() => validationMessage}
          renderContent={() => (
            <TextField
              id="frontend-validation__corporate-name-kana"
              value={value}
              onChange={(e) => setValue(e.target.value)}
              error={error}
            />
          )}
        />
        <VisuallyHidden autoRead>
          {/* スクリーンリーダー向けに、フロントエンドバリデーションのメッセージをVisuallyHiddenで配置しています
              `autoRead` を渡すことで、 `aria-live="polite"` になっているが、これが表示されているタイミングは入力中であることが多いため、自動的に読み上げられる可能性は低い。
              （サーバーサイドのものでいいので）バリデーション結果が正しく伝わるよう、代替手段を提供する必要がある。
              この例では保存ボタン押下後にFloatingMessageBlockで通知されるため、気付くことができる。
           */}
          {validationMessage}
        </VisuallyHidden>
        {serverValidationMessage && (
          <Message ml={1} error>
            {serverValidationMessage}
          </Message>
        )}
      </FormControl>
      <Button
        appearance="primary"
        disabled={sending}
        onClick={() => {
          setStatusMessage('');
          setServerValidationMessage('');
          setError(false);
          setSending(true);
          setTimeout(() => {
            setSending(false);
            if (!value.match(/^[ァ-ヾ]*$/)) {
              setError(true);
              setServerValidationMessage('全角カタカナで入力してください');
              setStatusMessage(
                '入力内容にエラーがあります。修正のうえ、再度お試しください'
              );
            } else {
              setStatusMessage('保存しました');
            }
          }, 600);
        }}
      >
        保存
      </Button>
      <Loading coverAll isLoading={sending} />
      {statusMessage && (
        <FloatingMessageBlock
          error={error}
          success={!error}
          message={statusMessage}
        />
      )}
    </>
  );
};

export const DisableButtonIfInvalid = () => {
  const [values, setValues] = React.useState({
    companyName: '',
    companyNameKana: '',
    notes: '',
  });
  const [errorMessages, setErrorMessages] = React.useState({
    companyName: '',
    companyNameKana: '',
    notes: '',
  });

  const validatedAsRequired =
    values.companyName.length > 0 && values.companyNameKana.length > 0;
  const validatedAsKatakana = !!values.companyNameKana.match(/^[ァ-ヾ]*$/);
  const [statusMessage, setStatusMessage] = React.useState('');
  const [sending, setSending] = React.useState(false);

  return (
    <>
      <DescriptionList
        mb={1}
        listContents={[
          {
            title: (
              <label htmlFor="disable-button-if-invalid__corporate-name">
                事業所名
                <RequiredIcon ml={0.5} />
              </label>
            ),
            value: (
              <>
                <TextField
                  id="disable-button-if-invalid__corporate-name"
                  value={values.companyName}
                  onChange={(e) =>
                    setValues({
                      ...values,
                      companyName: e.target.value,
                    })
                  }
                  onBlur={() =>
                    setErrorMessages({
                      ...errorMessages,
                      companyName:
                        values.companyName.length > 0
                          ? ''
                          : '事業所名は必須です',
                    })
                  }
                  required
                  error={!!errorMessages.companyName}
                />
                {errorMessages.companyName && (
                  <Message error ml={1}>
                    {errorMessages.companyName}
                  </Message>
                )}
              </>
            ),
          },
          {
            title: (
              <label htmlFor="disable-button-if-invalid__corporate-name-kana">
                事業所名（カタカナ）
                <RequiredIcon ml={0.5} />
              </label>
            ),
            value: (
              <>
                <WithBalloon
                  border="notice"
                  balloonDisabled={validatedAsKatakana}
                  renderBalloonContent={() =>
                    !validatedAsKatakana ? '全角カタカナで入力してください' : ''
                  }
                  renderContent={() => (
                    <TextField
                      id="disable-button-if-invalid__corporate-name-kana"
                      value={values.companyNameKana}
                      onChange={(e) =>
                        setValues({
                          ...values,
                          companyNameKana: e.target.value,
                        })
                      }
                      onBlur={() =>
                        setErrorMessages({
                          ...errorMessages,
                          companyNameKana: !validatedAsKatakana
                            ? '全角カタカナで入力してください'
                            : values.companyNameKana.length == 0
                            ? '事業所名（カタカナ）は必須です'
                            : '',
                        })
                      }
                      required
                      error={!!errorMessages.companyNameKana}
                    />
                  )}
                />
                <VisuallyHidden autoRead>
                  {/*
                    スクリーンリーダー向けに、フロントエンドバリデーションのメッセージをVisuallyHiddenで配置しています
                    `autoRead` を渡すことで、 `aria-live="polite"` になっているが、これが表示されているタイミングは入力中であることが多いため、自動的に読み上げられる可能性は低い。
                    （サーバーサイドのものでいいので）バリデーション結果が正しく伝わるよう、代替手段を提供する必要がある。
                    この例では保存ボタン押下後にFloatingMessageBlockで通知されるため、気付くことができる。
                  */}
                  {!validatedAsKatakana ? '全角カタカナで入力してください' : ''}
                </VisuallyHidden>
                {errorMessages.companyNameKana && (
                  <Message error ml={1}>
                    {errorMessages.companyNameKana}
                  </Message>
                )}
              </>
            ),
          },
          {
            title: (
              <label htmlFor="disable-button-if-invalid__notes">備考</label>
            ),
            value: (
              <TextField
                id="disable-button-if-invalid__notes"
                value={values.notes}
                onChange={(e) =>
                  setValues({ ...values, notes: e.target.value })
                }
                width="large"
              />
            ),
          },
        ]}
      />
      <WithDescriptionContent
        position="horizontal"
        renderContent={(descriptionId) => (
          <Button
            appearance="primary"
            disabled={sending || !(validatedAsKatakana && validatedAsRequired)}
            aria-describedby={descriptionId}
            onClick={() => {
              setStatusMessage('');
              setSending(true);
              setTimeout(() => {
                setSending(false);
                setStatusMessage('保存しました');
              }, 600);
            }}
          >
            保存
          </Button>
        )}
        renderDescriptionContent={() =>
          !validatedAsRequired ? (
            <Note ml={0.5}>必須項目をすべて入力してください</Note>
          ) : !validatedAsKatakana ? (
            <Note ml={0.5}>入力内容に誤りがあります。ご確認ください</Note>
          ) : undefined
        }
      />
      <Loading coverAll isLoading={sending} />
      {statusMessage && (
        <FloatingMessageBlock success message={statusMessage} />
      )}
    </>
  );
};

```

### examples/ImportWizard.mdx
```
markdown
import { Story, Canvas } from '@storybook/addon-docs/blocks';

# インポートウィザード

インポートによってオブジェクトの新規追加を行う画面の例です。

- スクリーンリーダーのユーザーがページが切り変わったことに気付けるよう、ステップを移動するたびPageTitleにフォーカスが移動するようになっています。
- ウィザードとして実装してあり、グローバルナビ等を配置しない想定になっています。

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-importwizard--import-walkthrough" inline={false} height={800} />
</Canvas>

## ファイルの準備ステップ

テンプレートファイルのダウンロード導線と、アップロードのUIを配置します。アップロードすることで次のステップに進めます。

<Canvas>
  <Story id="examples-importwizard--upload-step" />
</Canvas>

## 内容確認ステップ

アップロードされたファイルの内容から、インポート後の状態を表示しています。エラーがある場合には MessageIcon で表現してください。

<Canvas>
  <Story id="examples-importwizard--confirm-step" />
</Canvas>


## 実行中ステップ

インポート作業を実行中のステップです。前のステップには戻れなくなっています。ポーリング等を使って現在の状態を取得し、完了していたら次のステップに遷移する想定です。

実行中・完了済みのインポートがいつでも確認できるようになっていれば、ここからウィザードを抜ける導線を用意しても問題ありません。

<Canvas>
  <Story id="examples-importwizard--execution-step" />
</Canvas>

## 完了ステップ

インポートによって作成されたデータを示し、一覧または再実行への導線を示します。

<Canvas>
  <Story id="examples-importwizard--completed-step" />
</Canvas>

```

### examples/ImportWizard.stories.tsx
```
typescript
import * as React from 'react';
import { MdFileDownload } from 'react-icons/md';
import ImportWizard from './ImportWizard.mdx';

import {
  Container,
  ContentsBase,
  Breadcrumbs,
  PageTitle,
  Paragraph,
  Button,
  FileUploader,
  FileTypes,
  Stepper,
  SectionTitle,
  JumpButton,
  FormActions,
  NumericTable,
  Loading,
  Digits,
  MarginBase,
} from '../src';

export default {
  title: 'examples/ImportWizard',
  parameters: { docs: { page: ImportWizard } },
};

const requestMock = (wait = 700) => {
  // eslint-disable-next-line compat/compat
  return new Promise<void>((resolve) => setTimeout(() => resolve(), wait));
};

export const ImportWalkthrough = () => {
  const [isRequesting, setIsRequesting] = React.useState(false);
  const [currentStep, setCurrentStep] = React.useState(0);
  const headRef = React.useRef<HTMLHeadingElement>(null);

  // 実行中ステップに入ったときだけ、3秒で次のステップへ
  React.useEffect(() => {
    if (currentStep === 2) {
      setTimeout(() => setCurrentStep(3), 3000);
    }
    // stepが変わったら見出しにフォーカス
    headRef.current?.focus();
  }, [currentStep]);

  return (
    <Container width="narrow">
      <ContentsBase>
        <Breadcrumbs
          mb={1}
          links={[
            { title: 'ホーム', url: '/' },
            { title: '申請一覧', url: '/path/' },
            { title: 'インポート' },
          ]}
        />
        <Stepper
          currentStepIndex={currentStep}
          steps={['ファイルの準備', '内容の確認', '実行', '完了']}
          disabledStepIndex={[]}
        />
        {currentStep === 0 ? (
          <UploadStep
            isRequesting={isRequesting}
            headRef={headRef}
            onFileSelect={async () => {
              setIsRequesting(true);
              await requestMock();
              setCurrentStep(currentStep + 1);
              setIsRequesting(false);
            }}
          />
        ) : currentStep === 1 ? (
          <ConfirmStep
            isRequesting={isRequesting}
            headRef={headRef}
            onBack={() => setCurrentStep(currentStep - 1)}
            onConfirm={async () => {
              setIsRequesting(true);
              await requestMock(1000);
              setCurrentStep(currentStep + 1);
              setIsRequesting(false);
            }}
          />
        ) : currentStep === 2 ? (
          <ExecutionStep headRef={headRef} />
        ) : (
          <CompletedStep headRef={headRef} onRetry={() => setCurrentStep(0)} />
        )}
      </ContentsBase>
    </Container>
  );
};

export const UploadStep = ({
  headRef = React.createRef<HTMLHeadingElement>(),
  onFileSelect = () => {
    return;
  },
  isRequesting = false,
}: {
  headRef: React.Ref<HTMLHeadingElement>;
  onFileSelect: () => any;
  isRequesting: boolean;
}) => (
  <>
    <PageTitle textAlign="center" mb={1} ref={headRef}>
      申請のインポート
    </PageTitle>
    <Paragraph mb={1} textAlign="center">
      複数の申請を一括して追加することができます。
      <br />
      テンプレートのCSVファイルをMicrosoft
      Excel等で編集して、アップロードしてください。
    </Paragraph>
    <Paragraph mb={2} textAlign="center">
      <Button IconComponent={MdFileDownload}>
        テンプレートCSVファイルのダウンロード
      </Button>
    </Paragraph>
    <SectionTitle mb={1} textAlign="center">
      ファイルをアップロードして次のステップへ
    </SectionTitle>

    {/* TODO: こういうの↓を提供してくれるコンポーネントほしいね */}
    <MarginBase fitContent mr="auto" ml="auto">
      <FileUploader
        fileLabel="CSVファイル"
        isUploading={isRequesting}
        acceptFileTypes={[FileTypes.CSV]}
        onFileSelect={onFileSelect}
      />
    </MarginBase>
  </>
);

const ConfirmTable = () => (
  <NumericTable
    ml={-1.5}
    mr={-1.5}
    mb={1}
    headers={[
      { value: 'タイトル' },
      { value: '申請者' },
      { value: '日付' },
      { value: '金額', alignRight: true },
    ]}
    rows={[
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
      {
        cells: [
          { value: '打ち合わせ費用' },
          { value: 'フリー太郎' },
          { value: '2020-10-01' },
          { value: Digits.formalize(10000), alignRight: true },
        ],
      },
    ]}
  />
);

export const ConfirmStep = ({
  headRef = React.createRef<HTMLHeadingElement>(),
  isRequesting = false,
  onBack = () => {
    /* do nothing */
  },
  onConfirm = () => {
    /* do nothing */
  },
}: {
  headRef: React.Ref<HTMLHeadingElement>;
  isRequesting: boolean;
  onBack: () => void;
  onConfirm: () => void;
}) => (
  <>
    <Loading isLoading={isRequesting} coverAll />
    <PageTitle textAlign="center" mb={1} ref={headRef}>
      インポートする内容をご確認ください
    </PageTitle>
    <SectionTitle mb={1}>10件の申請をインポートしようとしています</SectionTitle>
    <ConfirmTable />
    <Paragraph textAlign="center" mb={1}>
      この内容でよろしければ、実行してください
    </Paragraph>
    <MarginBase fitContent ml="auto" mr="auto">
      <FormActions>
        <Button
          large
          disabled={isRequesting}
          onClick={onConfirm}
          appearance="primary"
        >
          実行
        </Button>
        <Button large disabled={isRequesting} onClick={onBack}>
          やり直す
        </Button>
      </FormActions>
    </MarginBase>
  </>
);

export const ExecutionStep = ({
  headRef = React.createRef<HTMLHeadingElement>(),
}: {
  headRef: React.Ref<HTMLHeadingElement>;
}) => (
  <>
    <PageTitle textAlign="center" mb={1} ref={headRef}>
      申請のインポートを実行中です
    </PageTitle>
    <Paragraph mb={1} textAlign="center">
      しばらくこのままお待ちください
    </Paragraph>
    {/* TODO: プログレスバーか何かほしいですね */}
  </>
);

export const CompletedStep = ({
  headRef = React.createRef<HTMLHeadingElement>(),
  onRetry = () => {
    /* do nothing */
  },
}: {
  headRef: React.Ref<HTMLHeadingElement>;
  onRetry: () => void;
}) => (
  <>
    <PageTitle textAlign="center" mb={1} ref={headRef}>
      申請のインポートが完了しました
    </PageTitle>
    <Paragraph mb={1} textAlign="center">
      以下の内容でインポートしました
    </Paragraph>
    <ConfirmTable />
    <MarginBase fitContent ml="auto" mr="auto" mb={1}>
      <JumpButton large>一覧画面へ</JumpButton>
    </MarginBase>
    <MarginBase fitContent ml="auto" mr="auto">
      <Button onClick={onRetry} appearance="tertiary">
        再度インポートする
      </Button>
    </MarginBase>
  </>
);

```

### examples/Pages.stories.tsx
```
typescript
import * as React from 'react';
import { Container, ContentsBase, Footer, GlobalNavi, Header } from '../src';
import {
  MdHome,
  MdInbox,
  MdAssessment,
  MdLibraryBooks,
  MdCreditCard,
  MdSettings
} from 'react-icons/md';

export default {
  title: 'examples/Pages'
};

const Accounting = () => (
  <svg
    viewBox="0 0 132 32"
    style={{
      height: '3rem'
    }}
  >
    <title>freee会計</title>
    <path
      d="M10.84048,4.82736 L12.76624,14.73392 C12.95888,15.72464 12.30608,16.69264 11.31536,16.88528 L4.11056,18.2856 C3.11984,18.47824 2.15184,17.82512 1.95952,16.8344 L0.03376,6.92816 C-0.15888,5.93744 0.49392,4.96944 1.48464,4.7768 L8.68944,3.37648 C9.67984,3.18384 10.64816,3.83696 10.84048,4.82736 Z M5.023744,15.771552 C4.927104,15.274272 4.445504,14.949472 3.948224,15.046112 C3.450624,15.142752 3.125824,15.624352 3.222784,16.121632 C3.319424,16.618912 3.801024,16.944032 4.298304,16.847072 C4.795584,16.750432 5.120384,16.268832 5.023744,15.771552 Z M8.175936,15.158912 C8.079296,14.661632 7.597696,14.336832 7.100096,14.433152 C6.602816,14.530112 6.278016,15.011712 6.374656,15.508992 C6.471296,16.006272 6.952896,16.331392 7.450176,16.234432 C7.947776,16.137792 8.272576,15.656192 8.175936,15.158912 Z M11.327968,14.54624 C11.231328,14.04864 10.749728,13.72384 10.252448,13.82048 C9.754848,13.91744 9.430048,14.39904 9.526688,14.89632 C9.623328,15.3936 10.104928,15.7184 10.602208,15.62176 C11.099808,15.52512 11.424608,15.04352 11.327968,14.54624 Z M4.498592,13.069856 C4.401952,12.572576 3.920352,12.247776 3.423072,12.344096 C2.925472,12.441056 2.600672,12.922656 2.697632,13.419936 C2.794272,13.917216 3.275872,14.242336 3.773152,14.145376 C4.270432,14.048736 4.595232,13.567136 4.498592,13.069856 Z M7.650624,12.457184 C7.553984,11.959584 7.072384,11.634784 6.575104,11.731424 C6.077504,11.828384 5.752704,12.309984 5.849664,12.807264 C5.946304,13.304544 6.427904,13.629344 6.925184,13.532704 C7.422464,13.436064 7.747264,12.954464 7.650624,12.457184 Z M10.802816,11.844384 C10.706176,11.347104 10.224576,11.022304 9.726976,11.118944 C9.229696,11.215584 8.904896,11.697184 9.001536,12.194464 C9.098176,12.691744 9.579776,13.016864 10.077056,12.919904 C10.574656,12.823584 10.899456,12.341984 10.802816,11.844384 Z M3.97344,10.368128 C3.8768,9.870528 3.3952,9.546048 2.89792,9.642368 C2.40032,9.739328 2.07552,10.220928 2.17248,10.718208 C2.26912,11.215488 2.75072,11.540608 3.248,11.443648 C3.74528,11.347008 4.07008,10.865408 3.97344,10.368128 Z M7.125472,9.755328 C7.028832,9.258048 6.547232,8.933248 6.049952,9.029888 C5.552352,9.126528 5.227552,9.608128 5.324512,10.105408 C5.421152,10.602688 5.902752,10.927808 6.400032,10.830848 C6.897312,10.734528 7.222112,10.252928 7.125472,9.755328 Z M10.277504,9.142656 C10.180864,8.645376 9.699264,8.320576 9.201984,8.417216 C8.704384,8.513856 8.379584,8.995456 8.476544,9.492736 C8.573184,9.990016 9.054784,10.315136 9.552064,10.218176 C10.049344,10.121536 10.374144,9.639936 10.277504,9.142656 Z M9.034121,4.71888114 L8.952032,4.727328 L1.747232,6.127648 C1.499552,6.175968 1.336352,6.417888 1.384672,6.665568 L1.384672,6.665568 L1.647072,8.016288 C1.695392,8.263968 1.937312,8.427488 2.184992,8.379168 L2.184992,8.379168 L9.389792,6.978848 C9.637472,6.930528 9.800672,6.688608 9.752352,6.440928 L9.752352,6.440928 L9.489952,5.089888 C9.441632,4.842208 9.199712,4.679008 8.952032,4.727328 Z"
      fill="#73A5FF"
    ></path>
    <path
      d="M5.023744,15.771552 C5.120384,16.268832 4.795584,16.750432 4.298304,16.847072 C3.801024,16.944032 3.319424,16.618912 3.222784,16.121632 C3.125824,15.624352 3.450624,15.142752 3.948224,15.046112 C4.445504,14.949472 4.927104,15.274272 5.023744,15.771552"
      fill="#FFFFFF"
    ></path>
    <path
      d="M8.175936,15.158912 C8.272576,15.656192 7.947776,16.137792 7.450176,16.234432 C6.952896,16.331392 6.471296,16.006272 6.374656,15.508992 C6.278016,15.011712 6.602816,14.530112 7.100096,14.433152 C7.597696,14.336832 8.079296,14.661632 8.175936,15.158912"
      fill="#FFFFFF"
    ></path>
    <path
      d="M11.327968,14.54624 C11.424608,15.04352 11.099808,15.52512 10.602208,15.62176 C10.104928,15.7184 9.623328,15.3936 9.526688,14.89632 C9.430048,14.39904 9.754848,13.91744 10.252448,13.82048 C10.749728,13.72384 11.231328,14.04864 11.327968,14.54624"
      fill="#FFFFFF"
    ></path>
    <path
      d="M4.498592,13.069856 C4.595232,13.567136 4.270432,14.048736 3.773152,14.145376 C3.275872,14.242336 2.794272,13.917216 2.697632,13.419936 C2.600672,12.922656 2.925472,12.441056 3.423072,12.344096 C3.920352,12.247776 4.401952,12.572576 4.498592,13.069856"
      fill="#FFFFFF"
    ></path>
    <path
      d="M3.97344,10.368128 C4.07008,10.865408 3.74528,11.347008 3.248,11.443648 C2.75072,11.540608 2.26912,11.215488 2.17248,10.718208 C2.07552,10.220928 2.40032,9.739328 2.89792,9.642368 C3.3952,9.546048 3.8768,9.870528 3.97344,10.368128"
      fill="#FFFFFF"
    ></path>
    <path
      d="M7.650624,12.457184 C7.747264,12.954464 7.422464,13.436064 6.925184,13.532704 C6.427904,13.629344 5.946304,13.304544 5.849664,12.807264 C5.752704,12.309984 6.077504,11.828384 6.575104,11.731424 C7.072384,11.634784 7.553984,11.959584 7.650624,12.457184"
      fill="#FFFFFF"
    ></path>
    <path
      d="M7.125472,9.755328 C7.222112,10.252928 6.897312,10.734528 6.400032,10.830848 C5.902752,10.927808 5.421152,10.602688 5.324512,10.105408 C5.227552,9.608128 5.552352,9.126528 6.049952,9.029888 C6.547232,8.933248 7.028832,9.258048 7.125472,9.755328"
      fill="#FFFFFF"
    ></path>
    <path
      d="M10.802816,11.844384 C10.899456,12.341984 10.574656,12.823584 10.077056,12.919904 C9.579776,13.016864 9.098176,12.691744 9.001536,12.194464 C8.904896,11.697184 9.229696,11.215584 9.726976,11.118944 C10.224576,11.022304 10.706176,11.347104 10.802816,11.844384"
      fill="#FFFFFF"
    ></path>
    <path
      d="M10.277504,9.142656 C10.374144,9.639936 10.049344,10.121536 9.552064,10.218176 C9.054784,10.315136 8.573184,9.990016 8.476544,9.492736 C8.379584,8.995456 8.704384,8.513856 9.201984,8.417216 C9.699264,8.320576 10.180864,8.645376 10.277504,9.142656"
      fill="#FFFFFF"
    ></path>
    <path
      d="M9.752352,6.440928 C9.800672,6.688608 9.637472,6.930528 9.389792,6.978848 L2.184992,8.379168 C1.937312,8.427488 1.695392,8.263968 1.647072,8.016288 L1.384672,6.665568 C1.336352,6.417888 1.499552,6.175968 1.747232,6.127648 L8.952032,4.727328 C9.199712,4.679008 9.441632,4.842208 9.489952,5.089888 L9.752352,6.440928 Z"
      fill="#FFFFFF"
    ></path>
    <path
      d="M34.921312,-6.4e-05 C33.515552,6.150336 29.351072,11.249856 23.798752,13.927296 C26.247392,14.427136 28.782112,14.689536 31.378272,14.689536 C33.716832,14.689536 35.258592,14.537216 37.633952,14.162496 C37.525792,14.484416 37.607712,14.676096 37.086752,14.858496 C35.739872,15.330176 34.689632,15.657216 33.351712,15.974336 C32.646112,16.141696 32.514912,16.260096 32.040992,16.650176 C31.821152,16.830656 31.529952,17.091776 31.318112,17.242816 L31.318112,17.242816 L36.103072,17.908736 C36.712992,17.993856 36.869152,18.116736 36.785952,18.531456 L36.785952,18.531456 L30.599712,18.531456 C29.403872,18.531456 29.165472,18.602496 28.217312,18.929536 C27.073952,19.324096 25.890272,19.549376 24.606432,19.557696 C27.654752,23.105856 28.998432,27.539776 28.698592,31.999936 L28.698592,31.999936 L17.027232,16.848256 C16.120672,15.671296 15.745952,15.402816 14.098912,15.041216 L14.098912,15.041216 L12.033952,14.588096 L13.118752,14.324416 C13.648992,14.195776 13.693152,14.103296 14.036192,13.771456 C14.925472,12.910336 16.165152,12.387136 17.476832,12.387136 C18.301152,12.387136 18.529632,12.615616 19.397472,11.947456 L19.397472,11.947456 Z M24.024064,15.569664 C21.246144,15.275904 19.130304,15.341184 17.483584,15.845504 C19.318144,17.564864 21.785024,18.617664 24.497664,18.617664 C26.983424,18.617664 29.262464,17.733824 31.038144,16.263104 C28.651584,16.257664 26.576064,15.839424 24.024064,15.569664 Z M16.99312,13.448928 C16.56816,13.448928 16.22352,13.793568 16.22352,14.218528 C16.22352,14.643488 16.56816,14.987808 16.99312,14.987808 C17.41808,14.987808 17.7624,14.643488 17.7624,14.218528 C17.7624,13.793568 17.41808,13.448928 16.99312,13.448928 Z"
      fill="#2864F0"
    ></path>
    <path
      d="M16.99312,14.987808 C16.56816,14.987808 16.22352,14.643488 16.22352,14.218528 C16.22352,13.793568 16.56816,13.448928 16.99312,13.448928 C17.41808,13.448928 17.7624,13.793568 17.7624,14.218528 C17.7624,14.643488 17.41808,14.987808 16.99312,14.987808"
      fill="#FFFFFF"
    ></path>
    <path
      d="M24.497664,18.617664 C21.785024,18.617664 19.318144,17.564864 17.483584,15.845504 C19.130304,15.341184 21.246144,15.275904 24.024064,15.569664 C26.576064,15.839424 28.651584,16.257664 31.038144,16.263104 C29.262464,17.733824 26.983424,18.617664 24.497664,18.617664"
      fill="#FFFFFF"
    ></path>
    <path
      d="M72.590784,12.743424 C72.994944,12.743424 73.422144,13.006784 73.422144,13.745664 C73.422144,15.128704 71.622784,15.838144 70.227584,16.147584 C70.227584,14.975104 71.457344,12.743424 72.590784,12.743424 L72.590784,12.743424 Z M81.754624,12.743424 C82.158464,12.743424 82.585344,13.006784 82.585344,13.745664 C82.585344,15.128704 80.786304,15.838144 79.391424,16.147584 C79.391424,14.975104 80.620864,12.743424 81.754624,12.743424 L81.754624,12.743424 Z M90.912064,12.743424 C91.315904,12.743424 91.743104,13.006784 91.743104,13.745664 C91.743104,15.128704 89.944064,15.838144 88.548864,16.147584 C88.548864,14.975104 89.778304,12.743424 90.912064,12.743424 L90.912064,12.743424 Z M95.825984,14.886464 C95.097664,17.548544 92.809344,19.434304 90.887104,19.434304 C88.837184,19.434304 88.497024,18.103104 88.497024,17.247744 C90.485184,16.870144 93.522624,16.035584 93.522624,13.681664 C93.522624,12.602304 92.851264,11.588864 91.014144,11.588864 C88.392384,11.588864 86.750464,13.918464 86.313664,15.855744 C85.397184,17.901504 83.501184,19.434304 81.729664,19.434304 C79.679424,19.434304 79.339584,18.103104 79.339584,17.247744 C81.328064,16.870144 84.365504,16.035584 84.365504,13.681664 C84.365504,12.602304 83.694144,11.588864 81.856384,11.588864 C79.236544,11.588864 77.595264,13.915584 77.156864,15.851904 L77.156544,15.843264 C76.242304,17.895744 74.341184,19.434304 72.565824,19.434304 C70.516224,19.434304 70.175744,18.103104 70.175744,17.247744 C72.164224,16.870144 75.201984,16.035584 75.201984,13.681664 C75.201984,12.602304 74.530624,11.588864 72.692864,11.588864 C69.765184,11.588864 68.054144,14.496384 67.885504,16.515584 C67.478464,16.577024 67.091584,16.611584 66.759104,16.611584 C65.376064,16.611584 65.544384,15.556864 65.761344,14.441344 C66.073344,12.837504 65.210304,11.588864 63.533184,11.588864 C61.614784,11.588864 60.197824,13.485824 59.409024,15.361984 L59.403904,15.361024 C59.849344,13.067904 59.464704,11.660864 56.705024,11.660864 C55.442304,11.660864 54.003584,12.056704 52.451904,12.665984 C52.454784,12.669184 53.013504,9.770624 53.013504,9.770624 C53.708864,6.194944 54.646144,5.441344 55.815104,5.441344 C56.740864,5.441344 57.356224,5.994624 58.105024,6.962624 L58.507584,4.883264 C57.586624,4.345024 56.698304,4.129664 55.763264,4.129664 C53.004544,4.129664 51.166784,6.135424 50.401344,10.073024 L49.679744,13.792704 C47.165184,14.790784 43.971264,15.826304 38.945344,16.055104 L38.712064,17.251904 C43.632704,17.060864 46.870784,16.129024 49.411264,15.167104 C49.411264,15.167104 48.039104,22.225984 48.039104,22.226304 C47.366464,25.685824 46.460864,26.558464 45.250624,26.558464 C44.124544,26.558464 43.448704,25.663104 42.960704,25.037504 C42.892864,25.386944 42.558144,27.116864 42.558144,27.116864 C43.174784,27.462464 44.017344,27.870464 45.360704,27.870464 C47.901184,27.870464 49.854144,26.025984 50.650624,21.927424 L52.182144,14.049344 C53.722944,13.414144 55.333184,12.905024 56.138304,12.905024 C57.436864,12.905024 57.675264,13.345664 57.337984,15.104704 L56.242624,20.715904 L58.670464,20.715904 L59.163584,18.211904 C59.537344,16.290304 60.859584,13.527744 62.559744,13.527744 C63.416064,13.527744 63.602304,14.180864 63.442304,15.003904 C63.026944,17.142144 64.294464,17.688064 65.788224,17.688064 C66.358464,17.688064 67.051264,17.680064 67.892544,17.559424 C67.983744,18.854784 69.024064,20.964544 71.877184,20.964544 C74.015424,20.964544 75.843264,19.599744 77.091264,17.846464 C77.304384,19.143424 78.389504,20.964544 81.040704,20.964544 C83.176384,20.964544 85.002304,19.602944 86.250624,17.852864 C86.465664,19.149504 87.551104,20.964544 90.198144,20.964544 C93.195264,20.964544 95.782144,18.327104 96.786304,15.089984 L95.825984,14.886464 Z"
      fill="#2864F0"
    ></path>
    <path
      d="M111.78704,12.77296 C110.55376,11.91568 109.45616,10.89296 108.65904,9.84048 C107.95216,10.99824 107.12496,11.93072 106.0872,12.77296 L111.78704,12.77296 Z M108.0424,16.81872 C107.57616,17.85616 107.09488,18.80368 106.58352,19.69104 C108.55376,19.55536 110.10256,19.43504 111.57648,19.25488 L111.4712,19.13456 C110.80944,18.45776 110.61392,18.2472 110.05776,17.73584 L111.3208,17.02896 C112.61424,18.15696 113.86224,19.46544 114.88528,20.7736 L113.53168,21.72112 L113.50128,21.676 C112.94512,20.90928 112.83984,20.7736 112.50896,20.3528 C109.62128,20.7736 106.28272,21.14992 103.27472,21.37552 L102.8088,19.90128 C103.51536,19.87152 104.41808,19.8264 104.92912,19.78096 C105.45552,18.86384 105.92176,17.90128 106.34288,16.81872 L102.70352,16.81872 L102.70352,15.4952 L114.88528,15.4952 L114.88528,16.81872 L108.0424,16.81872 Z M105.54576,13.19408 C104.68848,13.81072 103.756,14.35216 102.8088,14.78832 L101.9064,13.58512 C104.50832,12.5624 106.44816,10.87792 107.78672,8.532 L109.516,8.532 C110.92976,10.51696 112.99024,12.08112 115.66704,13.164 L114.73488,14.4424 C113.81744,14.036 112.91504,13.53968 112.10288,12.98352 L112.10288,14.0664 L105.54576,14.0664 L105.54576,13.19408 Z"
      fill="#2864F0"
    ></path>
    <path
      d="M126.977664,14.337024 L124.105024,14.337024 L124.105024,12.893184 L126.977664,12.893184 L126.977664,8.441664 L128.481344,8.441664 L128.481344,12.893184 L131.338944,12.893184 L131.338944,14.337024 L128.481344,14.337024 L128.481344,21.766464 L126.977664,21.766464 L126.977664,14.337024 Z M119.894144,19.901184 L122.375424,19.901184 L122.375424,17.841024 L119.894144,17.841024 L119.894144,19.901184 Z M118.811264,15.856064 L123.413184,15.856064 L123.413184,14.728064 L118.811264,14.728064 L118.811264,15.856064 Z M118.811264,13.900544 L123.413184,13.900544 L123.413184,12.772864 L118.811264,12.772864 L118.811264,13.900544 Z M118.811264,9.900544 L123.413184,9.900544 L123.413184,8.727424 L118.811264,8.727424 L118.811264,9.900544 Z M118.510464,16.713344 L123.759104,16.713344 L123.759104,21.631104 L122.375424,21.631104 L122.375424,21.074624 L119.894144,21.074624 L119.894144,21.766464 L118.510464,21.766464 L118.510464,16.713344 Z M117.954304,11.945984 L124.315584,11.945984 L124.315584,10.727744 L117.954304,10.727744 L117.954304,11.945984 Z"
      fill="#2864F0"
    ></path>
  </svg>
);

export const PageLayout = () => {
  return (
    <>
      <Header logo={<Accounting />} sectionDataList={[]} />
      <GlobalNavi
        mb={1}
        links={[
          {
            title: 'ホーム',
            url: '#',
            IconComponent: MdHome
          },
          {
            title: '取引',
            url: '#',
            IconComponent: MdInbox
          },
          {
            title: 'レポート',
            url: '#',
            IconComponent: MdAssessment,
            current: true
          },
          {
            title: '決算',
            url: '#',
            IconComponent: MdLibraryBooks
          },
          {
            title: '口座',
            url: '#',
            IconComponent: MdCreditCard
          },
          {
            title: '設定',
            url: '#',
            IconComponent: MdSettings
          }
        ]}
      />
      <Container width="wide" mb={1}>
        <ContentsBase>hoge</ContentsBase>
      </Container>
      <Footer width="wide" />
    </>
  );
};

```

### examples/ResponsiveLayout.mdx
```
markdown
import { Story, Canvas } from '@storybook/addon-docs/blocks';

# レスポンシブレイアウト

<Canvas>
  {/* Container を使っているとinlineでは見辛いので、inline={false} にしている */}
  <Story id="examples-responsivelayout--layout-sample" inline={false} height={800} />
</Canvas>


```

### examples/ResponsiveLayout.stories.tsx
```
typescript
import * as React from 'react';
import ResponsiveLayout from './ResponsiveLayout.mdx';

import {
  Button,
  ColumnBase,
  Container,
  ContentsBase,
  DescriptionList,
  FormActions,
  FormControl,
  FormControlGroup,
  HeadlineArea,
  SectionTitle,
  SubSectionTitle,
  TextField,
  Paragraph,
  NameField,
  NegativeContentsBase,
  MessageBlock,
  FloatingMessageBlock,
  VibesProvider,
} from '../src';

export default {
  title: 'examples/ResponsiveLayout',
  parameters: { docs: { page: ResponsiveLayout }, layout: 'fullscreen' },
};

export const LayoutSample = () => {
  const [screenMessage, setScreenMessage] = React.useState('');
  return (
    <>
      <VibesProvider fixedLayout={false}>
        <Container>
          <ContentsBase>
            <HeadlineArea pageTitle="レスポンシブレイアウト">
              Vibesでいい感じにデスクトップでもWebでも使える画面を使えるようにしたい
            </HeadlineArea>
            <Paragraph mb={1}>
              <code>VibesContext</code>に
              <code>value={'{{ responsive: true }}'}</code>
              を渡すことで、中身がよしなにレスポンシブレイアウトになるような仕組みを作れないかと考えています
            </Paragraph>
            <MessageBlock
              message="MessageBlockはpaddingが少し小さくなり、ボタンは段落ちした表示になります"
              linkTitle="詳細"
              linkUrl="#"
              mb={1}
            />
            {screenMessage && (
              <FloatingMessageBlock
                message={screenMessage}
                onClose={() => setScreenMessage('')}
                mb={1}
              />
            )}

            <NegativeContentsBase>
              <ColumnBase mb={1}>
                <Paragraph>
                  一部のコンポーネントは、 <code>responsive</code> propを持ち、{' '}
                  <code>
                    &lt;VibesContext value={'{{ responsive: '}true{' }}'}&gt;
                  </code>{' '}
                  内に置いたときと同じ表示になるようにします
                </Paragraph>
              </ColumnBase>
            </NegativeContentsBase>

            <Button
              onClick={() =>
                setScreenMessage(
                  'FloatingMessageBlockもMessageBlock同様の表示になります。中身同じだからね'
                )
              }
            >
              ボタン
            </Button>
          </ContentsBase>

          <ContentsBase>
            <SectionTitle mb={1}>フォームの表示</SectionTitle>
            <Paragraph mb={1}>
              テキストフィールドはlargeにしないと、iOSでズームされてしまうかも
            </Paragraph>
            <ColumnBase mb={1.5}>
              <FormControlGroup>
                <FormControl label="氏名" required mb={1} mr={1}>
                  <NameField autoComplete="name" required />
                </FormControl>
              </FormControlGroup>

              <SubSectionTitle>ご住所</SubSectionTitle>
              <FormControlGroup>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="郵便番号"
                  fieldId="layout-sample__postal"
                  required
                  mb={1}
                  mr={1}
                >
                  <TextField
                    id="layout-sample__postal"
                    width="small"
                    autoComplete="postal-code"
                  />
                </FormControl>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="都道府県"
                  fieldId="layout-sample__pref"
                  required
                  mb={1}
                  mr={1}
                >
                  {/* 都道府県のSelectBoxを作るのめんどくさい（許して） */}
                  <TextField
                    id="layout-sample__pref"
                    width="medium"
                    autoComplete="address-level1"
                  />
                </FormControl>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="市区町村"
                  fieldId="layout-sample__city"
                  required
                  mb={1}
                  mr={1}
                >
                  {/* 都道府県のSelectBoxを作るのめんどくさい（許して） */}
                  <TextField
                    id="layout-sample__city"
                    width="medium"
                    autoComplete="address-level2"
                  />
                </FormControl>
              </FormControlGroup>
              <FormControlGroup>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="町名・番地"
                  fieldId="layout-sample__address-line-1"
                  required
                  mb={1}
                  mr={1}
                >
                  <TextField
                    id="layout-sample__address-line-1"
                    width="large"
                    autoComplete="street-address"
                  />
                </FormControl>
              </FormControlGroup>
              <FormControlGroup>
                {/* フィールドがひとつの場合はfieldIdを指定 */}
                <FormControl
                  label="建物名・部屋番号"
                  fieldId="layout-sample__address-line-2"
                  mb={1}
                  mr={1}
                >
                  <TextField
                    id="layout-sample__address-line-2"
                    width="large"
                    autoComplete="street-address"
                  />
                </FormControl>
              </FormControlGroup>
            </ColumnBase>

            <DescriptionList
              mb={1}
              listContents={[
                {
                  title: <label htmlFor="layout-sample__item-1">項目1</label>,
                  value: <TextField id="layout-sample__item-1" />,
                },
                {
                  title: <label htmlFor="layout-sample__item-2">項目2</label>,
                  value: <TextField id="layout-sample__item-1" />,
                },
                {
                  title: <label htmlFor="layout-sample__item-3">項目3</label>,
                  value: <TextField id="layout-sample__item-1" />,
                },
              ]}
            />

            <FormActions responsive>
              <Button appearance="primary">送信</Button>
              <Button appearance="tertiary">スキップ</Button>
            </FormActions>
          </ContentsBase>
        </Container>
      </VibesProvider>
    </>
  );
};

```

### examples/ThroughCommonProps.mdx
```
markdown
import { Story, Canvas } from '@storybook/addon-docs/blocks';

# CommonProps の通過（子要素への移譲）

`pickCommonProps` ユーティリティ関数は、CommonProps 形式のオブジェクトを抽出することができます。

これを利用することで、自前コンポーネントが CommonProps 形式を含んだ props を受け付けて、内部に備わる vibes コンポーネントへ commonProps 値を移譲するといったことができます。

<Canvas>
  <Story id="examples-throughcommonprops--sample" />
</Canvas>


```

### examples/ThroughCommonProps.stories.tsx
```
typescript
import * as React from 'react';
import ThroughCommonProps from './ThroughCommonProps.mdx';
import { Button, CommonProps, MarginBase, pickCommonProps } from '../src';

export default {
  title: 'examples/ThroughCommonProps',
  parameters: { docs: { page: ThroughCommonProps } }
};

export const Sample = () => {
  type InnerProps = CommonProps & { children?: React.ReactNode };

  const InnerBlock: React.FC<InnerProps> = (props: InnerProps) => {
    const commonProps = pickCommonProps(props);
    const { children } = props;

    return <MarginBase {...commonProps}>{children}</MarginBase>;
  };

  const InnerButton: React.FC<InnerProps> = (props: InnerProps) => {
    const commonProps = pickCommonProps(props);
    const { children } = props;

    return (
      <Button {...commonProps} appearance="primary">
        {children}
      </Button>
    );
  };

  return (
    <>
      <InnerBlock mb={3}>margin bottom = 3</InnerBlock>
      <InnerButton ml={1} data-test="through-common-props-example">
        Button (ml=1, data-test=through-common-props-example)
      </InnerButton>
    </>
  );
};

```

### src/constants/Color.ts
```
typescript
export const VibesBlackColor = '#252525';
export const VibesBase1Color = '#efede8';
export const VibesBase2Color = '#e4e0d7';
export const VibesBase3Color = '#938f86';
export const VibesColumnColor = '#f9f7f4';
export const VibesBurntColor = '#6f6b62';
export const VibesAlertColor = '#c33939';
export const VibesNoticeColor = '#c67320';
export const VibesBackgroundColor = '#efede8';

// Corp
export const VibesPrimaryCorpColor = '#4575b4';
export const VibesAccentCorpColor = '#749fcb';
export const VibesLinkCorpColor = '#3d6dac';

// HR
export const VibesPrimaryHrColor = '#338650';
export const VibesAccentHrColor = '#71ab85';
export const VibesLinkHrColor = '#267a43';

// Vibes 2021 Colors
export const Colors2021P01 = '#ebf3ff';
export const Colors2021P02 = '#dce8ff';
export const Colors2021P03 = '#aac8ff';
export const Colors2021P04 = '#73a5ff';
export const Colors2021P05 = '#2864f0';
export const Colors2021P06 = '#3264dc';
export const Colors2021P07 = '#285ac8';
export const Colors2021P08 = '#1e46aa';
export const Colors2021P09 = '#23418c';
export const Colors2021P10 = '#143278';
export const Colors2021S01 = '#f7f5f5';
export const Colors2021S02 = '#f0eded';
export const Colors2021S03 = '#e9e7e7';
export const Colors2021S04 = '#e1dcdc';
export const Colors2021S05 = '#d7d2d2';
export const Colors2021S06 = '#bebaba';
export const Colors2021S07 = '#aaa7a7';
export const Colors2021S08 = '#8c8989';
export const Colors2021S09 = '#6e6b6b';
export const Colors2021S10 = '#464343';
export const Colors2021RE02 = '#fad2d7';
export const Colors2021RE04 = '#f07882';
export const Colors2021RE05 = '#dc1e32';
export const Colors2021RE07 = '#a51428';
export const Colors2021RE10 = '#6e0f19';
export const Colors2021OR02 = '#ffe1d2';
export const Colors2021OR04 = '#ffaa78';
export const Colors2021OR05 = '#fa6414';
export const Colors2021OR07 = '#be4b0f';
export const Colors2021OR10 = '#7d320a';
export const Colors2021YE02 = '#fff0d2';
export const Colors2021YE04 = '#ffd278';
export const Colors2021YE05 = '#ffb91e';
export const Colors2021YE07 = '#be8c14';
export const Colors2021YE10 = '#825a0f';
export const Colors2021YG02 = '#e6f0d2';
export const Colors2021YG04 = '#b4dc7d';
export const Colors2021YG05 = '#82c31e';
export const Colors2021YG07 = '#50961e';
export const Colors2021YG10 = '#3c5f14';
export const Colors2021GR02 = '#cdebd7';
export const Colors2021GR04 = '#64be8c';
export const Colors2021GR05 = '#00963c';
export const Colors2021GR07 = '#006e2d';
export const Colors2021GR10 = '#004b1e';
export const Colors2021BG02 = '#cdf0f0';
export const Colors2021BG04 = '#64d2d2';
export const Colors2021BG05 = '#00b9b9';
export const Colors2021BG07 = '#008c8c';
export const Colors2021BG10 = '#146464';
export const Colors2021PU02 = '#e6d7fa';
export const Colors2021PU04 = '#b482f0';
export const Colors2021PU05 = '#733ce6';
export const Colors2021PU07 = '#5a2daa';
export const Colors2021PU10 = '#3c1e73';
export const Colors2021GY01 = '#fbfbfb';
export const Colors2021GY02 = '#dcdcdc';
export const Colors2021GY04 = '#a0a0a0';
export const Colors2021GY05 = '#5a5a5a';
export const Colors2021GY07 = '#323232';
export const Colors2021GY10 = '#1e1e1e';

export const Vibes2021BlackColor = Colors2021GY07;
export const Vibes2021Base1Color = Colors2021S02;
export const Vibes2021Base2Color = Colors2021S03;
export const Vibes2021Base3Color = Colors2021S08;
export const Vibes2021ColumnColor = Colors2021S01;
export const Vibes2021BurntColor = Colors2021S09;
export const Vibes2021AlertColor = Colors2021RE05;
export const Vibes2021NoticeColor = Colors2021YE07;
export const Vibes2021BackgroundColor = Colors2021P01;
export const Vibes2021PrimaryCorpColor = Colors2021P05;
export const Vibes2021AccentCorpColor = Colors2021P04;
export const Vibes2021LinkCorpColor = Colors2021P07;

```

### src/constants/Font.ts
```
typescript
// type-scale
// design-token （各コンポーネントの実装に直接使わないでください）
export const FontSize0625 = '0.625rem'; // 10dp
export const FontSize0750 = '0.75rem'; // 12dp
export const FontSize0875 = '0.875rem'; // 14dp
export const FontSize1000 = '1rem'; // 16dp
export const FontSize1500 = '1.5rem'; // 24dp

// semantic-token （各componentでfont-sizeを扱うときにはこちらを利用）
export const SmallestIconFontSize = FontSize0625; // 10dp
export const CaptionFontSize = FontSize0750; // 12dp
export const NormalFontSize = FontSize0875; // 14dp
export const Headline3FontSize = FontSize0875; // 14dp
export const Headline2FontSize = FontSize1000; // 16dp
export const Headline1FontSize = FontSize1500; // 24dp

export const MobileHeadline3FontSize = FontSize0875; // 14dp
export const MobileHeadline2FontSize = FontSize0875; // 14dp
export const MobileHeadline1FontSize = FontSize1000; // 16dp

export const FontFamily = `'-apple-system', BlinkMacSystemFont, 'Helvetica Neue',
  'ヒラギノ角ゴ ProN', Hiragino Kaku Gothic ProN, Arial, 'メイリオ', Meiryo,
  sans-serif`;

export const LineHeight = '1.5';

// 地の文
export const NormalFont = `normal ${NormalFontSize}/${LineHeight} ${FontFamily}`;

// キャプション（地の文よりも小さめ）
export const CaptionFont = `normal ${CaptionFontSize}/${LineHeight} ${FontFamily}`;

// フォームのラベルや表の見出し（キャプションと同じ内容だが目的が違うので分けている）
export const ItemNameFont = `normal ${CaptionFontSize}/${LineHeight} ${FontFamily}`;

// 見出し最大
export const HeadlineFont1 = `bold ${Headline1FontSize}/${LineHeight} ${FontFamily}`;

// 見出し中間
export const HeadlineFont2 = `bold ${Headline2FontSize}/${LineHeight} ${FontFamily}`;

// 見出し最小
export const HeadlineFont3 = `bold ${NormalFontSize}/${LineHeight} ${FontFamily}`;

// 見出し最大 (モバイル)
export const MobileHeadlineFont1 = `bold ${MobileHeadline1FontSize}/${LineHeight} ${FontFamily}`;

// 見出し中間 (モバイル)
export const MobileHeadlineFont2 = `bold ${MobileHeadline2FontSize}/${LineHeight} ${FontFamily}`;

// 見出し最小 (モバイル)
export const MobileHeadlineFont3 = `bold ${MobileHeadline3FontSize}/${LineHeight} ${FontFamily}`;

```

### src/constants/Size.ts
```
typescript
export const MinimumSize = '1px';

export const XSmallSize = '0.25rem'; // 4dp
export const SmallSize = '0.5rem'; // 8dp
export const BasicSize = '1rem'; // 16dp
export const LargeSize = '1.5rem'; // 24dp
export const XLargeSize = '2rem'; // 32dp
export const XXLargeSize = '3rem'; // 48dp

export const ContainerSize = '70rem'; // 70dp

export const FormControlHeight = '2.25rem'; //36dp
export const FormControlSmallHeight = '1.5rem'; // 24dp
export const FormControlLargeHeight = '3rem'; // 48dp

// モバイルを想定した横幅の閾値(320 ~ 768px)
export const TabletBoundaryWidth = '64rem';
export const MobileBoundaryWidth = '48rem';
// iPhone 8との境界
export const NarrowMobileBoundaryWidth = `${375 / 16}rem`;

// border-radius-size
// design-token （各コンポーネントの実装に直接使わないでください）
export const BorderRadius0250 = '0.25rem'; // 4dp
export const BorderRadius0500 = '0.5rem'; // 8dp
export const BorderRadius0750 = '0.75rem'; // 12dp
export const BorderRadius1000 = '1rem'; // 16dp
export const BorderRadius1500 = '1.5rem'; // 24dp
export const BorderRadius9900 = '99rem'; // 円形にするための大きい数字

// semantic-token （各コンポーネントの実装に原則直接使わないでください）
export const XSmallBorderRadius = BorderRadius0250; // 4dp
export const SmallBorderRadius = BorderRadius0500; // 8dp
export const MediumBorderRadius = BorderRadius0750; // 12dp
export const LargeBorderRadius = BorderRadius1000; // 16dp
export const XLargeBorderRadius = BorderRadius1500; // 24dp
export const FullBorderRadius = BorderRadius9900; // この変数のみ単体で利用可能

// alias-token（各componentでborder-radiusを扱うときにはこちらを利用）
export const BaseBorderRadius = SmallBorderRadius; // Base系コンポーネント
export const CardBorderRadius = MediumBorderRadius; // Card系コンポーネント
export const FloatingBorderRadius = LargeBorderRadius; // Floating系コンポーネント
export const PopupBorderRadius = LargeBorderRadius; // Popup系コンポーネント
export const DialogBorderRadius = XLargeBorderRadius; // Dialog系コンポーネント
export const FontBorderRadius = SmallBorderRadius; // テキストを含むコンポーネント
export const MiniPaddingBorderRadius = XSmallBorderRadius; // テキストを含むコンポーネントの中でもPaddingが小さいコンポーネント
export const FocusHighlightBorderRadius = XSmallBorderRadius; // フォーカスハイライト系コンポーネント

```

### src/constants/ZIndex.ts
```
typescript
export const OverlayZIndex = '100';
export const FormActionsZIndex = '200';
export const FloatingZIndex = '500';
export const ModalZIndex = '1000';
export const MessageModalZIndex = '1500';
export const PopupZIndex = '2000';
export const PopupMessageZIndex = '3000';
export const FixedMessageZIndex = '4000';
export const MaxZIndex = '2147483647';

```

### src/constants/index.ts
```
typescript
export * from './Color';
export * from './Font';
export * from './Size';
export * from './ZIndex';

```

### src/lv1/a11y/FocusHighlight.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { FocusHighlight } from './FocusHighlight';
import { boolean, select } from '@storybook/addon-knobs';
import { VibesBlackColor, VibesColumnColor } from '../../constants';

export default {
  component: FocusHighlight,
};
const FocusableElement: React.FC = ({
  children,
}: {
  children?: React.ReactNode;
}) => (
  <div
    style={{
      outline: 'none',
      display: 'inline-block',
      minWidth: '11rem',
      background: VibesColumnColor,
      textAlign: 'center',
      color: VibesBlackColor,
      padding: '0.5rem',
      border: '1px solid #5a5a5a',
    }}
    // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
    tabIndex={0}
  >
    {children}
  </div>
);
export const FocusHighlightComponent = () => (
  <FocusHighlight
    inline={boolean('inline', false, 'FocusHighlight')}
    highlightStyle={
      select(
        'highlightStyle',
        { inset: 'inset', outset: 'outset', undefined: '' },
        'outset',
        'FocusHighlight'
      ) || undefined
    }
    cornerStyle={
      select(
        'cornerStyle',
        { round: 'round', sharp: 'sharp', undefined: '' },
        'sharp',
        'FocusHighlight'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <FocusableElement>focusable element</FocusableElement>
  </FocusHighlight>
);

export const HighlightStyle = () => (
  <>
    <FocusHighlight inline highlightStyle="outset" mr={1} mb={1}>
      <FocusableElement>outset</FocusableElement>
    </FocusHighlight>
    <FocusHighlight inline highlightStyle="inset" mr={1} mb={1}>
      <FocusableElement>inset</FocusableElement>
    </FocusHighlight>
  </>
);

export const CornerStyle = () => (
  <>
    <FocusHighlight inline cornerStyle="sharp" mr={1} mb={1}>
      <FocusableElement>sharp</FocusableElement>
    </FocusHighlight>
    <FocusHighlight inline cornerStyle="round" mr={1} mb={1}>
      <FocusableElement>round</FocusableElement>
    </FocusHighlight>

    <FocusHighlight
      inline
      cornerStyle="sharp"
      highlightStyle="inset"
      mr={1}
      mb={1}
    >
      <FocusableElement>sharp (inset)</FocusableElement>
    </FocusHighlight>
    <FocusHighlight
      inline
      cornerStyle="round"
      highlightStyle="inset"
      mr={1}
      mb={1}
    >
      <FocusableElement>round (inset)</FocusableElement>
    </FocusHighlight>
  </>
);

```

### src/lv1/a11y/FocusHighlight.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * `true` の場合、`display: inline-block` となります
   */
  inline?: boolean;
  /**
   * フォーカスハイライト表示の位置。 `inset` にすると内側に表示されます。
   */
  highlightStyle?: 'inset' | 'outset';
  /**
   * フォーカスハイライトの角を丸めるかどうか
   *
   * `round` にした場合、 `$vbFocusHighlightBorderRadius` = 0.25rem = 4px の角丸となります。必ずしもコンテンツの丸みと一致するようになっていないことに注意してください。
   */
  cornerStyle?: 'round' | 'sharp';
  /**
   * `full`の場合、`width: 100%` になります。
   */
  width?: 'fit-content' | 'full';
} & CommonProps;

/**
 * フォーカスインジケーターを非表示にしている要素を `children` に入れ、フォーカスインジケーターを表示させるためのコンポーネントです。
 *
 * ほとんどのVibesのコンポーネントは、フォーカスインジケーターの指定をしていないため、ブラウザが提供するものが使用されます。
 * そのため、ほとんどの場所ではこのコンポンーネントを使用する必要はありません。
 * ブラウザが提供するフォーカスインジケーターの表示では視認性が低いなどの問題がある場合にのみ、使用してください。
 */
export const FocusHighlight: React.FC<Props> = ({
  children,
  inline,
  highlightStyle,
  cornerStyle,
  width = 'fit-content',
  ...props
}: Props) => (
  <span
    {...commonProps(props, 'vb-focusHighlight', {
      inline,
      inset: highlightStyle === 'inset',
      round: cornerStyle === 'round',
      full: width === 'full',
    })}
  >
    {children}
  </span>
);

```

### src/lv1/a11y/FocusTrap.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { FocusTrap } from './FocusTrap';
import { boolean } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { Button, Paragraph, ColumnBase, TextField } from '../..';
import { Keys } from '../../utilities/keyboard';

export default {
  component: FocusTrap,
};

export const FocusTrapComponent = () => {
  const button1 = React.useRef<HTMLButtonElement>(null);
  const button5 = React.useRef<HTMLButtonElement>(null);
  return (
    <>
      <Button ref={button1} mb={1}>
        Button 1
      </Button>
      <FocusTrap
        loop={boolean('loop', false, 'FocusTrap')}
        onFocusInsideTop={action('onFocusInsideTop')}
        onFocusInsideBottom={action('onFocusInsideBottom')}
        onFocusOutsideTop={action('onFocusOutsideTop')}
        onFocusOutsideBottom={action('onFocusOutsideBottom')}
        {...commonKnobs}
      >
        <ColumnBase>
          <Paragraph mb={1}>
            フォーカストラップを抜けるには、Escキーを押してください（この挙動はFocusTrapコンポーネントには実装されていません）
          </Paragraph>
          {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
          <div
            onKeyDown={(e) => {
              if (e.key === Keys.ESC && button5.current) {
                button5.current.focus();
              }
            }}
          >
            <Button mr={1} mb={1}>
              Button 2
            </Button>
            <Button mr={1} mb={1}>
              Button 3
            </Button>
            <Button mr={1} mb={1}>
              Button 4
            </Button>
          </div>
        </ColumnBase>
      </FocusTrap>
      <Button ref={button5} mt={1} onClick={() => button1.current?.focus()}>
        Button 5 (Click to focus on Button 1)
      </Button>
    </>
  );
};

export const Loop = () => {
  const button1 = React.useRef<HTMLButtonElement>(null);
  const button5 = React.useRef<HTMLButtonElement>(null);
  return (
    <>
      <Button ref={button1} mb={1}>
        Button 1
      </Button>
      <FocusTrap loop>
        <ColumnBase>
          <Paragraph mb={1}>
            フォーカスをFocusTrapコンポーネント内でループさせられます。
          </Paragraph>
          <Paragraph mb={1}>
            フォーカストラップを抜けるには、Escキーを押してください（この挙動はFocusTrapコンポーネントには実装されていません）
          </Paragraph>
          {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
          <div
            onKeyDown={(e) => {
              if (e.key === Keys.ESC && button5.current) {
                button5.current.focus();
              }
            }}
          >
            <Button mr={1} mb={1}>
              Button 2
            </Button>
            <Button mr={1} mb={1}>
              Button 3
            </Button>
            <Button mr={1} mb={1}>
              Button 4
            </Button>
          </div>
        </ColumnBase>
      </FocusTrap>
      <Button ref={button5} mt={1} onClick={() => button1.current?.focus()}>
        Button 5 (Click to focus on Button 1)
      </Button>
    </>
  );
};

export const CustomizedFocusOrder = () => {
  const button1 = React.useRef<HTMLButtonElement>(null);
  const button2 = React.useRef<HTMLButtonElement>(null);
  const button3 = React.useRef<HTMLButtonElement>(null);
  const button4 = React.useRef<HTMLButtonElement>(null);
  const button2a = React.useRef<HTMLButtonElement>(null);
  const button2c = React.useRef<HTMLButtonElement>(null);
  return (
    <>
      <Button ref={button1} mr={1} mb={1}>
        Button 1
      </Button>
      <FocusTrap
        inline
        onFocusInsideTop={() => {
          button1.current?.focus();
          return true;
        }}
        onFocusInsideBottom={() => {
          button2a.current?.focus();
          return true;
        }}
        onFocusOutsideBottom={() => {
          button2c.current?.focus();
          return true;
        }}
      >
        <Button ref={button2} mr={1} mb={1}>
          Button 2
        </Button>
      </FocusTrap>
      <Button ref={button3} mr={1} mb={1}>
        Button 3
      </Button>

      <FocusTrap
        onFocusInsideTop={() => {
          button2.current?.focus();
          return true;
        }}
        onFocusInsideBottom={() => {
          button3.current?.focus();
          return true;
        }}
        onFocusOutsideTop={() => {
          button4.current?.focus();
          return true;
        }}
        onFocusOutsideBottom={() => {
          button3.current?.focus();
          return true;
        }}
      >
        <ColumnBase>
          <Button mr={1} mb={1} ref={button2a}>
            Button 2-A
          </Button>
          <Button mr={1} mb={1}>
            Button 2-B
          </Button>
          <Button mr={1} mb={1} ref={button2c}>
            Button 2-C
          </Button>
        </ColumnBase>
      </FocusTrap>
      <Button ref={button4} mt={1}>
        Button 4
      </Button>
    </>
  );
};

export const NoFocusableElement = () => {
  const button1 = React.useRef<HTMLButtonElement>(null);
  const button2 = React.useRef<HTMLButtonElement>(null);
  return (
    <>
      <Button ref={button1} mb={1}>
        Button 1
      </Button>
      {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
      <div
        onKeyDown={(e) => {
          if (e.key === Keys.ESC && button2.current) {
            button2.current.focus();
          }
        }}
      >
        <FocusTrap loop>
          <ColumnBase>
            <Paragraph mb={1}>
              フォーカストラップを抜けるには、Escキーを押してください（この挙動はFocusTrapコンポーネントには実装されていません）
            </Paragraph>
            <Paragraph mb={1}>
              フォーカス可能な要素がない場合、コンポーネントの提供する要素にフォーカスが留まり続けます
            </Paragraph>
            <Button disabled mr={1}>
              disbled button（フォーカスできません）
            </Button>
            <TextField
              label="テキストフィールド"
              placeholder="disabled field （フォーカスできません）"
              disabled
              width="large"
            />
          </ColumnBase>
        </FocusTrap>
      </div>
      <Button ref={button2} mt={1} onClick={() => button1.current?.focus()}>
        Button 2 (Click to focus on Button 1)
      </Button>
    </>
  );
};

```

### src/lv1/a11y/FocusTrap.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { getFocusableElements } from '../../utilities/FocusableEelements';

type Props = {
  children: React.ReactNode;
  /** フォーカスをループさせるかどうか。`true` にすると、末尾までフォーカスが移動したあと、先頭に移動するようになります */
  loop?: boolean;
  /** display:inline-blockとなり、要素がspanになります */
  inline?: boolean;
  /** フォーカスが外側からコンポーネントの先端に到達した場合の処理です。 `true` を返した場合、コンポーネント内にフォーカスを移す処理を行いません。 */
  onFocusOutsideTop?: (event: React.FocusEvent) => void | boolean;
  /** フォーカスが外側からコンポーネントの後端に到達した場合の処理です。 `true` を返した場合、コンポーネント内にフォーカスを移す処理を行いません。 */
  onFocusOutsideBottom?: (event: React.FocusEvent) => void | boolean;
  /** フォーカスが内側からコンポーネントの先端に到達した場合の処理です。 `true` を返した場合、コンポーネント内にフォーカスを戻す処理を行いません。 */
  onFocusInsideTop?: (event: React.FocusEvent) => void | boolean;
  /** フォーカスが内側からコンポーネントの後端に到達した場合の処理です。 `true` を返した場合、コンポーネント内にフォーカスを戻す処理を行いません。 */
  onFocusInsideBottom?: (event: React.FocusEvent) => void | boolean;
} & CommonProps;

/**
 * フォーカストラップ（Tabキー/Shift+Tabキーによるフォーカス移動では脱出できない領域）を作るコンポーネントです
 *
 * フォーカストラップは、上手く作ればキーボードによる操作が効率化され、ユーザーの理解を助けることができます。
 * しかし、作り方が悪いとキーボードによる操作の完遂が不可能になってしまうことがあります。
 *
 * **フォーカストラップを作る場合は、慎重に設計とテストを行ってください**。
 * 特に、Tabキー、矢印キー、Escキーなどを使って、簡単かつユーザーが予想しやすい方法でフォーカストラップから脱出できるような仕組みを必ず用意してください
 * （[キーボード・トラップの回避](https://a11y-guidelines.freee.co.jp/categories/input_device.html#gl-input-device-no-trap)）。
 *
 * このコンポーネントは、単純なフォーカストラップのほか、先端/末尾から移動する際に特定の場所にフォーカスを移すような挙動や、
 * フォーカス順序を意図的にDOM上の順序とは変えるようなこともできます。
 *
 * `onFocusOutsideTop` `onFocusOutsideBottom` は、FocusTrap内へフォーカスが進入しようとした場合の処理を定義できます。
 * また、 `onFocusInsideTop` `onFocusInsideBottom` は、FocusTrapの外へフォーカスが脱出しようとした場合の処理を定義できます。
 * これらのコールバックが `true` を返す場合、FocusTrapコンポーネントはフォーカスを移動させる処理を行いません（通常はFocusTrap内の先頭または末尾の要素にフォーカスを移します）。
 * これらを使うことで、複雑な順序のフォーカス制御を行うことができます。
 *
 *
 */
export const FocusTrap: React.FC<Props> = ({
  children,
  loop,
  inline,
  onFocusOutsideTop,
  onFocusOutsideBottom,
  onFocusInsideTop,
  onFocusInsideBottom,
  ...props
}: Props) => {
  const ref = React.useRef<HTMLDivElement>(null);
  return React.createElement(
    inline ? 'span' : 'div',
    commonProps(props, 'vb-focusTrap', { inline }),
    <>
      <span
        // 外から来たときは先頭の要素にフォーカスさせる
        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
        tabIndex={0}
        onFocus={(e) => {
          if (onFocusOutsideTop && onFocusOutsideTop(e)) {
            return;
          }
          if (ref.current) {
            const focusable = getFocusableElements(ref.current);
            (focusable.length > 0
              ? (focusable[0] as HTMLElement)
              : ref.current
            ).focus();
          }
        }}
      />
      <span
        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
        tabIndex={0}
        onFocus={(e) => {
          if (onFocusInsideTop && onFocusInsideTop(e)) {
            return;
          }
          if (ref.current) {
            const focusable = getFocusableElements(ref.current);
            (focusable.length > 0
              ? ((loop
                  ? focusable[focusable.length - 1]
                  : focusable[0]) as HTMLElement)
              : ref.current
            ).focus();
          }
        }}
      />
      {React.createElement(
        inline ? 'span' : 'div',
        { tabIndex: -1, ref },
        children
      )}
      <span
        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
        tabIndex={0}
        onFocus={(e) => {
          if (onFocusInsideBottom && onFocusInsideBottom(e)) {
            return;
          }
          if (ref.current) {
            const focusable = getFocusableElements(ref.current);
            (focusable.length > 0
              ? ((loop
                  ? focusable[0]
                  : focusable[focusable.length - 1]) as HTMLElement)
              : ref.current
            ).focus();
          }
        }}
      />
      <span
        // 外から来たときは末尾の要素にフォーカスさせる
        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
        tabIndex={0}
        onFocus={(e) => {
          if (onFocusOutsideBottom && onFocusOutsideBottom(e)) {
            return;
          }
          if (ref.current) {
            const focusable = getFocusableElements(ref.current);
            (focusable.length > 0
              ? (focusable[focusable.length - 1] as HTMLElement)
              : ref.current
            ).focus();
          }
        }}
      />
    </>
  );
};

```

### src/lv1/a11y/VisuallyHidden.stories.tsx
```
typescript
import * as React from 'react';

import { text, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../buttons/Button';
import VisuallyHidden from './VisuallyHidden';

export default {
  component: VisuallyHidden,
};
export const WithKnobs = () => (
  <VisuallyHidden
    autoRead={boolean('autoRead', false, 'VisuallyHidden')}
    assertive={boolean('assertive', false, 'VisuallyHidden')}
    {...commonKnobs()}
  >
    {text(
      'Text',
      'これは見えないテキストです。視覚上の要素にはならないが、スクリーンリーダーでは読める必要のあるテキストがどうしても必要な場合に使用してください。',
      'VisuallyHidden'
    )}
  </VisuallyHidden>
);

//ここからは、 autoRead 機能をテストするためのあれこれ
type Props = Record<string, never>;
type State = {
  count: number;
};

//autoReadで読み上げるカウンター
class TestCounter extends React.Component<Props, State> {
  state = { count: 0 };
  constructor(props: Props) {
    super(props);
    this.handleCountUp = this.handleCountUp.bind(this);
  }

  handleCountUp() {
    this.setState((state) => {
      return { count: state.count + 1 };
    });
  }

  render() {
    return (
      <div>
        <VisuallyHidden
          autoRead={true}
          assertive={boolean('assertive', false, 'VisuallyHidden')}
          {...commonKnobs()}
        >
          カウンターは {this.state.count}です。
        </VisuallyHidden>
        <Button onClick={this.handleCountUp}>カウンター増やす</Button>
      </div>
    );
  }
}

export const AutoReadSample = () => <TestCounter />;

export const NotificationToScreenreaders = () => {
  const [message, setMessage] = React.useState<string>('');
  React.useEffect(() => {
    if (message) {
      // 連続で同じメッセージを読ませるために、メッセージがセットされたら適当な間隔を置いたあとで削除する
      const timeoutId = setTimeout(() => setMessage(''), 2000);
      return () => clearTimeout(timeoutId);
    }
  }, [message]);

  return (
    <>
      <Button onClick={() => setMessage('こんにちは、私の声は聞こえますか？')}>
        スクリーンリーダーに通知を読ませる
      </Button>
      {message && <VisuallyHidden autoRead>{message}</VisuallyHidden>}
    </>
  );
};

```

### src/lv1/a11y/VisuallyHidden.tsx
```
typescript
import * as React from 'react';
import { CommonProps, pickCommonProps } from '../../utilities/commonProps';
import styled from 'styled-components';
import { CommonStyle } from '../../internal/CommonStyle';

type Props = {
  children?: React.ReactNode;
  id?: string;
  autoRead?: boolean;
  assertive?: boolean;
} & CommonProps;

const VisuallyHiddenStyle = styled(CommonStyle).attrs(() => ({ as: 'div' }))`
  width: 1px;
  height: 1px;
  overflow: hidden;
  position: absolute;
  clip: rect(1px 1px 1px 1px);
`;

/**
 * 視覚的には見えないが、スクリーンリーダー等からは「見える」要素を提供します。
 * `autoRead` オプションを付けることで、 `aria-live="polite"` な、内部が書き変わったときに自動的に読み上げられる要素となります。
 */
const VisuallyHidden: React.FC<Props> = (props: Props) => {
  const { children, autoRead, id, assertive } = props;
  const live = autoRead ? (assertive ? 'assertive' : 'polite') : undefined;
  const atomic = live ? true : undefined; //自動で読む場合は必ずtrueにする。そうしないと、firefoxで差分だけの読み上げになってしまう(ほんとうはこっちの挙動が正しいのだけれど、chromeはaria-atomicを無視するので、互換性的に差分読み上げは使わない)

  // aria-liveで自動的にスクリーンリーダーが読むようにしたいが、aria-liveな要素の挿入と同時にコンテンツを入れるとNVDAでは読み上げてくれない
  // そこで最初のレンダリング時のみ 100ms ディレイさせて中に入れてやることで、無理矢理読ませている
  const [isInitialRender, setInitialRender] = React.useState(true);

  React.useEffect(() => {
    if (autoRead && isInitialRender) {
      const timeoutId = setTimeout(() => setInitialRender(false), 100);
      return () => {
        clearTimeout(timeoutId);
      };
    }
  }, [autoRead, isInitialRender]);

  return (
    <VisuallyHiddenStyle
      {...pickCommonProps(props)}
      id={id}
      aria-live={live}
      aria-atomic={atomic}
    >
      {/* 初回レンダー時、autoReadならchildrenを入れない。useEffect内のsetTimeoutで100ms遅らせる。 */}
      {isInitialRender && autoRead ? false : children}
    </VisuallyHiddenStyle>
  );
};

export default VisuallyHidden;

```

### src/lv1/bases/Balloon.stories.tsx
```
typescript
import * as React from 'react';

import { select, boolean } from '@storybook/addon-knobs';
import Balloon, { BalloonInternal } from './Balloon';
import { commonKnobs } from '../../../stories';

export default {
  component: BalloonInternal,
};
export const BaloonComponent = () => (
  <div
    style={{
      width: '60rem',
      marginTop: '6rem',
      marginRight: 'auto',
      marginLeft: 'auto',
      position: 'relative',
    }}
  >
    <Balloon
      small={boolean('Small', false, 'Balloon')}
      border={
        select(
          'Border',
          {
            none: '',
            default: 'default',
            notice: 'notice',
            alert: 'alert',
            success: 'success',
          },
          '',
          'Balloon'
        ) || undefined // none時にundefinedにしたいが、selectのoptionにundefinedを渡せないので空文字を||でundefinedにしている
      }
      position={select(
        'Position',
        {
          center: 'center',
          left: 'left',
          right: 'right',
        },
        'center',
        'Balloon'
      )}
      verticalPosition={
        select(
          'verticalPosition',
          { top: 'top', bottom: 'bottom', none: '' },
          '',
          'Balloon'
        ) || undefined
      }
      {...commonKnobs()}
    >
      バルーンはツールチップやシステムメッセージなどに利用できます
    </Balloon>
  </div>
);

```

### src/lv1/bases/Balloon.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  small?: boolean;
  border?: 'default' | 'alert' | 'notice' | 'success';
  position?: 'left' | 'right' | 'center';
  verticalPosition?: 'top' | 'bottom';
} & MarginClassProps &
  CommonProps;

/**
 * バルーンはツールチップやシステムメッセージなどに利用できます
 */
export const BalloonInternal: React.ForwardRefRenderFunction<
  HTMLDivElement,
  Props
> = (props: Props, ref?: React.Ref<HTMLDivElement>) => {
  const {
    children,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    border,
    position,
    verticalPosition,
    marginSize,
  } = props;
  const classModifiers = {
    small,
    'border-default': border === 'default',
    'border-alert': border === 'alert',
    'border-notice': border === 'notice',
    'border-success': border === 'success',
    left: position === 'left',
    right: position === 'right',
    top: verticalPosition === 'top',
    bottom: verticalPosition === 'bottom',
  };

  return (
    // eslint-disable-next-line jsx-a11y/no-static-element-interactions
    <div
      {...commonProps(props, 'vb-balloon', classModifiers, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
      // フォーカスを受けられるようにtabIndex=-1にしているが、クリック時にフォーカスしてしまうため、mousedownを抑止する
      onMouseDown={(e: React.MouseEvent<HTMLHeadElement>) => e.preventDefault()}
      tabIndex={-1}
      ref={ref}
    >
      {children}
    </div>
  );
};

const Balloon = React.forwardRef(BalloonInternal);
export default Balloon;

```

### src/lv1/bases/CardBase.stories.tsx
```
typescript
import * as React from 'react';

import CardBase from './CardBase';
import Paragraph from '../typography/Paragraph';
import { commonKnobs } from '../../../stories';
import { boolean, text, select } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { VibesProvider } from '../../utilities';

export default {
  component: CardBase,
};
export const CardBaseComponent = () => (
  <CardBase
    small={boolean('Small', false, 'CardBase')}
    inline={boolean('Inline', false, 'CardBase')}
    clickable={boolean('Clickable', false, 'CardBase')}
    url={text('URL', '', 'CardBase')}
    target={text('Target', '', 'CardBase')}
    rel={text('Rel', '', 'CardBase')}
    paddingSize={
      select(
        'PaddingSize',
        { none: '', small: 'small', large: 'large', zero: 'zero' },
        '',
        'CardBase'
      ) || undefined
    }
    onClick={action('click')}
    onSelfWindowNavigation={action('selfWindowNavigation')}
    {...commonKnobs()}
  >
    カードベースはグルーピングされた要素を表示するときに使用するパーツです。
    <br />
    同等のグルーピングが複数並ぶ場合、例えばコレクションにおけるひとつのオブジェクトであったり、設定における複数カテゴリを同じ画面で並べる場合に用います。{' '}
    <br />
    周囲に24dpのpaddingが入ります。
  </CardBase>
);

export const Clickable = () => (
  <CardBase
    clickable
    small={boolean('Small', false, 'CardBase')}
    inline={boolean('Inline', false, 'CardBase')}
    url={text('URL', '', 'CardBase')}
    target={text('Target', '', 'CardBase')}
    rel={text('Rel', '', 'CardBase')}
    paddingSize={
      select(
        'PaddingSize',
        {
          none: '',
          small: 'small',
          medium: 'medium',
          large: 'large',
          zero: 'zero',
        },
        '',
        'CardBase'
      ) || undefined
    }
    onClick={action('click')}
    onSelfWindowNavigation={action('selfWindowNavigation')}
  >
    クリッカブルなCardBaseです。URLを渡すとリンクになり、そうでない場合はボタンになります。
  </CardBase>
);

export const PaddingSizeOption = () => (
  <>
    <CardBase mb={1}>default (1.5rem = 24px)</CardBase>
    <CardBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </CardBase>
    <CardBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </CardBase>
    <CardBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </CardBase>
    <CardBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </CardBase>
  </>
);
export const ResponsivePaddingSize = () => (
  <VibesProvider fixedLayout={false}>
    <CardBase mb={1}>
      default (デスクトップ向けは1.5rem = 24px、モバイル向けは左右が1rem = 16px)
    </CardBase>
    <CardBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </CardBase>
    <CardBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </CardBase>
    <CardBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </CardBase>
    <CardBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </CardBase>
  </VibesProvider>
);
export const InlineOption = () => (
  <>
    <Paragraph>
      inline propを使用すると、
      <CardBase inline paddingSize="small" ml={0.5} mr={0.5}>
        こんなふうに
      </CardBase>
      display:inline の表示になります
    </Paragraph>
  </>
);

export const Disabled = () => (
  <CardBase
    small={boolean('Small', false, 'CardBase')}
    inline={boolean('Inline', false, 'CardBase')}
    clickable={boolean('Clickable', false, 'CardBase')}
    disabled={boolean('disabled', true, 'CardBase')}
    url={text('URL', '', 'CardBase')}
    target={text('Target', '', 'CardBase')}
    rel={text('Rel', '', 'CardBase')}
    paddingSize={
      select(
        'PaddingSize',
        { none: '', small: 'small', large: 'large', zero: 'zero' },
        '',
        'CardBase'
      ) || undefined
    }
    onClick={action('click')}
    onSelfWindowNavigation={action('selfWindowNavigation')}
    {...commonKnobs()}
  >
    これはdisabled
  </CardBase>
);

```

### src/lv1/bases/CardBase.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';
import { useResponsive } from '../../utilities/VibesProvider';

import { BaseComponentProps } from './types';

type Props = {
  children?: React.ReactNode;
  clickable?: boolean;
  disabled?: boolean;
  url?: string;
  target?: string;
  rel?: string;
  onClick?: React.MouseEventHandler;
  /**
   * `true` にすると、`overflow: hidden;`が指定されます。`CardBase`内で`Portal`を利用していない`DropDown`があった場合、`overflow: hidden;`によって見切れてしまう問題が発生しているので、それを避けるために暫定的にオンオフできるようにしています。デフォルトは`true`です。
   */
  overflowHidden?: boolean;
} & BaseComponentProps &
  SelfWindowNavigationProp &
  CommonProps &
  MarginClassProps;

/**
 * グルーピングされた要素を表示するときに使用するパーツです。
 *
 * 同等のグルーピングが複数並ぶ場合、例えばコレクションにおけるひとつのオブジェクトであったり、設定における複数カテゴリを同じ画面で並べる場合に用います。
 *
 * 周囲に24dpのpaddingが入ります。
 *
 * - `DialogBase` や `PopupBase` との混同に注意してください。
 *   - ポップアップコンテンツ（ドロップダウンメニューやコンボボックス等）に使用するべきなのは `PopupBase` です
 *   - モーダルダイアログに使用するべきなのは `DialogBase` です
 *   - `CardBase` は、これらとはシャドウのスタイルが違います。
 * - カード自体をクリック可能にする場合（ボタンやリンクとして使用する場合）は、`clickable` を `true` にしてください
 *   - react-router 等を使用している場合は、遷移時の処理を `onSelfWindowNavigation` に指定してください
 */
const CardBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    paddingSize,
    inline,
    clickable,
    disabled,
    url,
    target,
    rel,
    onClick,
    overflowHidden = true,
    onSelfWindowNavigation,
    marginBottom,
    marginLeft,
    marginRight,
    marginSize,
    marginTop,
  } = props;

  const className = 'vb-cardBase';

  return (
    <div
      {...commonProps(
        props,
        className,
        {
          paddingSmall: small || paddingSize === 'small',
          paddingZero: paddingSize === 'zero',
          paddingLarge: paddingSize === 'large',
          // レスポンシブなpaddingの変更は、inlineでなく、paddingSizeが無指定の場合のみ行う
          paddingResponsive:
            useResponsive() && !inline && !small && !paddingSize,
          inline,
          disabled,
          clickable,
          overflowHidden,
        },
        { marginBottom, marginLeft, marginTop, marginSize, marginRight }
      )}
    >
      {clickable ? (
        url ? (
          <a
            className={`${className}__link${
              disabled ? ` ${className}__link--disabled` : ''
            }`}
            href={url}
            target={target}
            rel={
              rel
                ? rel
                : target === '_blank'
                ? 'noopener noreferrer'
                : undefined
            }
            aria-disabled={disabled}
            onClick={(e: React.MouseEvent<HTMLAnchorElement>) => {
              if (disabled) {
                e.preventDefault();
                return;
              }
              if (onClick) {
                onClick(e);
              }
              const navigator = selfWindowNavigator(onSelfWindowNavigation);
              if (navigator) {
                navigator(e, url);
              }
            }}
          >
            <div className={`${className}__content`}>{children}</div>
          </a>
        ) : (
          <button
            className={`${className}__button${
              disabled ? ` ${className}__button--disabled` : ''
            }`}
            onClick={onClick}
            disabled={disabled}
          >
            <div className={`${className}__content`}>{children}</div>
          </button>
        )
      ) : (
        children
      )}
    </div>
  );
};

export default CardBase;

```

### src/lv1/bases/ColumnBase.stories.tsx
```
typescript
import * as React from 'react';

import ColumnBase from './ColumnBase';
import Paragraph from '../typography/Paragraph';
import { select, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { VibesProvider } from '../../utilities';

export default {
  component: ColumnBase,
};
export const ColumnBaseComonent = () => (
  <ColumnBase
    small={boolean('Small', false, 'ColumnBase')}
    rounded={boolean('Rounded', false, 'ColumnBase')}
    inline={boolean('Inline', false, 'ColumnBase')}
    border={
      select(
        'Border',
        {
          none: '',
          default: 'default',
          notice: 'notice',
          alert: 'alert',
          success: 'success',
        },
        '',
        'ColumnBase'
      ) || undefined // none時にundefinedにしたいが、selectのoptionにundefinedを渡せないので空文字を||でundefinedにしている
    }
    paddingSize={
      select(
        'PaddingSize',
        {
          none: '',
          small: 'small',
          medium: 'medium',
          large: 'large',
          zero: 'zero',
        },
        '',
        'ColumnBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    コラムベースはタブやディバイダーなどで区切られたコンテンツを埋め込むための領域です。
    <br />
    周囲に24dpのpaddingが入ります。注釈などにも使うことができます。
  </ColumnBase>
);

export const PaddingSizeOption = () => (
  <>
    <ColumnBase mb={1}>default (1.5rem = 24px)</ColumnBase>
    <ColumnBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </ColumnBase>
    <ColumnBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </ColumnBase>
    <ColumnBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </ColumnBase>
    <ColumnBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </ColumnBase>
  </>
);

export const ResponsivePaddingSize = () => (
  <VibesProvider fixedLayout={false}>
    <ColumnBase mb={1}>
      default (デスクトップ向けは1.5rem = 24px、モバイル向けは左右が1rem = 16px)
    </ColumnBase>
    <ColumnBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </ColumnBase>
    <ColumnBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </ColumnBase>
    <ColumnBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </ColumnBase>
    <ColumnBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </ColumnBase>
  </VibesProvider>
);

export const BorderOption = () => (
  <>
    <ColumnBase mb={1}>without border prop</ColumnBase>
    <ColumnBase border="default" mb={1}>
      border=&quot;default&quot;
    </ColumnBase>
    <ColumnBase border="alert" mb={1}>
      border=&quot;alert&quot;
    </ColumnBase>
    <ColumnBase border="notice" mb={1}>
      border=&quot;notice&quot;
    </ColumnBase>
    <ColumnBase border="success" mb={1}>
      border=&quot;success&quot;
    </ColumnBase>
  </>
);

export const InlineOption = () => (
  <>
    <Paragraph>
      inline propを使用すると、
      <ColumnBase inline paddingSize="small" ml={0.5} mr={0.5}>
        こんなふうに
      </ColumnBase>
      display:inline の表示になります
    </Paragraph>
  </>
);

export const RoundedOption = () => (
  <>
    <ColumnBase mb={1} rounded>
      rounded 左右に余白があるときに使用推奨です
    </ColumnBase>
    <ColumnBase>not rounded 横幅いっぱいにするときに使用推奨です</ColumnBase>
  </>
);

```

### src/lv1/bases/ColumnBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { BaseComponentBorderProps, BaseComponentProps } from './types';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children?: React.ReactNode;
  /**
   * `true` にすると、`border-radius`が指定されます
   */
  rounded?: boolean;
  /**
   * `true` にすると、`overflow: hidden;`が指定されます。`ColumnBase`内で`Portal`を利用していない`DropDown`があった場合、`overflow: hidden;`によって見切れてしまう問題が発生しているので、それを避けるために暫定的にオンオフできるようにしています。デフォルトは`true`です。
   */
  overflowHidden?: boolean;
} & BaseComponentProps &
  BaseComponentBorderProps &
  MarginClassProps &
  CommonProps;

/**
 * ColumnBaseは区切られたコンテンツを埋め込むための領域です。
 *
 * * `rounded` propによってColumnBaseに`border-radius`を指定できます
 *   * ColumnBaseの周囲に余白がある際は`rounded`propを使用することを推奨します
 *   * `border` propを使用する場合は周囲に余白があるはずなので、 `rounded` propを使用しなくても`border-radius`が指定されます
 */
const ColumnBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    rounded,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    border,
    inline,
    overflowHidden = true,
    paddingSize,
  } = props;
  const classModifiers = {
    inline,
    overflowHidden,
    rounded: rounded || !!border,
    borderDefault: border === 'default',
    borderAlert: border === 'alert',
    borderNotice: border === 'notice',
    borderSuccess: border === 'success',
    paddingSmall: small || paddingSize === 'small',
    paddingLarge: paddingSize === 'large',
    paddingZero: paddingSize === 'zero',
    // レスポンシブなpaddingの変更は、inlineでなく、paddingSizeが無指定の場合のみ行う
    paddingResponsive: useResponsive() && !inline && !small && !paddingSize,
  };

  return (
    <div
      {...commonProps(props, 'vb-columnBase', classModifiers, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </div>
  );
};

export default ColumnBase;

```

### src/lv1/bases/Container.stories.tsx
```
typescript
import * as React from 'react';

import Container from './Container';
import ContentsBase from './ContentsBase';
import { select, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: Container,
};
export const ContainerComponent = () => (
  <Container
    width={
      select(
        'width',
        { none: '', narrow: 'narrow', normal: 'normal', wide: 'wide' },
        '',
        'Container'
      ) || undefined
    }
    responsive={boolean('responsive', false, 'Container')}
    {...commonKnobs()}
  >
    <div>Containerコンポーネントはwidthと中央寄せが設定された大枠です。</div>
  </Container>
);

export const Widths = () => (
  <>
    <Container width="normal" mb={1}>
      <ContentsBase>normal</ContentsBase>
    </Container>
    <Container width="wide" mb={1}>
      <ContentsBase>wide</ContentsBase>
    </Container>
    <Container width="narrow" mb={1}>
      <ContentsBase>narrow</ContentsBase>
    </Container>
    <Container width="normal" responsive mb={1}>
      <ContentsBase>normal responsive</ContentsBase>
    </Container>
    <Container width="wide" responsive mb={1}>
      <ContentsBase>wide resiponsive</ContentsBase>
    </Container>
    <Container width="narrow" responsive mb={1}>
      <ContentsBase>narrow responsive</ContentsBase>
    </Container>
  </>
);

```

### src/lv1/bases/Container.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children: React.ReactNode;
  width?: 'normal' | 'narrow' | 'wide';
  responsive?: boolean;
} & MarginClassProps &
  CommonProps;

/**
 * Containerはコンテンツ領域全体（本文）を囲み、widthをnarrow/normal/wideで設定することができます
 * ＊コンテンツ領域全体（本文）はその画面の中心的な内容となり、Header/GlobalNavi/Footerを除く全体となります。（参考：[MDN}(https://developer.mozilla.org/ja/docs/Web/HTML/Element/main))
 *
 * ## accessibility
 * Containerはmain要素も含んでいます。（実装を確認ください）
 * もし、Containerが使われない場合には、main要素でコンテンツ領域全体（本文）を囲むよう同等の役割を果たす実装してください
 */

const Container: React.FC<Props> = (props: Props) => {
  const {
    children,
    width,
    responsive,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  return (
    <main
      {...commonProps(
        props,
        'vb-container',
        {
          responsive: useResponsive(responsive),
          widthNarrow: width === 'narrow',
          widthWide: width === 'wide',
        },
        { marginBottom, marginLeft, marginRight, marginSize, marginTop }
      )}
      role="main"
    >
      {children}
    </main>
  );
};

export default Container;

```

### src/lv1/bases/ContentsBase.stories.tsx
```
typescript
import * as React from 'react';

import ContentsBase from './ContentsBase';
import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';

export default {
  component: ContentsBase,
};
export const ContentsBaseComponent = () => (
  <ContentsBase
    paddingSize={
      select(
        'PaddingSize',
        { none: '', small: 'small', large: 'large' },
        '',
        'ContentsBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <div>ContentsBaseは背景色が設定されたコンテンツエリアの地色です。</div>
  </ContentsBase>
);

```

### src/lv1/bases/ContentsBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children: React.ReactNode;
  paddingSize?: 'small' | 'large';
} & MarginClassProps &
  CommonProps;

const ContentsBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    paddingSize,
  } = props;
  const baseClass = 'vb-contentsBase';
  const classModifiers = {
    responsive: useResponsive(),
    'padding-small': paddingSize === 'small',
    'padding-large': paddingSize === 'large',
  };

  return (
    <section
      {...commonProps(props, baseClass, classModifiers, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </section>
  );
};

export default ContentsBase;

```

### src/lv1/bases/DialogBase.stories.tsx
```
typescript
import * as React from 'react';

import DialogBase from './DialogBase';
import Paragraph from '../typography/Paragraph';
import { commonKnobs } from '../../../stories';
import { select, boolean } from '@storybook/addon-knobs';

export default {
  component: DialogBase,
};
export const DialogBaseComponent = () => (
  <DialogBase
    small={boolean('Small', false, 'DialogBase')}
    inline={boolean('Inline', false, 'DialogBase')}
    border={
      select(
        'Border',
        {
          none: '',
          default: 'default',
          notice: 'notice',
          alert: 'alert',
          success: 'success',
        },
        '',
        'DialogBase'
      ) || undefined // none時にundefinedにしたいが、selectのoptionにundefinedを渡せないので空文字を||でundefinedにしている
    }
    paddingSize={
      select(
        'PaddingSize',
        {
          none: '',
          small: 'small',
          medium: 'medium',
          large: 'large',
          zero: 'zero',
        },
        '',
        'DialogBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    ダイアログベースは浮き上がるウインドウを配置するための領域です。
    <br />
    周囲に24dpのpaddingが入り、モーダルなどに使うことができます。
  </DialogBase>
);

export const PaddingSizeOption = () => (
  <>
    <DialogBase mb={1}>default (1.5rem = 24px)</DialogBase>
    <DialogBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </DialogBase>
    <DialogBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </DialogBase>
    <DialogBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </DialogBase>
    <DialogBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </DialogBase>
  </>
);

export const BorderOption = () => (
  <>
    <DialogBase mb={1}>without border prop</DialogBase>
    <DialogBase border="default" mb={1}>
      border=&quot;default&quot;
    </DialogBase>
    <DialogBase border="alert" mb={1}>
      border=&quot;alert&quot;
    </DialogBase>
    <DialogBase border="notice" mb={1}>
      border=&quot;notice&quot;
    </DialogBase>
    <DialogBase border="success" mb={1}>
      border=&quot;success&quot;
    </DialogBase>
  </>
);

export const InlineOption = () => (
  <>
    <Paragraph>
      inline propを使用すると、
      <DialogBase inline paddingSize="small" ml={0.5} mr={0.5}>
        こんなふうに
      </DialogBase>
      display:inline の表示になります
    </Paragraph>
  </>
);

```

### src/lv1/bases/DialogBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { BaseComponentBorderProps, BaseComponentProps } from './types';

type Props = {
  children?: React.ReactNode;
  /**
   * メッセージダイアログ・確認ダイアログの場合にz-indexを高いものにするためのオプションです。
   * `true` にすることでz-indexが大きくなります
   */
  message?: boolean;
} & BaseComponentProps &
  BaseComponentBorderProps &
  MarginClassProps &
  CommonProps;

/**
 * モーダルウィンドウに使用するコンポーネントです。
 *
 * - **z-indexが指定されているため注意が必要です**
 * - `CardBase` や `PopupBase` との混同に注意してください。
 *   - ポップアップコンテンツ（ドロップダウンメニューやコンボボックス等）に使用するべきなのは `PopupBase` です
 *   - 作ろうとしているものがモーダルダイアログでも、ポップアップコンテンツでもない場合は、`CardBase` を使用してください
 */
const DialogBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    message,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    border,
    inline,
    paddingSize,
  } = props;
  const baseClass = 'vb-dialogBase';
  const classModifiers = {
    inline,
    message,
    borderDefault: border === 'default',
    borderAlert: border === 'alert',
    borderNotice: border === 'notice',
    borderSuccess: border === 'success',
    paddingSmall: small || paddingSize === 'small',
    paddingLarge: paddingSize === 'large',
    paddingZero: paddingSize === 'zero',
  };

  return (
    <div
      {...commonProps(props, baseClass, classModifiers, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </div>
  );
};

export default DialogBase;

```

### src/lv1/bases/FloatingBase.stories.tsx
```
typescript
import * as React from 'react';

import FloatingBase from './FloatingBase';
import Paragraph from '../typography/Paragraph';
import { select, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../buttons/Button';
import TaskDialog from '../../lv2/dialogs/TaskDialog';

export default {
  component: FloatingBase,
};
export const FloatingBaseComponent = () => (
  <FloatingBase
    small={boolean('Small', false, 'FloatingBase')}
    inline={boolean('Inline', false, 'FloatingBase')}
    fitContent={boolean('fitContent', false, 'FloatingBase')}
    border={
      select(
        'Border',
        {
          none: '',
          default: 'default',
          notice: 'notice',
          alert: 'alert',
          success: 'success',
        },
        '',
        'FloatingBase'
      ) || undefined // none時にundefinedにしたいが、selectのoptionにundefinedを渡せないので空文字を||でundefinedにしている
    }
    paddingSize={
      select(
        'PaddingSize',
        {
          none: '',
          small: 'small',
          medium: 'medium',
          large: 'large',
          zero: 'zero',
        },
        '',
        'FloatingBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    FloatingBaseは浮き上がるコンテンツを配置するための領域です。
    <br />
    周囲に24dpのpaddingが入り、メニューなどに使うことができます。
  </FloatingBase>
);

export const PaddingSizeOption = () => (
  <>
    <FloatingBase mb={1}>default (1.5rem = 24px)</FloatingBase>
    <FloatingBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </FloatingBase>
    <FloatingBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </FloatingBase>
    <FloatingBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </FloatingBase>
    <FloatingBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </FloatingBase>
  </>
);

export const BorderOption = () => (
  <>
    <FloatingBase mb={1}>without border prop</FloatingBase>
    <FloatingBase border="default" mb={1}>
      border=&quot;default&quot;
    </FloatingBase>
    <FloatingBase border="alert" mb={1}>
      border=&quot;alert&quot;
    </FloatingBase>
    <FloatingBase border="notice" mb={1}>
      border=&quot;notice&quot;
    </FloatingBase>
    <FloatingBase border="success" mb={1}>
      border=&quot;success&quot;
    </FloatingBase>
  </>
);

export const InlineOption = () => (
  <>
    <Paragraph>
      inline propを使用すると、
      <FloatingBase inline paddingSize="small" ml={0.5} mr={0.5}>
        こんなふうに
      </FloatingBase>
      display:inline の表示になります
    </Paragraph>
  </>
);

export const DialogOnPopup = () => {
  const [isOpen, setIsOpen] = React.useState<boolean>(false);
  return (
    <>
      <FloatingBase>
        <Button onClick={() => setIsOpen(true)}>open dialog</Button>
      </FloatingBase>
      <TaskDialog
        title="ダイアログ"
        onRequestClose={() => setIsOpen(false)}
        closeButtonLabel={'閉じる'}
        isOpen={isOpen}
      >
        ポップアップの上にダイアログを配置することができます
      </TaskDialog>
    </>
  );
};

```

### src/lv1/bases/FloatingBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { BaseComponentBorderProps, BaseComponentProps } from './types';

type Props = {
  children?: React.ReactNode;
} & BaseComponentProps &
  BaseComponentBorderProps &
  MarginClassProps &
  CommonProps;
/**
 * PopupBaseと同様にポップアップコンテンツに使用するコンポーネントです。
 *
 * - **z-indexが指定されているため注意が必要です**
 * - z-index: 500;
 *   - FloatingBase（z-index: 500) < DialogBase（z-index: 1000) < PopupBase（z-index: 2000) となります。
 *   - ポップアップからダイアログが出てくるようなコンポーネントはPopupBaseでは実現できないのでFloatingBaseを使用して下さい
 */
const FloatingBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    border,
    inline,
    fitContent,
    paddingSize,
  } = props;
  const baseClass = 'vb-floatingBase';

  const classModifiers = {
    inline,
    fitContent,
    borderDefault: border === 'default',
    borderAlert: border === 'alert',
    borderNotice: border === 'notice',
    borderSuccess: border === 'success',
    paddingSmall: small || paddingSize === 'small',
    paddingLarge: paddingSize === 'large',
    paddingZero: paddingSize === 'zero',
  };

  return (
    <div
      {...commonProps(props, baseClass, classModifiers, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </div>
  );
};

export default FloatingBase;

```

### src/lv1/bases/MarginBase.stories.tsx
```
typescript
import * as React from 'react';

import MarginBase from './MarginBase';
import { boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import ColumnBase from './ColumnBase';

export default {
  component: MarginBase,
};
export const MarginBaseComponent = () => (
  <MarginBase
    fitContent={boolean('FitContent', false, 'MarginBase')}
    marginTop={boolean('MarginTop (deprecated)', false, 'MarginBase')}
    marginLeft={boolean('MarginLeft (deprecated)', false, 'MarginBase')}
    marginRight={boolean('MarginRight (deprecated)', false, 'MarginBase')}
    marginBottom={boolean('MarginBottom (deprecated)', false, 'MarginBase')}
    marginSize={
      select(
        'MarginSize (deprecated)',
        {
          xSmall: 'xSmall',
          small: 'small',
          medium: '',
          large: 'large',
          xLarge: 'xLarge',
          xxLarge: 'xxLarge',
        },
        '',
        'MarginBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    MarginBaseは、マージンをつけるためのボックスです
  </MarginBase>
);

export const Fitcontent = () => (
  <MarginBase fitContent>
    <ColumnBase fitContent>
      fitContentを使用すると、コンテンツに合わせた大きさになります
    </ColumnBase>
  </MarginBase>
);

export const FunctionalMarginProps = () => (
  <>
    <MarginBase ml={1} mr={1.5}>
      <ColumnBase>ml=1, mr={1.5}</ColumnBase>
    </MarginBase>

    <MarginBase mt={2} mb={3}>
      <ColumnBase>mt=2, mb=3</ColumnBase>
    </MarginBase>
  </>
);

export const DeprecatedMarginProps = () => (
  <>
    <MarginBase marginLeft marginRight>
      <ColumnBase>marginLeft, marginRight</ColumnBase>
    </MarginBase>
    <MarginBase marginTop marginBottom marginSize="large">
      <ColumnBase>marginTop marginBottom marginSize=large</ColumnBase>
    </MarginBase>
    <MarginBase marginLeft marginRight marginBottom marginSize="xSmall">
      <ColumnBase>
        marginLeft marginRight marginBottom marginSize=xSmall
      </ColumnBase>
    </MarginBase>
    <MarginBase marginLeft marginRight marginBottom marginSize="small">
      <ColumnBase>
        marginLeft marginRight marginBottom marginSize=small
      </ColumnBase>
    </MarginBase>
    <MarginBase marginLeft marginRight marginBottom marginSize="large">
      <ColumnBase>
        marginLeft marginRight marginBottom marginSize=large
      </ColumnBase>
    </MarginBase>
    <MarginBase marginLeft marginRight marginBottom marginSize="xLarge">
      <ColumnBase>
        marginLeft marginRight marginBottom marginSize=xLarge
      </ColumnBase>
    </MarginBase>
    <MarginBase marginLeft marginRight marginBottom marginSize="xxLarge">
      <ColumnBase>
        marginLeft marginRight marginBottom marginSize=xxLarge
      </ColumnBase>
    </MarginBase>
  </>
);

```

### src/lv1/bases/MarginBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { FitContentProps } from './types';
import { CommonStyleWithDeprecatedMarginProps } from '../../internal/CommonStyle';
import styled from 'styled-components';

type Props = {
  children?: React.ReactNode;
} & FitContentProps &
  MarginClassProps &
  CommonProps;

/**
 * マージンをつけるためのボックスです。
 */

const Style = styled(CommonStyleWithDeprecatedMarginProps).attrs(
  ({ fitContent }: FitContentProps) => ({
    as: 'div',
    fitContent,
  })
)`
  ${({ fitContent }: FitContentProps) => ({
    font: 'inherit',
    maxWidth: fitContent ? 'fit-content' : undefined,
  })}
`;

const MarginBase: React.FC<Props> = (props: Props) => <Style {...props} />;

export default MarginBase;

```

### src/lv1/bases/NegativeContentsBase.stories.tsx
```
typescript
import * as React from 'react';

import { NegativeContentsBase } from './NegativeContentsBase';
import ContentsBase from './ContentsBase';
import ColumnBase from './ColumnBase';
import Paragraph from '../typography/Paragraph';
import { VibesProvider } from '../../utilities';
import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';

export default {
  component: NegativeContentsBase,
};
export const NegativeContentsBaseComponent = () => (
  <NegativeContentsBase
    contentsBasePaddingSize={
      select(
        'contentsBasePaddingSize',
        { none: '', small: 'small', large: 'large' },
        '',
        'NegativeContentsBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <div>ContentsBaseを打ち消す専用のコンポーネントです。</div>
  </NegativeContentsBase>
);

export const Examples = () => {
  const paddingSize = select(
    'contentsBasePaddingSize',
    { none: '', small: 'small', large: 'large' },
    '',
    'NegativeContentsBase'
  );
  return (
    <ContentsBase paddingSize={paddingSize || undefined}>
      <Paragraph mb={1}>ContentsBaseにはPaddingがついています</Paragraph>
      <NegativeContentsBase
        contentsBasePaddingSize={paddingSize || undefined}
        mb={1}
      >
        <ColumnBase>
          <Paragraph>
            こういう感じでColumnBaseやListTableをContentsBase内で両サイド突き抜けて使いたい場合に使用します
          </Paragraph>
        </ColumnBase>
      </NegativeContentsBase>

      <NegativeContentsBase
        contentsBasePaddingSize={paddingSize || undefined}
        mb={1}
      >
        <ColumnBase>
          <Paragraph>
            paddingSizeにはContentsBaseへの指定と同じものを指定してください
          </Paragraph>
        </ColumnBase>
      </NegativeContentsBase>
      <NegativeContentsBase contentsBasePaddingSize={paddingSize || undefined}>
        <ColumnBase>
          <Paragraph>
            最後に置いた場合には下方向にもネガティブマージンがつきます
          </Paragraph>
        </ColumnBase>
      </NegativeContentsBase>
    </ContentsBase>
  );
};

export const Responsive = () => {
  const paddingSize = select(
    'contentsBasePaddingSize',
    { none: '', small: 'small', large: 'large' },
    '',
    'NegativeContentsBase'
  );
  return (
    <VibesProvider fixedLayout={false}>
      <ContentsBase paddingSize={paddingSize || undefined}>
        <Paragraph mb={1}>ContentsBaseにはPaddingがついています</Paragraph>
        <NegativeContentsBase
          contentsBasePaddingSize={paddingSize || undefined}
          mb={1}
        >
          <ColumnBase>
            <Paragraph>
              こういう感じでColumnBaseやListTableをContentsBase内で両サイド突き抜けて使いたい場合に使用します
            </Paragraph>
          </ColumnBase>
        </NegativeContentsBase>

        <NegativeContentsBase
          contentsBasePaddingSize={paddingSize || undefined}
          mb={1}
        >
          <ColumnBase>
            <Paragraph>
              paddingSizeにはContentsBaseへの指定と同じものを指定してください
            </Paragraph>
          </ColumnBase>
        </NegativeContentsBase>
        <NegativeContentsBase
          contentsBasePaddingSize={paddingSize || undefined}
        >
          <ColumnBase>
            <Paragraph>
              最後に置いた場合には下方向にもネガティブマージンがつきます
            </Paragraph>
          </ColumnBase>
        </NegativeContentsBase>
      </ContentsBase>
    </VibesProvider>
  );
};

```

### src/lv1/bases/NegativeContentsBase.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children: React.ReactNode;
  contentsBasePaddingSize?: 'small' | 'large';
} & CommonProps;

/**
 * `ContentsBase` のpaddingを打ち消すための専用コンポーネントです。 `ContentsBase` の左右のpaddingを打ち消します。末尾に置いた場合（ `:last-child` となる場合）には下方向のmarginを打ち消します。
 *
 * * 必ず `ContentsBase` の直下に配置してください（下側のマージンの打ち消しのため）
 * * `ContentsBase` に `paddingSize` を指定している場合は、`contentsBasePaddingSize` にそれと同じ値をセットしてください
 */
export const NegativeContentsBase: React.FC<Props> = (props: Props) => {
  const { children, contentsBasePaddingSize } = props;
  const baseClass = 'vb-negativeContentsBase';
  const classModifiers = {
    responsive: useResponsive(),
    negativeMarginSmall: contentsBasePaddingSize === 'small',
    negativeMarginLarge: contentsBasePaddingSize === 'large',
  };

  return (
    <div {...commonProps(props, baseClass, classModifiers)}>{children}</div>
  );
};

```

### src/lv1/bases/NegativeMarginBase.stories.tsx
```
typescript
import * as React from 'react';

import NegativeMarginBase from './NegativeMarginBase';
import Container from './Container';
import ColumnBase from './ColumnBase';
import { commonKnobs } from '../../../stories';
import { boolean, select } from '@storybook/addon-knobs';

export default {
  component: NegativeMarginBase,
};
export const NegativeMarginBaseComponent = () => (
  <NegativeMarginBase
    top={boolean('MarginTop (deprecated)', true, 'NegativeMarginBase')}
    left={boolean('MarginLeft (deprecated)', true, 'NegativeMarginBase')}
    right={boolean('MarginRight (deprecated)', true, 'NegativeMarginBase')}
    bottom={boolean('MarginBottom (deprecated)', true, 'NegativeMarginBase')}
    marginSize={select(
      'MarginSize',
      { small: 'small', medium: 'medium', large: 'large' },
      'medium',
      'NegativeMarginBase'
    )}
    {...commonKnobs()}
  >
    マイナスのマージンを持つ領域です。このコンポーネントは将来的に廃止する可能性があります。かわりに
    マージンをつけたいコンポーネントや MarginBase コンポーネントに ma, mb, ml,
    mr, mt 属性にマイナス値を渡してください。
  </NegativeMarginBase>
);

export const Examples = () => (
  <Container marginTop marginBottom>
    <NegativeMarginBase left right>
      <ColumnBase marginBottom border="default">
        マイナスのマージンを持つ領域です。左右にマイナスのマージンを設定できます。
      </ColumnBase>
    </NegativeMarginBase>

    <NegativeMarginBase marginSize="large" left right>
      <ColumnBase marginBottom border="default">
        マージン幅を調整できます。これはlargeです。
      </ColumnBase>
    </NegativeMarginBase>

    <NegativeMarginBase marginSize="medium" left right>
      <ColumnBase marginBottom border="default">
        マージン幅を調整できます。これはmediumです。
      </ColumnBase>
    </NegativeMarginBase>

    <NegativeMarginBase marginSize="small" left right>
      <ColumnBase marginBottom border="default">
        マージン幅を調整できます。これはsmallです。
      </ColumnBase>
    </NegativeMarginBase>

    <ColumnBase marginBottom border="default">
      下のBaseは上部にマイナスのマージンを持ちます。
    </ColumnBase>

    <NegativeMarginBase top bottom>
      <ColumnBase marginBottom border="default">
        上下のマージンも調節できます。
      </ColumnBase>
    </NegativeMarginBase>

    <ColumnBase marginBottom border="default">
      上のBaseは下部にマイナスのマージンを持ちます。
    </ColumnBase>
  </Container>
);

```

### src/lv1/bases/NegativeMarginBase.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /** マージンの大きさを指定します。 `small` = 1rem, `medium` = 1.5rem, `large` = 2rem （サイズ指定が独特なので要注意）*/
  marginSize?: 'small' | 'medium' | 'large';
  top?: boolean;
  left?: boolean;
  right?: boolean;
  bottom?: boolean;
} & CommonProps;

/**
 * マイナスのマージンを持つ領域です。このコンポーネントは将来的に廃止する可能性があります。かわりに
 * マージンをつけたいコンポーネントや `MarginBase` コンポーネントの `ma`, `mb`, `ml`, `mr`, `mt` 属性にマイナス値を渡してください。
 */
const NegativeMarginBase: React.FC<Props> = (props: Props) => {
  const { children, marginSize = 'large', top, left, right, bottom } = props;

  return (
    <div
      {...commonProps(props, `vb-negativeMargin--${marginSize}`, {
        top,
        left,
        right,
        bottom,
      })}
    >
      {children}
    </div>
  );
};

export default NegativeMarginBase;

```

### src/lv1/bases/PopupBase.stories.tsx
```
typescript
import * as React from 'react';

import PopupBase from './PopupBase';
import Paragraph from '../typography/Paragraph';
import { select, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: PopupBase,
};
export const PopupBaseComponent = () => (
  <PopupBase
    small={boolean('Small', false, 'PopupBase')}
    inline={boolean('Inline', false, 'PopupBase')}
    fitContent={boolean('fitContent', false, 'PopupBase')}
    border={
      select(
        'Border',
        {
          none: '',
          default: 'default',
          notice: 'notice',
          alert: 'alert',
          success: 'success',
        },
        '',
        'PopupBase'
      ) || undefined // none時にundefinedにしたいが、selectのoptionにundefinedを渡せないので空文字を||でundefinedにしている
    }
    paddingSize={
      select(
        'PaddingSize',
        {
          none: '',
          small: 'small',
          medium: 'medium',
          large: 'large',
          zero: 'zero',
        },
        '',
        'PopupBase'
      ) || undefined
    }
    {...commonKnobs()}
  >
    ポップアップベースは浮き上がるコンテンツを配置するための領域です。
    <br />
    周囲に24dpのpaddingが入り、メニューなどに使うことができます。
  </PopupBase>
);

export const PaddingSizeOption = () => (
  <>
    <PopupBase mb={1}>default (1.5rem = 24px)</PopupBase>
    <PopupBase paddingSize="zero" mb={1}>
      paddingSize=&quot;zero&quot;
    </PopupBase>
    <PopupBase paddingSize="small" mb={1}>
      paddingSize=&quot;small&quot; (1rem = 16px)
    </PopupBase>
    <PopupBase paddingSize="medium" mb={1}>
      paddingSize=&quot;medium&quot; (1.5rem = 24px)
    </PopupBase>
    <PopupBase paddingSize="large" mb={1}>
      paddingSize=&quot;large&quot; (2rem = 32px)
    </PopupBase>
  </>
);

export const BorderOption = () => (
  <>
    <PopupBase mb={1}>without border prop</PopupBase>
    <PopupBase border="default" mb={1}>
      border=&quot;default&quot;
    </PopupBase>
    <PopupBase border="alert" mb={1}>
      border=&quot;alert&quot;
    </PopupBase>
    <PopupBase border="notice" mb={1}>
      border=&quot;notice&quot;
    </PopupBase>
    <PopupBase border="success" mb={1}>
      border=&quot;success&quot;
    </PopupBase>
  </>
);

export const InlineOption = () => (
  <>
    <Paragraph>
      inline propを使用すると、
      <PopupBase inline paddingSize="small" ml={0.5} mr={0.5}>
        こんなふうに
      </PopupBase>
      display:inline の表示になります
    </Paragraph>
  </>
);

```

### src/lv1/bases/PopupBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { BaseComponentBorderProps, BaseComponentProps } from './types';

type Props = {
  children?: React.ReactNode;
} & BaseComponentProps &
  BaseComponentBorderProps &
  MarginClassProps &
  CommonProps;
/**
 * ポップアップコンテンツ（ドロップダウンやコンボボックスの選択部分など）に使用するコンポーネントです。
 *
 * - **z-indexが指定されているため注意が必要です**
 * - z-index: 1000;
 *   - FloatingBase（z-index: 500) < DialogBase（z-index: 1000) < PopupBase（z-index: 2000) となります。
 *   - ポップアップからダイアログが出てくるようなコンポーネントはPopupBaseでは実現できないのでFloatingBaseを使用して下さい
 * - `CardBase` や `DialogBase` との混同に注意してください。
 *   - モーダルダイアログに使用するべきなのは `DialogBase` です
 *   - 作ろうとしているものがモーダルダイアログでも、ポップアップコンテンツでもない場合は、`CardBase` を使用してください
 */
const PopupBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    border,
    inline,
    fitContent,
    paddingSize,
  } = props;
  const baseClass = 'vb-popupBase';

  const classModifiers = {
    inline,
    fitContent,
    borderDefault: border === 'default',
    borderAlert: border === 'alert',
    borderNotice: border === 'notice',
    borderSuccess: border === 'success',
    paddingSmall: small || paddingSize === 'small',
    paddingLarge: paddingSize === 'large',
    paddingZero: paddingSize === 'zero',
  };

  return (
    <div
      {...commonProps(props, baseClass, classModifiers, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </div>
  );
};

export default PopupBase;

```

### src/lv1/bases/ScrimBase.stories.tsx
```
typescript
import * as React from 'react';

import ScrimBase from './ScrimBase';
import { boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: ScrimBase,
};
export const ScrimBaseComponent = () => (
  <ScrimBase small={boolean('Small', false, 'ScrimBase')} {...commonKnobs()}>
    スクリムはダイアログやモーダルウインドウを表示する際に、下のコンテンツを覆う目隠しです。
  </ScrimBase>
);

```

### src/lv1/bases/ScrimBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  small?: boolean;
} & MarginClassProps &
  CommonProps;

const ScrimBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  const baseClass = 'vb-scrimBase';
  const classModifiers = { small };

  return (
    <div
      {...commonProps(props, baseClass, classModifiers, {
        marginTop,
        marginLeft,
        marginRight,
        marginBottom,
        marginSize,
      })}
    >
      {children}
    </div>
  );
};

export default ScrimBase;

```

### src/lv1/bases/ScrollableBase.stories.tsx
```
typescript
import * as React from 'react';

import ScrollableBase from './ScrollableBase';
import { boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: ScrollableBase,
};
export const ScrollableBaseComponent = () => (
  <div style={{ width: '10rem', height: '10rem' }}>
    <ScrollableBase
      scrollableX={boolean('ScrollableX', true, 'ScrollableBase')}
      scrollableY={boolean('ScrollableY', true, 'ScrollableBase')}
      {...commonKnobs()}
    >
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
    </ScrollableBase>
  </div>
);

```

### src/lv1/bases/ScrollableBase.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  scrollableX?: boolean;
  scrollableY?: boolean;
  children?: React.ReactNode;
} & CommonProps;
const ScrollableBase: React.FC<Props> = (props: Props) => {
  const { scrollableX, scrollableY, children } = props;

  return (
    <div
      {...commonProps(props, 'vb-scrollableBase', { scrollableX, scrollableY })}
      // キーボードでスクロールできるようにするため、tabIndexをつけておく
      // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
      tabIndex={0}
    >
      {children}
    </div>
  );
};
export default ScrollableBase;

```

### src/lv1/bases/ZebraBase.stories.tsx
```
typescript
import * as React from 'react';

import ZebraBase from './ZebraBase';
import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';
import { VibesProvider } from '../../utilities';

export default {
  component: ZebraBase,
};
export const ZebraBaseComponent = () => (
  <>
    <ZebraBase
      {...commonKnobs()}
      paddingSize={
        select(
          'PaddingSize',
          {
            none: '',
            small: 'small',
            medium: 'medium',
            large: 'large',
            zero: 'zero',
          },
          '',
          'ZebraBase'
        ) || undefined
      }
    >
      ZebraBase
      は要素をグルーピングして表示するときに、交互に背景色をつけてくれます。
    </ZebraBase>
    <ZebraBase>周囲に24dpのpaddingが入ります。</ZebraBase>
    <ZebraBase>
      CSSのnth-childで色を付けているので、他の要素・コンポーネントと兄弟になる場合は
      <code>&lt;div&gt;</code>で囲うなどしてください
    </ZebraBase>
    <ZebraBase>hoge</ZebraBase>
    <ZebraBase>hoge</ZebraBase>
  </>
);

export const PaddingSizeOptions = () => (
  <>
    <div>
      <ZebraBase>default (1.5rem = 24px)</ZebraBase>
      <ZebraBase>default (1.5rem = 24px)</ZebraBase>
      <ZebraBase mb={1}>default (1.5rem = 24px)</ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="zero">paddingSize=&quot;zero&quot;</ZebraBase>
      <ZebraBase paddingSize="zero">paddingSize=&quot;zero&quot;</ZebraBase>
      <ZebraBase paddingSize="zero" mb={1}>
        paddingSize=&quot;zero&quot;
      </ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="small">
        paddingSize=&quot;small&quot; (1rem = 16px)
      </ZebraBase>
      <ZebraBase paddingSize="small">
        paddingSize=&quot;small&quot; (1rem = 16px)
      </ZebraBase>
      <ZebraBase paddingSize="small" mb={1}>
        paddingSize=&quot;small&quot; (1rem = 16px)
      </ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="medium">
        paddingSize=&quot;medium&quot; (1.5rem = 24px)
      </ZebraBase>
      <ZebraBase paddingSize="medium">
        paddingSize=&quot;medium&quot; (1.5rem = 24px)
      </ZebraBase>
      <ZebraBase paddingSize="medium" mb={1}>
        paddingSize=&quot;medium&quot; (1.5rem = 24px)
      </ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="large">
        paddingSize=&quot;large&quot; (2rem = 32px)
      </ZebraBase>
      <ZebraBase paddingSize="large">
        paddingSize=&quot;large&quot; (2rem = 32px)
      </ZebraBase>
      <ZebraBase paddingSize="large" mb={1}>
        paddingSize=&quot;large&quot; (2rem = 32px)
      </ZebraBase>
    </div>
  </>
);

export const ResponsivePaddingSize = () => (
  <VibesProvider fixedLayout={false}>
    <div>
      <ZebraBase>default (1.5rem = 24px)</ZebraBase>
      <ZebraBase>モバイル向けには左右が (1rem = 16px) となります</ZebraBase>
      <ZebraBase mb={1}>default (1.5rem = 24px)</ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="zero">paddingSize=&quot;zero&quot;</ZebraBase>
      <ZebraBase paddingSize="zero">paddingSize=&quot;zero&quot;</ZebraBase>
      <ZebraBase paddingSize="zero" mb={1}>
        paddingSize=&quot;zero&quot;
      </ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="small">
        paddingSize=&quot;small&quot; (1rem = 16px)
      </ZebraBase>
      <ZebraBase paddingSize="small">
        paddingSize=&quot;small&quot; (1rem = 16px)
      </ZebraBase>
      <ZebraBase paddingSize="small" mb={1}>
        paddingSize=&quot;small&quot; (1rem = 16px)
      </ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="medium">
        paddingSize=&quot;medium&quot; (1.5rem = 24px)
      </ZebraBase>
      <ZebraBase paddingSize="medium">
        paddingSize=&quot;medium&quot; (1.5rem = 24px)
      </ZebraBase>
      <ZebraBase paddingSize="medium" mb={1}>
        paddingSize=&quot;medium&quot; (1.5rem = 24px)
      </ZebraBase>
    </div>
    <div>
      <ZebraBase paddingSize="large">
        paddingSize=&quot;large&quot; (2rem = 32px)
      </ZebraBase>
      <ZebraBase paddingSize="large">
        paddingSize=&quot;large&quot; (2rem = 32px)
      </ZebraBase>
      <ZebraBase paddingSize="large" mb={1}>
        paddingSize=&quot;large&quot; (2rem = 32px)
      </ZebraBase>
    </div>
  </VibesProvider>
);

```

### src/lv1/bases/ZebraBase.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { BaseComponentPaddingProps } from './types';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children?: React.ReactNode;
} & BaseComponentPaddingProps &
  MarginClassProps &
  CommonProps;

const ZebraBase: React.FC<Props> = (props: Props) => {
  const {
    children,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    paddingSize,
  } = props;

  return (
    <div
      {...commonProps(
        props,
        'vb-zebraBase',
        {
          paddingSmall: paddingSize === 'small',
          paddingLarge: paddingSize === 'large',
          paddingZero: paddingSize === 'zero',
          // レスポンシブなpaddingの変更は、paddingSizeが無指定の場合のみ行う
          paddingResponsive: useResponsive() && !paddingSize,
        },
        { marginTop, marginBottom, marginLeft, marginRight, marginSize }
      )}
    >
      {children}
    </div>
  );
};

export default ZebraBase;

```

### src/lv1/buttons/BackwardButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, text, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import BackwardButton from './BackwardButton';

export default {
  component: BackwardButton,
};

export const BackwardButtonComponent = () => (
  <BackwardButton
    small={boolean('Small', false, 'BackwardButton')}
    large={boolean('Large', false, 'BackwardButton')}
    disabled={boolean('Disabled', false, 'BackwardButton')}
    url={text('URL', 'https://www.freee.co.jp/', 'BackwardButton')}
    appearance={
      select(
        'Appearance',
        {
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
          undefined: '',
        },
        '',
        'BackwardButton'
      ) || undefined
    }
    danger={boolean('Danger', false, 'BackwardButton')}
    onClick={action('click')}
    onSelfWindowNavigation={action('self window navigation')}
    type={select(
      'Type',
      { submit: 'submit', button: 'button', reset: 'reset' },
      'button',
      'BackwardButton'
    )}
    rel={text('Rel', '', 'BackwardButton')}
    {...commonKnobs()}
  >
    {text('Children', 'ボタン', 'BackwardButton')}
  </BackwardButton>
);

export const Default = () => (
  <>
    <BackwardButton mr={1} mb={1}>
      default
    </BackwardButton>
    <BackwardButton mr={1} mb={1} appearance="primary">
      primary
    </BackwardButton>
    <BackwardButton mr={1} mb={1} appearance="secondary">
      secondary
    </BackwardButton>
    <BackwardButton mr={1} mb={1} appearance="tertiary">
      tertiary
    </BackwardButton>
  </>
);

export const Danger = () => (
  <>
    <BackwardButton mr={1} mb={1} danger>
      default
    </BackwardButton>
    <BackwardButton mr={1} mb={1} danger appearance="primary">
      primary
    </BackwardButton>
    <BackwardButton mr={1} mb={1} danger appearance="secondary">
      secondary
    </BackwardButton>
    <BackwardButton mr={1} mb={1} danger appearance="tertiary">
      tertiary
    </BackwardButton>
  </>
);

export const Disabled = () => (
  <>
    <div>
      <BackwardButton mr={1} mb={1} disabled>
        default
      </BackwardButton>
      <BackwardButton mr={1} mb={1} disabled appearance="primary">
        primary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} disabled appearance="secondary">
        secondary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} disabled appearance="tertiary">
        tertiary
      </BackwardButton>
    </div>
    <div>
      <BackwardButton mr={1} mb={1} disabled danger>
        default
      </BackwardButton>
      <BackwardButton mr={1} mb={1} disabled danger appearance="primary">
        primary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} disabled danger appearance="secondary">
        secondary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} disabled danger appearance="tertiary">
        tertiary
      </BackwardButton>
    </div>
  </>
);

export const Small = () => (
  <>
    <div>
      <BackwardButton mr={1} mb={1} small>
        default
      </BackwardButton>
      <BackwardButton mr={1} mb={1} small appearance="primary">
        primary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} small appearance="secondary">
        secondary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} small appearance="tertiary">
        tertiary
      </BackwardButton>
    </div>
    <div>
      <BackwardButton mr={1} mb={1} small danger>
        default
      </BackwardButton>
      <BackwardButton mr={1} mb={1} small danger appearance="primary">
        primary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} small danger appearance="secondary">
        secondary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} small danger appearance="tertiary">
        tertiary
      </BackwardButton>
    </div>
  </>
);

export const Large = () => (
  <>
    <div>
      <BackwardButton mr={1} mb={1} large>
        default
      </BackwardButton>
      <BackwardButton mr={1} mb={1} large appearance="primary">
        primary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} large appearance="secondary">
        secondary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} large appearance="tertiary">
        tertiary
      </BackwardButton>
    </div>
    <div>
      <BackwardButton mr={1} mb={1} large danger>
        default
      </BackwardButton>
      <BackwardButton mr={1} mb={1} large danger appearance="primary">
        primary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} large danger appearance="secondary">
        secondary
      </BackwardButton>
      <BackwardButton mr={1} mb={1} large danger appearance="tertiary">
        tertiary
      </BackwardButton>
    </div>
  </>
);

```

### src/lv1/buttons/BackwardButton.tsx
```
typescript
import * as React from 'react';
import { MdChevronLeft } from 'react-icons/md';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';
import Button, { ButtonAppearanceType } from './Button';

type Props = {
  /**
   * ボタンのラベルとなる文字列を指定します。アイコンを表示する場合はここに入れずにIconComponentを使用してください。
   */
  children?: React.ReactNode;
  /**
   * href を設定します
   */
  url?: string;
  /**
   * 導線の優先度から、ボタンの種類を指定するのに使います。
   * primaryは背景ベタ塗り+白字、secondaryは白背景+グレーの枠線+リンク色字、tertiaryは枠線なし+リンク色字となります。
   */
  appearance?: ButtonAppearanceType;
  /**
   * ボタンを押したものの動作が危険性を伴うかどうか。 `true` にすると赤系の色になります。
   */
  danger?: boolean;
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * input type を指定します
   */
  type?: 'button' | 'submit' | 'reset';
  /**
   * click ハンドラを指定します
   */
  onClick?: React.MouseEventHandler;
  /**
   * rel を指定します
   */
  rel?: string;
} & MarginClassProps &
  SelfWindowNavigationProp &
  CommonProps;

/**
 * BackwardButton は前画面への遷移のためのボタンです。
 *
 * - 「次の画面」「他の画面」への遷移には JumpButton を使用してください
 * - `target="_blank"` は指定できません
 * - ListTableの行内に入れる場合など、高さを小さくしたい場合には `small` を使用してください
 * - フォームの送信を伴う場合など、不可逆な遷移をする場合には `Button` を使用してください
 */
const BackwardButton: React.FC<Props> = (props: Props) => {
  const {
    children,
    url,
    appearance,
    danger,
    disabled,
    small,
    large,
    type,
    onClick,
    onSelfWindowNavigation,
    rel,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const buttonBaseClass = 'vb-backwardButton';

  return (
    <span
      {...commonProps(
        props,
        buttonBaseClass,
        {},
        { marginBottom, marginLeft, marginRight, marginSize, marginTop }
      )}
    >
      <Button
        href={url}
        appearance={appearance}
        danger={danger}
        disabled={disabled}
        small={small}
        large={large}
        type={type}
        onClick={onClick}
        onSelfWindowNavigation={onSelfWindowNavigation}
        rel={rel}
        IconComponent={MdChevronLeft}
        iconPosition="left"
      >
        {children}
      </Button>
    </span>
  );
};
export default BackwardButton;

```

### src/lv1/buttons/Button.stories.tsx
```
typescript
import * as React from 'react';

import { MdArrowDropDown } from 'react-icons/md';
import { expect, fn, userEvent, within } from '@storybook/test';
import { Meta, StoryObj } from '@storybook/react';
import Button from './Button';

export default {
  component: Button,
} as Meta<typeof Button>;

type Story = StoryObj<typeof Button>;

export const Basic: Story = {
  args: {
    onClick: fn(),
    onKeyDown: fn(),
    onFocus: fn(),
    onBlur: fn(),
    children: 'ボタン',
  },
  render: (args) => {
    const ref = React.createRef<HTMLButtonElement | HTMLAnchorElement>();

    return <Button {...args} ref={ref} />;
  },
};

export const Interaction: Story = {
  ...Basic,
  play: async ({ args, canvasElement }) => {
    const canvas = within(canvasElement);
    const button = canvas.getByRole('button');

    expect(button).toBeInTheDocument();

    await userEvent.click(button);
    expect(args.onClick).toHaveBeenCalled();

    await userEvent.keyboard('{enter}');
    expect(args.onKeyDown).toHaveBeenCalled();

    await userEvent.tab();
    expect(args.onBlur).toHaveBeenCalled();
    expect(button).not.toHaveFocus();

    await userEvent.tab({ shift: true });
    expect(args.onFocus).toHaveBeenCalled();
    expect(button).toHaveFocus();
  },
};

export const Default: Story = {
  render: () => (
    <>
      <Button mr={1} mb={1}>
        default
      </Button>
      <Button mr={1} mb={1} appearance="primary">
        primary
      </Button>
      <Button mr={1} mb={1} appearance="secondary">
        secondary
      </Button>
      <Button mr={1} mb={1} appearance="tertiary">
        tertiary
      </Button>
    </>
  ),
};

export const Danger: Story = {
  render: () => (
    <>
      <Button mr={1} mb={1} danger>
        default
      </Button>
      <Button mr={1} mb={1} danger appearance="primary">
        primary
      </Button>
      <Button mr={1} mb={1} danger appearance="secondary">
        secondary
      </Button>
      <Button mr={1} mb={1} danger appearance="tertiary">
        tertiary
      </Button>
    </>
  ),
};

export const Disabled: Story = {
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} disabled>
          default
        </Button>
        <Button mr={1} mb={1} disabled appearance="primary">
          primary
        </Button>
        <Button mr={1} mb={1} disabled appearance="secondary">
          secondary
        </Button>
        <Button mr={1} mb={1} disabled appearance="tertiary">
          tertiary
        </Button>
      </div>
      <div>
        <Button mr={1} mb={1} disabled danger>
          default
        </Button>
        <Button mr={1} mb={1} disabled danger appearance="primary">
          primary
        </Button>
        <Button mr={1} mb={1} disabled danger appearance="secondary">
          secondary
        </Button>
        <Button mr={1} mb={1} disabled danger appearance="tertiary">
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const Hover: Story = {
  parameters: {
    pseudo: {
      hover: "[data-test='hover']",
    },
  },
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} data-test="hover">
          default
        </Button>
        <Button mr={1} mb={1} appearance="primary" data-test="hover">
          primary
        </Button>
        <Button mr={1} mb={1} appearance="secondary" data-test="hover">
          secondary
        </Button>
        <Button mr={1} mb={1} appearance="tertiary" data-test="hover">
          tertiary
        </Button>
      </div>
      <div>
        <Button mr={1} mb={1} danger data-test="hover">
          default
        </Button>
        <Button mr={1} mb={1} danger appearance="primary" data-test="hover">
          primary
        </Button>
        <Button mr={1} mb={1} danger appearance="secondary" data-test="hover">
          secondary
        </Button>
        <Button mr={1} mb={1} danger appearance="tertiary" data-test="hover">
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const Focus: Story = {
  parameters: {
    pseudo: {
      focus: "[data-test='focus']",
    },
  },
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} data-test="focus">
          default
        </Button>
        <Button mr={1} mb={1} appearance="primary" data-test="focus">
          primary
        </Button>
        <Button mr={1} mb={1} appearance="secondary" data-test="focus">
          secondary
        </Button>
        <Button mr={1} mb={1} appearance="tertiary" data-test="focus">
          tertiary
        </Button>
      </div>
      <div>
        <Button mr={1} mb={1} danger data-test="focus">
          default
        </Button>
        <Button mr={1} mb={1} danger appearance="primary" data-test="focus">
          primary
        </Button>
        <Button mr={1} mb={1} danger appearance="secondary" data-test="focus">
          secondary
        </Button>
        <Button mr={1} mb={1} danger appearance="tertiary" data-test="focus">
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const Small: Story = {
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} small>
          default
        </Button>
        <Button mr={1} mb={1} small appearance="primary">
          primary
        </Button>
        <Button mr={1} mb={1} small appearance="secondary">
          secondary
        </Button>
        <Button mr={1} mb={1} small appearance="tertiary">
          tertiary
        </Button>
      </div>
      <div>
        <Button mr={1} mb={1} small danger>
          default
        </Button>
        <Button mr={1} mb={1} small danger appearance="primary">
          primary
        </Button>
        <Button mr={1} mb={1} small danger appearance="secondary">
          secondary
        </Button>
        <Button mr={1} mb={1} small danger appearance="tertiary">
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const Large: Story = {
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} large>
          default
        </Button>
        <Button mr={1} mb={1} large appearance="primary">
          primary
        </Button>
        <Button mr={1} mb={1} large appearance="secondary">
          secondary
        </Button>
        <Button mr={1} mb={1} large appearance="tertiary">
          tertiary
        </Button>
      </div>
      <div>
        <Button mr={1} mb={1} large danger>
          default
        </Button>
        <Button mr={1} mb={1} large danger appearance="primary">
          primary
        </Button>
        <Button mr={1} mb={1} large danger appearance="secondary">
          secondary
        </Button>
        <Button mr={1} mb={1} large danger appearance="tertiary">
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const WithLeftIcon: Story = {
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} IconComponent={MdArrowDropDown}>
          default
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          appearance="primary"
        >
          primary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          appearance="secondary"
        >
          secondary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          appearance="tertiary"
        >
          tertiary
        </Button>
      </div>
      <div>
        <Button mr={1} mb={1} IconComponent={MdArrowDropDown} danger>
          default
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          danger
          appearance="primary"
        >
          primary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          danger
          appearance="secondary"
        >
          secondary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          danger
          appearance="tertiary"
        >
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const WithRightIcon: Story = {
  render: () => (
    <>
      <div>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
        >
          default
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          appearance="primary"
        >
          primary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          appearance="secondary"
        >
          secondary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          appearance="tertiary"
        >
          tertiary
        </Button>
      </div>
      <div>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          danger
        >
          default
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          danger
          appearance="primary"
        >
          primary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          danger
          appearance="secondary"
        >
          secondary
        </Button>
        <Button
          mr={1}
          mb={1}
          IconComponent={MdArrowDropDown}
          iconPosition="right"
          danger
          appearance="tertiary"
        >
          tertiary
        </Button>
      </div>
    </>
  ),
};

export const WidthFull: Story = {
  render: () => (
    <>
      <Button mr={1} mb={1} width="full">
        default
      </Button>
      <Button
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        iconPosition="right"
        width="full"
      >
        default
      </Button>
    </>
  ),
};

export const Download: Story = {
  render: () => (
    <>
      <div>
        <Button mr={1} mb={1} href="/logo" download>
          hrefのファイル名のまま保存
        </Button>
        <Button mr={1} mb={1} href="/logo" download="freee_logo.png">
          downloadでファイル名を指定
        </Button>
      </div>
    </>
  ),
};

```

### src/lv1/buttons/Button.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import {
  filterButtonAriaProps,
  filterLinkAriaProps,
  LinkAriaProps,
  ButtonAriaProps,
} from '../../utilities/AriaProps';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';

export type ButtonAppearanceType = 'primary' | 'secondary' | 'tertiary';

type Props = {
  /**
   * ボタンのラベルとなる文字列を指定します。アイコンを表示する場合はここに入れずにIconComponentを使用してください。
   */
  children?: React.ReactNode;
  /**
   * 導線の優先度から、ボタンの種類を指定するのに使います。
   * primaryは背景ベタ塗り+白字、secondaryは白背景+グレーの枠線+リンク色字、tertiaryは枠線なし+リンク色字となります。
   */
  appearance?: ButtonAppearanceType;
  /**
   * ボタンを押したものの動作が危険性を伴うかどうか。 `true` にすると赤系の色になります。
   * appearance無指定時には `appearance: 'primary', danger: true` の見た目になります。
   */
  danger?: boolean;
  /**
   * (廃止予定) appearanceを使用してください。appearance指定時は無視されます。
   */
  primary?: boolean;
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * 押下時に遷移させるURLを指定します。指定した場合は `<a>` 要素、空文字列もしくはundefinedの場合は `<button>` 要素となります
   */
  href?: string;
  /**
   * target を設定します
   */
  target?: string;
  /**
   * 未指定の場合、`target="_blank"` であれば `noopener noreferrer`となります
   *
   * （空文字列を渡した場合には `""` が指定されます）
   */
  rel?: string;
  /**
   * download を設定します。hrefと異なる名前でファイルを保存したい場合は文字列を指定してください。
   */
  download?: boolean | string;
  /**
   * 押下時に意図しないフォーム送信が発生する場合は `button` にしてください。
   */
  type?: 'button' | 'submit' | 'reset';
  /**
   * click ハンドラを設定します
   */
  onClick?: React.MouseEventHandler;
  /**
   * keydown ハンドラを設定します
   */
  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement | HTMLAnchorElement>;
  /**
   * focus ハンドラを設定します
   */
  onFocus?: React.FocusEventHandler<HTMLButtonElement | HTMLAnchorElement>;
  /**
   * blur ハンドラを設定します
   */
  onBlur?: React.FocusEventHandler<HTMLButtonElement | HTMLAnchorElement>;
  /**
   * アイコンの配置箇所を設定します。ボタンの意味を説明するアイコンは左側 (left) に、ボタンの挙動を説明するアイコンは右側 (right) につけてください。
   */
  iconPosition?: 'left' | 'right';
  /**
   * 'full' で包括している要素に対して横幅を100%にします。
   */
  width?: 'default' | 'full';
  /**
   * ダイアログ等でボタンが並ぶ場合などで、ボタンラベルの長さによる幅の違いを避けるために、ボタンに最小幅を設定することが可能です。
   */
  hasMinWidth?: boolean;
  /**
   * アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  IconComponent?: React.ElementType;
} & MarginClassProps &
  SelfWindowNavigationProp &
  LinkAriaProps &
  ButtonAriaProps &
  CommonProps;

function ButtonInner(
  props: Props,
  ref?: React.Ref<HTMLButtonElement | HTMLAnchorElement>
): React.ReactElement {
  const {
    children,
    appearance,
    primary,
    danger,
    disabled,
    small,
    large,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    href,
    target,
    rel,
    type,
    download,
    onClick,
    onSelfWindowNavigation,
    onKeyDown,
    onFocus,
    onBlur,
    iconPosition,
    IconComponent,
    width,
    hasMinWidth,
  } = props;

  const buttonBaseClass = 'vb-button';

  const classModifier = {
    appearancePrimary: appearance
      ? appearance === 'primary'
      : primary || danger,
    appearanceSecondary:
      appearance === 'secondary' || (!appearance && !primary && !danger),
    appearanceTertiary: appearance === 'tertiary',
    small,
    large,
    danger,
    disabled,
    leftIcon: IconComponent && iconPosition !== 'right',
    rightIcon: IconComponent && iconPosition === 'right',
    widthFull: width === 'full',
    hasMinWidth,
  };

  const content = (
    <>
      {IconComponent && (
        <IconComponent
          className={`${buttonBaseClass}__icon ${buttonBaseClass}__icon--${
            iconPosition === 'right' ? 'right' : 'left'
          }`}
          focusable={false}
        />
      )}
      {children}
    </>
  );

  if (href) {
    return (
      <a
        href={href}
        target={target}
        rel={
          rel || rel === ''
            ? rel
            : target === '_blank'
            ? 'noopener noreferrer'
            : undefined
        }
        onClick={(e: React.MouseEvent): void => {
          disabled ? e.preventDefault() : onClick && onClick(e);
          if (href) {
            const navigator = selfWindowNavigator(onSelfWindowNavigation);
            navigator && navigator(e, href);
          }
        }}
        onKeyDown={onKeyDown}
        onFocus={onFocus}
        onBlur={onBlur}
        aria-disabled={disabled && true}
        download={download}
        ref={ref as React.Ref<HTMLAnchorElement>}
        {...filterLinkAriaProps(props)}
        {...commonProps(props, buttonBaseClass, classModifier, {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        })}
      >
        {content}
      </a>
    );
  }
  return (
    <button
      type={type}
      disabled={disabled && true}
      onClick={onClick}
      onKeyDown={onKeyDown}
      onFocus={onFocus}
      onBlur={onBlur}
      ref={ref as React.Ref<HTMLButtonElement>}
      {...filterButtonAriaProps(props)}
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {content}
    </button>
  );
}
/**
 * ボタン
 *
 * - 見た目はボタンですが、セマンティクス上はリンクにもボタンにもなります
 *   - `href` が存在する場合はリンク `<a>` 要素、存在しない場合は `<button>` 要素となります
 *   - クリックでURLに移動する場合には `href` を渡してください（「別のタブで開く」など、リンクとしての挙動を期待できるので）
 *   - `href` に `"#"` や `"javascript:void(0)"` を **渡さないで** ください
 * - 他の画面に遷移するボタン用に `JumpButton` と `BackwardButton` も用意されています
 *   - 内部的には `Button` を使用していますが、遷移ボタン用の便利な機能を備えてあります。
 * - 右側または左側にアイコン（Material Design Iconsを想定）を表示できます
 *   - 「編集」「削除」「新規作成」など、ボタン押下によりもたらされれる動作のメタファーやアイキャッチが必要な際には左側 (left) にアイコンを表示してください
 *   - 「別ウインドウで開く」「ドロップダウンメニューを表示」などボタン押下時の挙動を示す必要がある際には右側 (right) にアイコンを表示してください
 *
 * ## `appearance` の使い分け
 *
 * `appearance` は、デフォルトでは `"secondary"` になっています。
 *
 * フォームの送信ボタンなど、「この場所のメインタスクはこれ」というものが明確な場合にのみ、そのボタンは `"primary"` としてください。
 *
 * `appearance="tertiary"` は、特に単体配置された場合にボタンとして認識することが困難なため、使用できる場所は非常に限定的です。
 *
 *  以下は、`"tertiary"` の使用で問題のないケースです。
 *
 *  - `appearance="secondary"` や `appearance="primary"` な `Button` と並んでいる場所（ボタンとして認識しやすくなるため）
 *  - 「詳細画面で実行できるアクションへのショートカットを一覧画面にも配置する」のような、その場所でそのボタンを認識できしなくても問題のない場所
 *  - 「画面上に複数並んでいるコメントの『編集』ボタン」のような、コンテンツよりも目立つ必要のないボタン
 *  - ほとんどの画面で同じ表示になっていて、ユーザーの学習が特に期待できる場所（ページ上部の見出しの右に必ず関連メニューとして配置されちえるなど）
 *
 * 一方、以下のような場所では、 `"tertiary"` が不向きです。 `"secondary"` や `InlineLink` を使用してください。
 * `InlineLink` も `Button` 同様、`href` を与えなければ `<button>` 要素となる仕様のため、ページ遷移以外に用いても問題ありません。
 *
 *  - 注意文や説明文の文中や末尾のリンクや、そういった箇所でモーダルダイアログを開いたり状態を変更したりするなどのアクションをするもの
 *    - `Button` には `"tertiary"` でも上下左右にpaddingがあるため、文中・文尾で使用すると不自然になります
 *    - `"tertiary"` の `Button` ではアンダーラインがないため、インタラクティブな要素であることがわかりにくくなります
 *  - 上にあげたような `"tertiary"` で問題のないケースに該当せず、それによって不利益のある場所
 *    - 同じアクションを `"primary"` や `"secondary"` のボタンで実行できる場所がなく、ボタンとして認識できないことがユーザーにとって大きな不利益になる場所
 *    - ユーザーによる学習効果や推測が期待できない場所
 *    - 画面の構成を理解する・メインのタスクを完了する上でボタンの存在に気付く必要がある場所
 *
 */
const Button = React.forwardRef(ButtonInner);
export default Button;

```

### src/lv1/buttons/GlobalNaviButton.stories.tsx
```
typescript
import * as React from 'react';

import { MdHome, MdRouter } from 'react-icons/md';
import { boolean, text } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import GlobalNaviButton from './GlobalNaviButton';

export default {
  component: GlobalNaviButton,
};

export const GlobalNaviButtonComponent = () => (
  <>
    <GlobalNaviButton
      href={text('Href', '#', 'GlobalNaviButton')}
      IconComponent={MdHome}
      current={boolean('Current', true, 'GlobalNaviButton')}
      {...commonKnobs()}
    >
      {text('Children', 'ホーム', 'GlobalNaviButton')}
    </GlobalNaviButton>
    <GlobalNaviButton
      href="#"
      IconComponent={MdRouter}
      current={true}
      onSelfWindowNavigation={action('onSelfWindowNavigation')}
      {...commonKnobs()}
    >
      リンク（with react-router）
    </GlobalNaviButton>
    <GlobalNaviButton href="#" {...commonKnobs()} current={true}>
      アイコンなし（without IconComponent）
    </GlobalNaviButton>
  </>
);

```

### src/lv1/buttons/GlobalNaviButton.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';

type Props = {
  children?: React.ReactNode;
  /**
   * アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  IconComponent?: React.ElementType;
  /**
   * href を指定します
   */
  href?: string;
  /**
   * 選択状態にします
   */
  current?: boolean;
} & SelfWindowNavigationProp &
  CommonProps;

/**
 * グローバルナビ専用のボタンです。直接使用せず、 `lv2/GlobalNavi` を使用してください。
 */
const GlobalNaviButton: React.FC<Props> = (props: Props) => {
  const { children, IconComponent, href, current, onSelfWindowNavigation } =
    props;

  const buttonClass = 'vb-globalNaviButton';
  const classModifier = { current };

  return !href ? (
    <span
      aria-current={current}
      {...commonProps(props, buttonClass, classModifier)}
    >
      {!!IconComponent && (
        <IconComponent className={buttonClass + '__icon'} focusable={false} />
      )}
      <span className={buttonClass + '__text'}>{children}</span>
    </span>
  ) : (
    <a
      href={href}
      aria-current={current}
      onClick={(e: React.MouseEvent<HTMLAnchorElement>): void => {
        const navigator = selfWindowNavigator(onSelfWindowNavigation);
        navigator && navigator(e, href);
      }}
      {...commonProps(props, buttonClass, classModifier)}
    >
      {!!IconComponent && (
        <IconComponent className={buttonClass + '__icon'} focusable={false} />
      )}
      <span className={buttonClass + '__text'}>{children}</span>
    </a>
  );
};

export default GlobalNaviButton;

```

### src/lv1/buttons/IconOnlyBackwardButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import IconOnlyBackwardButton from './IconOnlyBackwardButton';

export default {
  component: IconOnlyBackwardButton,
};

export const IconOnlyBackwardButtonComponent = () => (
  <IconOnlyBackwardButton
    buttonLabel={text('buttonLabel', 'ボタンラベル', 'IconOnlyBackwardButton')}
    small={boolean('Small', false, 'IconOnlyBackwardButton')}
    large={boolean('Large', false, 'IconOnlyBackwardButton')}
    disabled={boolean('Disabled', false, 'IconOnlyBackwardButton')}
    url={text('URL', 'https://www.freee.co.jp/', 'IconOnlyBackwardButton')}
    appearance={
      select(
        'Appearance',
        {
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
          undefined: '',
        },
        '',
        'IconOnlyBackwardButton'
      ) || undefined
    }
    danger={boolean('Danger', false, 'IconOnlyBackwardButton')}
    onClick={action('click')}
    onSelfWindowNavigation={action('self window navigation')}
    type={select(
      'Type',
      { submit: 'submit', button: 'button', reset: 'reset' },
      'button',
      'IconOnlyBackwardButton'
    )}
    rel={text('Rel', '', 'IconOnlyBackwardButton')}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <IconOnlyBackwardButton mr={1} mb={1} buttonLabel="default" />
    <IconOnlyBackwardButton
      mr={1}
      mb={1}
      appearance="primary"
      buttonLabel="primary"
    />
    <IconOnlyBackwardButton
      mr={1}
      mb={1}
      appearance="secondary"
      buttonLabel="secondary"
    />
    <IconOnlyBackwardButton
      mr={1}
      mb={1}
      appearance="tertiary"
      buttonLabel="tertiary"
    />
  </>
);

export const Danger = () => (
  <>
    <IconOnlyBackwardButton mr={1} mb={1} danger buttonLabel="default" />
    <IconOnlyBackwardButton
      mr={1}
      mb={1}
      danger
      appearance="primary"
      buttonLabel="primary"
    />
    <IconOnlyBackwardButton
      mr={1}
      mb={1}
      danger
      appearance="secondary"
      buttonLabel="secondary"
    />
    <IconOnlyBackwardButton
      mr={1}
      mb={1}
      danger
      appearance="tertiary"
      buttonLabel="tertiary"
    />
  </>
);

export const Disabled = () => (
  <>
    <div>
      <IconOnlyBackwardButton mr={1} mb={1} disabled buttonLabel="default" />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        danger
        buttonLabel="default"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        disabled
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

export const Small = () => (
  <>
    <div>
      <IconOnlyBackwardButton mr={1} mb={1} small buttonLabel="default" />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        danger
        buttonLabel="default"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        small
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

export const Large = () => (
  <>
    <div>
      <IconOnlyBackwardButton mr={1} mb={1} large buttonLabel="default" />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        danger
        buttonLabel="default"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyBackwardButton
        mr={1}
        mb={1}
        large
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

```

### src/lv1/buttons/IconOnlyBackwardButton.tsx
```
typescript
import * as React from 'react';
import { MdChevronLeft } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import IconOnlyButton from './IconOnlyButton';

type Props = {
  /**
   * ボタンのaria-labelに使用される文字列です。必ず遷移先を表す文字列を指定してください。
   */
  buttonLabel: string;
  /**
   * href を設定します
   */
  url?: string;
  /**
   * click ハンドラを指定します
   */
  onClick?: React.MouseEventHandler;
} & Pick<
  Parameters<typeof IconOnlyButton>[0],
  | 'appearance'
  | 'danger'
  | 'disabled'
  | 'small'
  | 'large'
  | 'rel'
  | 'type'
  | 'onSelfWindowNavigation'
> &
  CommonProps;

/**
 * IconOnlyBackwardButton は前画面への遷移のためのボタンです。
 *
 * - 文字列として遷移先を表現できないので、「次の画面へ進む」のように遷移先が自明な場合にのみ使用してください。
 * - `buttonLabel` に必ず代替テキストを設定してください
 * - 「次の画面」「他の画面」への遷移には IconOnlyJumpButton を使用してください
 * - `target="_blank"` は指定できません
 * - ListTableの行内に入れる場合など、高さを小さくしたい場合には `small` を使用してください
 */
const IconOnlyBackwardButton: React.FC<Props> = (props: Props) => {
  const {
    buttonLabel,
    url,
    appearance,
    danger,
    disabled,
    small,
    large,
    type,
    onClick,
    onSelfWindowNavigation,
    rel,
  } = props;

  const buttonBaseClass = 'vb-backwardButton';

  return (
    <span {...commonProps(props, buttonBaseClass)}>
      <IconOnlyButton
        label={buttonLabel}
        href={url}
        appearance={appearance}
        danger={danger}
        disabled={disabled}
        small={small}
        large={large}
        type={type}
        onClick={onClick}
        onSelfWindowNavigation={onSelfWindowNavigation}
        rel={rel}
        IconComponent={MdChevronLeft}
      />
    </span>
  );
};
export default IconOnlyBackwardButton;

```

### src/lv1/buttons/IconOnlyButton.stories.tsx
```
typescript
import * as React from 'react';

import { MdArrowDropDown } from 'react-icons/md';
import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import IconOnlyButton from './IconOnlyButton';

export default {
  component: IconOnlyButton,
};

export const IconOnlyButtonComponent = () => (
  <IconOnlyButton
    appearance={
      select(
        'Appearance',
        {
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
          undefined: '',
        },
        '',
        'IconOnlyButton'
      ) || undefined
    }
    primary={boolean('Primary', false, 'IconOnlyButton')}
    danger={boolean('Danger', false, 'IconOnlyButton')}
    small={boolean('Small', false, 'IconOnlyButton')}
    large={boolean('Large', false, 'IconOnlyButton')}
    disabled={boolean('Disabled', false, 'IconOnlyButton')}
    IconComponent={MdArrowDropDown}
    label="Icon Only Button"
    type={select(
      'Type',
      { submit: 'submit', button: 'button', reset: 'reset' },
      'button',
      'IconOnlyButton'
    )}
    onSelfWindowNavigation={action('self window navigation')}
    onClick={action('click')}
    onKeyDown={action('keydown')}
    onFocus={action('focus')}
    onBlur={action('blur')}
    href={text('Href', '', 'IconOnlyButton')}
    download={text('Download', '', 'Button') || undefined}
    target={select(
      'Target',
      {
        _blank: '_blank',
        _self: '_self',
      },
      '_self',
      'IconOnlyButton'
    )}
    rel={text('Rel', '', 'IconOnlyButton') || undefined}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      label="default"
    />
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      appearance="primary"
      label="primary"
    />
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      appearance="secondary"
      label="secondary"
    />
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      appearance="tertiary"
      label="tertiary"
    />
  </>
);

export const Danger = () => (
  <>
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      danger
      label="default"
    />
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      danger
      appearance="primary"
      label="primary"
    />
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      danger
      appearance="secondary"
      label="secondary"
    />
    <IconOnlyButton
      mr={1}
      mb={1}
      IconComponent={MdArrowDropDown}
      danger
      appearance="tertiary"
      label="tertiary"
    />
  </>
);

export const Disabled = () => (
  <>
    <div>
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        label="default"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        appearance="primary"
        label="primary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        appearance="secondary"
        label="secondary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        appearance="tertiary"
        label="tertiary"
      />
    </div>
    <div>
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        danger
        label="default"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        danger
        appearance="primary"
        label="primary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        danger
        appearance="secondary"
        label="secondary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        disabled
        danger
        appearance="tertiary"
        label="tertiary"
      />
    </div>
  </>
);

export const Small = () => (
  <>
    <div>
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        label="default"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        appearance="primary"
        label="primary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        appearance="secondary"
        label="secondary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        appearance="tertiary"
        label="tertiary"
      />
    </div>
    <div>
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        danger
        label="default"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        danger
        appearance="primary"
        label="primary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        danger
        appearance="secondary"
        label="secondary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        small
        danger
        appearance="tertiary"
        label="tertiary"
      />
    </div>
  </>
);
export const Large = () => (
  <>
    <div>
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        label="default"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        appearance="primary"
        label="primary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        appearance="secondary"
        label="secondary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        appearance="tertiary"
        label="tertiary"
      />
    </div>
    <div>
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        danger
        label="default"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        danger
        appearance="primary"
        label="primary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        danger
        appearance="secondary"
        label="secondary"
      />
      <IconOnlyButton
        mr={1}
        mb={1}
        IconComponent={MdArrowDropDown}
        large
        danger
        appearance="tertiary"
        label="tertiary"
      />
    </div>
  </>
);

```

### src/lv1/buttons/IconOnlyButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import {
  filterButtonAriaProps,
  ButtonAriaProps,
  filterLinkAriaProps,
  LinkAriaProps,
} from '../../utilities/AriaProps';
import { ButtonAppearanceType } from './Button';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';

type Props = {
  /**
   * アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  IconComponent: React.ElementType;
  /**
   * ボタンの代替テキストとして使用されます（`aria-label` になります）。
   * ボタンが何を表現しているのか、必ず指定してください。
   */
  label: string;
  /**
   * 導線の優先度から、ボタンの種類を指定するのに使います。
   * primaryは背景ベタ塗り+白字、secondaryは白背景+グレーの枠線+リンク色字、tertiaryは枠線なし+リンク色字となります。
   */
  appearance?: ButtonAppearanceType;
  /**
   * ボタンを押したものの動作が危険性を伴うかどうか。 `true` にすると赤系の色になります。
   * appearance無指定時には `appearance: 'primary', danger: true` の見た目になります。
   */
  danger?: boolean;
  /**
   * (廃止予定) appearanceを使用してください。appearance指定時は無視されます。
   */
  primary?: boolean;
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
  /**
   * input type を指定します
   */
  type?: 'button' | 'submit' | 'reset';
  /**
   * 押下時に遷移させるURLを指定します。指定した場合は `<a>` 要素、空文字列もしくはundefinedの場合は `<button>` 要素となります
   */
  href?: string;
  /**
   * target を設定します
   */
  target?: string;
  /**
   * 未指定の場合、`target="_blank"` であれば `noopener noreferrer`となります
   *
   * （空文字列を渡した場合には `""` が指定されます）
   */
  rel?: string;
  /**
   * download を設定します。hrefと異なる名前でファイルを保存したい場合は文字列を指定してください。
   */
  download?: boolean | string;
  /**
   * click ハンドラを設定します
   */
  onClick?: React.MouseEventHandler<HTMLButtonElement | HTMLAnchorElement>;
  /**
   * keydown ハンドラを設定します
   */
  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement | HTMLAnchorElement>;
  /**
   * focus ハンドラを設定します
   */
  onFocus?: React.FocusEventHandler<HTMLButtonElement | HTMLAnchorElement>;
  /**
   * blur ハンドラを設定します
   */
  onBlur?: React.FocusEventHandler<HTMLButtonElement | HTMLAnchorElement>;
} & MarginClassProps &
  SelfWindowNavigationProp &
  ButtonAriaProps &
  LinkAriaProps &
  CommonProps;

/**
 * アイコン単体でボタンを配置する場合に使用します
 */
function IconOnlyButtonInner(
  props: Props,
  ref?: React.Ref<HTMLButtonElement>
): React.ReactElement {
  const {
    IconComponent,
    appearance,
    primary,
    danger,
    disabled,
    small,
    large,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    label,
    type,
    href,
    target,
    rel,
    download,
    onSelfWindowNavigation,
    onClick,
    onKeyDown,
    onFocus,
    onBlur,
  } = props;

  const buttonBaseClass = 'vb-iconOnlyButton';
  const classModifier = {
    appearancePrimary: appearance
      ? appearance === 'primary'
      : primary || danger,
    appearanceSecondary:
      appearance === 'secondary' || (!appearance && !primary && !danger),
    appearanceTertiary: appearance === 'tertiary',
    small,
    large,
    danger,
    disabled,
  };

  if (href) {
    return (
      <a
        href={href}
        target={target}
        rel={
          rel || rel === ''
            ? rel
            : target === '_blank'
            ? 'noopener noreferrer'
            : undefined
        }
        download={download}
        onClick={(e: React.MouseEvent): void => {
          disabled
            ? e.preventDefault()
            : onClick && onClick(e as React.MouseEvent<HTMLAnchorElement>);
          if (href) {
            const navigator = selfWindowNavigator(onSelfWindowNavigation);
            navigator && navigator(e, href);
          }
        }}
        onKeyDown={onKeyDown}
        onFocus={onFocus}
        onBlur={onBlur}
        aria-disabled={disabled && true}
        ref={ref as React.Ref<HTMLAnchorElement>}
        {...filterLinkAriaProps(props)}
        {...commonProps(props, buttonBaseClass, classModifier, {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        })}
        aria-label={label}
      >
        <IconComponent className={buttonBaseClass + '__icon'} />
      </a>
    );
  }

  return (
    <button
      disabled={disabled && true}
      onClick={onClick}
      onKeyDown={onKeyDown}
      onFocus={onFocus}
      onBlur={onBlur}
      ref={ref}
      aria-label={label}
      type={type}
      {...filterButtonAriaProps(props)}
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      <IconComponent className={buttonBaseClass + '__icon'} />
    </button>
  );
}

const IconOnlyButton = React.forwardRef(IconOnlyButtonInner);
export default IconOnlyButton;

```

### src/lv1/buttons/IconOnlyJumpButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import IconOnlyJumpButton from './IconOnlyJumpButton';

export default {
  component: IconOnlyJumpButton,
};

export const IconOnlyJumpButtonComponent = () => (
  <IconOnlyJumpButton
    buttonLabel={text('buttonLabel', 'ボタンラベル', 'IconOnlyJumpButton')}
    target={select(
      'Target',
      {
        _blank: '_blank',
        _self: '_self',
      },
      '_self',
      'IconOnlyJumpButton'
    )}
    small={boolean('Small', false, 'IconOnlyJumpButton')}
    large={boolean('Large', false, 'IconOnlyJumpButton')}
    disabled={boolean('Disabled', false, 'IconOnlyJumpButton')}
    url={text('Url', 'https://www.freee.co.jp/', 'IconOnlyJumpButton')}
    appearance={
      select(
        'Appearance',
        {
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
          undefined: '',
        },
        '',
        'IconOnlyJumpButton'
      ) || undefined
    }
    danger={boolean('Danger', false, 'IconOnlyJumpButton')}
    onClick={action('click')}
    onSelfWindowNavigation={action('self window navigation')}
    type={select(
      'Type',
      { submit: 'submit', button: 'button', reset: 'reset' },
      'button',
      'IconOnlyJumpButton'
    )}
    rel={text('Rel', '', 'IconOnlyJumpButton')}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <IconOnlyJumpButton mr={1} mb={1} buttonLabel="default" />
    <IconOnlyJumpButton
      mr={1}
      mb={1}
      appearance="primary"
      buttonLabel="primary"
    />
    <IconOnlyJumpButton
      mr={1}
      mb={1}
      appearance="secondary"
      buttonLabel="secondary"
    />
    <IconOnlyJumpButton
      mr={1}
      mb={1}
      appearance="tertiary"
      buttonLabel="tertiary"
    />
  </>
);

export const Danger = () => (
  <>
    <IconOnlyJumpButton mr={1} mb={1} danger buttonLabel="default" />
    <IconOnlyJumpButton
      mr={1}
      mb={1}
      danger
      appearance="primary"
      buttonLabel="primary"
    />
    <IconOnlyJumpButton
      mr={1}
      mb={1}
      danger
      appearance="secondary"
      buttonLabel="secondary"
    />
    <IconOnlyJumpButton
      mr={1}
      mb={1}
      danger
      appearance="tertiary"
      buttonLabel="tertiary"
    />
  </>
);

export const Disabled = () => (
  <>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} disabled buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        disabled
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        disabled
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        disabled
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} disabled danger buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        disabled
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        disabled
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        disabled
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

export const Small = () => (
  <>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} small buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        small
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        small
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        small
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} small danger buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        small
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        small
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        small
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

export const Large = () => (
  <>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} large buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        large
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        large
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        large
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} large danger buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        large
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        large
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        large
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

export const TargetBlank = () => (
  <>
    <div>
      <IconOnlyJumpButton mr={1} mb={1} target="_blank" buttonLabel="default" />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
    <div>
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        danger
        buttonLabel="default"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        danger
        appearance="primary"
        buttonLabel="primary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        danger
        appearance="secondary"
        buttonLabel="secondary"
      />
      <IconOnlyJumpButton
        mr={1}
        mb={1}
        target="_blank"
        danger
        appearance="tertiary"
        buttonLabel="tertiary"
      />
    </div>
  </>
);

```

### src/lv1/buttons/IconOnlyJumpButton.tsx
```
typescript
import * as React from 'react';
import { MdChevronRight, MdOpenInNew } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import IconOnlyButton from './IconOnlyButton';

type Props = {
  /**
   * ボタンのaria-labelに使用される文字列です。必ず遷移先を表す文字列を指定してください。
   */
  buttonLabel: string;
  /**
   * href を設定します
   */
  url?: string;
  /**
   * click ハンドラを指定します
   */
  onClick?: React.MouseEventHandler;
} & Pick<
  Parameters<typeof IconOnlyButton>[0],
  | 'appearance'
  | 'danger'
  | 'disabled'
  | 'small'
  | 'large'
  | 'rel'
  | 'target'
  | 'type'
  | 'onSelfWindowNavigation'
> &
  CommonProps;

/**
 * IconOnlyJumpButton は遷移のためのボタンです。別URLへ遷移させることが目的の際に使用してください。
 *
 * - 文字列として遷移先を表現できないので、「次の画面へ進む」のように遷移先が自明な場合にのみ使用してください。
 * - `buttonLabel` に必ず代替テキストを設定してください
 * - 前の画面に戻るボタンには `IconOnlyBackwardButton` を使用してください
 * - `target="_self"`（同じウィンドウ・タブで開く） の場合は RightChevron アイコン、`target="_blank"` （新しいウィンドウ・タブで開く）の場合は OpenInNew アイコンになります
 * - ListTableの行内に入れる場合など、高さを小さくしたい場合には `small` を使用してください
 */
export default function IconOnlyJumpButton(props: Props): React.ReactElement {
  const {
    buttonLabel,
    url,
    appearance,
    danger,
    disabled,
    small,
    large,
    target,
    type,
    rel,
    onClick,
    onSelfWindowNavigation,
  } = props;

  const buttonBaseClass = 'vb-jumpButton';
  return (
    <span {...commonProps(props, buttonBaseClass)}>
      <IconOnlyButton
        label={buttonLabel}
        href={url}
        disabled={disabled}
        appearance={appearance}
        danger={danger}
        small={small}
        large={large}
        target={target}
        rel={rel}
        type={type}
        onClick={onClick}
        onSelfWindowNavigation={onSelfWindowNavigation}
        IconComponent={target === '_blank' ? MdOpenInNew : MdChevronRight}
      />
    </span>
  );
}

```

### src/lv1/buttons/InlineLink.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Paragraph from '../typography/Paragraph';
import Note from '../typography/Note';
import InlineLink from './InlineLink';

export default {
  component: InlineLink,
};

export const InlineLinkComponent = () => (
  <InlineLink
    href={text('Href', 'https://www.freee.co.jp/', 'InlineLink') || undefined}
    target={select(
      'Target',
      {
        _blank: '_blank',
        _self: '_self',
      },
      '_self',
      'InlineLink'
    )}
    rel={text('Rel', '', 'InlineLink' || undefined)}
    onClick={action('onClick')}
    onSelfWindowNavigation={action('self window navigation')}
    {...commonKnobs()}
  >
    {text('Children', '文中リンク', 'InlineLink')}
  </InlineLink>
);

export const TargetBlank = () => (
  <InlineLink href="https://www.freee.co.jp/" target="_blank">
    target=_blankにするとアイコンが変わります
  </InlineLink>
);

export const NoHref = () => (
  <InlineLink>hrefなしではbutton要素になります</InlineLink>
);

export const Disabled = () => (
  <InlineLink href="https://www.freee.co.jp/" target="_blank" disabled>
    disabledになります
  </InlineLink>
);

export const WithinComponent = () => (
  <>
    <Paragraph>
      Paragraphの中で使うと0.875rem = 14px で
      <InlineLink href="https://www.freee.co.jp/" target="_blank">
        こんな感じ
      </InlineLink>
    </Paragraph>
    <Note>
      Noteの中で使うと0.75rem = 12px で
      <InlineLink href="https://www.freee.co.jp/" target="_blank">
        ちょっと小さい
      </InlineLink>
    </Note>
  </>
);

export const CustomLineHeight = () => (
  <div style={{ lineHeight: 3 }}>
    <InlineLink target="_blank" href="https://www.freee.co.jp/">
      大きなline-heightのときでもアイコンは文字に対して中央に並ぶ
    </InlineLink>
  </div>
);

```

### src/lv1/buttons/InlineLink.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import {
  ButtonAriaProps,
  LinkAriaProps,
  filterButtonAriaProps,
  filterLinkAriaProps,
} from '../../utilities/AriaProps';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';
import { MdOpenInNew } from 'react-icons/md';

type Props = {
  /**
   * 遷移先画面のURLを指定します。  指定した場合には `<a>` 要素、渡さなかった場合には `<button>` 要素となります。
   *
   * **指定できない場合は何も指定しないでください**
   */
  href?: string;
  /**
   * `<a>` 要素の `target` 属性に渡されます。 `"_blank"` とした場合、 OpenInNew アイコンがつきます
   */
  target?: string;
  /**
   * 未指定の場合、`target="_blank"` であれば `noopener noreferrer`となります
   */
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  rel?: string;
  children?: React.ReactNode;
  /**
   * クリック時の処理を指定します。 `onSelfWindowNavigation` とは違い、すべての状況でクリック時に発火します。
   */
  onClick?: (
    event: React.MouseEvent<HTMLAnchorElement | HTMLButtonElement>
  ) => void;
} & SelfWindowNavigationProp &
  ButtonAriaProps &
  LinkAriaProps &
  CommonProps;

/**
 *
 * 配置された場所のフォントにスタイルをあわせつつ、「青文字」・「アンダーライン」でボタンまたはリンクであることを表現するコンポーネントです。
 *
 * 本文や注釈などの中にリンクを配置したい場合には、こちらを使用してください。
 *
 *
 * - 文字サイズは配置された場所に従います
 * - 見た目はボタンですが、セマンティクス上はリンクにもボタンにもなります
 *   - `href` を指定すると `<a>` 要素、指定しないと `<button>` 要素となります。
 *   - `href` を指定できない（遷移先のURLが存在しない）場合は `href` を指定しないでください（`#` を入れたりしないでください）
 * - `target` に `_blank` を指定すると OpenInNew アイコンが表示されます
 * - react-router 等を使用している場合は、遷移時の処理を `onSelfWindowNavigation` に指定してください
 * - `Button` コンポーネント（特に `appearance="tertiary"` を指定したもの）との使い分け方については、 `Button` コンポーネントの解説を参照してください。
 *
 * 名称は「インライン」の「リンク」ですが、これは配置場所や目的を制限するものではありません。
 * 文中や文尾以外の場所への配置も、「ボタン」としての使用もすることができます。
 */
const InlineLink: React.FC<Props> = (props: Props) => {
  const {
    href,
    children,
    rel,
    target,
    disabled,
    onClick,
    onSelfWindowNavigation,
  } = props;
  const baseClassName = 'vb-inlineLink';

  const classModifier = {
    disabled,
  };

  const icon = target === '_blank' && (
    <span
      className={`${baseClassName}__iconWrapper`}
      role="img"
      aria-hidden="true"
    >
      <span className={`${baseClassName}__icon`}>
        <MdOpenInNew />
      </span>
    </span>
  );

  if (href) {
    return (
      <a
        href={href}
        {...commonProps(props, baseClassName, classModifier)}
        {...filterLinkAriaProps(props)}
        rel={
          rel ? rel : target === '_blank' ? 'noopener noreferrer' : undefined
        }
        target={target}
        aria-disabled={disabled && true}
        onClick={(e: React.MouseEvent<HTMLAnchorElement>) => {
          if (disabled) {
            e.preventDefault();
            return;
          }
          if (onClick) {
            onClick(e);
          }
          const navigator = selfWindowNavigator(onSelfWindowNavigation);
          if (navigator) {
            navigator(e, href);
          }
        }}
      >
        {children}
        {icon}
      </a>
    );
  }
  return (
    <button
      disabled={disabled && true}
      onClick={onClick}
      type="button"
      {...commonProps(props, baseClassName, classModifier)}
      {...filterButtonAriaProps(props)}
    >
      {children}
      {icon}
    </button>
  );
};

export default InlineLink;

```

### src/lv1/buttons/JumpButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import JumpButton from './JumpButton';

export default {
  component: JumpButton,
};

export const JumpButtonComponent = () => {
  const ref = React.createRef<HTMLButtonElement | HTMLAnchorElement>();
  return (
    <JumpButton
      target={select(
        'Target',
        {
          _blank: '_blank',
          _self: '_self',
        },
        '_self',
        'JumpButton'
      )}
      small={boolean('Small', false, 'JumpButton')}
      large={boolean('Large', false, 'JumpButton')}
      disabled={boolean('Disabled', false, 'JumpButton')}
      appearance={
        select(
          'Appearance',
          {
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
            undefined: '',
          },
          '',
          'JumpButton'
        ) || undefined
      }
      danger={boolean('Danger', false, 'JumpButton')}
      url={text('Url', 'https://www.freee.co.jp/', 'JumpButton')}
      onClick={action('click')}
      onSelfWindowNavigation={action('onSelfWindowNavigation')}
      type={select(
        'Type',
        { submit: 'submit', button: 'button', reset: 'reset' },
        'button',
        'JumpButton'
      )}
      rel={text('Rel', '', 'JumpButton')}
      ref={ref}
      {...commonKnobs()}
    >
      ボタン
    </JumpButton>
  );
};

export const Default = () => (
  <>
    <JumpButton mr={1} mb={1}>
      default
    </JumpButton>
    <JumpButton mr={1} mb={1} appearance="primary">
      primary
    </JumpButton>
    <JumpButton mr={1} mb={1} appearance="secondary">
      secondary
    </JumpButton>
    <JumpButton mr={1} mb={1} appearance="tertiary">
      tertiary
    </JumpButton>
  </>
);

export const Danger = () => (
  <>
    <JumpButton mr={1} mb={1} danger>
      default
    </JumpButton>
    <JumpButton mr={1} mb={1} danger appearance="primary">
      primary
    </JumpButton>
    <JumpButton mr={1} mb={1} danger appearance="secondary">
      secondary
    </JumpButton>
    <JumpButton mr={1} mb={1} danger appearance="tertiary">
      tertiary
    </JumpButton>
  </>
);

export const Disabled = () => (
  <>
    <div>
      <JumpButton mr={1} mb={1} disabled>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} disabled appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} disabled appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} disabled appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
    <div>
      <JumpButton mr={1} mb={1} disabled danger>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} disabled danger appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} disabled danger appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} disabled danger appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
  </>
);

export const Small = () => (
  <>
    <div>
      <JumpButton mr={1} mb={1} small>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} small appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} small appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} small appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
    <div>
      <JumpButton mr={1} mb={1} small danger>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} small danger appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} small danger appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} small danger appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
  </>
);

export const Large = () => (
  <>
    <div>
      <JumpButton mr={1} mb={1} large>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} large appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} large appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} large appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
    <div>
      <JumpButton mr={1} mb={1} large danger>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} large danger appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} large danger appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} large danger appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
  </>
);

export const TargetBlank = () => (
  <>
    <div>
      <JumpButton mr={1} mb={1} target="_blank">
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} target="_blank" appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} target="_blank" appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} target="_blank" appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
    <div>
      <JumpButton mr={1} mb={1} target="_blank" danger>
        default
      </JumpButton>
      <JumpButton mr={1} mb={1} target="_blank" danger appearance="primary">
        primary
      </JumpButton>
      <JumpButton mr={1} mb={1} target="_blank" danger appearance="secondary">
        secondary
      </JumpButton>
      <JumpButton mr={1} mb={1} target="_blank" danger appearance="tertiary">
        tertiary
      </JumpButton>
    </div>
  </>
);

```

### src/lv1/buttons/JumpButton.tsx
```
typescript
import * as React from 'react';
import { MdChevronRight, MdOpenInNew } from 'react-icons/md';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';
import Button, { ButtonAppearanceType } from './Button';

type Props = {
  /**
   * ボタンのラベルとなる文字列を指定します
   */
  children?: React.ReactNode;
  /**
   * href を設定します
   */
  url?: string;
  /**
   * 導線の優先度から、ボタンの種類を指定するのに使います。
   * primaryは背景ベタ塗り+白字、secondaryは白背景+グレーの枠線+リンク色字、tertiaryは枠線なし+リンク色字となります。
   */
  appearance?: ButtonAppearanceType;
  /**
   * ボタンを押したものの動作が危険性を伴うかどうか。 `true` にすると赤系の色になります。
   */
  danger?: boolean;
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * rel を指定します
   */
  rel?: string;
  /**
   * `<a>` 要素の `target` 属性に渡されます。 `"_blank"` とした場合、アイコンが OpenInNew になります
   */
  target?: string;
  /**
   * input type を指定します
   */
  type?: 'button' | 'submit' | 'reset';
  /**
   * click ハンドラを指定します
   */
  onClick?: React.MouseEventHandler;
} & MarginClassProps &
  SelfWindowNavigationProp &
  CommonProps;

/**
 * JumpButton は遷移のためのボタンです。別URLへ遷移させることが目的の際に使用してください。
 *
 * - 前の画面に戻るボタンには `BackwardButton` を使用してください
 * - `target="_self"`（同じウィンドウ・タブで開く） の場合は RightChevron アイコン、`target="_blank"` （新しいウィンドウ・タブで開く）の場合は OpenInNew アイコンになります
 * - ListTableの行内に入れる場合など、高さを小さくしたい場合には `small` を使用してください
 * - フォームの送信を伴う場合など、不可逆な遷移をする場合には `Button` を使用してください
 */
const RenderJumpButton: React.ForwardRefRenderFunction<
  HTMLButtonElement | HTMLAnchorElement,
  Props
> = (
  props: Props,
  ref?: React.Ref<HTMLButtonElement | HTMLAnchorElement>
): React.ReactElement => {
  const {
    children,
    url,
    appearance,
    danger,
    disabled,
    small,
    large,
    target,
    type,
    rel,
    onClick,
    onSelfWindowNavigation,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const buttonBaseClass = 'vb-jumpButton';
  return (
    <span
      {...commonProps(
        props,
        buttonBaseClass,
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        }
      )}
    >
      <Button
        href={url}
        disabled={disabled}
        appearance={appearance}
        danger={danger}
        small={small}
        large={large}
        target={target}
        rel={rel}
        type={type}
        onClick={onClick}
        onSelfWindowNavigation={onSelfWindowNavigation}
        IconComponent={target === '_blank' ? MdOpenInNew : MdChevronRight}
        iconPosition="right"
        ref={ref}
      >
        {children}
      </Button>
    </span>
  );
};

const JumpButton = React.forwardRef<
  HTMLButtonElement | HTMLAnchorElement,
  Props
>(RenderJumpButton);

export default JumpButton;

```

### src/lv1/buttons/LeftIconButton.stories.tsx
```
typescript
import * as React from 'react';

import LeftIconButton from './LeftIconButton';
import { commonKnobs } from '../../../stories';
import { MdArrowDropDown } from 'react-icons/md';
import { text, boolean, select } from '@storybook/addon-knobs';

export default {
  title: 'deprecated/buttons/LeftIconButton',
  component: LeftIconButton,
};

export const LeftIconButtonComponent = () => (
  <LeftIconButton
    primary={boolean('Primary', false, 'LeftIconButton')}
    danger={boolean('Danger', false, 'LeftIconButton')}
    small={boolean('Small', false, 'LeftIconButton')}
    disabled={boolean('Disabled', false, 'LeftIconButton')}
    IconComponent={MdArrowDropDown}
    type={select(
      'Type',
      { submit: 'submit', button: 'button', reset: 'reset' },
      'button',
      'LeftIconButton'
    )}
    {...commonKnobs()}
  >
    {text('Label', 'ボタン', 'LeftIconButton')}
  </LeftIconButton>
);

```

### src/lv1/buttons/LeftIconButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import Button from './Button';

type Props = {
  children?: React.ReactNode;
  IconComponent: React.ElementType;
  primary?: boolean;
  danger?: boolean;
  disabled?: boolean;
  small?: boolean;
  type?: 'button' | 'submit' | 'reset';
  onClick?: React.MouseEventHandler;
} & MarginClassProps &
  CommonProps;
/**
 * (廃止予定) Buttonコンポーネントを使用してください
 *
 * 編集・削除・新規作成など、ボタン押下によりもたらされれる動作のメタファーやアイキャッチが必要な際に使用してください
 */
export default function LeftIconButton(props: Props): React.ReactElement {
  return <Button {...props} iconPosition="left" />;
}

```

### src/lv1/buttons/ListButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import ListButton from './ListButton';

export default {
  title: 'deprecated/buttons/ListButton',
  component: ListButton,
};

export const ListButtonComponent = () => (
  <ListButton
    selected={boolean('Selected', false, 'ListButton')}
    href={text('Href', '#', 'ListButton')}
    target={select(
      'Target',
      {
        _blank: '_blank',
        _self: '_self',
      },
      '_self',
      'ListButton'
    )}
    rel={text('Rel', '', 'ListButton')}
    statusIconText={text('StatusIconText', '', 'ListButton')}
    statusIconType={select(
      'StatusIconType',
      {
        done: 'done',
        success: 'success',
        progress: 'progress',
        required: 'required',
        disabled: 'disabled',
        emphasis: 'emphasis',
        warning: 'warning',
        error: 'error',
      },
      'success',
      'ListButton'
    )}
    actionButton={boolean('ActionButton', false, 'ListButton')}
    bgTransparent={boolean('BgTransparent', false, 'ListButton')}
    onClick={action('click')}
    {...commonKnobs()}
  >
    {text('Children', 'リスト', 'ListButton')}
  </ListButton>
);

```

### src/lv1/buttons/ListButton.tsx
```
typescript
import * as React from 'react';
import StatusIcon, { StatusType } from '../icons/StatusIcon';
import { MdOpenInNew } from 'react-icons/md';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  selectableItemIndex?: number;
  children?: React.ReactNode;
  selected?: boolean;
  href?: string;
  target?: string;
  rel?: string;
  statusIconText?: string;
  statusIconType?: StatusType;
  actionButton?: boolean;
  LeftIconComponent?: React.ElementType;
  FarRightIconComponent?: React.ElementType;
  bgTransparent?: boolean;
  onClick?: React.MouseEventHandler;
  selectableItemRef?: React.Ref<HTMLAnchorElement | HTMLButtonElement>;
  onKeyDown?: (
    e: React.KeyboardEvent<HTMLAnchorElement | HTMLButtonElement>,
    selectableItemIndex: number
  ) => void;
} & MarginClassProps &
  CommonProps;

/**
 * `lv2/ListButtons` および `lv2/ListButtonSelector` で使用される想定のボタンです。単独で使用しないでください
 */
const ListButton: React.FC<Props> = (props: Props) => {
  const {
    selectableItemIndex,
    children,
    selected,
    href,
    target,
    rel,
    statusIconText,
    statusIconType,
    actionButton,
    LeftIconComponent,
    FarRightIconComponent,
    bgTransparent,
    onClick,
    selectableItemRef,
    onKeyDown,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const buttonBaseClass = 'vb-listButton';
  const classModifier = {
    selected,
    bgTransparent,
    actionButton,
  };

  const buttonValue = (
    <React.Fragment>
      {LeftIconComponent ? (
        <LeftIconComponent className={buttonBaseClass + '__leftIcon'} />
      ) : null}
      {children}
      {statusIconText && (
        <StatusIcon type={statusIconType} marginLeft marginSize="small">
          {statusIconText}
        </StatusIcon>
      )}
      {FarRightIconComponent ? (
        <FarRightIconComponent className={buttonBaseClass + '__farRightIcon'} />
      ) : null}
    </React.Fragment>
  );

  return selected ? (
    <span
      aria-selected="true"
      role="option"
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {buttonValue}
    </span>
  ) : href ? (
    <a
      href={href}
      target={target ? target : '_self'}
      rel={rel}
      onClick={onClick}
      aria-selected={selected && true}
      role="option"
      ref={selectableItemRef as React.Ref<HTMLAnchorElement>}
      onKeyDown={(e: React.KeyboardEvent<HTMLAnchorElement>): void => {
        onKeyDown &&
          typeof selectableItemIndex === 'number' && // 0だと通らなくなってしまうのでtypeをみる
          onKeyDown(e, selectableItemIndex);
      }}
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {buttonValue}
      {target === '_blank' && (
        <MdOpenInNew className={buttonBaseClass + '__farRightIcon'} />
      )}
    </a>
  ) : (
    <button
      onClick={onClick}
      aria-selected={selected && true}
      role="option"
      type="button"
      ref={selectableItemRef as React.Ref<HTMLButtonElement>}
      onKeyDown={(e: React.KeyboardEvent<HTMLButtonElement>): void => {
        onKeyDown &&
          typeof selectableItemIndex === 'number' && // 0だと通らなくなってしまうのでtypeをみる
          onKeyDown(e, selectableItemIndex);
      }}
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {buttonValue}
    </button>
  );
};

export default ListButton;

```

### src/lv1/buttons/PagerButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import PagerButton from './PagerButton';

export default {
  component: PagerButton,
};

export const PagerButtonComponent = () => (
  <PagerButton
    small={boolean('Small', false, 'PagerButton')}
    disabled={boolean('Disabled', false, 'PagerButton')}
    current={boolean('Current', false, 'PagerButton')}
    onClick={action('click')}
    label={text('Label', 'Pager Button', 'PagerButton')}
    {...commonKnobs()}
  >
    {text('Children', '1', 'PagerButton')}
  </PagerButton>
);

export const Default = () => (
  <>
    <PagerButton mr={1} mb={1} label={'ページ 1'}>
      1
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 2'}>
      2
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 3'} current>
      3
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 4'}>
      4
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 5'}>
      5
    </PagerButton>
  </>
);

export const Disabled = () => (
  <>
    <PagerButton mr={1} mb={1} label={'ページ 1'} disabled>
      1
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 2'} disabled>
      2
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 3'} disabled current>
      3
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 4'} disabled>
      4
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 5'} disabled>
      5
    </PagerButton>
  </>
);

export const Small = () => (
  <>
    <PagerButton mr={1} mb={1} label={'ページ 1'} small>
      1
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 2'} small>
      2
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 3'} small current>
      3
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 4'} small>
      4
    </PagerButton>
    <PagerButton mr={1} mb={1} label={'ページ 5'} small>
      5
    </PagerButton>
  </>
);

```

### src/lv1/buttons/PagerButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * 選択状態にします
   */
  current?: boolean;
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  /**
   * click ハンドラを指定します
   */
  onClick?: React.MouseEventHandler;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * ボタンの代替テキストとして使用されます（`aria-label` になります）。
   */
  label?: string;
} & MarginClassProps &
  CommonProps;

export default function PagerButton(props: Props): React.ReactElement {
  const {
    children,
    current,
    disabled,
    marginBottom,
    marginLeft,
    marginRight,
    marginTop,
    marginSize,
    onClick,
    small,
    label,
  } = props;
  const buttonBaseClass = 'vb-pagerButton';
  const classModifier = {
    current,
    small,
    disabled,
  };

  return (
    <button
      disabled={disabled}
      onClick={onClick}
      tabIndex={current || disabled ? -1 : undefined}
      aria-current={current ? 'true' : 'false'}
      aria-label={label}
      type="button"
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </button>
  );
}

```

### src/lv1/buttons/RightIconButton.stories.tsx
```
typescript
import * as React from 'react';

import RightIconButton from './RightIconButton';
import { commonKnobs } from '../../../stories';
import { MdArrowDropDown } from 'react-icons/md';
import { text, boolean, select } from '@storybook/addon-knobs';

export default {
  title: 'deprecated/buttons/RightIconButton',
  component: RightIconButton,
};

export const RightIconButtonComponent = () => (
  <RightIconButton
    primary={boolean('Primary', false, 'RightIconButton')}
    danger={boolean('Danger', false, 'RightIconButton')}
    small={boolean('Small', false, 'RightIconButton')}
    disabled={boolean('Disabled', false, 'RightIconButton')}
    IconComponent={MdArrowDropDown}
    type={select(
      'Type',
      { submit: 'submit', button: 'button', reset: 'reset' },
      'button',
      'RightIconButton'
    )}
    {...commonKnobs()}
  >
    {text('Label', 'ボタン', 'RightIconButton')}
  </RightIconButton>
);

```

### src/lv1/buttons/RightIconButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { ButtonAriaProps } from '../../utilities/AriaProps';
import Button from './Button';

type Props = {
  children?: React.ReactNode;
  IconComponent: React.ElementType;
  primary?: boolean;
  danger?: boolean;
  disabled?: boolean;
  small?: boolean;
  type?: 'button' | 'submit' | 'reset';
  onClick?: React.MouseEventHandler;
} & MarginClassProps &
  CommonProps &
  ButtonAriaProps;

/**
 * (廃止予定) Buttonコンポーネントを使用してください
 *
 * 「別ウインドウで開く」「ポップアップ表示」などボタン押下時の挙動を示す必要がある際に使用してください
 */
export default function RightIconButton(props: Props): React.ReactElement {
  return <Button {...props} iconPosition="right" />;
}

```

### src/lv1/buttons/TabButton.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TabButton from './TabButton';

export default {
  title: 'deprecated/buttons/TabButton',
  component: TabButton,
};

export const TabButtonComponent = () => (
  <TabButton
    current={boolean('Current', false, 'TabButton')}
    small={boolean('Small', false, 'TabButton')}
    {...commonKnobs()}
  >
    {text('Children', 'タブ', 'TabButton')}
  </TabButton>
);

export const Default = () => (
  <>
    <TabButton mr={1} mb={1}>
      タブ1
    </TabButton>
    <TabButton mr={1} mb={1} current>
      タブ2
    </TabButton>
    <TabButton mr={1} mb={1}>
      タブ3
    </TabButton>
  </>
);

export const Small = () => (
  <>
    <TabButton mr={1} mb={1} small>
      タブ1
    </TabButton>
    <TabButton mr={1} mb={1} small current>
      タブ2
    </TabButton>
    <TabButton mr={1} mb={1} small>
      タブ3
    </TabButton>
  </>
);

```

### src/lv1/buttons/TabButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * 選択状態にします
   */
  current?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
} & MarginClassProps &
  CommonProps;

export default function TabButton(props: Props): React.ReactElement {
  const {
    children,
    current,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const buttonBaseClass = 'vb-tabButton';
  const classModifier = {
    current,
    small,
  };
  return (
    <button
      type="button"
      {...commonProps(props, buttonBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {children}
    </button>
  );
}

```

### src/lv1/buttons/TextButton.stories.tsx
```
typescript
import * as React from 'react';

import TextButton from './TextButton';
import { commonKnobs } from '../../../stories';
import { MdChevronRight } from 'react-icons/md';
import { text, boolean, select } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';

export default {
  title: 'deprecated/buttons/TextButton',
  component: TextButton,
};

export const TextButtonComponent = () => (
  <TextButton
    id={text('ID', '', 'TextButton')}
    url={text('URL', '', 'TextButton')}
    onClick={action('click')}
    target={select(
      'Target',
      {
        _blank: '_blank',
        _self: '_self',
      },
      '_self',
      'TextButton'
    )}
    rel={text('rel', '', 'TextButton')}
    noBorder={boolean('NoBorder', false, 'TextButton')}
    disabled={boolean('Disabled', false, 'TextButton')}
    small={boolean('Small', false, 'TextButton')}
    iconPosition={select(
      'IconPosition',
      { right: 'right', left: 'left' },
      'left',
      'TextButton'
    )}
    IconComponent={MdChevronRight}
    {...commonKnobs()}
  >
    テキストボタン
  </TextButton>
);

```

### src/lv1/buttons/TextButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { KeyCodes } from '../../utilities/keyboard';
import {
  filterButtonAriaProps,
  filterLinkAriaProps,
  ButtonAriaProps,
  LinkAriaProps,
} from '../../utilities/AriaProps';

type Props = {
  children?: React.ReactNode;
  IconComponent?: React.ElementType;
  iconPosition?: 'left' | 'right';
  id?: string;
  url?: string;
  target?: string;
  rel?: string;
  noBorder?: boolean;
  disabled?: boolean;
  small?: boolean;
  onClick?: (
    event: React.SyntheticEvent<HTMLSpanElement | HTMLAnchorElement>
  ) => void;
} & ButtonAriaProps &
  LinkAriaProps &
  MarginClassProps &
  CommonProps;

/**
 * このコンポーネントの使用は **非推奨** です。
 * 文中にリンクを配置したい場合は `InlineLink` を、それ以外の場所では `Button` を `appearance="tertiary"` で使用してください。
 */
const TextButton: React.FC<Props> = (props: Props) => {
  const {
    children,
    IconComponent,
    iconPosition,
    id,
    url,
    target,
    rel,
    noBorder,
    disabled,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    onClick,
  } = props;

  const buttonClass = 'vb-textButton';
  const classModifier = {
    noBorder,
    small,
    disabled,
  };

  return (
    <span
      {...commonProps(props, buttonClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginSize,
        marginTop,
      })}
    >
      {!!IconComponent && iconPosition !== 'right' && (
        <IconComponent className={`${buttonClass}__icon`} focusable={false} />
      )}

      {url ? (
        <a
          className={buttonClass + '__link'}
          id={id}
          href={!disabled ? url : undefined}
          target={target ? target : '_self'}
          onClick={!disabled ? onClick : undefined}
          aria-disabled={disabled && true}
          rel={rel}
          {...filterLinkAriaProps(props)}
        >
          {children}
        </a>
      ) : (
        <span
          id={id}
          role="button"
          tabIndex={0}
          onClick={!disabled ? onClick : undefined}
          onKeyDown={(e: React.KeyboardEvent<HTMLSpanElement>): void => {
            !disabled && e.keyCode === KeyCodes.ENTER && onClick && onClick(e);
          }}
          className={buttonClass + '__button'}
          aria-disabled={disabled && true}
          {...filterButtonAriaProps(props)}
        >
          {children}
        </span>
      )}

      {!!IconComponent && iconPosition === 'right' && (
        <IconComponent
          className={`${buttonClass}__icon ${buttonClass}__icon--right`}
          focusable={false}
        />
      )}
    </span>
  );
};
export default TextButton;

```

### src/lv1/calendar/CalendarDate.stories.tsx
```
typescript
import * as React from 'react';
import { action } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import CalendarDate from './CalendarDate';

export default {
  component: CalendarDate,
};

export const CalendarDateComponent = () => (
  <table style={{ width: '9.5rem' }}>
    <tbody>
      <tr>
        <CalendarDate
          date={text('Date', '2020-01-01', 'CalendarDate')}
          dateLabel={text('DateLabel', '通常勤務', 'CalendarDate')}
          today={boolean('Today', false, 'CalendarDate')}
          disabled={boolean('Disabled', false, 'CalendarDate')}
          secondaryHoliday={boolean('SecondaryHoliday', false, 'CalendarDate')}
          primaryHoliday={boolean('PrimaryHoliday', false, 'CalendarDate')}
          nationalHoliday={boolean('NationalHoliday', false, 'CalendarDate')}
          onClickDate={action('click date')}
          onKeyDown={action('key down')}
          {...commonKnobs()}
        />
      </tr>
    </tbody>
  </table>
);

export const Default = () => (
  <table style={{ width: `${9.5 * 5}rem` }}>
    <tbody>
      <tr>
        <CalendarDate date="2020-01-01" dateLabel="default" />
        <CalendarDate date="2020-01-01" dateLabel="today" today />
        <CalendarDate
          date="2020-01-01"
          dateLabel="primaryHoliday"
          primaryHoliday
        />
        <CalendarDate
          date="2020-01-01"
          dateLabel="secondaryHoliday"
          secondaryHoliday
        />
        <CalendarDate
          date="2020-01-01"
          dateLabel="nationalHoliday"
          nationalHoliday
        />
      </tr>
    </tbody>
  </table>
);

export const Disabled = () => (
  <table style={{ width: `${9.5 * 5}rem` }}>
    <tbody>
      <tr>
        <CalendarDate disabled date="2020-01-01" dateLabel="default" />
        <CalendarDate disabled date="2020-01-01" dateLabel="today" today />
        <CalendarDate
          disabled
          date="2020-01-01"
          dateLabel="primaryHoliday"
          primaryHoliday
        />
        <CalendarDate
          disabled
          date="2020-01-01"
          dateLabel="secondaryHoliday"
          secondaryHoliday
        />
        <CalendarDate
          disabled
          date="2020-01-01"
          dateLabel="nationalHoliday"
          nationalHoliday
        />
      </tr>
    </tbody>
  </table>
);

export const TimeRecord = () => (
  <table style={{ width: `${9.5 * 4}rem` }}>
    <tbody>
      <tr>
        <CalendarDate
          date="2020-01-01"
          dateLabel="default"
          content={{
            type: 'TimeRecord',
            date: '2020-01-01',
            dateLabel: '通常',
            openingTime: '10:00',
            endingTime: '19:00',
          }}
        />
        <CalendarDate
          date="2020-01-01"
          dateLabel="alert"
          content={{
            type: 'TimeRecord',
            date: '2020-01-01',
            status: 'alert',
            dateLabel: '通常',
            openingTime: '10:00',
            endingTime: '19:00',
          }}
        />
        <CalendarDate
          date="2020-01-01"
          dateLabel="notice"
          content={{
            type: 'TimeRecord',
            date: '2020-01-01',
            status: 'notice',
            dateLabel: '通常',
            openingTime: '10:00',
            endingTime: '19:00',
          }}
        />
        <CalendarDate
          date="2020-01-01"
          dateLabel="success"
          content={{
            type: 'TimeRecord',
            date: '2020-01-01',
            status: 'success',
            dateLabel: '通常',
            openingTime: '10:00',
            endingTime: '19:00',
          }}
        />
      </tr>
    </tbody>
  </table>
);

```

### src/lv1/calendar/CalendarDate.tsx
```
typescript
import * as React from 'react';
import { getDate } from 'date-fns';
import { MdError, MdWarning, MdCheckCircle } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';

export type TimeRecord = {
  type: 'TimeRecord';
  date: string;
  status?: 'alert' | 'notice' | 'success';
  dateLabel?: string;
  openingTime: string;
  endingTime: string;
};

type Props = {
  /**
   * 日付を設定します
   */
  date: string;
  /**
   * ラベルを設定します
   */
  dateLabel?: string;
  /**
   * 現在日に設定します
   */
  today?: boolean;
  /**
   * disabled に設定します
   */
  disabled?: boolean;
  /**
   * 休日に設定します
   */
  secondaryHoliday?: boolean;
  /**
   * 休日に設定します
   */
  primaryHoliday?: boolean;
  /**
   * 祝日に設定します
   */
  nationalHoliday?: boolean;
  /**
   * 勤務情報を設定します
   */
  content?: TimeRecord; // 用途に合わせてunionで足していく
  /**
   * click ハンドラを設定します
   */
  onClickDate?: (date: string) => void;
  /**
   * ref を設定します
   */
  selectableDateRef?: (el: HTMLDivElement) => void;
  /**
   * keydown ハンドラを設定します
   */
  onKeyDown?: (
    e: React.KeyboardEvent<HTMLDivElement>,
    date: string,
    onClickDate?: (date: string) => void
  ) => void;
} & CommonProps;

export default function CalendarDate(props: Props): React.ReactElement {
  const {
    date,
    dateLabel,
    today,
    disabled,
    secondaryHoliday,
    primaryHoliday,
    nationalHoliday,
    content,
    onClickDate,
    selectableDateRef,
    onKeyDown,
  } = props;

  const dateNumber = getDate(new Date(date));
  const dateBaseClass = 'vb-calendarDate';
  const statusBaseClass = dateBaseClass + '__status';
  const dateNumberBaseClass = dateBaseClass + '__number';

  const dateClassModifier = {
    input: !!content,
    disabled: !!disabled,
    'primary-holiday': !content && !!primaryHoliday,
    'secondary-holiday': (!content && secondaryHoliday) || nationalHoliday,
  };

  const statusName = content && content.status ? content.status : '';
  const statusClass = vbClassNames(statusBaseClass, {
    modifier: {
      alert: statusName === 'alert',
      notice: statusName === 'notice',
      success: statusName === 'success',
    },
  });

  const numberClassName = vbClassNames(dateNumberBaseClass, {
    modifier: {
      today,
      'today--input': today && !!content,
    },
  });

  const tabIndex = !disabled ? 0 : -1;
  return (
    <td {...commonProps(props, dateBaseClass, dateClassModifier)}>
      <div
        className={`${dateBaseClass}__inner`}
        role="button"
        ref={
          disabled
            ? undefined
            : selectableDateRef
            ? selectableDateRef
            : undefined
        }
        onClick={(): false | void | undefined =>
          !disabled && onClickDate && onClickDate(date)
        }
        aria-disabled={disabled && true}
        onKeyDown={(
          e: React.KeyboardEvent<HTMLDivElement>
        ): false | void | undefined =>
          !disabled &&
          onKeyDown &&
          onKeyDown(e, date, onClickDate && onClickDate)
        }
        tabIndex={tabIndex}
      >
        {dateNumber && <span className={numberClassName}>{dateNumber}</span>}
        {dateLabel && (
          <span className={`${dateBaseClass}__type`}>{dateLabel}</span>
        )}

        {content && content.type === 'TimeRecord' && (
          <span className={`${dateBaseClass}__time`}>
            {content.openingTime}-{content.endingTime}
          </span>
        )}
        <div className={statusClass}>
          {statusName === 'alert' ? (
            <MdError className={`${dateBaseClass}__icon`} />
          ) : statusName === 'notice' ? (
            <MdWarning className={`${dateBaseClass}__icon`} />
          ) : statusName === 'success' ? (
            <MdCheckCircle className={`${dateBaseClass}__icon`} />
          ) : null}
        </div>
      </div>
    </td>
  );
}

```

### src/lv1/calendar/CalendarHead.stories.tsx
```
typescript
import * as React from 'react';
import { select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import CalendarHead from './CalendarHead';

export default {
  component: CalendarHead,
};

export const CalendarHeadComponent = () => (
  <table style={{ width: `${9.5 * 7}rem`, borderCollapse: 'collapse' }}>
    <thead>
      <CalendarHead
        weekStartsOn={select('WeekStartsOn', [0, 1], 0, 'CalendarHead')}
        {...commonKnobs()}
      />
    </thead>
  </table>
);

```

### src/lv1/calendar/CalendarHead.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 週の始まりを指定する(1: 月曜日, それ以外: 日曜日)
   */
  weekStartsOn: number;
} & CommonProps;

export default function CalendarHead(props: Props): React.ReactElement {
  const { weekStartsOn } = props;
  const headBaseClass = 'vb-calendarHead';
  const cellBaseClass = 'vb-calendarHead__cell';

  if (weekStartsOn === 1) {
    return (
      <tr {...commonProps(props, headBaseClass)}>
        <th className={cellBaseClass}>月</th>
        <th className={cellBaseClass}>火</th>
        <th className={cellBaseClass}>水</th>
        <th className={cellBaseClass}>木</th>
        <th className={cellBaseClass}>金</th>
        <th className={`${cellBaseClass} ${cellBaseClass}--secondary-holiday`}>
          土
        </th>
        <th className={`${cellBaseClass} ${cellBaseClass}--primary-holiday`}>
          日
        </th>
      </tr>
    );
  } else {
    return (
      <tr {...commonProps(props, headBaseClass)}>
        <th className={`${cellBaseClass} ${cellBaseClass}--primary-holiday`}>
          日
        </th>
        <th className={cellBaseClass}>月</th>
        <th className={cellBaseClass}>火</th>
        <th className={cellBaseClass}>水</th>
        <th className={cellBaseClass}>木</th>
        <th className={cellBaseClass}>金</th>
        <th className={`${cellBaseClass} ${cellBaseClass}--secondary-holiday`}>
          土
        </th>
      </tr>
    );
  }
}

```

### src/lv1/forms/CheckBox.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import CheckBox from './CheckBox';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: CheckBox,
};

export const CheckBoxComponent = () => (
  <CheckBox
    name="checkbox"
    value="チェックボックス"
    disabled={boolean('Disabled', false, 'CheckBox')}
    checked={boolean('Checked', false, 'CheckBox')}
    error={boolean('Error', false, 'CheckBox')}
    small={boolean('Small', false, 'CheckBox')}
    {...handlers}
    {...commonKnobs()}
  >
    {text('Children', 'チェックボックス', 'CheckBox')}
  </CheckBox>
);

export const Default = () => (
  <>
    <CheckBox mr={1}>default</CheckBox>
    <CheckBox mr={1} disabled>
      disabled
    </CheckBox>
    <CheckBox mr={1} disabled checked>
      disabled
    </CheckBox>
    <CheckBox mr={1} error>
      error
    </CheckBox>
  </>
);

export const Small = () => (
  <>
    <CheckBox mr={1} small>
      default
    </CheckBox>
    <CheckBox mr={1} small disabled>
      disabled
    </CheckBox>
    <CheckBox mr={1} small disabled checked>
      disabled
    </CheckBox>
    <CheckBox mr={1} small error>
      error
    </CheckBox>
  </>
);

export const WithParagraph = () => (
  <>
    <CheckBox>
      改行あり
      <br />
      のテキスト
    </CheckBox>
  </>
);

```

### src/lv1/forms/CheckBox.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { FormHandlers } from './types';
import vbClassNames from '../../utilities/vbClassNames';

type Props = {
  children?: React.ReactNode;
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * input checked を指定します
   */
  checked?: boolean;
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * input autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
} & FormHandlers<HTMLInputElement> &
  MarginClassProps &
  CommonProps;

const CheckBoxInternal: React.ForwardRefRenderFunction<
  HTMLInputElement,
  Props
> = (props: Props, ref?: React.Ref<HTMLInputElement>) => {
  const {
    children,
    name,
    value,
    checked,
    required,
    autofocus,
    disabled,
    error,
    small,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const className = 'vb-checkbox';
  const classModifier = {
    disabled,
    error,
    small,
  };

  return (
    <label
      {...commonProps(props, className, classModifier, {
        marginTop,
        marginLeft,
        marginRight,
        marginBottom,
        marginSize,
      })}
    >
      <input
        type="checkbox"
        name={name && name}
        value={value && value}
        className={vbClassNames(className + '__control', {
          modifier: classModifier,
        })}
        disabled={disabled && true}
        checked={checked && true}
        required={required && true}
        autoFocus={autofocus && true}
        onChange={onChange}
        onInput={onInput}
        onFocus={onFocus}
        onBlur={onBlur}
        onKeyDown={onKeyDown}
        onKeyUp={onKeyUp}
        ref={ref}
      />
      <span className={className + '__label'}>{children}</span>
    </label>
  );
};

/**
 * 複数の選択肢から個数に制限なく選択させるときに使用するコンポーネントです。
 *
 * - 「いくつかの選択肢の中からひとつだけを選ぶ」用途には `RadioButton` を使用してください。
 *   - 例外として、ある状態に対して boolean 値のどちらかを選ぶ際に `CheckBox` をひとつだけ置いて選ばせるのはOKです。
 *     - その際には「選択/選択解除したときに何が起こるのか」が明確になるラベルを配置してください
 *     - ON/OFF のふたつの `RadioButton` を置くのもOKです。どちらを使うべきかはスペースの都合や「デフォルト値を設定するべきか」などを考慮して決定してください。
 * - 基本的に、チェックボックスのラベルには句読点は使わないようにしてください。
 *
 * ## accessibility
 * VibesのCheckBoxコンポーネントはブラウザのデフォルト表示の見た目から変更していません。
 * a11yチェックにある「クリックやタッチに反応するサイズが、充分な大きさになっているか」の項目OKにして問題ありません。
 *
 */
const CheckBox = React.forwardRef(CheckBoxInternal);
export default CheckBox;

```

### src/lv1/forms/FormControlLabel.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import FormControlLabel from './FormControlLabel';

export default {
  component: FormControlLabel,
};

export const FormControlLabelComponent = () => (
  <FormControlLabel
    id={text('Id', 'id_of_this_label_element', 'FormControlLabel')}
    htmlFor={text(
      'HtmlFor',
      'id_of_this_label_describes_for',
      'FormControlLabel'
    )}
    required={boolean('Required', false, 'FormControlLabel')}
    {...commonKnobs()}
  >
    {text('Children', 'ラベル', 'FormControlLabel')}
  </FormControlLabel>
);

```

### src/lv1/forms/FormControlLabel.tsx
```
typescript
import * as React from 'react';
import { RequiredIcon } from '../../lv1/icons/RequiredIcon';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * label id を指定します
   */
  id?: string;
  /**
   * label htmlfor を指定します
   */
  htmlFor?: string;
  /**
   * 必須ラベルを表示します
   */
  required?: boolean;
} & MarginClassProps &
  CommonProps;

const FormControlLabel: React.FC<Props> = (props: Props) => {
  const {
    children,
    id,
    htmlFor,
    required,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const inner = (
    <React.Fragment>
      <span className="vb-formControlLabel__text">{children}</span>
      {required ? <RequiredIcon ml={0.5} /> : null}
    </React.Fragment>
  );
  return htmlFor ? (
    <label
      id={id}
      htmlFor={htmlFor}
      {...commonProps(
        props,
        'vb-formControlLabel',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      {inner}
    </label>
  ) : (
    <span
      id={id}
      {...commonProps(
        props,
        'vb-formControlLabel',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      {inner}
    </span>
  );
};
export default FormControlLabel;

```

### src/lv1/forms/NumeralField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import NumeralField from './NumeralField';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
});

export default {
  title: 'deprecated/forms/NumeralField',
  component: NumeralField,
};

export const NumeralFieldComponent = () => (
  <NumeralField
    value={number('Value', 1000000, undefined, 'NumeralField')}
    placeholder={text('Placeholder', '', 'NumeralField')}
    required={boolean('Required', false, 'NumeralField')}
    disabled={boolean('Disabled', false, 'NumeralField')}
    error={boolean('Error', false, 'NumeralField')}
    small={boolean('Small', false, 'NumeralField')}
    width={
      select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
          undefined: '',
        },
        '',
        'NumeralField'
      ) || undefined
    }
    autoComplete={
      select(
        'Autocomplete',
        {
          off: 'off',
          on: 'on',
          name: 'name',
          'honorific-prefix': 'honorific-prefix',
          'given-name': 'given-name',
          'additional-name': 'additional-name',
          'family-name': 'family-name',
          'honorific-suffix': 'honorific-suffix',
          nickname: 'nickname',
          email: 'email',
          username: 'username',
          'new-password': 'new-password',
          'current-password': 'current-password',
          'one-time-code': 'one-time-code',
          'organization-title': 'organization-title',
          organization: 'organization',
          'street-address': 'street-address',
          'address-line1': 'address-line1',
          'address-line2': 'address-line2',
          'address-line3': 'address-line3',
          'address-level4': 'address-level4',
          'address-level3': 'address-level3',
          'address-level2': 'address-level2',
          'address-level1': 'address-level1',
          country: 'country',
          'country-name': 'country-name',
          'postal-code': 'postal-code',
          'cc-name': 'cc-name',
          'cc-given-name': 'cc-given-name',
          'cc-additional-name': 'cc-additional-name',
          'cc-family-name': 'cc-family-name',
          'cc-number': 'cc-number',
          'cc-exp': 'cc-exp',
          'cc-exp-month': 'cc-exp-month',
          'cc-exp-year': 'cc-exp-year',
          'cc-csc': 'cc-csc',
          'cc-type': 'cc-type',
          'transaction-currency': 'transaction-currency',
          'transaction-amount': 'transaction-amount',
          language: 'language',
          bday: 'bday',
          'bday-day': 'bday-day',
          'bday-month': 'bday-month',
          'bday-year': 'bday-year',
          sex: 'sex',
          tel: 'tel',
          'tel-country-code': 'tel-country-code',
          'tel-national': 'tel-national',
          'tel-area-code': 'tel-area-code',
          'tel-local': 'tel-local',
          'tel-local-prefix': 'tel-local-prefix',
          'tel-local-suffix': 'tel-local-suffix',
          'tel-extension': 'tel-extension',
          impp: 'impp',
          url: 'url',
          photo: 'photo',
          undefined: '',
        },
        '',
        'NumeralField'
      ) || undefined
    }
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <NumeralField mr={1} />
    <NumeralField mr={1} disabled />
    <NumeralField mr={1} error />
  </>
);

export const InteractiveSample = () => {
  const [value, setValue] = React.useState<number | null>(null);
  return <NumeralField value={value} onChange={(v) => setValue(v)} />;
};

```

### src/lv1/forms/NumeralField.tsx
```
typescript
import React from 'react';
import TextField from './TextField';
import { Ascii, Digits } from '../../utilities';

type Props = Omit<
  React.ComponentProps<typeof TextField>,
  'alignCenter' | 'alignRight' | 'onChange' | 'value'
> & {
  onChange?: (value: number | null) => void;
  value?: number | null;
};

/**
 * (Deprecated) NumeralCodeInput, DigitsInputまたはTextFieldを使用してください
 */
const NumeralField: React.FC<Props> = ({
  onChange,
  value,
  ...props
}: Props) => {
  const onFieldChange = React.useCallback(
    (e) => {
      if (!onChange) {
        return;
      }
      const numValue = Number(
        Digits.numberize(Ascii.zenkakuToHankaku(e.target.value))
      );

      onChange(
        (e.target.value !== 0 && numValue === 0) || isNaN(numValue)
          ? null
          : numValue
      );
    },
    [onChange]
  );

  return (
    <TextField
      {...props}
      alignRight
      onChange={onFieldChange}
      value={`${value ?? ''}`}
    />
  );
};
export default NumeralField;

```

### src/lv1/forms/OptionButton.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { OptionButton } from './OptionButton';
import { MarginBase, CheckBox, RadioButton, SectionTitle, Paragraph } from '..';
import { action } from '@storybook/addon-actions';
import { select } from '@storybook/addon-knobs';

export default {
  component: OptionButton,
};

export const OptionButtonComponent = () => {
  const [checked, setChecked] = React.useState(false);
  return (
    <>
      <OptionButton
        checked={checked}
        size={
          select(
            'size',
            {
              meduim: 'medium',
              large: 'large',
              small: 'small',
              none: 'none',
              undefined: '',
            },
            'medium',
            'OptionButton'
          ) || undefined
        }
        {...commonKnobs()}
      >
        <CheckBox
          name="name"
          value="value"
          checked={checked}
          onChange={(e) => {
            setChecked(e.target.checked);
          }}
        >
          チェックボックス
        </CheckBox>
      </OptionButton>
    </>
  );
};

export const WithRadioButton = () => {
  const [answer, setAnswer] = React.useState<'yes' | 'no' | undefined>(
    undefined
  );
  return (
    <form>
      <OptionButton checked={answer === 'yes'} mr={2} size="medium">
        <RadioButton
          name="question"
          value="yes"
          checked={answer === 'yes'}
          onChange={(e) => e.target.checked && setAnswer('yes')}
        >
          はい
        </RadioButton>
      </OptionButton>
      <OptionButton checked={answer === 'no'} size="medium">
        <RadioButton
          name="question"
          value="yes"
          checked={answer === 'no'}
          onChange={(e) => e.target.checked && setAnswer('no')}
        >
          いいえ
        </RadioButton>
      </OptionButton>
    </form>
  );
};

export const Sizes = () => (
  <>
    <MarginBase mb={1}>
      <OptionButton checked={false} size="small" mr={1}>
        <CheckBox checked={false} onChange={action('onChange')}>
          small
        </CheckBox>
      </OptionButton>
      <OptionButton checked={false} size="medium" mr={1}>
        <CheckBox checked={false} onChange={action('onChange')}>
          medium
        </CheckBox>
      </OptionButton>
      <OptionButton checked={false} size="large" mr={1}>
        <CheckBox checked={false} onChange={action('onChange')}>
          large
        </CheckBox>
      </OptionButton>
      <OptionButton checked={false} size="none">
        <CheckBox checked={false} onChange={action('onChange')}>
          none
        </CheckBox>
      </OptionButton>
    </MarginBase>
    <MarginBase mb={1}>
      <OptionButton checked={true} size="small" mr={1}>
        <CheckBox checked={true} onChange={action('onChange')}>
          small
        </CheckBox>
      </OptionButton>
      <OptionButton checked={true} size="medium" mr={1}>
        <CheckBox checked={true} onChange={action('onChange')}>
          medium
        </CheckBox>
      </OptionButton>
      <OptionButton checked={true} size="large" mr={1}>
        <CheckBox checked={true} onChange={action('onChange')}>
          large
        </CheckBox>
      </OptionButton>
      <OptionButton checked={true} size="none">
        <CheckBox checked={true} onChange={action('onChange')}>
          none
        </CheckBox>
      </OptionButton>
    </MarginBase>
  </>
);

export const Width = () => (
  <>
    <OptionButton checked={false} mb={1} size="medium" width="default">
      <CheckBox checked={false} onChange={action('onChange')}>
        default
      </CheckBox>
    </OptionButton>
    <OptionButton checked={false} size="medium" width="full">
      <CheckBox checked={false} onChange={action('onChange')}>
        full
      </CheckBox>
    </OptionButton>
  </>
);

export const CustomizedButton = () => {
  const [checked, setChecked] = React.useState(false);
  return (
    <>
      <OptionButton checked={checked} size="none" {...commonKnobs()}>
        <span style={{ display: 'block', minWidth: '15rem', padding: '1rem' }}>
          <SectionTitle headlineLevel={-1} mb={0.5}>
            コイツの中身はカスタマイズ可能
          </SectionTitle>
          <CheckBox
            name="name"
            value="value"
            checked={checked}
            onChange={(e) => {
              setChecked(e.target.checked);
            }}
            mb={0.5}
          >
            チェックボックス
          </CheckBox>
          <Paragraph>
            さえあれば、中身は自由に変えられます。大きさもいい感じに変えてOK。
          </Paragraph>
        </span>
      </OptionButton>
    </>
  );
};

```

### src/lv1/forms/OptionButton.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import useUniqueId from '../../hooks/useUniqueId';

type Props = {
  /**
   * ボタン内部のコンテンツです。
   * `<CheckBox>` `<RadioButton>` を1つ含むようにしてください。 また、リンクやボタンなどは含めないでください
   */
  children: React.ReactNode;
  /**
   * idを指定できます。 `<CheckBox>` `<RadioButton>` の `id` とは別になります
   */
  id?: string;
  /**
   * 選択済み状態であるかを指定します。
   * 必ず `children` 内の `<CheckBox>` `<RadioButton>` の `checked` と連動させてください。
   */
  checked: boolean;

  /**
   * 最小サイズを指定します。
   * サイズはButtonコンポーネントに `small` や `large` を指定した場合と同じです。`none`にした場合は最小サイズが未指定となります
   */
  size?: 'small' | 'medium' | 'large' | 'none';
  /**
   * 'full' で包括している要素に対して横幅を100%にします。
   */
  width?: 'default' | 'full';
} & CommonProps;

const dispatchClickToInput = (elm: HTMLElement) => {
  const input = elm.querySelector('input');
  const evt = new MouseEvent('click', {
    bubbles: true,
    cancelable: false,
  });
  input && input.dispatchEvent(evt);
};

/**
 * チェックボックス・ラジオボタンをボタン風に見せるためのコンポーネントです
 *
 * * `<CheckBox>` `<RadioButton>` を `children` 内で使用してください
 *   * 領域内でのクリック時、 `<input>` に click イベントをdispatchします。必ず `<input>` が内部に1つだけ配置されるようにしてください（`<CheckBox>` `<RadioButton>` を1つだけ配置すれば、この条件を満たします）
 * * `checked` propをtrueにすると、枠線の色と太さが変わり、選択済みであることを示す見た目になります
 *   * `children` に入れた `<CheckBox>` `<RadioButton>` のステートとは連動しないので、必ず連動するようにコードを記述してください
 * * 内部には、リンクやボタンなどの、`<CheckBox>` `<RadioButton>`以外のクリッカブルな要素は配置できません
 */
export const OptionButton: React.FC<Props> = (props: Props) => {
  const { children, id, checked, size, width } = props;
  const className = 'vb-optionButton';
  const selfRef = React.useRef<HTMLSpanElement>(null);
  const internalId = useUniqueId(className, id);
  return (
    <span
      {...commonProps(props, className, {
        checked,
        sizeSmall: size === 'small',
        sizeMedium: size === 'medium',
        sizeLarge: size === 'large',
        widthFull: width === 'full',
      })}
      id={internalId}
      ref={selfRef}
    >
      <span
        className={`${className}__button`}
        id={`${internalId}__button`}
        onClick={() => {
          selfRef.current && dispatchClickToInput(selfRef.current);
        }}
        // ラジオボタンのクリック可能領域を視覚的に巨大にするための要素なのでaria-hiddenだけど、ロール的にはbuttonだしaria-labelledbyするよ
        role="button"
        aria-hidden="true"
        aria-labelledby={`${internalId}__children`}
      ></span>
      <span className={`${className}__children`} id={`${internalId}__children`}>
        {/* flexで安全に中央寄せするため、spanを一層噛ませてある */}
        <span className={`${className}__children__inner`}>{children}</span>
      </span>
    </span>
  );
};

```

### src/lv1/forms/RadioButton.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import RadioButton from './RadioButton';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: RadioButton,
};

export const RadioButtonComponent = () => (
  <RadioButton
    name="radio"
    value="ラジオボタン"
    disabled={boolean('Disabled', false, 'RadioButton')}
    checked={boolean('Checked', false, 'RadioButton')}
    error={boolean('Error', false, 'RadioButton')}
    small={boolean('Small', false, 'RadioButton')}
    {...handlers}
    {...commonKnobs()}
  >
    {text('Children', 'ラジオボタン', 'RadioButton')}
  </RadioButton>
);

export const Default = () => (
  <>
    <RadioButton mr={1}>default</RadioButton>
    <RadioButton mr={1} disabled>
      disabled
    </RadioButton>
    <RadioButton mr={1} disabled checked>
      disabled
    </RadioButton>
    <RadioButton mr={1} error>
      error
    </RadioButton>
  </>
);

export const Small = () => (
  <>
    <RadioButton mr={1} small>
      default
    </RadioButton>
    <RadioButton mr={1} small disabled>
      disabled
    </RadioButton>
    <RadioButton mr={1} small disabled checked>
      disabled
    </RadioButton>
    <RadioButton mr={1} small error>
      error
    </RadioButton>
  </>
);

export const WithParagraph = () => (
  <>
    <RadioButton mr={1}>
      改行あり
      <br />
      のテキスト
    </RadioButton>
  </>
);

```

### src/lv1/forms/RadioButton.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { FormHandlers } from './types';
import vbClassNames from '../../utilities/vbClassNames';

type Props = {
  children?: React.ReactNode;
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * input checked を指定します
   */
  checked?: boolean;
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * input autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
} & FormHandlers<HTMLInputElement> &
  MarginClassProps &
  CommonProps;

/**
 * 複数の選択肢からひとつだけを選ばせるコンポーネントです。
 *
 * - 「いくつかの選択肢の中からひとつ以上のものを選ぶ」用途には `CheckBox` を使用してください。
 * - ある状態に対して ON/OFF の選択肢からどちらかを選ぶ用途の場合は、`RadioButton` ふたつを使用しても、`CheckBox`ひとつを使用してもOKです。
 *     - スペースの都合や「デフォルト値を設定するべきか」などを考慮して決定してください。
 * - `RadioButton` を使うべきか `SelectBox` を使うべきかは、スペース上の都合などを考慮して決定してください。
 *   - `RadioButton` は `SelectBox` よりスペースが必要ですが、はじめから選択肢が表示されているという特徴があります。
 * - 基本的にラジオボタンのラベルには句読点は使わないようにしてください。
 *
 *  ## accessibility
 * VibesのRadioButtonコンポーネントはブラウザのデフォルト表示の見た目から変更していません。
 * a11yチェックにある「クリックやタッチに反応するサイズが、充分な大きさになっているか」の項目OKにして問題ありません。
 *
 * ラジオボタンを実装する際は、グループ単位で使用してください。
   - 一つのグループ内に複数の選択肢があるイメージです。
 * グループ内を上下左右キーを使って移動できるようにしてください。
   - グループ内の最後の選択肢まで移動したら最初の選択肢に戻るようになっていれば、name属性の指定によって正しい挙動が設定できています。
 * `name`属性を正しく指定することが必要です。
   - `name`属性は、選択肢がどのグループに属しているのかを判別するために使われます。
     - 複数のグループが並んでいる際、グループごとに別々のname 属性がないと全ての選択肢が１つのグループとして認識されてしまうため、キーボード操作やスクリーンリーダーで不便になります。
 * 以下のように設定してください
 
  ```jsx
      <FormControl label="性別">
          <RadioButton name="sex">男性</RadioButton>
          <RadioButton name="sex">女性</RadioButton>
          <RadioButton name="sex">その他</RadioButton>
          <RadioButton name="sex">回答しない</RadioButton>
      </FormControl>
      <FormControl label="年齢">
          <RadioButton name="age">10代</RadioButton>
          <RadioButton name="age">20代</RadioButton>
          <RadioButton name="age">30代</RadioButton>
          <RadioButton name="age">40代</RadioButton>
         <RadioButton name="age">50代</RadioButton>
          <RadioButton name="age">60代以上</RadioButton>
      </FormControl>
  ```  
 */
const RadioButton: React.FC<Props> = (props: Props) => {
  const {
    children,
    name,
    value,
    checked,
    required,
    autofocus,
    disabled,
    error,
    small,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const className = 'vb-radio';
  const classModifier = {
    disabled,
    error,
    small,
  };

  return (
    <label
      {...commonProps(props, className, classModifier, {
        marginTop,
        marginLeft,
        marginRight,
        marginBottom,
        marginSize,
      })}
    >
      <input
        type="radio"
        name={name && name}
        value={value && value}
        className={vbClassNames(className + '__control', {
          modifier: classModifier,
        })}
        disabled={disabled && true}
        checked={checked && true}
        required={required && true}
        autoFocus={autofocus && true}
        onChange={onChange}
        onInput={onInput}
        onFocus={onFocus}
        onBlur={onBlur}
        onKeyDown={onKeyDown}
        onKeyUp={onKeyUp}
      />
      <span className={className + '__label'}>{children}</span>
    </label>
  );
};

export default RadioButton;

```

### src/lv1/forms/ReadOnlyField.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import ReadOnlyField from './ReadOnlyField';
import TextField from './TextField';

export default {
  component: ReadOnlyField,
};

export const ReadOnlyFieldComponent = () => (
  <ReadOnlyField
    id={text('Id', '', 'ReadOnlyField')}
    label={text('Label', '', 'ReadOnlyField')}
    labelledby={text('Labelledby', '', 'ReadOnlyField')}
    name={text('Name', 'name_of_field', 'ReadOnlyField')}
    value={text('Value', 'read_only_field', 'ReadOnlyField')}
    valueText={text('ValueText', 'read only なフィールド', 'ReadOnlyField')}
    small={boolean('Small', false, 'ReadOnlyField')}
    large={boolean('Large', false, 'ReadOnlyField')}
    alignRight={boolean('AlignRight', false, 'ReadOnlyField')}
    alignCenter={boolean('AlignCenter', false, 'ReadOnlyField')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'ReadOnlyField'
    )}
    {...commonKnobs()}
  />
);

export const VerticalAlign = () => (
  // TextFieldと位置が揃うよ！
  <>
    Hoge
    <ReadOnlyField value="Fuga" ml={0.5} />
    <TextField value="Moge" ml={0.5} />
  </>
);

export const LongValue = () => (
  <ReadOnlyField
    id={text('Id', '', 'ReadOnlyField')}
    label={text('Label', '', 'ReadOnlyField')}
    labelledby={text('Labelledby', '', 'ReadOnlyField')}
    name={text('Name', 'name_of_field', 'ReadOnlyField')}
    small={boolean('Small', false, 'ReadOnlyField')}
    large={boolean('Large', false, 'ReadOnlyField')}
    alignRight={boolean('AlignRight', false, 'ReadOnlyField')}
    alignCenter={boolean('AlignCenter', false, 'ReadOnlyField')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'ReadOnlyField'
    )}
    {...commonKnobs()}
    value={Array(50).fill('長いテキスト').join(' ')}
  />
);

```

### src/lv1/forms/ReadOnlyField.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { TextFieldWidth } from './TextField';

type Props = {
  /**
   * id を指定します
   */
  id?: string;
  /**
   * aria-label を指定します
   */
  label?: string;
  /**
   * aria-labelledby を指定します
   */
  labelledby?: string;
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * 表示用のテキストを指定します
   */
  valueText?: string;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * 中央寄せにします
   */
  alignCenter?: boolean;
  /**
   * 右寄せにします
   */
  alignRight?: boolean;
  /**
   * 幅を指定します
   */
  width?: TextFieldWidth;
} & CommonProps;

/**
 * ユーザーの入力内容が readonly で表示するためのコンポーネントです。
 *
 * - 高さが TextField などと揃うようにつくられているため、それらと並べて使用してもOKです。
 * - 幅の指定も TextField などと同様に行えます。
 */
const ReadOnlyField: React.FC<Props> = (props: Props) => {
  const {
    id,
    label,
    labelledby,
    name,
    value,
    valueText,
    small,
    large,
    alignRight,
    alignCenter,
    width,
  } = props;
  const classModifier = {
    small,
    large,
    alignCenter,
    alignRight,
    widthXSmall: width === 'xSmall',
    widthSmall: width === 'small',
    widthMedium: width === 'medium' || !width,
    widthLarge: width === 'large',
    widthFull: width === 'full',
  };

  /**
   * ユーザーの入力内容が表示される想定のコンポーネントのため、
   * data-masking が明示的に false でない限りは true にして行動追跡ツールに保存されないようにする。
   * props 自体は readonly のため、コピーした配列で data-masking が undefined のときに true で上書きしている。
   */
  const checkedProps = {
    ...props,
    'data-masking':
      props['data-masking'] !== undefined ? props['data-masking'] : true,
  };

  return (
    <span
      {...commonProps(checkedProps, 'vb-readOnlyField', classModifier)}
      id={id}
      aria-label={label}
      aria-labelledby={labelledby}
    >
      <span className="vb-readOnlyField__inner">{valueText || value}</span>
      <input type="hidden" name={name} value={value} />
    </span>
  );
};

export default ReadOnlyField;

```

### src/lv1/forms/SearchField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { FocusHighlight } from '../a11y/FocusHighlight';
import SearchField from './SearchField';
import ColumnBase from '../bases/ColumnBase';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: SearchField,
};

export const SearchFieldComponent = () => (
  <SearchField
    id={text('Id', 'id', 'SearchField')}
    label={text('Label', '検索フォーム', 'SearchField')}
    placeholder={text('Placeholder', '検索', 'SearchField')}
    name={text('Name', 'search', 'SearchField')}
    width={select(
      'Width',
      {
        xSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'SearchField'
    )}
    required={boolean('Required', false, 'SearchField')}
    disabled={boolean('Disabled', false, 'SearchField')}
    error={boolean('Error', false, 'SearchField')}
    small={boolean('Small', false, 'SearchField')}
    large={boolean('Large', false, 'SearchField')}
    maxLength={number('MaxLength', 100, undefined, 'SearchField')}
    borderless={boolean('Borderless', false, 'SearchField')}
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <SearchField marginRight />
    <SearchField marginRight disabled />
    <SearchField marginRight error />
  </>
);

export const Small = () => (
  <>
    <SearchField marginRight small />
    <SearchField marginRight small disabled />
    <SearchField marginRight small error />
  </>
);

export const Large = () => (
  <>
    <SearchField marginRight large />
    <SearchField marginRight large disabled />
    <SearchField marginRight large error />
  </>
);

export const MaxWidth = () => (
  <div style={{ width: `${number('parent element width (rem)', 15)}rem` }}>
    <ColumnBase>
      <SearchField
        value="親要素よりも幅が大きいとき、SearchFieldの幅は小さくなります。"
        width={select(
          'Width',
          {
            XSmall: 'xSmall',
            Small: 'small',
            Medium: 'medium',
            Large: 'large',
            Full: 'full',
          },
          'large',
          'TextField'
        )}
      />
    </ColumnBase>
  </div>
);

export const Borderless = () => (
  <>
    <div>
      <SearchField
        borderless
        marginRight
        width={'full'}
        value={
          'borderless を指定すると、ボーダーやフォーカスインジケーターが非表示になります。必ずFocusHighlightコンポーネント等でフォーカスインジケーターを表示してください。'
        }
        mb={1}
      />
    </div>
    <FocusHighlight highlightStyle="inset" width={'full'}>
      <SearchField
        borderless
        marginRight
        width={'full'}
        value={'これはFocusHighlightコンポーネントを使用している例です'}
      />
    </FocusHighlight>
  </>
);

```

### src/lv1/forms/SearchField.tsx
```
typescript
import * as React from 'react';
import { MdSearch } from 'react-icons/md';
import vbClassNames from '../../utilities/vbClassNames';
import { MarginClassProps } from '../../utilities/marginClasses';
import { FormHandlers } from './types';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  /**
   * label id を指定します
   */
  id?: string;
  /**
   * input aria-label を指定します
   */
  label?: string;
  /**
   * input aria-labelledby を指定します
   */
  labelledby?: string;
  /**
   * input placeholder を指定します
   */
  placeholder?: string;
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * input autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * 幅を指定します
   */
  width?: 'xSmall' | 'small' | 'medium' | 'large' | 'full';
  /**
   * input maxlength を指定します
   */
  maxLength?: number;
  /**
   * ボーダーやフォーカスインジケーターを非表示にします。
   *
   * - 必ず、FocusHighlightコンポーネント等で、フォーカスインジケーターを用意してください
   * - 編集に使用しない場合（閲覧専用モード等）には、disabledを使用してください
   */
  borderless?: boolean;
} & FormHandlers<HTMLInputElement> &
  MarginClassProps &
  CommonProps;

const SearchFieldInner = (
  props: Props,
  ref: React.Ref<HTMLInputElement>
): React.ReactElement => {
  const {
    id,
    label,
    labelledby,
    placeholder,
    name,
    value,
    required,
    autofocus,
    disabled,
    error,
    small,
    large,
    width,
    maxLength,
    borderless = false,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  const fieldClass = 'vb-searchField';
  const inputClass = fieldClass + '__input';

  const inputClassName = vbClassNames(inputClass, {
    modifier: {
      error,
      small,
      large,
      widthXSmall: width === 'xSmall',
      widthSmall: width === 'small',
      widthMedium: width === 'medium' || !width,
      widthLarge: width === 'large',
      widthFull: width === 'full',
      borderless: borderless,
      responsive: useResponsive(),
    },
  });

  const iconClassName = small
    ? fieldClass + '__icon--small'
    : fieldClass + '__icon';

  return (
    <div
      {...commonProps(
        props,
        fieldClass,
        { widthFull: width === 'full' },
        { marginBottom, marginLeft, marginRight, marginSize, marginTop }
      )}
    >
      <input
        id={id}
        type="search"
        name={name && name}
        value={value && value}
        className={inputClassName}
        placeholder={placeholder && placeholder}
        disabled={disabled && true}
        required={required && true}
        autoFocus={autofocus && true}
        maxLength={maxLength}
        onChange={onChange}
        onInput={onInput}
        onFocus={onFocus}
        onBlur={onBlur}
        onKeyDown={onKeyDown}
        onKeyUp={onKeyUp}
        aria-label={label ? label : placeholder ? placeholder : undefined}
        aria-labelledby={labelledby}
        aria-required={required && true}
        ref={ref}
      />
      <MdSearch className={iconClassName} />
    </div>
  );
};
const SearchField = React.forwardRef(SearchFieldInner);
export default SearchField;

```

### src/lv1/forms/SelectBox.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, select, number } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import SelectBox from './SelectBox';
import ColumnBase from '../bases/ColumnBase';
import Button from '../../lv1/buttons/Button';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

const optionsSamples = [
  { name: '選択してください' },
  { name: '選択肢1', value: 'value1' },
  { name: '選択肢2', value: 'value2', disabled: true },
  { name: '選択肢3', value: 'value3' },
  {
    name: 'abcdefghijllmnabcdefghijllmnabcdefghijllmnabcdefghijllmnabcdefghijllmn',
    value: 'value4',
  },
  {
    name: '選択肢グループ1',
    options: [
      { name: '選択肢1-1', value: 'value1-1' },
      { name: '選択肢1-2', value: 'value1-2' },
      { name: '選択肢1-3', value: 'value1-3' },
    ],
  },
  {
    name: '選択肢グループ2',
    options: [
      { name: '選択肢2-1', value: 'value2-1' },
      { name: '選択肢2-2', value: 'value2-2' },
      { name: '選択肢2-3', value: 'value2-3' },
    ],
    disabled: true,
  },
];

export default {
  component: SelectBox,
};

export const SelectBoxComponent = () => (
  <SelectBox
    label="テキストフィールド"
    options={optionsSamples}
    disabled={boolean('Disabled', false, 'SelectBox')}
    small={boolean('Small', false, 'SelectBox')}
    large={boolean('Large', false, 'SelectBox')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'SelectBox'
    )}
    defaultValue=""
    autoComplete={select(
      'AutoComplete',
      {
        off: 'off',
        on: 'on',
        name: 'name',
        'honorific-prefix': 'honorific-prefix',
        'given-name': 'given-name',
        'additional-name': 'additional-name',
        'family-name': 'family-name',
        'honorific-suffix': 'honorific-suffix',
        nickname: 'nickname',
        email: 'email',
        username: 'username',
        'new-password': 'new-password',
        'current-password': 'current-password',
        'one-time-code': 'one-time-code',
        'organization-title': 'organization-title',
        organization: 'organization',
        'street-address': 'street-address',
        'address-line1': 'address-line1',
        'address-line2': 'address-line2',
        'address-line3': 'address-line3',
        'address-level4': 'address-level4',
        'address-level3': 'address-level3',
        'address-level2': 'address-level2',
        'address-level1': 'address-level1',
        country: 'country',
        'country-name': 'country-name',
        'postal-code': 'postal-code',
        'cc-name': 'cc-name',
        'cc-given-name': 'cc-given-name',
        'cc-additional-name': 'cc-additional-name',
        'cc-family-name': 'cc-family-name',
        'cc-number': 'cc-number',
        'cc-exp': 'cc-exp',
        'cc-exp-month': 'cc-exp-month',
        'cc-exp-year': 'cc-exp-year',
        'cc-csc': 'cc-csc',
        'cc-type': 'cc-type',
        'transaction-currency': 'transaction-currency',
        'transaction-amount': 'transaction-amount',
        language: 'language',
        bday: 'bday',
        'bday-day': 'bday-day',
        'bday-month': 'bday-month',
        'bday-year': 'bday-year',
        sex: 'sex',
        tel: 'tel',
        'tel-country-code': 'tel-country-code',
        'tel-national': 'tel-national',
        'tel-area-code': 'tel-area-code',
        'tel-local': 'tel-local',
        'tel-extension': 'tel-extension',
        impp: 'impp',
        url: 'url',
        photo: 'photo',
      },
      'off',
      'SelectBox'
    )}
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <SelectBox options={optionsSamples} marginRight />
    <SelectBox options={optionsSamples} marginRight disabled />
    <SelectBox options={optionsSamples} marginRight error />
  </>
);

export const Small = () => (
  <>
    <SelectBox options={optionsSamples} marginRight small />
    <SelectBox options={optionsSamples} marginRight small disabled />
    <SelectBox options={optionsSamples} marginRight small error />
  </>
);

export const Large = () => (
  <>
    <SelectBox options={optionsSamples} marginRight large />
    <SelectBox options={optionsSamples} marginRight large disabled />
    <SelectBox options={optionsSamples} marginRight large error />
  </>
);

export const MaxWidth = () => (
  <div style={{ width: `${number('parent element width (rem)', 15)}rem` }}>
    <ColumnBase>
      <SelectBox
        options={[
          {
            name: '親要素よりも幅が大きいとき、SelectBoxの幅は小さくなります。',
          },
        ]}
        width={select(
          'Width',
          {
            XSmall: 'xSmall',
            Small: 'small',
            Medium: 'medium',
            Large: 'large',
            Full: 'full',
          },
          'large',
          'SelectBox'
        )}
      />
    </ColumnBase>
  </div>
);

export const ManualFocus = () => {
  const ref = React.useRef<HTMLSelectElement>(null);
  const onClick = () => {
    ref.current?.focus();
  };

  return (
    <>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <SelectBox ref={ref} options={optionsSamples} marginRight />
    </>
  );
};

```

### src/lv1/forms/SelectBox.tsx
```
typescript
import * as React from 'react';
import vbClassNames from '../../utilities/vbClassNames';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import { FormHandlers, AutocompleteAttribute } from './types';

export type SelectBoxOption = {
  name: string;
  value?: string;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
};
export type SelectBoxOptionGroup = {
  name: string;
  options: SelectBoxOption[];
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
};

type Props = {
  /**
   * select要素のaria-label を指定します。 `<label>` 要素 (`FormControlLabel` コンポーネントなど)が使用できない場合にのみ使用してください。
   */
  label?: string;
  /**
   * select要素のaria-labelledby を指定します。 `<label>` 要素 (`FormControlLabel` コンポーネントなど)が使用できない場合にのみ使用してください。
   */
  labelledby?: string;
  /**
   * select id を指定します
   */
  id?: string;
  /**
   * 選択要素を指定します。optgroup を使用したい場合は SelectBoxOptionGroup を渡してください。
   *
   * `SelectBoxOption = { name: string; value?: string; disabled?: boolean;}`
   *
   * `SelectBoxOptionGroup = {name: string; options: SelectBoxOption[]; disabled?: boolean;}`
   */
  options?: Array<SelectBoxOption | SelectBoxOptionGroup>;
  /**
   * select value を指定します
   */
  value?: string;
  /**
   * 非制御の場合の初期値を指定します
   */
  defaultValue?: string;
  /**
   * select name を指定します
   */
  name?: string;
  /**
   * select required を指定します
   */
  required?: boolean;
  /**
   * select autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * 中央寄せにします
   */
  alignCenter?: boolean;
  /**
   * 右寄せにします
   */
  alignRight?: boolean;
  /**
   * select autocomplete を指定します
   */
  autoComplete?: AutocompleteAttribute;
  /**
   * 幅を指定します。
   *
   * - xSmall: 4rem(64px)
   *   - 2文字程度しか入らないことがわかっている入力欄に使います
   * - small: 7rem(112px)
   *   - 都道府県や郵便番号など、数文字しか入らないことがわかっている入力欄に使います
   * - medium(default): 11rem(176px)
   *   - 10文字程度であることがわかっている入力欄に使います
   *   - たとえば会計帳簿の金額入力欄は12,3桁が前提になっているので medium が使われます
   * - large: 24rem(384px)
   *   - 入力量がユーザー次第の場合に使います
   *   - 住所や備考など
   * - full: 親要素に対して100%
   *   - table 要素の中に配置するなど、柔軟に幅を変えたい場合に使います
   */
  width?: 'xSmall' | 'small' | 'medium' | 'large' | 'full';
} & FormHandlers<HTMLSelectElement> &
  MarginClassProps &
  CommonProps;

const SelectBoxInner = (
  props: Props,
  ref?: React.Ref<HTMLSelectElement> | React.MutableRefObject<HTMLSelectElement>
): React.ReactElement => {
  const {
    label,
    labelledby,
    id,
    options,
    name,
    value,
    defaultValue,
    required,
    autofocus,
    disabled,
    error,
    small,
    large,
    alignCenter,
    alignRight,
    width,
    autoComplete,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const wrapClassName = vbClassNames('vb-select', {
    modifier: {
      widthXSmall: width === 'xSmall',
      widthSmall: width === 'small',
      widthMedium: width === 'medium' || !width,
      widthLarge: width === 'large',
      widthFull: width === 'full',
    },
  });

  const classModifier = {
    error,
    small,
    alignCenter,
    alignRight,
  };

  const className = vbClassNames('vb-select__body', {
    modifier: {
      error,
      small,
      large,
      alignCenter,
      alignRight,
    },
  });

  const makeOptionItems = (
    opts: Array<SelectBoxOption | SelectBoxOptionGroup>
  ): Array<React.ReactElement> =>
    opts.map(
      (
        opt: SelectBoxOption | SelectBoxOptionGroup,
        index: number
      ): React.ReactElement =>
        (opt as SelectBoxOptionGroup).options ? ( // optionsあればSelectBoxOptionGroupなんだぜ
          <optgroup
            key={index}
            label={(opt as SelectBoxOptionGroup).name}
            disabled={!!(opt as SelectBoxOptionGroup).disabled}
          >
            {makeOptionItems((opt as SelectBoxOptionGroup).options)}
          </optgroup>
        ) : (
          <option
            key={index}
            value={(opt as SelectBoxOption).value}
            disabled={!!(opt as SelectBoxOption).disabled}
          >
            {opt.name}
          </option>
        )
    );

  return (
    <div
      {...commonProps(props, wrapClassName, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    >
      <select
        name={name && name}
        className={className}
        id={id}
        ref={ref}
        value={value}
        defaultValue={defaultValue}
        disabled={disabled && true}
        required={required && true}
        autoFocus={autofocus && true}
        onChange={onChange}
        onInput={onInput}
        onFocus={onFocus}
        onBlur={onBlur}
        onKeyDown={onKeyDown}
        onKeyUp={onKeyUp}
        aria-label={label}
        aria-labelledby={labelledby}
        aria-required={required && true}
        autoComplete={autoComplete}
      >
        {makeOptionItems(options || [])}
      </select>
    </div>
  );
};

/**
 * 汎用のselectコンポーネントです。
 * 「複数のうちからひとつを選ぶ」入力欄の場合に使用してください。
 *
 * - 必ず `<label>` 要素によるラベル付けを行ってください
 *   - `FormControl` を使用する場合は、`SelectBox` に `id` を指定し、同じ文字列を `FormControl` の `fieldId` に指定してください
 *   - どうしても `<label>` 要素が使用できない場合に限り、 `label` または `labelledby` を使ってラベル付けをしてください
 * - 大量に選択肢がある場合は `SingleComboBox` の仕様を検討してください。テキストを入力することで選択肢を絞り込むことができます。
 * - 幅を変えたいときは width オプションを変更します。特に柔軟に選択したい場合は、widthオプションを full にすることで親要素に対して100%にすることができます。
 *
 * 似ているコンポーネントに `DropdownButton` が存在します。
 * `DropdownButton` は「押下するとドロップダウンメニューを開く **ボタン**」で、`SelectBox` は「選択肢のなかから一つを選ぶ **フォームの部品** 」です。
 * 両者の違いについては、 `DropdownButton` のドキュメントを参照してください。
 */
const SelectBox = React.forwardRef(SelectBoxInner);
export default SelectBox;

```

### src/lv1/forms/TextArea.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TextArea from './TextArea';
import Button from '../buttons/Button';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: TextArea,
};

export const TextAreaComponent = () => {
  return (
    <TextArea
      id="textarea_id"
      name="textarea_name"
      placeholder={text('Placeholder', 'プレースホルダー', 'TextArea')}
      disabled={boolean('Disabled', false, 'TextArea')}
      required={boolean('Required', false, 'TextArea')}
      small={boolean('Small', false, 'TextArea')}
      large={boolean('Large', false, 'TextArea')}
      label={text(
        'Label',
        'labelはlabel要素による関連付けができない場合に使用してください',
        'TextArea'
      )}
      aria-required={boolean('Required', false, 'TextArea')}
      autoComplete={select(
        'AutoComplete',
        {
          off: 'off',
          on: 'on',
          name: 'name',
          'honorific-prefix': 'honorific-prefix',
          'given-name': 'given-name',
          'additional-name': 'additional-name',
          'family-name': 'family-name',
          'honorific-suffix': 'honorific-suffix',
          nickname: 'nickname',
          email: 'email',
          username: 'username',
          'new-password': 'new-password',
          'current-password': 'current-password',
          'one-time-code': 'one-time-code',
          'organization-title': 'organization-title',
          organization: 'organization',
          'street-address': 'street-address',
          'address-line1': 'address-line1',
          'address-line2': 'address-line2',
          'address-line3': 'address-line3',
          'address-level4': 'address-level4',
          'address-level3': 'address-level3',
          'address-level2': 'address-level2',
          'address-level1': 'address-level1',
          country: 'country',
          'country-name': 'country-name',
          'postal-code': 'postal-code',
          'cc-name': 'cc-name',
          'cc-given-name': 'cc-given-name',
          'cc-additional-name': 'cc-additional-name',
          'cc-family-name': 'cc-family-name',
          'cc-number': 'cc-number',
          'cc-exp': 'cc-exp',
          'cc-exp-month': 'cc-exp-month',
          'cc-exp-year': 'cc-exp-year',
          'cc-csc': 'cc-csc',
          'cc-type': 'cc-type',
          'transaction-currency': 'transaction-currency',
          'transaction-amount': 'transaction-amount',
          language: 'language',
          bday: 'bday',
          'bday-day': 'bday-day',
          'bday-month': 'bday-month',
          'bday-year': 'bday-year',
          sex: 'sex',
          tel: 'tel',
          'tel-country-code': 'tel-country-code',
          'tel-national': 'tel-national',
          'tel-area-code': 'tel-area-code',
          'tel-local': 'tel-local',
          'tel-extension': 'tel-extension',
          impp: 'impp',
          url: 'url',
          photo: 'photo',
        },
        'off',
        'TextArea'
      )}
      maxLength={number('MaxLength', 255, undefined, 'TextArea')}
      resize={select(
        'Resize',
        ['none', 'horizontal', 'vertical', 'both'],
        'both',
        'TextArea'
      )}
      width={select(
        'Width',
        {
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'TextArea'
      )}
      height={number('Height', 10, undefined, 'TextArea')}
      {...handlers}
      {...commonKnobs()}
    />
  );
};

export const Default = () => (
  <>
    <TextArea width="full" />
    <TextArea width="full" disabled />
    <TextArea width="full" error />
  </>
);

export const Small = () => (
  <>
    <TextArea width="full" small />
    <TextArea width="full" small disabled />
    <TextArea width="full" small error />
  </>
);

export const Large = () => (
  <>
    <TextArea width="full" large />
    <TextArea width="full" large disabled />
    <TextArea width="full" large error />
  </>
);

export const AutoResize = () => {
  const [value, setValue] = React.useState<string>('');

  return (
    <TextArea
      value={value}
      autoResize
      resize="both"
      width="full"
      onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>
        setValue(e.target.value)
      }
    />
  );
};

export const ManualFocus = () => {
  const ref = React.useRef<HTMLTextAreaElement>(null);
  const onClick = () => ref?.current?.focus();

  return (
    <>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <TextArea ref={ref} />
    </>
  );
};

```

### src/lv1/forms/TextArea.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import { FormHandlers, AutocompleteAttribute } from './types';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  /**
   * textarea id を指定します
   */
  id?: string;
  /**
   * textarea要素のaria-label を指定します。 `<label>` 要素 (`FormControlLabel` コンポーネントなど)が使用できない場合にのみ使用してください。
   */
  label?: string;
  /**
   * textarea要素のaria-labelledby を指定します。 `<label>` 要素 (`FormControlLabel` コンポーネントなど)が使用できない場合にのみ使用してください。
   */
  labelledby?: string;
  /**
   * textarea 要素の placeholder を指定します。
   * 廃止予定はありませんが、ユーザビリティ・アクセシビリティ上の問題があるため、原則として使用しないでください。
   *
   * - placeholder のテキストの色はアクセシビリティー・ガイドラインのコントラスト比の要件を満たしていません
   * - 「何のフィールドであるか（ラベル）」は入力中に確認できる場所にテキストで記載し、`<label>` 要素を使用して紐付けてください
   * - 入力規則や記入例などの注釈は placeholder ではない場所に記載してください
   *
   * @deprecated
   */
  placeholder?: string;
  /**
   * textarea name を指定します
   */
  name?: string;
  /**
   * textarea value を指定します
   */
  value?: string;
  /**
   * 非制御の場合の初期値を指定します
   */
  defaultValue?: string;
  /**
   * textarea required を指定します
   */
  required?: boolean;
  /**
   * textarea autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * 高さの自動リサイズを有効にします。入力される行数に応じて自動で大きくなっていきます（自動で小さくはなりません）。
   */
  autoResize?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * textarea autocomplete を指定します
   */
  autoComplete?: AutocompleteAttribute;
  /**
   * textarea maxlength を指定します
   */
  maxLength?: number;
  /**
   * 設定した方向のリサイズを有効にします。デフォルトは 'both' です。
   * ユーザーの利便性を優先するため、なるべくリサイズ可能な選択肢を取ってください。レイアウトの仕様上制限が必要な場合は horizontal や vertical を使用し、none の使用は避けてください
   */
  resize?: 'none' | 'horizontal' | 'vertical' | 'both';
  /**
   * 幅を指定します。デフォルトは 'medium' です。
   *
   * - small: 24rem(384px)
   * - medium: 55rem(880px)
   * - large: 67rem(1072px)
   * - full: 親要素に対して100%
   */
  width?: 'small' | 'medium' | 'large' | 'full';
  /**
   * 高さを指定します(rem)
   */
  height?: number;
} & FormHandlers<HTMLTextAreaElement> &
  MarginClassProps &
  CommonProps;

const useAutoResize = (
  {
    autoResize,
    resize,
    onInput,
    height,
  }: Pick<Props, 'autoResize' | 'resize' | 'onInput' | 'height'>,
  ref?:
    | React.Ref<HTMLTextAreaElement>
    | React.MutableRefObject<HTMLTextAreaElement>
) => {
  const autoResizable =
    autoResize && (!resize || ['vertical', 'both'].includes(resize));
  const tmpTextAreaRef = React.useRef<HTMLTextAreaElement>(null);
  const textAreaRef = (ref ||
    tmpTextAreaRef) as React.MutableRefObject<HTMLTextAreaElement>;
  const [autoResizeHeight, setAutoResizeHeight] = React.useState<number>(
    height || 0
  );
  const baseFontSize = React.useMemo(
    () =>
      parseInt(
        getComputedStyle(document.documentElement).fontSize.split('px')[0]
      ) || 16,
    []
  );

  const onInputWithResize = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    onInput && onInput(e);
    if (
      autoResizable &&
      textAreaRef.current &&
      textAreaRef.current.scrollHeight > textAreaRef.current.offsetHeight
    ) {
      setAutoResizeHeight(
        Math.ceil(textAreaRef.current.scrollHeight / baseFontSize)
      );
    }
  };

  return { textAreaRef, autoResizeHeight, onInputWithResize };
};

/**
 * 複数行の入力欄 コンポーネントです。`<textarea>`要素を返します。
 * コメント欄など、ユーザーが長い文章を入力することなどが想定される場所で使用することを想定しています。
 *
 * - 必ず `<label>` 要素によるラベル付けを行ってください
 *   - `FormControl` を使用する場合は、`SelectBox` に `id` を指定し、同じ文字列を `FormControl` の `fieldId` に指定してください
 *   - どうしても `<label>` 要素が使用できない場合に限り、 `label` または `labelledby` を使ってラベル付けをしてください
 * - resize オプションを指定すると、右下をドラッグして領域を広げるやつの方向固定などができます（デフォルトは垂直・水平方向どちらもリサイズできます）。
 * - autoResize オプションを指定すると、入力される行数に応じて自動で大きくなっていきます（自動で小さくはなりません）。
 */
const TextAreaInner: React.ForwardRefRenderFunction<
  HTMLTextAreaElement,
  Props
> = (props, ref) => {
  const {
    id,
    label,
    labelledby,
    placeholder,
    name,
    value,
    defaultValue,
    required,
    autofocus,
    disabled,
    error,
    small,
    large,
    autoComplete,
    autoResize,
    maxLength,
    resize,
    width,
    height,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const { autoResizeHeight, onInputWithResize, textAreaRef } = useAutoResize(
    {
      autoResize,
      resize,
      onInput,
      height,
    },
    ref
  );

  const classModifier = {
    error,
    small,
    large,
    responsive: useResponsive(),
    [`resize${(resize || 'both')
      .split('')
      .map((char, i) => (i === 0 ? char.toUpperCase() : char))
      .join('')}`]: true,
    [`width${(width || 'medium')
      .split('')
      .map((char, i) => (i === 0 ? char.toUpperCase() : char))
      .join('')}`]: true,
    [`height${autoResizeHeight || height || ''}`]: true,
  };

  return (
    <textarea
      ref={textAreaRef}
      id={id}
      name={name && name}
      placeholder={placeholder && placeholder}
      disabled={disabled && true}
      required={required && true}
      autoFocus={autofocus && true}
      onChange={onChange}
      onInput={onInputWithResize}
      onFocus={onFocus}
      onBlur={onBlur}
      onKeyDown={onKeyDown}
      onKeyUp={onKeyUp}
      aria-label={label}
      aria-labelledby={labelledby}
      aria-required={required && true}
      value={value}
      autoComplete={autoComplete}
      maxLength={maxLength}
      {...commonProps(props, 'vb-textarea', classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    >
      {defaultValue}
    </textarea>
  );
};

const TextArea = React.forwardRef(TextAreaInner);
export default TextArea;

```

### src/lv1/forms/TextField.stories.tsx
```
typescript
import * as React from 'react';

import { MdDateRange, MdExpandMore, MdFavorite } from 'react-icons/md';
import { action, actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TextField from './TextField';
import ColumnBase from '../bases/ColumnBase';
import { FocusHighlight } from '../a11y/FocusHighlight';
import CheckBox from './CheckBox';
import Paragraph from '../typography/Paragraph';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: TextField,
};

export const TextFieldComponent = () => {
  const ref = React.createRef<HTMLInputElement>();
  return (
    <TextField
      type={select(
        'Type',
        {
          Text: 'text',
          Email: 'email',
          Password: 'password',
          Number: 'number',
        },
        'text',
        'TextField'
      )}
      label={text('Label', 'テキストフィールドのサンプル', 'TextField')}
      placeholder={text('Placeholder', '入力してください', 'TextField')}
      required={boolean('Required', false, 'TextField')}
      disabled={boolean('Disabled', false, 'TextField')}
      error={boolean('Error', false, 'TextField')}
      small={boolean('Small', false, 'TextField')}
      large={boolean('Large', false, 'TextField')}
      width={select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'TextField'
      )}
      min={number('Min', 0, undefined, 'TextField')}
      max={number('Max', 100, undefined, 'TextField')}
      step={number('Step', 10, undefined, 'TextField')}
      autoComplete={select(
        'AutoComplete',
        {
          off: 'off',
          on: 'on',
          name: 'name',
          'honorific-prefix': 'honorific-prefix',
          'given-name': 'given-name',
          'additional-name': 'additional-name',
          'family-name': 'family-name',
          'honorific-suffix': 'honorific-suffix',
          nickname: 'nickname',
          email: 'email',
          username: 'username',
          'new-password': 'new-password',
          'current-password': 'current-password',
          'one-time-code': 'one-time-code',
          'organization-title': 'organization-title',
          organization: 'organization',
          'street-address': 'street-address',
          'address-line1': 'address-line1',
          'address-line2': 'address-line2',
          'address-line3': 'address-line3',
          'address-level4': 'address-level4',
          'address-level3': 'address-level3',
          'address-level2': 'address-level2',
          'address-level1': 'address-level1',
          country: 'country',
          'country-name': 'country-name',
          'postal-code': 'postal-code',
          'cc-name': 'cc-name',
          'cc-given-name': 'cc-given-name',
          'cc-additional-name': 'cc-additional-name',
          'cc-family-name': 'cc-family-name',
          'cc-number': 'cc-number',
          'cc-exp': 'cc-exp',
          'cc-exp-month': 'cc-exp-month',
          'cc-exp-year': 'cc-exp-year',
          'cc-csc': 'cc-csc',
          'cc-type': 'cc-type',
          'transaction-currency': 'transaction-currency',
          'transaction-amount': 'transaction-amount',
          language: 'language',
          bday: 'bday',
          'bday-day': 'bday-day',
          'bday-month': 'bday-month',
          'bday-year': 'bday-year',
          sex: 'sex',
          tel: 'tel',
          'tel-country-code': 'tel-country-code',
          'tel-national': 'tel-national',
          'tel-area-code': 'tel-area-code',
          'tel-local': 'tel-local',
          'tel-extension': 'tel-extension',
          impp: 'impp',
          url: 'url',
          photo: 'photo',
        },
        'off',
        'TextField'
      )}
      suffix={text('Suffix', '', 'TextField')}
      loading={boolean('Loading', false, 'TextField')}
      ref={ref}
      {...handlers}
      {...commonKnobs()}
    />
  );
};

export const Widths = () => (
  <>
    <TextField mr={1} mb={1} value="xSmall" label="xSmall" width="xSmall" />
    <TextField mr={1} mb={1} value="small" label="small" width="small" />
    <TextField mr={1} mb={1} value="medium" label="medium" width="medium" />
    <TextField mr={1} mb={1} value="large" label="large" width="large" />
    <TextField value="full" label="full" width="full" />
  </>
);

export const Default = () => (
  <>
    <TextField mr={1} />
    <TextField mr={1} disabled />
    <TextField mr={1} error />
  </>
);

export const Small = () => (
  <>
    <TextField mr={1} small />
    <TextField mr={1} small disabled />
    <TextField mr={1} small error />
  </>
);

export const Large = () => (
  <>
    <TextField mr={1} large />
    <TextField mr={1} large disabled />
    <TextField mr={1} large error />
  </>
);

export const MaxWidth = () => (
  <div style={{ width: `${number('parent element width (rem)', 15)}rem` }}>
    <ColumnBase>
      <TextField
        value="親要素よりも幅が大きいとき、TextFieldの幅は小さくなります。"
        width={select(
          'Width',
          {
            XSmall: 'xSmall',
            Small: 'small',
            Medium: 'medium',
            Large: 'large',
            Full: 'full',
          },
          'large',
          'TextField'
        )}
      />
    </ColumnBase>
  </div>
);

export const Suffix = () => (
  <>
    <TextField mr={1} suffix="円" />
    <TextField mr={1} small suffix="円" />
    <TextField mr={1} large suffix="円" />
  </>
);

export const Borderless = () => (
  <>
    <TextField
      borderless
      width="large"
      value="borderless を指定すると、テキストフィールドのボーダーやフォーカスインジケーターが非表示になります。必ずFocusHighlightコンポーネント等でフォーカスインジケーターを表示してください。"
    />
    <FocusHighlight highlightStyle="inset">
      <TextField
        borderless
        width="large"
        value="これはFocusHighlightコンポーネントを使用している例です"
      />
    </FocusHighlight>
  </>
);

export const WithIcon = () => (
  <>
    <Paragraph mb={1}>
      テキストフィールドの右脇にアイコンを表示できますが、これはコンボボックス等の動作を示すためのものです。
      通常のフィールドには使用しないでください。
    </Paragraph>
    <TextField
      IconComponent={MdExpandMore}
      mr={1}
      onIconClick={action('onIconClick')}
      onIconBlur={action('onIconBlur')}
      onIconFocus={action('onIconFocus')}
      iconLabel="メニューを開く"
    />
    <TextField IconComponent={MdExpandMore} mr={1} />
    <TextField IconComponent={MdDateRange} width="xSmall" mr={1} small />
    <TextField IconComponent={MdDateRange} width="small" mr={1} />
    <TextField IconComponent={MdDateRange} width="small" mr={1} large />
    <TextField
      IconComponent={MdFavorite}
      iconLabel="お気に入り"
      width="small"
      large
    />
  </>
);

export const WithLoading = () => {
  const [loading, setLoading] = React.useState<boolean>(true);
  return (
    <>
      <TextField IconComponent={MdExpandMore} loading={loading} mr={1} />
      <CheckBox
        onChange={(e) => setLoading(e.target.checked)}
        checked={loading}
      >
        Loading
      </CheckBox>
    </>
  );
};

export const DeprecatedMarginProps = () => (
  <TextField
    width="large"
    label="marginBottom, marginLeft, marginRight, marginTop, marginSizeは使わず、ma, mb, ml, mr, mt を使ってください"
    value="marginBottom, marginLeft, marginRight, marginTop, marginSizeは使わず、ma, mb, ml, mr, mt を使ってください"
    marginBottom={boolean('marginBottom', true, 'MarginProps')}
    marginRight={boolean('marginRight', true, 'MarginProps')}
    marginLeft={boolean('marginLeft', true, 'MarginProps')}
    marginTop={boolean('marginTop', true, 'MarginProps')}
    marginSize={
      select(
        'marginSize',
        {
          undefined: '',
          xSmall: 'xSmall',
          small: 'small',
          large: 'large',
          xLarge: 'xLarge',
          xxLarge: 'xxLarge',
        },
        '',
        'MarginProps'
      ) || undefined
    }
  />
);

```

### src/lv1/forms/TextField.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, {
  CommonProps,
  pickCommonDataProps,
} from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';
import functionalMarginClasses from '../../utilities/functionalMarginClasses';
import { FormHandlers, AutocompleteAttribute } from './types';
import {
  filterTextBoxAriaProps,
  TextBoxAriaProps,
  filterNumberInputAriaProps,
  NumberInputAriaProps,
  ButtonAriaProps,
} from '../../utilities/AriaProps';
import InlineSpinner from '../InlineSpinner';
import { useResponsive } from '../../utilities/VibesProvider';

export type TextFieldType = 'text' | 'email' | 'password' | 'number' | 'tel';
export type TextFieldWidth = 'xSmall' | 'small' | 'medium' | 'large' | 'full';

type NumberInputProps = {
  min?: number;
  max?: number;
  step?: number;
  /**
   * type="number" 時に右側に表示される spinner を非表示にします
   * @default false
   */
  hideSpinner?: boolean;
};

type Props = {
  /**
   * input id を指定します
   */
  id?: string;
  /**
   * input type を指定します。
   *
   * `tel` は電話番号の入力欄以外に使用しないでください（IMEをオフにするために使用しないでください）
   */
  type?: TextFieldType;
  /**
   * input要素のaria-label を指定します。 `<label>` 要素 (`FormControlLabel` コンポーネントなど)が使用できない場合にのみ使用してください。
   */
  label?: string;
  /**
   * input要素のaria-labelledby を指定します。 `<label>` 要素 (`FormControlLabel` コンポーネントなど)が使用できない場合にのみ使用してください。
   */
  labelledby?: string;
  /**
   * input 要素の placeholder を指定します。
   * 廃止予定はありませんが、ユーザビリティ・アクセシビリティ上の問題があるため、原則として使用しないでください。
   *
   * - placeholder のテキストの色はアクセシビリティー・ガイドラインのコントラスト比の要件を満たしていません
   * - 「何のフィールドであるか（ラベル）」は入力中に確認できる場所にテキストで記載し、`<label>` 要素を使用して紐付けてください
   * - 入力規則や記入例などの注釈は placeholder ではない場所に記載してください
   *
   * @deprecated
   */
  placeholder?: string;
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * input autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * 中央寄せにします
   */
  alignCenter?: boolean;
  /**
   * 右寄せにします
   */
  alignRight?: boolean;
  /**
   * input maxlength を指定します。郵便番号やクレジットカード番号など、ユーザーにとって桁数制限が明確かつ、現在何文字入力しているのか認識できる程度の桁数の場合にのみ使用してください。
   */
  maxLength?: number;
  /**
   * 幅を指定します。
   *
   * - xSmall: 4rem(64px)
   *   - 2文字程度しか入らないことがわかっている入力欄に使います
   * - small: 7rem(112px)
   *   - 都道府県や郵便番号など、数文字しか入らないことがわかっている入力欄に使います
   * - medium(default): 11rem(176px)
   *   - 10文字程度であることがわかっている入力欄に使います
   *   - たとえば会計帳簿の金額入力欄は12,3桁が前提になっているので medium が使われます
   * - large: 24rem(384px)
   *   - 入力量がユーザー次第の場合に使います
   *   - 住所や備考など
   * - full: 親要素に対して100%
   *   - table 要素の中に配置するなど、柔軟に幅を変えたい場合に使います
   */
  width?: TextFieldWidth;
  /**
   * input role を指定します
   */
  role?: 'textbox' | 'combobox';
  /**
   * input autocomplete を指定します
   */
  autoComplete?: AutocompleteAttribute;
  /**
   * 入力欄の右側に文字列を表示します
   */
  suffix?: string;

  /**
   * ボーダーやフォーカスインジケーターを非表示にします。
   * スプレッドシートや、複雑なコンボボックスの実装に使用する想定の実装です。
   *
   * - 必ず、FocusHighlightコンポーネント等で、フォーカスインジケーターを用意してください
   * - 編集に使用しない場合（閲覧専用モード等）には、ReadOnlyFieldを使用してください
   */
  borderless?: boolean;

  /**
   * Shows a loading spinner instead of the icon component /
   * IconComponent のかわりに読込中を示すスピナーを表示します
   */
  loading?: boolean;

  /**
   * Provide a react-icon component to show over the input field /
   * アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  IconComponent?: React.ElementType;

  /**
   * Alternative Text for IconComponent
   *
   * アイコンの代替テキストを指定します
   */
  iconLabel?: string;

  /**
   * Callback for onClick of the icon. If provided, the icon will be rendered as a button.
   *
   * アイコンをクリックしたときの処理を渡します。渡された場合、アイコンはボタンとして配置されます。
   */
  onIconClick?: React.MouseEventHandler;

  /**
   * Callback function for onFocus of the icon.
   *
   * アイコンにfocusしたときの処理
   */
  onIconFocus?: React.FocusEventHandler;
  /**
   * Callback function for onBlur of the icon.
   *
   * アイコンからblurしたときの処理
   */
  onIconBlur?: React.FocusEventHandler;
  /**
   * WAI-ARIA Attributes for the icon as a button
   *
   * アイコンのボタンがもつWAI-ARIA属性を指定できます
   */
  iconAriaProps?: ButtonAriaProps;
} & FormHandlers<HTMLInputElement> &
  NumberInputProps &
  NumberInputAriaProps &
  TextBoxAriaProps &
  MarginClassProps &
  CommonProps;

function filterNumberInputProps(props: Props): NumberInputProps {
  if (props.type != 'number') {
    return {};
  }

  return {
    min: props['min'],
    max: props['max'],
    step: props['step'],
  };
}

function TextFieldInner(
  props: Props,
  ref?: React.Ref<HTMLInputElement> | React.MutableRefObject<HTMLInputElement>
): React.ReactElement {
  const {
    type,
    label,
    id,
    labelledby,
    placeholder,
    name,
    value,
    required,
    autofocus,
    disabled,
    error,
    small,
    large,
    role,
    alignCenter,
    alignRight,
    maxLength,
    width,
    autoComplete,
    suffix,
    hideSpinner,
    borderless,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    loading,
    IconComponent,
    onIconClick,
    onIconBlur,
    onIconFocus,
    iconLabel,
    iconAriaProps,
    ma,
    mt,
    mb,
    mr,
    ml,
  } = props;

  const inputBaseClass = 'vb-textField';

  const wrapperBaseClass = `${inputBaseClass}__wrapper`;

  // 水平方向のマージンはwrapperに対してつける
  const wrapperClassBase = vbClassNames(wrapperBaseClass, {
    modifier: {
      widthFull: width === 'full',
    },
    margin: {
      marginLeft,
      marginRight,
      marginSize,
      marginTop,
      marginBottom,
    },
  });
  const functionalMarginClass = functionalMarginClasses({
    ma,
    mr,
    ml,
    mt,
    mb,
  });
  const wrapperClass = `${wrapperClassBase} ${functionalMarginClass}`.trim();

  const suffixBaseClass = `${inputBaseClass}__suffix`;
  const suffixClass = vbClassNames(suffixBaseClass, {
    modifier: {
      small,
      large,
    },
  });
  const iconClass = `${inputBaseClass}__${
    !loading && onIconClick ? 'iconButton' : 'icon'
  }`;

  return (
    <span className={wrapperClass}>
      <input
        id={id}
        type={type || 'text'}
        name={name && name}
        value={value && value}
        placeholder={placeholder && placeholder}
        disabled={disabled && true}
        required={required && true}
        autoFocus={autofocus && true}
        maxLength={maxLength}
        onChange={onChange}
        onInput={onInput}
        onFocus={onFocus}
        onBlur={onBlur}
        onKeyDown={onKeyDown}
        onKeyUp={onKeyUp}
        role={role}
        aria-label={label}
        aria-labelledby={labelledby}
        aria-required={required && true}
        autoComplete={autoComplete}
        ref={ref}
        {...commonProps(
          pickCommonDataProps(props),
          inputBaseClass,
          {
            error,
            small,
            large,
            alignCenter,
            alignRight,
            hideSpinner,
            borderless,
            widthXSmall: width === 'xSmall',
            widthSmall: width === 'small',
            widthMedium: width === 'medium' || !width,
            widthLarge: width === 'large',
            widthFull: width === 'full',
            withIcon: !!IconComponent || loading,
            responsive: useResponsive(),
          },
          { marginTop, marginBottom, marginSize }
        )}
        {...filterNumberInputProps(props)}
        {...filterNumberInputAriaProps(props)}
        {...filterTextBoxAriaProps(props)}
      />

      {(IconComponent || loading) &&
        (loading ? (
          <span className={iconClass} aria-hidden="true">
            <InlineSpinner isLoading />
          </span>
        ) : (
          IconComponent &&
          (onIconClick ? (
            <button
              type="button"
              disabled={disabled}
              className={iconClass}
              onClick={onIconClick}
              onBlur={onIconBlur}
              onFocus={onIconFocus}
              aria-label={iconLabel}
              {...iconAriaProps}
            >
              <IconComponent focusable={false} />
            </button>
          ) : (
            <span
              className={iconClass}
              role={iconLabel ? 'img' : 'presentation'}
              aria-label={iconLabel}
              aria-hidden={!iconLabel}
            >
              <IconComponent focusable={false} />
            </span>
          ))
        ))}

      {!!suffix && <span className={suffixClass}>{suffix}</span>}
    </span>
  );
}

/**
 * 汎用のinputコンポーネントです。
 *
 * - typeオプションでnumber, text, email, tel, passwordを切り替えられます（デザイナーはどのtypeを使うのか必要に応じて指定してください）。
 * - 幅を変えたいときは width オプションを変更します。特に柔軟に選択したい場合は、widthオプションを full にすることで親要素に対して100%にすることができます。
 * - 必ず `<label>` 要素によるラベル付けを行ってください
 *   - `FormControl` を使用する場合は、`SelectBox` に `id` を指定し、同じ文字列を `FormControl` の `fieldId` に指定してください
 *   - どうしても `<label>` 要素が使用できない場合に限り、 `label` または `labelledby` を使ってラベル付けをしてください
 * - 特定の用途に応じたコンポーネントが別途用意されている場合があります。適したコンポーネントを検討してください。
 *   - 日付の場合は `DateInput`, `DateField`
 *   - 数字の場合は `DigitsInput`, `DecimalInput`, `NumeralCodeInput`
 *     - 数値入力を `TextField` で行う場合は `alignRight` を指定してください。
 *   - 時間、時刻の場合は `TimeInput`, `TimeLengthInput`
 *   - 名前の場合は `NameField`
 *   - 電話番号の場合は `PhoneNumberField`
 *   - 検索欄の場合は `SearchField`
 *   - セレクトボックスの場合は `SelectBox`
 *   - 複数行の場合は `TextArea`
 *   - readonly の場合は `ReadOnlyField`
 * - 入力欄の右や下に入力規則などの補足を追記したい場合、それらの補足が先に読み上げられる必要があります。
 *   - `WithDescriptionContent` などを使用してレイアウト調整を行ってください。
 */
const TextField = React.forwardRef<HTMLInputElement, Props>(TextFieldInner);
export default TextField;

```

### src/lv1/forms/ToggleButton.stories.tsx
```
typescript
import * as React from 'react';
import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import ToggleButton from './ToggleButton';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: ToggleButton,
};

export const ToggleButtonComponent = () => {
  const props = {
    name: text('Name', 'toggle', 'ToggleButton'),
    type: select(
      'Type',
      { checkbox: 'checkbox', radio: 'radio' },
      'checkbox',
      'ToggleButton'
    ),
    small: boolean('Small', false, 'ToggleButton'),
    disabled: boolean('Disabled', false, 'ToggleButton'),
    ...handlers,
    ...commonKnobs(),
  };
  return (
    <div>
      <ToggleButton {...props}>ボタン1</ToggleButton>
      <ToggleButton {...props}>ボタン2</ToggleButton>
      <ToggleButton {...props}>ボタン3</ToggleButton>
    </div>
  );
};

export const Checkbox = () => (
  <div>
    <ToggleButton name="toggle" type="checkbox">
      ボタン1
    </ToggleButton>
    <ToggleButton name="toggle" type="checkbox">
      ボタン2
    </ToggleButton>
    <ToggleButton name="toggle" type="checkbox">
      ボタン3
    </ToggleButton>
  </div>
);

export const Radio = () => (
  <div>
    <ToggleButton name="toggle" type="radio">
      ボタン1
    </ToggleButton>
    <ToggleButton name="toggle" type="radio">
      ボタン2
    </ToggleButton>
    <ToggleButton name="toggle" type="radio">
      ボタン3
    </ToggleButton>
  </div>
);

export const Disabled = () => (
  <div>
    <ToggleButton name="toggle" type="radio" disabled>
      ボタン1
    </ToggleButton>
    <ToggleButton name="toggle" type="radio" disabled>
      ボタン2
    </ToggleButton>
    <ToggleButton name="toggle" type="radio" disabled>
      ボタン3
    </ToggleButton>
  </div>
);

export const Small = () => (
  <div>
    <ToggleButton name="toggle" type="radio" small>
      ボタン1
    </ToggleButton>
    <ToggleButton name="toggle" type="radio" small>
      ボタン2
    </ToggleButton>
    <ToggleButton name="toggle" type="radio" small>
      ボタン3
    </ToggleButton>
  </div>
);

```

### src/lv1/forms/ToggleButton.tsx
```
typescript
import * as React from 'react';

import { FormHandlers } from '../../lv1/forms/types';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactChild;
  /**
   * input type を指定します
   */
  type: 'checkbox' | 'radio';
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * 選択状態にします
   */
  toggled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
} & FormHandlers<HTMLInputElement> &
  CommonProps;

/**
 * **ラジオボタンやチェックボックスの代替** として、オンオフを制御するボタンとして使用します。
 * 複数のオンオフ制御をグループ化して、くっつけて表示できます。
 *
 * - `last-child` `first-child` のスタイル指定があるので、グループごとに同一の親要素をもつようにしてください
 * - グループ内で複数選択可能な場合は `type="checkbox"` ひとつしか選択できない場合は `type="radio"` で使用し、同一グループ内で違うtypeが混在しないようにしてください。
 * - ラジオボタンやチェックボックスの代替なので、アクションボタンとしては使用しないでください
 */
const ToggleButton: React.FC<Props> = (props: Props) => {
  const {
    type,
    name,
    children,
    value,
    toggled,
    small,
    disabled,
    onBlur,
    onChange,
    onFocus,
    onInput,
    onKeyDown,
    onKeyUp,
  } = props;
  const className = 'vb-toggleButton';
  return (
    <label {...commonProps(props, className, { small, disabled })}>
      <input
        className={`${className}__input`}
        type={type}
        name={name}
        value={value}
        checked={toggled}
        disabled={disabled}
        onChange={onChange}
        onInput={onInput}
        onFocus={onFocus}
        onBlur={onBlur}
        onKeyDown={onKeyDown}
        onKeyUp={onKeyUp}
      ></input>
      <span className={`${className}__body`}>{children}</span>
    </label>
  );
};
export default ToggleButton;

```

### src/lv1/grids/GridBlock.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

export type GridSize =
  | 'half'
  | 'oneThird'
  | 'twoThirds'
  | 'oneQuarter'
  | 'threeQuarters';
type Props = {
  children?: React.ReactNode;
  size: GridSize;
} & CommonProps;

export default function GridBlock(props: Props): React.ReactElement {
  const { size, children } = props;

  const classModifier = {
    half: size === 'half',
    oneThird: size === 'oneThird',
    twoThirds: size === 'twoThirds',
    oneQuarter: size === 'oneQuarter',
    threeQuarters: size === 'threeQuarters',
  };
  return (
    <div {...commonProps(props, 'vb-gridBlock', classModifier, {})}>
      {children}
    </div>
  );
}

```

### src/lv1/grids/GridWrapper.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
} & MarginClassProps &
  CommonProps;

export default function GridWrapper(props: Props): React.ReactElement {
  const {
    marginTop,
    marginBottom,
    marginLeft,
    marginRight,
    marginSize,
    children,
  } = props;

  return (
    <div
      {...commonProps(
        props,
        'vb-gridWrapper',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      {children}
    </div>
  );
}

```

### src/lv1/grids/Grids.stories.tsx
```
typescript
import * as React from 'react';

import { select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import GridBlock, { GridSize } from '../grids/GridBlock';
import GridWrapper from '../grids/GridWrapper';

export default {
  component: GridWrapper,
};

const Column = ({ children }: { children?: React.ReactNode }) => {
  return (
    <div
      style={{
        background: 'white',
        border: '1px solid lightgray',
        fontSize: 'smaller',
        padding: '0.5rem',
      }}
    >
      {children}
    </div>
  );
};

export const Grids = () => {
  const columns = select('Columns', [2, 3, 4], 2, 'Grids');

  const size = {
    2: 'half',
    3: 'oneThird',
    4: 'oneQuarter',
  }[columns] as GridSize;

  return (
    <>
      <GridWrapper {...commonKnobs()}>
        {Array(columns)
          .fill(1)
          .map((_, index) => (
            <GridBlock key={index} size={size}>
              <Column>{`${index + 1} of ${columns}`}</Column>
            </GridBlock>
          ))}
      </GridWrapper>
    </>
  );
};

export const TwoColumns = () => {
  return (
    <>
      <GridWrapper marginBottom marginSize="large">
        <GridBlock size="half">
          <Column>{'size="half"'}</Column>
        </GridBlock>
        <GridBlock size="half">
          <Column>{'size="half"'}</Column>
        </GridBlock>
      </GridWrapper>
      <GridWrapper marginBottom marginSize="large">
        <GridBlock size="oneThird">
          <Column>{'size="oneThird"'}</Column>
        </GridBlock>
        <GridBlock size="twoThirds">
          <Column>{'size="twoThirds"'}</Column>
        </GridBlock>
      </GridWrapper>
      <GridWrapper marginBottom marginSize="large">
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
        <GridBlock size="threeQuarters">
          <Column>{'size="threeQuarters"'}</Column>
        </GridBlock>
      </GridWrapper>
    </>
  );
};

export const ThreeColumns = () => {
  return (
    <>
      <GridWrapper marginBottom marginSize="large">
        <GridBlock size="half">
          <Column>{'size="half"'}</Column>
        </GridBlock>
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
      </GridWrapper>
      <GridWrapper marginBottom marginSize="large">
        <GridBlock size="oneThird">
          <Column>{'size="oneThird"'}</Column>
        </GridBlock>
        <GridBlock size="oneThird">
          <Column>{'size="oneThird"'}</Column>
        </GridBlock>
        <GridBlock size="oneThird">
          <Column>{'size="oneThird"'}</Column>
        </GridBlock>
      </GridWrapper>
    </>
  );
};

export const FourColumns = () => {
  return (
    <>
      <GridWrapper marginBottom marginSize="large">
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
        <GridBlock size="oneQuarter">
          <Column>{'size="oneQuarter"'}</Column>
        </GridBlock>
      </GridWrapper>
    </>
  );
};

```

### src/lv1/icons/Avatar.stories.tsx
```
typescript
import * as React from 'react';
import Avatar from './Avatar';

import { commonKnobs } from '../../../stories';
import { select, text } from '@storybook/addon-knobs';
import dsSquare from './storyAssets/ds_square.jpeg';
import dsLandscape from './storyAssets/ds_landscape.jpeg';
import dsPortlait from './storyAssets/ds_portlait.jpeg';

export default {
  component: Avatar,
};

export const AvatarComponent = () => (
  <Avatar
    imageUrl={text('imageUrl', dsSquare, 'Avatar')}
    size={
      select(
        'size',
        {
          small: 'small',
          medium: 'medium',
          large: 'large',
          xLarge: 'xLarge',
          default: '',
        },
        '',
        'Avatar'
      ) || undefined
    }
    {...commonKnobs()}
  />
);

export const ImageCropping = () => (
  <>
    <Avatar imageUrl={dsSquare} />
    <Avatar imageUrl={dsPortlait} />
    <Avatar imageUrl={dsLandscape} />
    <Avatar imageUrl="" />
  </>
);

export const Size = () => (
  <>
    <div>
      <Avatar imageUrl={dsSquare} size="small" />
      <Avatar imageUrl={dsSquare} size="medium" />
      <Avatar imageUrl={dsSquare} size="large" />
      <Avatar imageUrl={dsSquare} size="xLarge" />
    </div>
    <div>
      <Avatar size="small" />
      <Avatar size="medium" />
      <Avatar size="large" />
      <Avatar size="xLarge" />
    </div>
  </>
);

```

### src/lv1/icons/Avatar.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  imageUrl?: string;
  size?: 'small' | 'medium' | 'large' | 'xLarge';
  /**
   * 画像のprefetchでのチェックを有効にします、falseの場合は描画の際に一度だけ画像のfetchが行われます(キャッシュの効かない画像に対して有効です)
   */
  prefetch?: boolean;
} & CommonProps;

/**
 * 人のアバターを表現するためのコンポーネントです。
 *
 * - imageUrlが指定されない場合または画像の読み込みに失敗した場合はMdPersonアイコンが表示されます、prefetchがfalseの場合は画像の読み込みチェックを行わないため、画像が取得できなかった場合にMdPersonアイコンは出ません
 * - サイズは `small` (1.5rem = 24px), `medium` (2rem = 32px), `large` (3rem = 48px), XLarge (6rem = 96px) が用意されています
 */
const Avatar: React.FC<Props> = (props: Props) => {
  const { imageUrl, size, prefetch = true } = props;

  const classModifiers = {
    small: size === 'small',
    large: size === 'large',
    xLarge: size === 'xLarge',
  };

  const [imageLoaded, setImageLoaded] = React.useState(false);

  // 画像の読み込みに失敗してなんも出なくなるとマズいので、img要素を作って読み込み、imageLoadedフラグが立つのを待ってから表示する
  React.useEffect(() => {
    if (!prefetch) {
      return;
    }
    setImageLoaded(false);
    if (imageUrl) {
      const img = document.createElement('img');
      img.src = imageUrl;
      img.addEventListener('load', () => setImageLoaded(true));
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [imageUrl]);

  return (
    <span
      {...commonProps(props, 'vb-avatar', classModifiers)}
      role="img"
      aria-label="アバター画像"
    >
      <svg viewBox="0 0 96 96" className="vb-avatar__image">
        <g clipPath="path('M96,48c0-7-.38-14.11-2.48-20.83A35.9,35.9,0,0,0,73.1,4.05C66.15,1,58.49.11,51,0A119.93,119.93,0,0,0,37.56.43C22.25,1.87,9.31,9.35,3.56,24.1.59,31.58,0,39.74,0,47.72s.51,16.43,3.51,24c5.78,15,18.91,22.47,34.43,23.84A124.8,124.8,0,0,0,51.48,96c7.3-.12,14.73-1.07,21.49-4A35.89,35.89,0,0,0,93.48,69C95.61,62.21,96,55.05,96,48Z')">
          <rect
            x={0}
            y={0}
            width={96}
            height={96}
            className="vb-avatar__background"
          />

          {imageUrl && (imageLoaded || !prefetch) ? (
            <image
              href={imageUrl}
              width="100%"
              height="100%"
              x={0}
              y={0}
              preserveAspectRatio="xMidYMid slice"
            />
          ) : (
            <g className="vb-avatar__placeholderIcon">
              <path d="M80.85,67.34c-3.38-3.41-10.06-9.45-23.26-11A69.79,69.79,0,0,0,48,55.66h0a69.79,69.79,0,0,0-9.59.64c-13.2,1.59-19.88,7.63-23.26,11-6,6.07-6.9,11.27-6.9,18.43s7,16.17,7,16.17h65.5s7-9,7-16.17S86.87,73.41,80.85,67.34Z" />
              <circle cx="48" cy="33" r="15" />
            </g>
          )}
        </g>
      </svg>
    </span>
  );
};

export default Avatar;

```

### src/lv1/icons/MaterialIcon.stories.tsx
```
typescript
import * as React from 'react';

import { MdInfo } from 'react-icons/md';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import MaterialIcon from './MaterialIcon';
import MarginBase from '../bases/MarginBase';
import { Text } from '../typography/Text';

export default {
  component: MaterialIcon,
};

export const MaterialIconComponent = () => (
  <MaterialIcon
    label={text(
      'Label',
      'このテキストはスクリンリーダー用(aria-label)です',
      'MaterialIcon'
    )}
    small={boolean('Small', false, 'MaterialIcon')}
    error={boolean('Error', false, 'MaterialIcon')}
    notice={boolean('Notice', false, 'MaterialIcon')}
    success={boolean('Success', false, 'MaterialIcon')}
    IconComponent={MdInfo}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <MaterialIcon marginRight IconComponent={MdInfo} />
    <MaterialIcon success marginRight IconComponent={MdInfo} />
    <MaterialIcon notice marginRight IconComponent={MdInfo} />
    <MaterialIcon error marginRight IconComponent={MdInfo} />
  </>
);

export const Colors = () => (
  <>
    <MarginBase mb={1}>
      <MaterialIcon color="P1" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P3" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P6" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P8" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P9" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="P10" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={1}>
      <MaterialIcon color="S1" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S3" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S6" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S8" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S9" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="S10" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={1}>
      <MaterialIcon color="white" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GY1" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={1}>
      <MaterialIcon color="RE2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="OR2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YE2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YG2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GR2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="BG2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="PU2" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GY2" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={1}>
      <MaterialIcon color="RE4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="OR4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YE4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YG4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GR4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="BG4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="PU4" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GY4" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={1}>
      <MaterialIcon color="RE5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="OR5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YE5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YG5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GR5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="BG5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="PU5" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GY5" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={0.5}>
      <MaterialIcon color="RE7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="OR7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YE7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YG7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GR7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="BG7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="PU7" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GY7" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase mb={0.5}>
      <MaterialIcon color="RE10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="OR10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YE10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="YG10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GR10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="BG10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="PU10" mr={1} IconComponent={MdInfo} />
      <MaterialIcon color="GY10" mr={1} IconComponent={MdInfo} />
    </MarginBase>
    <MarginBase>
      <Text color="P5">
        <MaterialIcon color="inherit" IconComponent={MdInfo} />
      </Text>
    </MarginBase>
  </>
);

export const Small = () => (
  <>
    <MaterialIcon small marginRight IconComponent={MdInfo} />
    <MaterialIcon small success marginRight IconComponent={MdInfo} />
    <MaterialIcon small notice marginRight IconComponent={MdInfo} />
    <MaterialIcon small error marginRight IconComponent={MdInfo} />
  </>
);

export const PointerEvent = () => (
  <>
    <MaterialIcon IconComponent={MdInfo} />
    <MaterialIcon pointerEvents="none" IconComponent={MdInfo} />
  </>
);

```

### src/lv1/icons/MaterialIcon.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * aria-label を設定します
   */
  label?: string;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * error color にします
   */
  error?: boolean;
  /**
   * notice color にします
   */
  notice?: boolean;
  /**
   * success color にします
   */
  success?: boolean;
  /**
   * SVG のアイコンに対して pointer-events の指定を与えます
   */
  pointerEvents?: 'auto' | 'none';
  /**
   * icon component を指定します
   */
  IconComponent: React.ElementType;
  /**
   * アイコンの色を指定します。 `success` `error` `notice` を表現するために使用する場合はこちらのpropではなく、`success` `error` `notice` propを使用してください。
   */
  color?:
    | 'inherit'
    | 'white'
    | 'P1'
    | 'P2'
    | 'P3'
    | 'P4'
    | 'P5'
    | 'P6'
    | 'P7'
    | 'P8'
    | 'P9'
    | 'P10'
    | 'S1'
    | 'S2'
    | 'S3'
    | 'S4'
    | 'S5'
    | 'S6'
    | 'S7'
    | 'S8'
    | 'S9'
    | 'S10'
    | 'RE2'
    | 'RE4'
    | 'RE5'
    | 'RE7'
    | 'RE10'
    | 'OR2'
    | 'OR4'
    | 'OR5'
    | 'OR7'
    | 'OR10'
    | 'YE2'
    | 'YE4'
    | 'YE5'
    | 'YE7'
    | 'YE10'
    | 'YG2'
    | 'YG4'
    | 'YG5'
    | 'YG7'
    | 'YG10'
    | 'GR2'
    | 'GR4'
    | 'GR5'
    | 'GR7'
    | 'GR10'
    | 'BG2'
    | 'BG4'
    | 'BG5'
    | 'BG7'
    | 'BG10'
    | 'PU2'
    | 'PU4'
    | 'PU5'
    | 'PU7'
    | 'PU10'
    | 'GY1'
    | 'GY2'
    | 'GY4'
    | 'GY5'
    | 'GY7'
    | 'GY10';
} & MarginClassProps &
  CommonProps;

/**
 * Material Design Iconsを表示するためのコンポーネントです。
 *
 * - [react-icons](https://react-icons.github.io/react-icons/) の Material Design iconsのアイコンを使う想定です
 *   - UIの統一感を損なわないよう、Material Design icons 以外を使用しないでください。
 * - freeeのブランドカラーを使用することができます
 *   - `success` `error` `notice` の状態を表現する場合は、`color` propを使用せず、 `success` `error` `notice` のpropを使用してください。
 * - アイコンを単体で使用する（近くにアイコンの内容を説明するテキストがない）場合には、
 *   - 代替テキストを `label` propに指定してください
 *   - 背景色と 3:1 以上のコントラスト比をもつ色を使用してください
 */
const MaterialIcon: React.FC<Props> = (props: Props) => {
  const {
    label,
    small,
    error,
    notice,
    success,
    color,
    pointerEvents,
    IconComponent,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const colorClass = success
    ? 'P7'
    : notice
    ? 'YE7'
    : error
    ? 'RE5'
    : color === 'inherit'
    ? 'Inherit'
    : color === 'white'
    ? 'White'
    : color;

  const classModifier = {
    small,
    error,
    notice,
    success,
    pointerEventsNone: pointerEvents === 'none',
    [`color${colorClass}`]: !!colorClass,
  };

  return (
    <IconComponent
      focusable={false}
      role={label ? 'img' : 'presentation'}
      aria-label={label}
      {...commonProps(props, 'vb-materialIcon', classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    />
  );
};

export default MaterialIcon;

```

### src/lv1/icons/RequiredIcon.stories.tsx
```
typescript
import * as React from 'react';

import { RequiredIcon } from './RequiredIcon';
import { commonKnobs } from '../../../stories';
import { Text, Paragraph, Note } from '..';

export default {
  component: RequiredIcon,
};

export const RequiredIconComponent = () => <RequiredIcon {...commonKnobs()} />;
export const VerticalAlignment = () => (
  <>
    <Note mb={1.5}>
      日本語の文字と並べたときの位置が自然になるように調整してあります。
    </Note>
    <Paragraph mb={1}>
      <Text size={0.75}>
        FontSize=0.75(12px) 日本語の文字
        <RequiredIcon ml={0.5} />
      </Text>
    </Paragraph>
    <Paragraph mb={1}>
      <Text size={0.875}>
        FontSize=0.875(14px) 日本語の文字
        <RequiredIcon ml={0.5} />
      </Text>
    </Paragraph>
    <Paragraph mb={1}>
      <Text size={1}>
        FontSize=1(16px) 日本語の文字
        <RequiredIcon ml={0.5} />
      </Text>
    </Paragraph>
    <Paragraph mb={1}>
      <Text size={1.5}>
        FontSize=1.5(24px) 日本語の文字
        <RequiredIcon ml={0.5} />
      </Text>
    </Paragraph>
  </>
);

```

### src/lv1/icons/RequiredIcon.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useLang } from '../../utilities/VibesProvider';

type Props = CommonProps;
/**
 * フォームのフィールドが必須項目であることを表現するマークを提供するコンポーネントです。
 *
 * このコンポーネントは、そのフィールドの入力を行わないとフォームを送信できないことを予期できるようになることを目的としています。
 * 下に示す目安を参考に、それぞれのフィールドについて必須マークが必要かどうかを判断してください。
 *
 * ## 必須マークを使用する目安
 *
 * - ユーザーが「未入力」または「未選択」のまま送信できないフィールドには、必須マークを付ける
 *   - 空欄状態で送信するとエラーとなるテキストフィールド
 *   - デフォルトで0が表示されているが、0のまま送信しようとするとエラーとなる数値フィールド
 *   - 未選択状態で送信するとエラーとなるラジオボタンやセレクトボックス
 *   - 未チェック状態で送信するとエラーとなるチェックボックス
 * - 「未入力」や「未選択」の状態にすることができないフィールドには、必須マークを付けない
 *   - 「未選択」の選択肢が存在しないセレクトボックス
 *   - デフォルトでどれか一つの選択肢が選択状態になっているラジオボタン
 *
 * 必須マークが目立ちすぎている場合など、フォームの突破率やユーザーの感情面へのネガティブな影響がみられる場合には、「必須フィールドであること」の表示方式について個別に工夫をしても問題ありません。
 * ただし、必須マークを表示する目的は必須項目を事前に明示してエラーとなりづらくなることです。表示方式の変更は突破率やエモーショナルな部分だけでなく、フォームのエラー率やその内訳も計測しながら進めてください。
 *
 */
export const RequiredIcon: React.VFC<Props> = ({ ...props }: Props) => (
  <span {...commonProps(props, 'vb-requiredIcon')}>
    <span className="vb-requiredIcon__content">
      {useLang() === 'en' ? 'Required' : '必須'}
    </span>
  </span>
);

```

### src/lv1/icons/StatusIcon.stories.tsx
```
typescript
import * as React from 'react';

import { select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import StatusIcon from './StatusIcon';

export default {
  component: StatusIcon,
};

export const StatusIconComponent = () => (
  <StatusIcon
    type={
      select(
        'Type',
        [
          '',
          'done',
          'success',
          'progress',
          'required',
          'disabled',
          'emphasis',
          'warning',
          'error',
        ],
        '',
        'StatusIcon'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text('Children', 'ラベル', 'StatusIcon')}
  </StatusIcon>
);

export const Samples = () => (
  <div>
    <StatusIcon type="done" marginRight marginBottom>
      done
    </StatusIcon>
    <StatusIcon type="success" marginRight marginBottom>
      success
    </StatusIcon>
    <StatusIcon type="progress" marginRight marginBottom>
      progress
    </StatusIcon>
    <StatusIcon type="required" marginRight marginBottom>
      required
    </StatusIcon>
    <StatusIcon type="disabled" marginRight marginBottom>
      disabled
    </StatusIcon>
    <StatusIcon type="emphasis" marginRight marginBottom>
      emphasis
    </StatusIcon>
    <StatusIcon type="warning" marginRight marginBottom>
      warning
    </StatusIcon>
    <StatusIcon type="error" marginRight marginBottom>
      error
    </StatusIcon>
  </div>
);

```

### src/lv1/icons/StatusIcon.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

export type StatusType =
  | 'done'
  | 'success'
  | 'progress'
  | 'required'
  | 'disabled'
  | 'emphasis'
  | 'warning'
  | 'error';
type Props = {
  children?: React.ReactNode;
  /**
   * color type を指定します
   */
  type?: StatusType;
} & MarginClassProps &
  CommonProps;

/**
 * オブジェクトのステータスを表示するためのコンポーネントです。
 *
 * ## 用途
 * - ユーザーの操作やシステムによる処理の進捗などによって変わっていくステータス表示に使用することを想定しています。
 *  - そのオブジェクトの属性（例：取引における収入か支出）を示す場合は別の方法を検討してください。
 *  - たとえば、あるフォームが入力必須であることを示す場合は `RequiredIcon` を使用してください。
 * - ボタンとして使うことは想定していません。
 *  - 「ステータスを変更するためのボタン」が必要な場合は、`StatusSelector` コンポーネントを使用してください。
 *
 * ## type の使い分け
 * - filled 系か outlined 系かの使い分け
 *   - ユーザーが何かしらの操作をしなければならないステータスの場合は、他のステータスと比べてユーザーの注意を引けるよう filled 系を使用してください。
 *     - 例：ワークフローが自分の承認待ちである場合、何かしらの修正を必要としている場合
 *   - そうではない場合は基本的に outlined 系を使用してください。
 * - 色の使い分け
 *   - type 名が意味をもった名称になっていますが、それにとらわれなくてOKです（type名変更したほうがいいかもしれない）。
 *   - そのオブジェクトのステータスとして異常であるためユーザーの注意を喚起しておきたい場合は、赤系の色（`error`, `required`）を使ってください。
 *   - ユーザーがそのオブジェクトのステータスに注意を払う必要がなくなった場合は、グレー系の色（`done`, `disabled`）を使ってください。
 *
 */
const StatusIcon: React.FC<Props> = (props: Props) => {
  const {
    children,
    type,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const statusIconBaseClass = 'vb-statusIcon';

  const classModifier = [
    'done',
    'success',
    'progress',
    'required',
    'disabled',
    'emphasis',
    'warning',
    'error',
  ].reduce((acm, mod) => ({ ...acm, [mod]: type === mod }), {});

  return (
    <span
      {...commonProps(props, statusIconBaseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    >
      {children}
    </span>
  );
};
export default StatusIcon;

```

### src/lv1/images/AlertSwallow.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { Vibes2021BackgroundColor } from '../../constants';
import AlertSwallow from './AlertSwallow';

export default {
  component: AlertSwallow,
};

export const AlertSwallowComponent = () => <AlertSwallow {...commonKnobs()} />;

export const FitWidth = () => (
  <>
    <div
      style={{
        width: '10rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <AlertSwallow size="fit-width" />
    </div>
    <div
      style={{
        width: '20rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <AlertSwallow size="fit-width" />
    </div>
    <div
      style={{
        width: '30rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <AlertSwallow size="fit-width" />
    </div>
  </>
);

export const FitHeight = () => (
  <>
    <div
      style={{
        height: '10rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <AlertSwallow size="fit-height" />
    </div>
    <div
      style={{
        height: '20rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <AlertSwallow size="fit-height" />
    </div>
    <div
      style={{
        height: '30rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <AlertSwallow size="fit-height" />
    </div>
  </>
);

```

### src/lv1/images/AlertSwallow.tsx
```
typescript
import * as React from 'react';
import { SwallowProps, SwallowContainer } from './SwallowContainer';

type Props = SwallowProps;

const AlertSwallow: React.FC<Props> = (props: Props) => {
  return (
    <SwallowContainer
      {...props}
      mediumHeightRem={12}
      renderSVG={({ className, styles }) => (
        <svg
          className={className}
          viewBox="0 0 213 192"
          role="presentation"
          aria-hidden="true"
          style={styles}
        >
          <path
            d="M201.4102,0.999225148 C193.5062,37.6782251 169.4242,67.2172251 137.7622,83.3792251 C150.9302,86.7762251 164.7352,88.5832251 178.9632,88.5832251 C190.2102,88.5832251 201.1922,87.4542251 211.8052,85.3032251 L211.3412,86.3252251 C210.7022,87.7322251 209.5412,88.8452251 208.0962,89.3932251 C200.6752,92.2032251 192.9972,94.4922251 185.1072,96.2152251 C183.4092,96.5862251 181.8142,97.3612251 180.5552,98.5622251 C178.8832,100.155225 177.1242,101.657225 175.2862,103.062225 L205.9782,106.636225 C208.0662,106.879225 209.7942,108.372225 210.3392,110.403225 L165.4052,110.403225 C163.8272,110.403225 162.2792,110.753225 160.8182,111.350225 C153.9342,114.158225 146.4452,115.789225 138.6012,115.991225 C155.9162,136.052225 165.4542,162.831225 163.1142,190.999225 L92.0062,98.5282251 C89.4932,95.2602251 85.9092,92.9812251 81.8832,92.0942251 L63.1572,87.9632251 L72.5592,85.6782251 L72.5552,85.6742251 C77.7372,79.4772251 85.5242,75.5352251 94.2312,75.5352251 C95.5892,75.5352251 96.9252,75.6302251 98.2312,75.8162251 C101.4052,76.2662251 104.6262,75.4972251 107.1662,73.5412251 L201.4102,0.999225148 Z"
            fill="#FFFFFF"
          ></path>
          <path
            d="M201.4102,0.999225148 C193.5062,37.6782251 169.4242,67.2172251 137.7622,83.3792251 C150.9302,86.7762251 164.7352,88.5832251 178.9632,88.5832251 C190.2102,88.5832251 201.1922,87.4542251 211.8052,85.3032251 L211.3412,86.3252251 C210.7022,87.7322251 209.5412,88.8452251 208.0962,89.3932251 C200.6752,92.2032251 192.9972,94.4922251 185.1072,96.2152251 C183.4092,96.5862251 181.8142,97.3612251 180.5552,98.5622251 C178.8832,100.155225 177.1242,101.657225 175.2862,103.062225 L205.9782,106.636225 C208.0662,106.879225 209.7942,108.372225 210.3392,110.403225 L165.4052,110.403225 C163.8272,110.403225 162.2792,110.753225 160.8182,111.350225 C153.9342,114.158225 146.4452,115.789225 138.6012,115.991225 C155.9162,136.052225 165.4542,162.831225 163.1142,190.999225 L92.0062,98.5282251 C89.4932,95.2602251 85.9092,92.9812251 81.8832,92.0942251 L63.1572,87.9632251 L72.5592,85.6782251 L72.5552,85.6742251 C77.7372,79.4772251 85.5242,75.5352251 94.2312,75.5352251 C95.5892,75.5352251 96.9252,75.6302251 98.2312,75.8162251 C101.4052,76.2662251 104.6262,75.4972251 107.1662,73.5412251 L201.4102,0.999225148 Z"
            fill="#AAC8FF"
          ></path>
          <path
            d="M163.1143,191.999225 C162.8093,191.999225 162.5143,191.859225 162.3223,191.608225 L91.2133,99.1382251 C88.8473,96.0612251 85.4573,93.9062251 81.6683,93.0702251 L62.9423,88.9402251 C62.4873,88.8402251 62.1623,88.4392251 62.1572415,87.9742251 C62.1523,87.5092251 62.4683,87.1022251 62.9213,86.9922251 L71.9953,84.7862251 C77.5693,78.2672251 85.6553,74.5352251 94.2313,74.5352251 C95.6183,74.5352251 97.0113,74.6332251 98.3723,74.8262251 C98.9063,74.9022251 99.4523,74.9402251 99.9933,74.9402251 C102.4233,74.9402251 104.6933,74.1832251 106.5563,72.7492251 L141.5133,45.8412251 C141.9503,45.5052251 142.5783,45.5862251 142.9163,46.0242251 C143.2533,46.4612251 143.1713,47.0892251 142.7333,47.4262251 L107.7763,74.3332251 C105.5593,76.0392251 102.8683,76.9402251 99.9933,76.9402251 C99.3583,76.9402251 98.7183,76.8952251 98.0913,76.8062251 C96.8233,76.6262251 95.5243,76.5352251 94.2313,76.5352251 C86.1713,76.5352251 78.5753,80.0732251 73.3793,86.2472251 C73.2423,86.4452251 73.0373,86.5912251 72.7963,86.6502251 L67.5863,87.9162251 L82.0983,91.1172251 C86.3463,92.0542251 90.1463,94.4702251 92.7993,97.9192251 L162.3013,188.301225 C162.4093,186.391225 162.4643,184.474225 162.4643,182.574225 C162.4643,158.453225 153.7203,135.039225 137.8443,116.645225 C137.5913,116.352225 137.5303,115.940225 137.6863,115.587225 C137.8433,115.233225 138.1893,115.002225 138.5753,114.991225 C146.1333,114.797225 153.4893,113.260225 160.4403,110.424225 C162.0973,109.747225 163.7683,109.403225 165.4053,109.403225 L208.7993,109.403225 C208.1383,108.430225 207.0823,107.771225 205.8633,107.629225 L175.1713,104.055225 C174.7653,104.008225 174.4293,103.720225 174.3223,103.326225 C174.2143,102.934225 174.3553,102.515225 174.6783,102.267225 C176.4823,100.889225 178.2263,99.3982251 179.8643,97.8382251 C181.2023,96.5632251 182.9413,95.6652251 184.8933,95.2382251 C192.6413,93.5462251 200.3283,91.2652251 207.7413,88.4572251 C208.6483,88.1142251 209.4383,87.4842251 209.9963,86.6772251 C199.8243,88.6062251 189.3943,89.5832251 178.9633,89.5832251 C164.9253,89.5832251 150.9793,87.8222251 137.5123,84.3482251 C137.1103,84.2442251 136.8143,83.9022251 136.7683,83.4892251 C136.7223,83.0762251 136.9373,82.6782251 137.3073,82.4892251 C168.9793,66.3212251 191.6363,37.6312251 199.8193,3.48622515 L168.2923,27.7532251 C167.8523,28.0902251 167.2253,28.0082251 166.8893,27.5712251 C166.5523,27.1332251 166.6343,26.5052251 167.0713,26.1682251 L200.8003,0.207225148 C201.1333,-0.0477748521 201.5893,-0.0697748521 201.9443,0.154225148 C202.2993,0.378225148 202.4763,0.799225148 202.3873,1.20922515 C194.8313,36.2772251 172.3613,65.9622251 140.5553,83.0452251 C153.0683,86.0582251 165.9753,87.5832251 178.9633,87.5832251 C189.9493,87.5832251 200.9313,86.4862251 211.6063,84.3232251 C211.9723,84.2452251 212.3533,84.3862251 212.5873,84.6812251 C212.8213,84.9752251 212.8703,85.3742251 212.7153,85.7172251 L212.2513,86.7382251 C211.5033,88.3882251 210.1173,89.6962251 208.4503,90.3282251 C200.9453,93.1702251 193.1633,95.4792251 185.3203,97.1912251 C183.7253,97.5402251 182.3163,98.2652251 181.2443,99.2852251 C180.1363,100.342225 178.9813,101.366225 177.7933,102.347225 L206.0933,105.643225 C208.6043,105.935225 210.6493,107.702225 211.3043,110.145225 C211.3853,110.444225 211.3213,110.766225 211.1323,111.012225 C210.9433,111.259225 210.6493,111.403225 210.3393,111.403225 L165.4053,111.403225 C164.0293,111.403225 162.6133,111.696225 161.1963,112.275225 C154.6523,114.945225 147.7623,116.500225 140.6843,116.905225 C156.0343,135.417225 164.4643,158.654225 164.4643,182.574225 C164.4643,185.397225 164.3453,188.260225 164.1113,191.082225 C164.0763,191.493225 163.7933,191.842225 163.3963,191.958225 C163.3033,191.985225 163.2083,191.999225 163.1143,191.999225"
            fill="#2864F0"
          ></path>
          <path
            d="M95.0142,94.6672251 C105.6442,105.602225 120.5072,112.394225 136.9552,112.394225 C151.7412,112.394225 165.2442,106.905225 175.5452,97.8552251 C155.9612,98.0492251 134.5672,93.5932251 121.6832,92.9062251 C112.5652,92.3072251 103.6152,92.9382251 95.0142,94.6672251"
            fill="#FFFFFF"
          ></path>
          <path
            d="M136.9556,113.393725 C120.7496,113.393725 105.5996,106.990725 94.2976,95.3647251 C94.0416,95.1017251 93.9506,94.7207251 94.0596,94.3717251 C94.1676,94.0217251 94.4576,93.7587251 94.8166,93.6867251 C102.3826,92.1647251 110.1416,91.4977251 117.9176,91.7267251 C118.4696,91.7437251 118.9046,92.2037251 118.8886,92.7557251 C118.8726,93.3077251 118.4146,93.7297251 117.8596,93.7267251 C110.8636,93.5207251 103.8936,94.0537251 97.0596,95.2937251 C107.8266,105.691725 121.9206,111.393725 136.9556,111.393725 C150.0166,111.393725 162.6386,106.958725 172.7956,98.8527251 C161.3406,98.7267251 149.5626,97.1867251 139.1216,95.8217251 C135.5696,95.3567251 132.2146,94.9177251 129.1236,94.5697251 C128.5746,94.5067251 128.1796,94.0117251 128.2416,93.4627251 C128.3036,92.9147251 128.7976,92.5247251 129.3476,92.5817251 C132.4566,92.9317251 135.8196,93.3727251 139.3806,93.8377251 C150.2166,95.2547251 162.4986,96.8617251 174.2896,96.8617251 C174.7066,96.8617251 175.1226,96.8587251 175.5356,96.8547251 L175.5446,96.8547251 C175.9586,96.8547251 176.3306,97.1107251 176.4786,97.4977251 C176.6276,97.8877251 176.5186,98.3307251 176.2056,98.6057251 C165.3526,108.141725 151.4136,113.393725 136.9556,113.393725"
            fill="#2864F0"
          ></path>
          <path
            d="M91.9995,82.6247251 C89.8255,82.6247251 88.0625,84.3887251 88.0625,86.5647251 C88.0625,88.7407251 89.8255,90.5047251 91.9995,90.5047251 C94.1745,90.5047251 95.9375,88.7407251 95.9375,86.5647251 C95.9375,84.3887251 94.1745,82.6247251 91.9995,82.6247251"
            fill="#FFFFFF"
          ></path>
          <path
            d="M91.9995,83.6247251 C90.3795,83.6247251 89.0625,84.9437251 89.0625,86.5647251 C89.0625,88.1857251 90.3795,89.5047251 91.9995,89.5047251 C93.6195,89.5047251 94.9375,88.1857251 94.9375,86.5647251 C94.9375,84.9437251 93.6195,83.6247251 91.9995,83.6247251 M91.9995,91.5047251 C89.2775,91.5047251 87.0625,89.2887251 87.0625,86.5647251 C87.0625,83.8407251 89.2775,81.6247251 91.9995,81.6247251 C94.7225,81.6247251 96.9365,83.8407251 96.9365,86.5647251 C96.9365,89.2887251 94.7225,91.5047251 91.9995,91.5047251"
            fill="#2864F0"
          ></path>
          <path
            d="M33.1309,9.19552515 C50.8769,9.19552515 65.2619,23.5915251 65.2619,41.3495251 C65.2619,48.8095251 62.7159,55.6705251 58.4559,61.1265251 L62.3429,73.4285251 L51.3819,67.8085251 C46.1979,71.3965251 39.9119,73.5035251 33.1309,73.5035251 C15.3849,73.5035251 0.9999,59.1075251 0.9999,41.3495251 C0.9999,23.5915251 15.3849,9.19552515 33.1309,9.19552515"
            fill="#FFD278"
          ></path>
          <path
            d="M33.1309,74.5036251 C21.3929,74.5036251 10.4209,68.1936251 4.4969,58.0376251 C4.2189,57.5606251 4.3799,56.9486251 4.8569,56.6706251 C5.3349,56.3916251 5.9469,56.5536251 6.2249,57.0296251 C11.7909,66.5746251 22.1009,72.5036251 33.1309,72.5036251 C39.4829,72.5036251 45.5969,70.5956251 50.8129,66.9856251 C51.1159,66.7766251 51.5119,66.7516251 51.8379,66.9186251 L60.6679,71.4456251 L57.5029,61.4276251 C57.4029,61.1136251 57.4649,60.7706251 57.6679,60.5106251 C61.9819,54.9856251 64.2619,48.3606251 64.2619,41.3496251 C64.2619,24.1706251 50.2969,10.1956251 33.1309,10.1956251 C15.9649,10.1956251 1.9999,24.1706251 1.9999,41.3496251 C1.9999,43.6076251 2.2419,45.8596251 2.7199,48.0436251 C2.8379,48.5826251 2.4969,49.1156251 1.9569,49.2336251 C1.4169,49.3506251 0.8839,49.0106251 0.7659,48.4706251 C0.2579,46.1466251 -0.0001,43.7506251 -0.0001,41.3496251 C-0.0001,23.0676251 14.8619,8.19562515 33.1309,8.19562515 C51.3999,8.19562515 66.2619,23.0676251 66.2619,41.3496251 C66.2619,48.6336251 63.9489,55.5276251 59.5669,61.3216251 L63.2969,73.1276251 C63.4189,73.5116251 63.2969,73.9316251 62.9889,74.1916251 C62.6799,74.4526251 62.2449,74.5026251 61.8869,74.3176251 L51.4529,68.9686251 C46.0119,72.5916251 39.6909,74.5036251 33.1309,74.5036251"
            fill="#2864F0"
          ></path>
          <path
            d="M35.6025,53.7726251 C35.6025,54.9836251 34.6225,55.9646251 33.4125,55.9646251 C32.2025,55.9646251 31.2215,54.9836251 31.2215,53.7726251 C31.2215,52.5616251 32.2025,51.5806251 33.4125,51.5806251 C34.6225,51.5806251 35.6025,52.5616251 35.6025,53.7726251"
            fill="#2864F0"
          ></path>
          <path
            d="M35.6025,46.5666251 C35.6025,47.7776251 34.6225,48.7586251 33.4125,48.7586251 C32.2025,48.7586251 31.2215,47.7776251 31.2215,46.5666251 C31.2215,45.3556251 32.2025,44.3746251 33.4125,44.3746251 C34.6225,44.3746251 35.6025,45.3556251 35.6025,46.5666251"
            fill="#2864F0"
          ></path>
          <path
            d="M36.333,29.6574251 C36.333,31.2714251 35.025,32.5804251 33.412,32.5804251 C31.799,32.5804251 30.491,31.2714251 30.491,29.6574251 C30.491,28.0424251 31.799,26.7344251 33.412,26.7344251 C35.025,26.7344251 36.333,28.0424251 36.333,29.6574251"
            fill="#2864F0"
          ></path>
          <polygon
            fill="#2864F0"
            points="35.6025 46.5666251 31.2215 46.5666251 30.4915 29.7586251 36.3325 29.7586251"
          ></polygon>
        </svg>
      )}
    />
  );
};

export default AlertSwallow;

```

### src/lv1/images/AppStoreBadge.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import AppStoreBadge from './AppStoreBadge';

export default {
  component: AppStoreBadge,
};

export const AppStoreBadgeComponent = () => (
  <AppStoreBadge {...commonKnobs()} />
);

```

### src/lv1/images/AppStoreBadge.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import useUniqueId from '../../hooks/useUniqueId';

type Props = MarginClassProps & CommonProps;

const AppStoreBadge: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const labelId = useUniqueId('vb-storeBadge--appStore');

  return (
    <figure
      aria-labelledby={labelId}
      {...commonProps(
        props,
        'vb-storeBadge',
        { appStore: true },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <svg className="vb-storeBadge__svg" viewBox="0 0 109 40" role="img">
        <title id={labelId}>AppStoreからダウンロード</title>
        <defs>
          <polygon
            id="vb-badge-appstore1"
            points="0 0 108.8508 0 108.8508 40 0 40"
          />
          <polygon
            id="vb-badge-appstore2"
            points="0 40 108.852 40 108.852 0 0 0"
          />
        </defs>
        <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
          <g>
            <g id="AppStore">
              <mask id="vb-badge-appstore-mask-2" fill="white">
                <use xlinkHref="#vb-badge-appstore1" />
              </mask>
              <g />
              <path
                d="M99.3218,0 L9.5348,0 C9.1678,0 8.8058,0 8.4398,0.002 C8.1338,0.004 7.8298,0.01 7.5208,0.015 C6.8558,0.031 6.1818,0.072 5.5168,0.191 C4.8478,0.309 4.2258,0.509 3.6158,0.818 C3.0178,1.125 2.4708,1.523 1.9978,1.997 C1.5188,2.471 1.1228,3.02 0.8198,3.618 C0.5088,4.227 0.3108,4.852 0.1948,5.521 C0.0738,6.184 0.0318,6.854 0.0148,7.523 C0.0058,7.83 0.0048,8.138 -0.0002,8.444 L-0.0002,9.536 L-0.0002,30.465 L-0.0002,31.559 C0.0048,31.869 0.0058,32.17 0.0148,32.48 C0.0318,33.15 0.0738,33.82 0.1948,34.482 C0.3108,35.152 0.5088,35.78 0.8198,36.387 C1.1228,36.982 1.5188,37.531 1.9978,38.001 C2.4708,38.479 3.0178,38.876 3.6158,39.18 C4.2258,39.492 4.8478,39.689 5.5168,39.811 C6.1818,39.93 6.8558,39.969 7.5208,39.987 C7.8298,39.994 8.1338,39.998 8.4398,39.998 C8.8058,40 9.1678,40 9.5348,40 L99.3218,40 C99.6818,40 100.0468,40 100.4058,39.998 C100.7118,39.998 101.0238,39.994 101.3288,39.987 C101.9988,39.969 102.6708,39.93 103.3288,39.811 C103.9988,39.689 104.6208,39.492 105.2368,39.18 C105.8338,38.876 106.3808,38.479 106.8538,38.001 C107.3298,37.531 107.7258,36.982 108.0348,36.387 C108.3418,35.78 108.5418,35.152 108.6538,34.482 C108.7778,33.82 108.8158,33.15 108.8408,32.48 C108.8428,32.17 108.8428,31.869 108.8428,31.559 C108.8508,31.195 108.8508,30.834 108.8508,30.465 L108.8508,9.536 C108.8508,9.17 108.8508,8.807 108.8428,8.444 C108.8428,8.138 108.8428,7.83 108.8408,7.523 C108.8158,6.854 108.7778,6.184 108.6538,5.521 C108.5418,4.852 108.3418,4.227 108.0348,3.618 C107.7258,3.02 107.3298,2.471 106.8538,1.997 C106.3808,1.523 105.8338,1.125 105.2368,0.818 C104.6208,0.509 103.9988,0.309 103.3288,0.191 C102.6708,0.072 101.9988,0.031 101.3288,0.015 C101.0238,0.01 100.7118,0.004 100.4058,0.002 C100.0468,0 99.6818,0 99.3218,0"
                fill="#B3B1B1"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M8.4448,39.125 C8.1398,39.125 7.8428,39.121 7.5408,39.114 C6.9818,39.099 6.3188,39.067 5.6718,38.951 C5.0608,38.841 4.5188,38.661 4.0148,38.403 C3.4928,38.139 3.0248,37.797 2.6178,37.387 C2.2038,36.98 1.8628,36.514 1.5968,35.99 C1.3378,35.485 1.1608,34.943 1.0538,34.333 C0.9318,33.66 0.9008,32.978 0.8878,32.458 C0.8818,32.247 0.8728,31.545 0.8728,31.545 L0.8728,8.444 C0.8728,8.444 0.8818,7.753 0.8878,7.55 C0.9008,7.026 0.9318,6.344 1.0528,5.678 C1.1598,5.064 1.3378,4.522 1.5968,4.016 C1.8618,3.491 2.2028,3.022 2.6118,2.618 C3.0258,2.204 3.4958,1.861 4.0138,1.595 C4.5278,1.334 5.0698,1.156 5.6678,1.051 C6.3408,0.931 7.0238,0.9 7.5428,0.887 L8.4448,0.875 L100.4008,0.875 L101.3138,0.888 C101.8268,0.9 102.5088,0.931 103.1728,1.05 C103.7748,1.156 104.3208,1.335 104.8428,1.598 C105.3568,1.861 105.8258,2.204 106.2348,2.614 C106.6448,3.02 106.9868,3.492 107.2578,4.018 C107.5158,4.529 107.6918,5.071 107.7948,5.667 C107.9098,6.298 107.9458,6.946 107.9668,7.554 C107.9698,7.837 107.9698,8.142 107.9698,8.444 C107.9788,8.819 107.9788,9.176 107.9788,9.536 L107.9788,30.465 C107.9788,30.828 107.9788,31.183 107.9698,31.54 C107.9698,31.865 107.9698,32.163 107.9658,32.47 C107.9458,33.059 107.9098,33.706 107.7958,34.323 C107.6918,34.937 107.5158,35.479 107.2558,35.993 C106.9868,36.513 106.6428,36.982 106.2408,37.379 C105.8268,37.797 105.3578,38.138 104.8408,38.401 C104.3218,38.665 103.7928,38.84 103.1728,38.951 C102.5328,39.067 101.8698,39.099 101.3028,39.114 C101.0108,39.121 100.7038,39.125 100.4058,39.125 L99.3218,39.127 L8.4448,39.125 Z"
                fill="#0A0A05"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M37.5357,15.229 L40.7467,15.229 L39.1637,10.566 L39.1197,10.566 L37.5357,15.229 Z M41.1677,16.555 L37.1157,16.555 L36.1427,19.428 L34.4267,19.428 L38.2647,8.798 L40.0477,8.798 L43.8847,19.428 L42.1397,19.428 L41.1677,16.555 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M50.5376,15.5532 C50.5376,13.9842 49.7266,12.9522 48.4896,12.9522 C47.2746,12.9522 46.4566,14.0062 46.4566,15.5532 C46.4566,17.1152 47.2746,18.1602 48.4896,18.1602 C49.7266,18.1602 50.5376,17.1362 50.5376,15.5532 M52.1726,15.5532 C52.1726,17.9612 50.8836,19.5092 48.9386,19.5092 C47.8346,19.5092 46.9576,19.0142 46.5006,18.1532 L46.4636,18.1532 L46.4636,21.9912 L44.8726,21.9912 L44.8726,11.6782 L46.4126,11.6782 L46.4126,12.9672 L46.4416,12.9672 C46.8846,12.1352 47.8276,11.5972 48.9096,11.5972 C50.8766,11.5972 52.1726,13.1522 52.1726,15.5532"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M59.0674,15.5532 C59.0674,13.9842 58.2564,12.9522 57.0194,12.9522 C55.8034,12.9522 54.9864,14.0062 54.9864,15.5532 C54.9864,17.1152 55.8034,18.1602 57.0194,18.1602 C58.2564,18.1602 59.0674,17.1362 59.0674,15.5532 M60.7024,15.5532 C60.7024,17.9612 59.4134,19.5092 57.4684,19.5092 C56.3634,19.5092 55.4874,19.0142 55.0294,18.1532 L54.9934,18.1532 L54.9934,21.9912 L53.4024,21.9912 L53.4024,11.6782 L54.9424,11.6782 L54.9424,12.9672 L54.9714,12.9672 C55.4134,12.1352 56.3564,11.5972 57.4394,11.5972 C59.4054,11.5972 60.7024,13.1522 60.7024,15.5532"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M66.3394,16.4658 C66.4564,17.5198 67.4814,18.2128 68.8804,18.2128 C70.2214,18.2128 71.1864,17.5198 71.1864,16.5698 C71.1864,15.7448 70.6044,15.2508 69.2264,14.9118 L67.8494,14.5798 C65.8974,14.1088 64.9904,13.1958 64.9904,11.7148 C64.9904,9.8808 66.5894,8.6208 68.8584,8.6208 C71.1054,8.6208 72.6444,9.8808 72.6954,11.7148 L71.0904,11.7148 C70.9944,10.6538 70.1174,10.0138 68.8354,10.0138 C67.5544,10.0138 66.6774,10.6618 66.6774,11.6048 C66.6774,12.3558 67.2374,12.7988 68.6084,13.1368 L69.7784,13.4238 C71.9594,13.9398 72.8644,14.8158 72.8644,16.3708 C72.8644,18.3598 71.2814,19.6048 68.7624,19.6048 C66.4044,19.6048 64.8134,18.3888 64.7114,16.4658 L66.3394,16.4658 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M76.2993,9.8442 L76.2993,11.6782 L77.7733,11.6782 L77.7733,12.9372 L76.2993,12.9372 L76.2993,17.2102 C76.2993,17.8732 76.5943,18.1832 77.2423,18.1832 C77.4043,18.1832 77.6623,18.1602 77.7663,18.1462 L77.7663,19.3982 C77.5893,19.4432 77.2363,19.4712 76.8823,19.4712 C75.3133,19.4712 74.7013,18.8832 74.7013,17.3802 L74.7013,12.9372 L73.5743,12.9372 L73.5743,11.6782 L74.7013,11.6782 L74.7013,9.8442 L76.2993,9.8442 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M84.357,15.5532 C84.357,13.8802 83.59,12.8932 82.301,12.8932 C81.012,12.8932 80.246,13.8882 80.246,15.5532 C80.246,17.2322 81.012,18.2122 82.301,18.2122 C83.59,18.2122 84.357,17.2322 84.357,15.5532 M78.626,15.5532 C78.626,13.1152 80.062,11.5822 82.301,11.5822 C84.548,11.5822 85.978,13.1152 85.978,15.5532 C85.978,17.9982 84.556,19.5242 82.301,19.5242 C80.047,19.5242 78.626,17.9982 78.626,15.5532"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M87.2896,11.6782 L88.8066,11.6782 L88.8066,12.9972 L88.8436,12.9972 C89.0866,12.1202 89.7936,11.5972 90.7076,11.5972 C90.9356,11.5972 91.1266,11.6272 91.2526,11.6562 L91.2526,13.1442 C91.1266,13.0922 90.8466,13.0482 90.5376,13.0482 C89.5136,13.0482 88.8796,13.7412 88.8796,14.8312 L88.8796,19.4282 L87.2896,19.4282 L87.2896,11.6782 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M93.2085,14.8384 L97.0835,14.8384 C97.0465,13.6524 96.2875,12.8714 95.1825,12.8714 C94.0845,12.8714 93.2895,13.6674 93.2085,14.8384 Z M98.5865,17.1514 C98.3725,18.5584 97.0025,19.5244 95.2495,19.5244 C92.9945,19.5244 91.5955,18.0134 91.5955,15.5894 C91.5955,13.1594 93.0025,11.5824 95.1825,11.5824 C97.3265,11.5824 98.6745,13.0554 98.6745,15.4054 L98.6745,15.9504 L93.2015,15.9504 L93.2015,16.0464 C93.2015,17.3724 94.0335,18.2414 95.2855,18.2414 C96.1695,18.2414 96.8625,17.8214 97.0755,17.1514 L98.5865,17.1514 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M39.4678,25.7373 L40.1548,25.2753 C41.2378,26.2263 41.6338,27.5823 41.7648,28.7593 L40.8618,28.9003 C40.7668,27.7143 40.4468,26.5933 39.4678,25.7373 M36.4368,30.8113 L36.5028,29.9923 C36.8508,30.1053 37.1898,30.1433 37.4528,30.1433 C37.7448,30.1433 37.8578,30.1153 37.9998,29.9173 C38.2538,29.5503 38.4318,28.7403 38.4318,27.6013 C38.4318,26.7543 38.1688,26.5083 37.5008,26.5083 C37.3498,26.5083 37.1798,26.5183 36.9918,26.5283 C36.5588,28.1473 35.9378,29.6163 35.2218,30.6513 L34.4408,30.2273 C35.1278,29.3143 35.6928,28.0343 36.0878,26.6123 C35.5798,26.6693 35.0428,26.7543 34.5538,26.8673 L34.3848,26.0383 C34.9588,25.9343 35.6458,25.8413 36.2858,25.7843 C36.4078,25.1723 36.5208,24.5323 36.5778,23.8913 L37.5008,23.9953 C37.4158,24.5693 37.3118,25.1443 37.1798,25.7093 L37.5478,25.7093 C38.7428,25.7093 39.3178,26.3013 39.3178,27.5633 C39.3178,28.8633 39.0818,29.8413 38.7718,30.3593 C38.5078,30.7933 38.1878,30.9623 37.6418,30.9623 C37.2458,30.9623 36.8218,30.9063 36.4368,30.8113"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M44.0112,24.6924 L44.2462,23.8634 C45.4142,24.0434 47.1182,24.4194 47.9472,24.7114 L47.7202,25.5304 C46.9772,25.2484 45.1592,24.8334 44.0112,24.6924 M44.8862,30.9434 L44.6982,30.0954 C44.9342,30.1154 45.2442,30.1244 45.4332,30.1244 C47.2972,30.1244 48.0032,29.5974 48.0032,28.8154 C48.0032,28.1944 47.5982,27.8374 46.6942,27.8374 C45.9042,27.8374 45.0002,28.2794 44.1152,29.0984 L43.3892,28.7784 C43.3892,26.9794 43.5782,26.1514 44.1902,25.2484 L45.0282,25.5204 C44.4532,26.2834 44.3122,27.0074 44.3122,27.9684 C45.0842,27.4414 46.0452,27.0924 46.8832,27.0924 C48.1442,27.0924 48.9262,27.7424 48.9262,28.7964 C48.9262,30.1334 47.8712,30.9534 45.3392,30.9534 C45.2162,30.9534 45.0372,30.9434 44.8862,30.9434"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M56.8018,23.6279 L57.3388,23.3739 C57.6308,23.7789 57.8378,24.1369 58.0258,24.5609 L57.4328,24.8149 C57.2818,24.4099 57.0748,24.0149 56.8018,23.6279 Z M55.6248,23.7229 L56.1528,23.4679 C56.4348,23.8549 56.6608,24.2399 56.8208,24.6259 L56.2278,24.8989 C56.0868,24.4849 55.8698,24.0899 55.6248,23.7229 Z M51.6528,30.2939 C52.6878,29.9549 53.5348,29.3609 54.1848,28.6549 C53.6198,28.1849 53.0458,27.8089 52.4248,27.4699 L52.9418,26.8199 C53.6298,27.1779 54.2128,27.5449 54.7308,27.9489 C55.2018,27.2529 55.5118,26.4999 55.6538,25.7739 L53.2528,25.7739 C52.6978,26.6689 51.9908,27.4879 51.1998,28.1379 L50.5128,27.5449 C51.6428,26.6119 52.6688,25.2379 53.1308,23.9479 L54.0338,24.1649 C53.9308,24.4289 53.8268,24.7009 53.7048,24.9559 L56.0398,24.9559 L56.7078,25.2669 C56.2278,27.9779 54.6558,30.1519 52.1978,31.0279 L51.6528,30.2939 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M60.9214,30.9902 L60.4414,30.2272 C62.9644,29.6162 63.7084,27.9592 63.7554,26.0762 L59.8014,26.0762 L59.8014,27.9692 L58.8504,27.9692 L58.8504,25.2752 L61.2134,25.2752 L61.2134,23.8912 L62.1644,23.8912 L62.1644,25.2752 L63.9244,25.2752 L64.7914,25.5202 C64.6774,28.1942 63.7834,30.2372 60.9214,30.9902"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <path
                d="M66.8013,29.9834 C69.0513,29.6634 71.1893,28.1844 72.2343,26.0664 L72.8553,26.7634 C71.6873,28.9474 69.4653,30.5294 67.1593,30.8584 L66.8013,29.9834 Z M66.6223,25.3414 L67.1503,24.5694 C68.0063,24.9644 68.8723,25.4924 69.4653,25.9724 L68.8633,26.7824 C68.2603,26.2644 67.4603,25.7554 66.6223,25.3414 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-2)"
              />
              <mask id="vb-badge-appstore-mask-4" fill="white">
                <use xlinkHref="#vb-badge-appstore2" />
              </mask>
              <g />
              <path
                d="M75.582,29.569 L79.63,29.569 L79.63,25.699 L75.582,25.699 L75.582,29.569 Z M74.649,30.436 L80.571,30.436 L80.571,24.833 L74.649,24.833 L74.649,30.436 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-4)"
              />
              <polygon
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-4)"
                points="82.393 27.921 89.049 27.921 89.049 26.961 82.393 26.961"
              />
              <path
                d="M94.5992,24.0234 L95.1642,23.7594 C95.4752,24.1934 95.6732,24.5694 95.8702,25.0404 L95.2582,25.3134 C95.0792,24.8334 94.8722,24.4374 94.5992,24.0234 Z M93.5262,24.4284 L94.0812,24.1654 C94.3642,24.5694 94.5802,25.0124 94.7502,25.4454 L94.1382,25.7184 C93.9972,25.2854 93.7812,24.8144 93.5262,24.4284 Z M91.3142,23.9194 L92.2452,23.9194 L92.2452,26.3304 C93.5742,26.8854 94.8162,27.5164 95.8422,28.1284 L95.3152,28.9574 C94.4302,28.3824 93.3672,27.8084 92.2452,27.3094 L92.2452,30.9434 L91.3142,30.9434 L91.3142,23.9194 Z"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-4)"
              />
              <path
                d="M24.7691,20.3008 C24.7441,17.5498 27.0211,16.2118 27.1251,16.1488 C25.8361,14.2678 23.8361,14.0108 23.1341,13.9908 C21.4551,13.8148 19.8271,14.9958 18.9711,14.9958 C18.0991,14.9958 16.7821,14.0088 15.3631,14.0378 C13.5371,14.0658 11.8271,15.1238 10.8901,16.7658 C8.9561,20.1138 10.3981,25.0348 12.2511,27.7408 C13.1781,29.0678 14.2611,30.5478 15.6791,30.4948 C17.0661,30.4378 17.5841,29.6108 19.2581,29.6108 C20.9171,29.6108 21.4031,30.4948 22.8491,30.4618 C24.3371,30.4378 25.2751,29.1298 26.1691,27.7918 C27.2411,26.2728 27.6711,24.7768 27.6881,24.6998 C27.6531,24.6878 24.7971,23.5988 24.7691,20.3008"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-4)"
              />
              <path
                d="M22.0371,12.2109 C22.7831,11.2779 23.2931,10.0089 23.1521,8.7199 C22.0721,8.7679 20.7221,9.4669 19.9441,10.3799 C19.2561,11.1839 18.6411,12.5029 18.8001,13.7409 C20.0131,13.8319 21.2591,13.1289 22.0371,12.2109"
                fill="#FFFFFE"
                mask="url(#vb-badge-appstore-mask-4)"
              />
            </g>
          </g>
        </g>
      </svg>
    </figure>
  );
};

export default AppStoreBadge;

```

### src/lv1/images/CloudSkeletonIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import CloudSkeletonIllust from './CloudSkeletonIllust';

export default {
  component: CloudSkeletonIllust,
};

export const CloudSkeletonIllustComponent = () => (
  <CloudSkeletonIllust {...commonKnobs()} />
);

```

### src/lv1/images/CloudSkeletonIllust.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = MarginClassProps & CommonProps;

const CloudSkeletonIllust: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const illustBaseClass = 'vb-illust';

  return (
    <figure
      {...commonProps(
        props,
        illustBaseClass,
        { cloudSkeleton: true },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <svg
        className={illustBaseClass + '__svg'}
        viewBox="0 0 128 128"
        role="presentation"
        aria-hidden="true"
      >
        <title>アップロード中</title>
        <g>
          <path
            className={illustBaseClass + '__frame'}
            d="M103.2,53.47A26.8,26.8,0,0,1,101.33,107H32a32.25,32.25,0,0,1-3.47-64.29A39.87,39.87,0,0,1,103.2,53.47Zm-2.94.57A36.87,36.87,0,0,0,31.2,44.09l-.74,1.44-1.61.17A29.25,29.25,0,0,0,32,104h69.33A23.8,23.8,0,0,0,103,56.46l-2.29-.16Z"
          />
        </g>
      </svg>
    </figure>
  );
};

export default CloudSkeletonIllust;

```

### src/lv1/images/CloudUploadIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import CloudUploadIllust from './CloudUploadIllust';

export default {
  component: CloudUploadIllust,
};

export const CloudUploadIllustComponent = () => (
  <CloudUploadIllust {...commonKnobs()} />
);

```

### src/lv1/images/CloudUploadIllust.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = MarginClassProps & CommonProps;

const CloudUploadIllust: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const illustBaseClass = 'vb-illust';

  return (
    <figure
      {...commonProps(
        props,
        illustBaseClass,
        { cloudUpload: true },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <svg
        className={illustBaseClass + '__svg'}
        viewBox="0 0 128 128"
        role="presentation"
        aria-hidden="true"
      >
        <title>アップロード</title>
        <g>
          <path
            className={illustBaseClass + '__frame'}
            d="M74.67,65.7V87.2H53.33V65.7h-16L64,38.83,90.67,65.7ZM103.2,49.79A39.87,39.87,0,0,0,28.53,39,32.25,32.25,0,0,0,32,103.33h69.33a26.81,26.81,0,0,0,1.87-53.54Z"
          />
        </g>
      </svg>
    </figure>
  );
};

export default CloudUploadIllust;

```

### src/lv1/images/CsvUploadIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import CsvUploadIllust from './CsvUploadIllust';

export default {
  component: CsvUploadIllust,
};

export const CsvUploadIllustComponent = () => (
  <CsvUploadIllust {...commonKnobs()} />
);

```

### src/lv1/images/CsvUploadIllust.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = MarginClassProps & CommonProps;

const CsvUploadIllust: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const illustBaseClass = 'vb-illust';

  return (
    <figure
      {...commonProps(
        props,
        illustBaseClass,
        { csvUpload: true },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <svg
        className={illustBaseClass + '__svg'}
        viewBox="0 0 128 128"
        role="presentation"
        aria-hidden="true"
      >
        <title>CSVをアップロード</title>
        <g>
          <path
            className={illustBaseClass + '__background'}
            d="M28.21,51h73V82h-73Zm-18-51h79l14,13.93,16,16V128h-109Z"
          />
          <path
            className={illustBaseClass + '__frame'}
            d="M28.21,51h73V82h-73Zm-18-51h79l14,13.93,16,16V128h-109Zm3,3V125h103V31.16H87.94V3Z"
          />
          <path
            className={illustBaseClass + '__border'}
            d="M28.21,107.89h73v8h-73Zm0-18h73v8h-73Zm0-55h73v8h-73Zm0-17h53v8h-53Z"
          />
          <path
            className={illustBaseClass + '__background'}
            d="M39.08,66c0-5.91,3.36-9.47,8.67-9.47,4.4,0,7.75,2.79,8,6.89H52.06a4.24,4.24,0,0,0-4.31-3.72C44.85,59.73,43,62.16,43,66s1.84,6.32,4.77,6.32a4.15,4.15,0,0,0,4.32-3.51h3.73c-.43,4.09-3.57,6.68-8.06,6.68C42.41,75.51,39.08,71.94,39.08,66Zm22.1,4c.18,1.51,1.75,2.5,3.78,2.5s3.44-1,3.44-2.33c0-1.19-.87-1.85-3.08-2.34l-2.39-.53c-3.38-.72-5-2.43-5-5.11,0-3.38,2.92-5.61,7-5.61,4.26,0,6.94,2.19,7,5.51h-3.6c-.12-1.55-1.48-2.49-3.4-2.49s-3.16.9-3.16,2.26c0,1.13.89,1.76,3,2.25l2.22.47c3.67.78,5.27,2.36,5.27,5.15,0,3.55-2.89,5.8-7.43,5.8S57.6,73.42,57.48,70Zm18.39,5.21L73.42,56.87h4.29L81.9,71.25H82l4.18-14.38h4.18L84.19,75.19Z"
          />
        </g>
      </svg>
    </figure>
  );
};

export default CsvUploadIllust;

```

### src/lv1/images/DiscoveryIllust.stories.tsx
```
typescript
import * as React from 'react';

import DiscoveryIllust from './DiscoveryIllust';
import { commonKnobs } from '../../../stories';
import { number } from '@storybook/addon-knobs';

export default {
  component: DiscoveryIllust,
};

export const DiscoveryIllustComponent = () => (
  <DiscoveryIllust
    animationDelay={number('animationDelay', 0, undefined, 'DiscoveryIllust')}
    {...commonKnobs()}
  />
);

```

### src/lv1/images/DiscoveryIllust.tsx
```
typescript
import lottie from 'lottie-web';
import * as React from 'react';

import animDiscoveryIllust from './discovery-illust.json';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * アニメーションの開始を遅らせたいときに使います。単位はミリ秒です。
   */
  animationDelay?: number;
} & CommonProps;

const DiscoveryIllust: React.FC<Props> = ({
  animationDelay = 0,
  ...otherProps
}) => {
  const lottieRef = React.useRef<HTMLDivElement>(null);
  React.useEffect(() => {
    if (lottieRef.current == null) return;

    const anim = lottie.loadAnimation({
      animationData: animDiscoveryIllust,
      autoplay: false,
      container: lottieRef.current,
      loop: true,
      renderer: 'svg',
    });

    const timer = setTimeout(() => {
      anim.play();
    }, animationDelay);

    return () => {
      clearTimeout(timer);
      anim.destroy();
    };
  }, [lottieRef, animationDelay]);

  return (
    <div
      {...commonProps(otherProps, 'vb-discoveryIllust', {})}
      ref={lottieRef}
    />
  );
};

export default DiscoveryIllust;

```

### src/lv1/images/FileUploadIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import FileUploadIllust from './FileUploadIllust';

export default {
  component: FileUploadIllust,
};

export const FileUploadIllustComponent = () => (
  <FileUploadIllust {...commonKnobs()} />
);

```

### src/lv1/images/FileUploadIllust.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = MarginClassProps & CommonProps;

const FileUploadIllust: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const illustBaseClass = 'vb-illust';

  return (
    <figure
      {...commonProps(
        props,
        illustBaseClass,
        { fileUpload: true },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <svg
        className={illustBaseClass + '__svg'}
        viewBox="0 0 128 128"
        role="presentation"
        aria-hidden="true"
      >
        <title>ファイルをアップロード</title>
        <g>
          <path
            className={illustBaseClass + '__background'}
            d="M9.5,0h79l14,13.93,16,16V128H9.5Z"
          />
          <path
            className={illustBaseClass + '__frame'}
            d="M43.5,83.12h41V89h-41Zm11.71-5.88H72.79V59.59H84.5L64,39,43.5,59.59H55.21ZM9.5,0h79l14,13.93,16,16V128H9.5Zm3,3V125h103V31.16H87.23V3Z"
          />
        </g>
      </svg>
    </figure>
  );
};

export default FileUploadIllust;

```

### src/lv1/images/FinishTaskIllust.stories.tsx
```
typescript
import * as React from 'react';

import FinishTaskIllust from './FinishTaskIllust';
import { commonKnobs } from '../../../stories';

export default {
  component: FinishTaskIllust,
};

export const FinishTaskIllustComponent = () => (
  <FinishTaskIllust {...commonKnobs()} />
);

```

### src/lv1/images/FinishTaskIllust.tsx
```
typescript
import lottie from 'lottie-web';
import * as React from 'react';

import animFinishTaskIllust from './finish-task-illust.json';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = CommonProps;

const FinishTaskIllust: React.FC<Props> = (props: Props) => {
  const lottieRef = React.useRef<HTMLDivElement>(null);
  React.useEffect(() => {
    if (lottieRef.current != null) {
      const anim = lottie.loadAnimation({
        animationData: animFinishTaskIllust,
        autoplay: true,
        container: lottieRef.current,
        loop: false,
        renderer: 'svg',
      });
      return (): void => anim.destroy();
    }
  }, [lottieRef]);

  return (
    <div {...commonProps(props, 'vb-finishTaskIllust', {})} ref={lottieRef} />
  );
};

export default FinishTaskIllust;

```

### src/lv1/images/GooglePlayBadge.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import GooglePlayBadge from './GooglePlayBadge';

export default {
  component: GooglePlayBadge,
};

export const GooglePlayBadgeComponent = () => (
  <GooglePlayBadge {...commonKnobs()} />
);

```

### src/lv1/images/GooglePlayBadge.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import useUniqueId from '../../hooks/useUniqueId';

type Props = MarginClassProps & CommonProps;

const GooglePlayBadge: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const baseBadgeClass = 'vb-storeBadge vb-storeBadge--googlePlayStore';
  const labelId = useUniqueId('vb-storeBadge--googlePlayStore');

  return (
    <figure
      aria-labelledby={labelId}
      {...commonProps(
        props,
        baseBadgeClass,
        {},
        {
          marginTop,
          marginLeft,
          marginRight,
          marginBottom,
          marginSize,
        }
      )}
    >
      <svg
        className="vb-storeBadge__svg"
        viewBox="0 0 861.33331 255.21052"
        role="img"
      >
        <title id={labelId}>GooglePlayで手に入れよう</title>
        <g transform="matrix(1.3333333,0,0,-1.3333333,-1.2393167e-6,294.272)">
          <g transform="scale(0.1)">
            <path
              d="M 6220.74,292.969 H 239.262 C 107.668,292.969 0,400.629 0,532.23 v 1435.55 c 0,131.6 107.668,239.26 239.262,239.26 H 6220.74 c 131.59,0 239.26,-107.66 239.26,-239.26 V 532.23 c 0,-131.601 -107.67,-239.261 -239.26,-239.261"
              fill="#100f0d"
            />
            <path
              d="M 6220.74,2207.04 H 239.262 C 107.668,2207.04 0,2099.36 0,1967.77 V 532.219 C 0,400.621 107.668,292.961 239.262,292.961 H 6220.74 c 131.59,0 239.26,107.66 239.26,239.258 V 1967.77 c 0,131.59 -107.67,239.27 -239.26,239.27 m 0,-38.29 c 110.83,0 200.98,-90.15 200.98,-200.98 V 532.219 c 0,-110.828 -90.15,-200.981 -200.98,-200.981 H 239.262 c -110.828,0 -200.9768,90.153 -200.9768,200.981 V 1967.77 c 0,110.83 90.1488,200.98 200.9768,200.98 H 6220.74"
              fill="#a2a2a1"
            />
            <path
              d="m 5117.09,1297.85 h 89.29 v 598.2 h -89.29 z m 804.24,382.72 -102.35,-259.36 h -3.07 l -106.23,259.36 h -96.18 l 159.3,-362.48 -90.82,-201.65 h 93.12 l 245.53,564.13 z M 5414.97,1365.8 c -29.29,0 -70.06,14.64 -70.06,50.82 0,46.17 50.77,63.83 94.65,63.83 39.24,0 57.71,-8.47 81.59,-20 -6.94,-55.41 -54.65,-94.65 -106.18,-94.65 m 10.76,327.83 c -64.65,0 -131.64,-28.47 -159.34,-91.54 l 79.28,-33.11 c 16.94,33.11 48.48,43.88 81.59,43.88 46.18,0 93.12,-27.71 93.89,-76.95 v -6.17 c -16.17,9.23 -50.82,23.06 -93.12,23.06 -85.42,0 -172.41,-46.94 -172.41,-134.65 0,-80.06 70.05,-131.59 148.53,-131.59 60.05,0 93.12,26.89 113.94,58.47 h 3.06 v -46.18 h 86.18 v 229.36 c 0,106.18 -79.24,165.42 -181.6,165.42 m -551.83,-85.89 h -127 v 205.09 h 127 c 66.76,0 104.65,-55.32 104.65,-102.55 0,-46.37 -37.89,-102.54 -104.65,-102.54 m -2.29,288.31 h -213.95 v -598.2 h 89.24 v 226.63 h 124.71 c 98.96,0 196.24,71.68 196.24,185.8 0,114.13 -97.28,185.77 -196.24,185.77 M 3704.93,1365.7 c -61.68,0 -113.31,51.63 -113.31,122.55 0,71.73 51.63,124.13 113.31,124.13 60.91,0 108.67,-52.4 108.67,-124.13 0,-70.92 -47.76,-122.55 -108.67,-122.55 m 102.5,281.37 h -3.06 c -20.05,23.88 -58.57,45.51 -107.14,45.51 -101.79,0 -195.05,-89.44 -195.05,-204.33 0,-114.08 93.26,-202.75 195.05,-202.75 48.57,0 87.09,21.58 107.14,46.27 h 3.06 v -29.28 c 0,-77.9 -41.59,-119.49 -108.67,-119.49 -54.75,0 -88.67,39.29 -102.55,72.45 l -77.86,-32.39 c 22.35,-53.98 81.74,-120.26 180.41,-120.26 104.84,0 193.51,61.68 193.51,211.99 v 365.44 h -84.84 z m 146.47,-349.22 h 89.44 v 598.24 h -89.44 z m 221.27,197.34 c -2.29,78.67 60.91,118.72 106.37,118.72 35.51,0 65.56,-17.71 75.56,-43.16 z m 277.54,67.85 c -16.99,45.51 -68.62,129.54 -174.23,129.54 -104.84,0 -191.93,-82.5 -191.93,-203.56 0,-114.08 86.33,-203.52 201.94,-203.52 93.31,0 147.23,57.04 169.63,90.2 l -69.38,46.28 c -23.17,-33.93 -54.75,-56.28 -100.25,-56.28 -45.47,0 -77.86,20.82 -98.68,61.63 l 272.14,112.6 z m -2168.07,67.04 v -86.32 h 206.58 c -6.18,-48.57 -22.35,-84.03 -46.99,-108.67 -30.1,-30.1 -77.14,-63.22 -159.59,-63.22 -127.24,0 -226.67,102.5 -226.67,229.74 0,127.19 99.43,229.69 226.67,229.69 68.62,0 118.72,-26.94 155.71,-61.63 l 60.91,60.87 c -51.67,49.33 -120.25,87.13 -216.62,87.13 -174.23,0 -320.7,-141.88 -320.7,-316.06 0,-174.28 146.47,-316.11 320.7,-316.11 94.03,0 164.95,30.87 220.45,88.67 57.04,57.04 74.8,137.19 74.8,201.99 0,20.04 -1.54,38.52 -4.65,53.92 z m 530.1,-264.38 c -61.63,0 -114.84,50.87 -114.84,123.32 0,73.26 53.21,123.36 114.84,123.36 61.68,0 114.89,-50.1 114.89,-123.36 0,-72.45 -53.21,-123.32 -114.89,-123.32 m 0,326.88 c -112.55,0 -204.28,-85.61 -204.28,-203.56 0,-117.15 91.73,-203.52 204.28,-203.52 112.55,0 204.33,86.37 204.33,203.52 0,117.95 -91.78,203.56 -204.33,203.56 m 445.69,-326.88 c -61.67,0 -114.89,50.87 -114.89,123.32 0,73.26 53.22,123.36 114.89,123.36 61.69,0 114.85,-50.1 114.85,-123.36 0,-72.45 -53.16,-123.32 -114.85,-123.32 m 0,326.88 c -112.54,0 -204.28,-85.61 -204.28,-203.56 0,-117.15 91.74,-203.52 204.28,-203.52 112.55,0 204.28,86.37 204.28,203.52 0,117.95 -91.73,203.56 -204.28,203.56"
              fill="#ffffff"
            />
            <path
              d="M 991.355,1277.56 481.879,736.828 c 0.047,-0.09 0.047,-0.238 0.098,-0.328 15.644,-58.719 69.238,-101.93 132.882,-101.93 25.457,0 49.336,6.891 69.817,18.95 l 1.625,0.96 573.459,330.899 -268.405,292.181"
              fill="#eb3131"
            />
            <path
              d="m 1506.77,1369.64 -0.48,0.33 -247.59,143.51 -278.927,-248.21 279.927,-279.84 246.25,142.07 c 43.16,23.36 72.5,68.86 72.5,121.31 0,52.16 -28.91,97.43 -71.68,120.83"
              fill="#f6b60b"
            />
            <path
              d="m 481.871,1763.11 c -3.066,-11.29 -4.691,-23.16 -4.691,-35.41 V 772.191 c 0,-12.242 1.625,-24.113 4.738,-35.363 l 526.942,526.902 -526.989,499.38"
              fill="#5778c5"
            />
            <path
              d="m 995.121,1249.95 263.659,263.62 -572.784,332.09 c -20.816,12.49 -45.125,19.67 -71.109,19.67 -63.641,0 -117.332,-43.31 -132.981,-102.07 0,-0.05 -0.047,-0.1 -0.047,-0.15 l 513.262,-513.16"
              fill="#3bad49"
            />
            <g transform="scale(10)">
              <g transform="matrix(1,0,0,-1,196.573,62.1559)">
                <path
                  d="m 3.746799,-25.852913 c 0.3330488,-0.04163 0.7909909,-0.333049 0.9158842,-0.666098 5.3704118,-0.499573 17.6515858,-1.415457 22.2310068,-1.748506 -7.618491,4.787577 -13.405214,11.906495 -13.405214,17.77648 0,7.4103356 4.412897,11.8232322 16.236129,13.5301073 l 1.373826,-2.914177 c -10.324512,-1.3321952 -14.40436,-4.7875765 -14.40436,-10.6159303 0,-5.370412 6.036509,-12.073019 12.281174,-15.819818 2.664391,-1.706875 4.704315,-2.123186 7.118918,-2.123186 0.499574,0 0.999147,0 1.540351,0.04163 l -0.04163,-3.122332 c -5.412043,0.04163 -31.0568003,1.873399 -34.1791328,1.998292 z m 29.724605,2.123186 c 1.956662,1.49872 4.371266,4.079848 5.495305,5.745092 l 1.581982,-1.248933 c -1.207302,-1.831768 -3.621906,-4.246372 -5.661829,-5.745092 z m -4.496159,3.663537 c 1.790138,1.373826 4.329635,3.954954 5.495306,5.786723 l 1.581981,-1.290564 c -1.290564,-1.790138 -3.663536,-4.246372 -5.661829,-5.745092 z"
                  fill="#ffffff"
                />
                <path
                  d="m 63.029665,-12.406068 v -7.035656 h 15.236983 v -2.66439 H 63.029665 v -6.744238 c 0.541204,-0.08326 0.74936,-0.208156 0.832622,-0.499573 4.496159,-0.666098 8.576007,-1.457089 11.573446,-2.456235 0.166524,0.04163 0.291417,0.04163 0.37468,0.04163 0.249786,0 0.37468,-0.04163 0.499573,-0.124893 l -2.414604,-2.372973 c -6.161403,2.206448 -18.276053,3.538643 -28.350779,4.204741 0.333049,0.624467 0.666098,1.706875 0.74936,2.414604 4.454528,-0.249787 9.283735,-0.666098 13.863156,-1.207302 v 6.744238 H 45.41971 v 2.66439 h 14.737409 v 7.035656 H 42.630426 v 2.7476529 h 17.526693 v 9.2837352 c 0,1.20730189 -0.291418,1.20730189 -3.830061,1.20730189 -1.457089,0 -3.372119,0 -5.370412,-0.0832622 0.457942,0.79099091 0.999146,1.99829281 1.207302,2.78928371 4.496159,0.041631 7.20218,0 8.742531,-0.4995732 1.49872,-0.4579421 2.123186,-1.2905641 2.123186,-3.4137502 V -9.6584151 H 80.63962 v -2.7476529 z"
                  fill="#ffffff"
                />
                <path
                  d="m 88.591767,-32.805307 c -1.332195,7.202181 -2.206448,14.820672 -2.206448,20.274346 0,5.5369363 0.499573,10.3661438 1.831768,14.3210983 L 91.172895,1.248933 C 91.048002,0.83262199 90.96474,0.416311 90.96474,-0.0416311 c 0,-0.5828354 0.124893,-1.248933 0.333049,-1.9566617 0.582835,-1.8733995 1.831768,-4.2463722 3.538643,-8.4511132 l -1.748506,-1.831768 c -0.582836,1.457088 -2.372973,5.8283535 -3.163964,7.8682774 -0.416311,-1.9566617 -0.541204,-5.1206252 -0.541204,-8.2429574 0,-4.496159 0.74936,-11.948126 2.206448,-18.733995 0.832622,0.04163 1.248933,-0.208156 1.373827,-0.666098 z m 11.698343,8.617638 c 4.78757,-0.124893 13.15542,-0.666098 18.31768,-1.540351 l -0.24979,-2.914177 c -5.53693,0.957516 -12.78074,1.457089 -18.15116,1.581982 z m 19.23356,19.608248 c -1.7485,0.1248933 -3.6219,0.2081555 -5.37041,0.2081555 -4.32963,0 -11.40692,0 -11.40692,-4.8292075 0,-2.372973 1.45709,-4.371266 3.53864,-6.536083 l -2.70602,-1.16567 c -2.33134,2.747652 -3.91332,5.162256 -3.91332,8.0348018 0,3.3304879 2.37297,6.1614027 7.4936,6.9107625 1.99829,0.2914177 4.78757,0.4579421 7.74338,0.4579421 1.54035,0 3.0807,-0.041631 4.57942,-0.1248933 z"
                  fill="#ffffff"
                />
                <path
                  d="m 143.46156,-32.513889 h -10.53267 v 2.830915 h 10.61593 c 0.0416,1.665244 0.20816,3.580274 0.54121,5.661829 l -1.70688,-0.416311 c -2.62276,12.11465 -7.99317,20.9820747 -17.19364,25.7696512 0.70773,0.4995732 1.79013,1.5403507 2.33134,2.1231861 8.74253,-4.8292076 14.15457,-13.1554275 17.15201,-24.2709313 1.83177,8.118065 6.32793,17.6515864 17.15202,24.2293002 0.49957,-0.7077287 1.62361,-1.8733995 2.24807,-2.3729727 C 147.24999,-8.9506864 146.29248,-25.103553 146.29248,-32.55552 h -2.83092 z"
                  fill="#ffffff"
                />
                <path
                  d="m 167.73256,-22.647318 c 3.16396,-0.04163 6.20303,-0.37468 7.66012,-0.707729 -0.0416,1.332195 -0.0833,2.456235 -0.0833,3.663537 -1.83177,4.288003 -5.70346,9.325366 -9.15884,12.572592 l 1.49871,2.6227592 c 3.28886,-3.3304879 6.11978,-7.1189182 7.57687,-10.0330952 -0.0416,2.664391 0,14.529254 -0.0416,16.9438578 h 2.91418 c -0.0416,-5.6618296 -0.0416,-13.0721658 -0.0416,-19.1086748 4.32963,-4.579421 9.57515,-7.95154 12.69749,-7.95154 2.03992,0 3.28885,1.623613 3.28885,5.245519 0,0.04163 -0.74936,11.4901831 -0.74936,13.6550002 0,4.3296344 1.16567,6.4111894 4.66269,6.4111894 1.91503,0 4.41289,-1.1656708 6.53608,-2.7060215 -0.16653,-0.6244665 -0.49957,-2.3313416 -0.58284,-3.1639636 -1.79013,1.5403507 -4.288,2.7892837 -5.53693,2.7892837 -1.74851,0 -2.03993,-1.3321952 -2.03993,-3.8300612 0,-3.3304879 0.41631,-8.534375 0.70773,-12.197912 0.0416,-0.541204 0.0833,-1.082409 0.0833,-1.623613 0,-4.829208 -1.95666,-7.57686 -5.86998,-7.57686 -3.45538,0 -8.53438,3.03907 -13.1138,7.327073 0.24979,-1.498719 0.6661,-3.954954 1.66525,-5.953247 l -1.29057,-0.499573 c 0.0833,-1.540351 0.24979,-4.121479 0.41631,-5.953247 0.70773,-0.08326 1.08241,-0.37468 1.16567,-0.832622 l -4.288,-0.333049 c -0.16652,3.78843 -0.20815,5.162256 -0.29142,7.660122 -1.37382,0.333049 -4.45452,0.624467 -7.82664,0.624467 z"
                  fill="#ffffff"
                />
                <path
                  d="m 242.50105,-2.8725459 c -4.07985,-2.9974392 -9.15884,-5.8283539 -14.52925,-7.4103361 -0.62447,-8.617637 -0.70773,-9.575153 -0.70773,-11.948125 3.16396,-0.04163 9.32536,-0.457942 14.07131,-1.207302 l -0.29142,-2.955808 c -5.03736,0.874253 -11.1155,1.332195 -13.82152,1.332195 0,-1.248933 -0.0416,-6.744238 0,-7.868278 0.70772,-0.08326 1.0824,-0.457942 1.0824,-0.874253 l -4.32963,-0.249787 c 0.0416,5.994879 0.37468,14.73741 0.74936,20.191084 0.0416,0.957515 0.24979,1.91503 0.24979,3.03907 -1.54035,-0.291418 -3.41375,-0.37468 -4.87084,-0.37468 -5.24552,0.04163 -9.65842,2.6227595 -9.57515,6.8275005 0.0416,4.2047411 4.288,6.8275004 9.65841,6.8275004 3.83006,0 7.03566,-1.3321952 7.3687,-4.7875765 0.33305,-1.0824086 0.62447,-3.2055947 0.54121,-4.8292075 4.37126,1.4154573 8.90905,4.1214788 12.48933,6.9523936 z m -17.4018,-5.2038874 c 0.0833,1.2073018 0.0833,2.9141769 0.0833,3.8716922 0,2.9558081 -2.4146,3.9965856 -5.32878,3.9965856 -3.33049,0 -6.61934,-1.3321952 -6.61934,-4.3712655 0,-2.3729727 2.78928,-4.0382166 6.78587,-4.1214788 1.58198,0 3.41375,0.1248933 5.07899,0.6244665 z"
                  fill="#ffffff"
                />
                <path
                  d="m 255.61509,-31.389849 c 5.41205,0.457942 12.15628,1.831768 16.56918,3.330488 l 0.87425,-2.914177 c -4.45452,-1.540351 -11.03224,-2.747653 -16.7357,-3.247226 z m -3.87169,15.278613 c 0.41631,-0.208155 0.83262,-0.624466 0.79099,-0.957515 5.12063,-1.790137 11.73997,-3.288857 15.07046,-3.288857 4.9541,0 6.86913,2.872546 6.86913,6.869132 0,6.3279269 -6.03651,11.3236588 -16.69407,13.8631559 0.62447,0.7077287 1.49872,1.8317684 1.8734,2.5394971 11.94812,-3.2055947 17.90137,-8.742531 17.98463,-16.319391 v -0.333049 c 0,-6.161403 -3.66353,-9.491891 -9.9082,-9.491891 -3.12233,0 -10.99061,1.706875 -17.23527,3.413751 z"
                  fill="#ffffff"
                />
              </g>
            </g>
          </g>
        </g>
      </svg>
    </figure>
  );
};

export default GooglePlayBadge;

```

### src/lv1/images/ImageUploadIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import ImageUploadIllust from './ImageUploadIllust';

export default {
  component: ImageUploadIllust,
};

export const ImageUploadIllustComponent = () => (
  <ImageUploadIllust {...commonKnobs()} />
);

```

### src/lv1/images/ImageUploadIllust.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = MarginClassProps & CommonProps;

const ImageUploadIllust: React.FC<Props> = (props: Props) => {
  const { marginTop, marginLeft, marginRight, marginBottom, marginSize } =
    props;

  const illustBaseClass = 'vb-illust';

  return (
    <figure
      {...commonProps(
        props,
        illustBaseClass,
        { imageUpload: true },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <svg
        className={illustBaseClass + '__svg'}
        viewBox="0 0 128 128"
        role="presentation"
        aria-hidden="true"
      >
        <title>画像をアップロード</title>
        <g>
          <path
            className={illustBaseClass + '__background'}
            d="M0,16v96H128V16Z"
          />
          <path
            className={illustBaseClass + '__frame'}
            d="M0,16v96H128V16Zm125,93H3V19H125ZM33,51a7,7,0,1,1,7,7A7,7,0,0,1,33,51ZM53,82H33L55,57l8.17,9.28L75,48,97,82H53Z"
          />
        </g>
      </svg>
    </figure>
  );
};

export default ImageUploadIllust;

```

### src/lv1/images/NoDataIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';
import NoDataIllust from './NoDataIllust';

export default {
  component: NoDataIllust,
};

export const NoDataIllustComponent = () => (
  <NoDataIllust
    size={
      select(
        'Size',
        {
          medium: 'medium',
          'fit-height': 'fit-height',
          'fit-width': 'fit-width',
        },
        '',
        'NoDataIllust'
      ) || undefined
    }
    {...commonKnobs()}
  />
);

```

### src/lv1/images/NoDataIllust.tsx
```
typescript
import * as React from 'react';
import { SwallowProps, SwallowContainer } from './SwallowContainer';

type Props = SwallowProps;

const NoDataIllust: React.FC<Props> = (props: Props) => {
  return (
    <SwallowContainer
      {...props}
      mediumHeightRem={10}
      renderSVG={({ className, styles }) => (
        <svg
          className={className}
          viewBox="0 0 240 191"
          fill="none"
          role="presentation"
          aria-hidden="true"
          style={styles}
        >
          <path
            d="M70 190H59L89 88H100L70 190Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M97 190H108L91 88H80L97 190Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M66 190L87.07 110.91"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M101 190L89.83 112.35"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M131 190H120L135 88H146L131 190Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M156 190H167L135 88H124L156 190Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M160 190L136.93 110.91"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M127 190L136.17 112.35"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M100 33H94.92H91L86 1H95L100 33Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M89 2L94.91 33"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path d="M61.8 22H141.48L161.1 123.07H81.43" fill="white" />
          <path
            d="M61.8 22H141.48L161.1 123.07H81.43"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M156.2 127H76.52L81.43 123.07H161.1L156.2 127Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M104.11 123H134.1L131.99 115H102L104.11 123Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M81.43 123.07L76.52 127L56.9 25.92L61.8 22L81.43 123.07Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M172 83L169.17 77.86L165.74 79.74C162.43 81.62 159.83 86.31 161.25 88.88C162.67 91.45 168.04 91.83 171.4 90.04L174.83 88.15L172 83Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="140 20"
          />
          <path
            d="M221.78 57.82C222.126 57.5209 222.36 57.1119 222.441 56.6615C222.522 56.211 222.447 55.7463 222.227 55.3449C222.007 54.9435 221.656 54.6297 221.232 54.4559C220.809 54.2821 220.339 54.2589 219.9 54.39C219.04 54.86 179.21 72.16 169.13 77.85L172 83L174.83 88.15C185 82.68 220.92 58.29 221.78 57.82Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="260 50"
          />
          <path
            d="M156.23 99.33C157.811 98.4553 158.993 97.0031 159.527 95.2772C160.062 93.5514 159.909 91.6855 159.1 90.07C158.19 88.4984 156.695 87.3499 154.943 86.8742C153.19 86.3985 151.32 86.6342 149.74 87.53C143.84 90.77 144.74 101.04 138.92 101.13C144 102.26 149.6 103.07 156.23 99.33Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="260 50"
          />
        </svg>
      )}
    />
  );
};

export default NoDataIllust;

```

### src/lv1/images/NoSearchResultsIllust.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';
import NoSearchResultsIllust from './NoSearchResultsIllust';

export default {
  component: NoSearchResultsIllust,
};

export const NoSearchResultsIllustComponent = () => (
  <NoSearchResultsIllust
    size={
      select(
        'Size',
        {
          medium: 'medium',
          'fit-height': 'fit-height',
          'fit-width': 'fit-width',
        },
        '',
        'NoSearchResultsIllust'
      ) || undefined
    }
    {...commonKnobs()}
  />
);

```

### src/lv1/images/NoSearchResultsIllust.tsx
```
typescript
import * as React from 'react';
import { SwallowProps, SwallowContainer } from './SwallowContainer';

type Props = SwallowProps;

const NoSearchResultsIllust: React.FC<Props> = (props: Props) => {
  return (
    <SwallowContainer
      {...props}
      mediumHeightRem={10}
      renderSVG={({ className, styles }) => (
        <svg
          className={className}
          viewBox="0 0 214 194"
          fill="none"
          role="presentation"
          aria-hidden="true"
          style={styles}
        >
          <path
            d="M182.86 151.25L191.52 153.25C192.42 146.94 191.42 141.76 188.95 140.72L182.34 139.17C183.33 142.08 183.54 146.39 182.86 151.25Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="180 90"
          />
          <path
            d="M130.1 134.72L146.81 138.65V138.73C148.36 139.38 149.53 141.11 150.28 143.57L182.88 151.25C183.56 146.39 183.35 142.08 182.37 139.16C181.75 137.3 180.82 136 179.61 135.49V135.43L129.26 123.57C130.203 127.207 130.487 130.983 130.1 134.72Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="254 14.83"
          />
          <path
            d="M127.37 134.07C127.565 134.129 127.756 134.202 127.94 134.29V134.21L130.08 134.72C130.467 130.983 130.183 127.207 129.24 123.57C128.49 121.11 127.32 119.38 125.77 118.73V118.65L107 114.21V114.29C106.816 114.202 106.625 114.129 106.43 114.07C101.55 112.92 95.23 122.07 92.32 134.38C89.41 146.69 91.01 157.7 95.89 158.85C96.0875 158.89 96.2885 158.91 96.49 158.91V159L112 162.65C112.231 159.865 112.669 157.1 113.31 154.38C116.17 142 122.49 132.92 127.37 134.07ZM111 138.8C109.35 145.8 106.36 151.52 103.28 154.27C101.74 155.64 100.18 156.27 98.74 155.94C94.44 154.94 92.96 145.61 95.43 135.13C97.9 124.65 103.43 116.97 107.68 117.98C109.11 118.32 110.23 119.59 110.99 121.5C112.54 125.34 112.66 131.8 111 138.8Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="254 14.83"
          />
          <path
            d="M107.69 118C103.39 117 97.91 124.66 95.44 135.15C92.97 145.64 94.44 154.95 98.75 155.96C100.19 156.3 101.75 155.66 103.29 154.29C106.37 151.54 109.36 145.81 111.01 138.82C112.66 131.83 112.54 125.36 111.01 121.52C110.24 119.59 109.12 118.32 107.69 118Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="254 14.83"
          />
          <path
            d="M124.7 81.91C124.657 78.0659 125.777 74.2985 127.912 71.1015C130.047 67.9045 133.098 65.427 136.665 63.9937C140.232 62.5603 144.149 62.238 147.903 63.0688C151.656 63.8997 155.071 65.8451 157.7 68.65C158.27 66.91 158.6 65.09 159.04 63.3V58.54C158.935 58.2355 158.848 57.9249 158.78 57.61C157.09 47.26 151.21 40.41 141.43 36.85C140.17 36.39 138.43 36.48 137.65 35.65C136.87 34.82 136.81 33.06 136.37 31.74C134.414 25.8559 130.346 20.9056 124.953 17.8453C119.56 14.785 113.225 13.8318 107.17 15.17C104.457 15.9571 101.787 16.885 99.17 17.95C95.3247 11.6536 89.5188 6.79344 82.644 4.11604C75.7691 1.43864 68.2055 1.09199 61.1146 3.12932C54.0236 5.16665 47.7975 9.47532 43.3924 15.3936C38.9873 21.312 36.6466 28.5127 36.73 35.89L34.73 36.39C29.6891 37.5931 25.1449 40.3289 21.7228 44.2208C18.3007 48.1128 16.1688 52.9696 15.6206 58.123C15.0724 63.2765 16.1347 68.4731 18.6614 72.9979C21.1881 77.5227 25.055 81.1533 29.73 83.39C31.6077 81.1802 34.0752 79.5499 36.8444 78.6894C39.6137 77.8289 42.5705 77.7736 45.37 78.53C47.3648 79.0853 49.2293 80.0316 50.8551 81.3141C52.4809 82.5965 53.8354 84.1893 54.84 86H116.84C118.68 84.1475 120.989 82.8305 123.52 82.19L124.7 81.91Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="260 50"
          />
          <path
            d="M193.85 94.22C193.506 91.5214 192.395 88.9782 190.649 86.892C188.903 84.8058 186.596 83.2642 184 82.45C183.28 82.19 182.31 82.24 181.85 81.77C181.39 81.3 181.38 80.31 181.13 79.56C180.023 76.2241 177.718 73.4174 174.66 71.6829C171.603 69.9484 168.012 69.4093 164.58 70.17C163.037 70.6125 161.518 71.1366 160.03 71.74C159.335 70.6354 158.534 69.6006 157.64 68.65C155.011 65.8451 151.596 63.8997 147.843 63.0688C144.089 62.2379 140.172 62.5603 136.605 63.9937C133.038 65.427 129.987 67.9045 127.852 71.1015C125.717 74.2985 124.597 78.0659 124.64 81.91L123.51 82.19C120.979 82.8305 118.67 84.1475 116.83 86C114.437 88.3609 112.956 91.4923 112.65 94.84C112.509 96.8135 112.775 98.795 113.431 100.662C114.088 102.528 115.121 104.24 116.467 105.69C117.812 107.141 119.441 108.299 121.253 109.094C123.065 109.889 125.021 110.303 127 110.31H179.64C182.623 110.272 185.523 109.318 187.947 107.578C190.37 105.838 192.2 103.395 193.19 100.58C193.53 99.58 193.72 98.49 193.98 97.44V94.74C193.926 94.5694 193.883 94.3958 193.85 94.22V94.22Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="180 90"
          />
          <path
            d="M66.36 103.87C66.1262 101.483 65.1627 99.2265 63.6006 97.4067C62.0385 95.587 59.9538 94.2927 57.63 93.7L56.72 93.47C56.7543 90.8588 56.1062 88.2839 54.84 86C53.8353 84.1865 52.4797 82.5911 50.8521 81.3068C49.2245 80.0226 47.3575 79.0753 45.36 78.52C42.5605 77.7636 39.6037 77.8189 36.8344 78.6794C34.0652 79.5399 31.5977 81.1702 29.72 83.38C29.1984 83.9829 28.7237 84.6247 28.3 85.3C27.1048 84.7999 25.8829 84.3659 24.64 84C21.8804 83.3881 18.992 83.8214 16.5334 85.216C14.0749 86.6107 12.2209 88.8675 11.33 91.55C11.13 92.15 11.14 92.93 10.75 93.33C10.36 93.73 9.6 93.67 9.03 93.88C6.94507 94.5356 5.09181 95.7751 3.68986 97.4518C2.28791 99.1285 1.39605 101.172 1.12 103.34C1.08929 103.482 1.0492 103.623 1 103.76V106C1.21 106.85 1.36 107.71 1.64 108.53C2.43504 110.792 3.90603 112.756 5.85384 114.154C7.80165 115.553 10.1322 116.32 12.53 116.35H54.86C56.4519 116.341 58.0248 116.004 59.481 115.361C60.9371 114.718 62.2452 113.782 63.324 112.611C64.4027 111.44 65.229 110.06 65.7513 108.556C66.2736 107.052 66.4808 105.457 66.36 103.87V103.87Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="180 90"
          />
          <path
            d="M210 160.76L203.39 159.21C204.65 162.96 204.65 169.02 203.11 175.58C202.119 180.257 200.22 184.694 197.52 188.64L203.13 189.96C206.25 190.16 210.13 184.41 211.93 176.67C213.73 168.93 212.84 162 210 160.76Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="180 90"
          />
          <path
            d="M203.35 159.16C202.73 157.3 201.8 156 200.59 155.49V155.43L150.24 143.57C151.63 148.14 151.58 155.27 149.77 162.98C147.96 170.69 144.82 177.09 141.53 180.56L191.88 192.42V192.36C193.66 192.47 195.62 191.06 197.45 188.59C200.15 184.644 202.049 180.207 203.04 175.53C204.61 169 204.61 162.91 203.35 159.16Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="254 14.83"
          />
          <path
            d="M150.26 143.57C149.51 141.11 148.34 139.38 146.79 138.73V138.65L128 134.21V134.29C127.816 134.202 127.625 134.129 127.43 134.07C122.55 132.92 116.23 142.07 113.32 154.38C110.41 166.69 112.01 177.7 116.89 178.85C117.088 178.89 117.289 178.91 117.49 178.91V179L136.34 183.44V183.36C138.01 183.47 139.83 182.44 141.6 180.57C144.89 177.1 148.02 170.7 149.84 162.99C151.66 155.28 151.65 148.14 150.26 143.57ZM119.75 175.94C115.45 174.94 113.97 165.61 116.44 155.13C118.91 144.65 124.39 137 128.69 138C130.12 138.34 131.24 139.61 132 141.52C133.54 145.36 133.66 151.82 132 158.82C130.34 165.82 127.36 171.54 124.28 174.29C122.75 175.64 121.19 176.28 119.75 175.94Z"
            fill="#D7D2D2"
            fillOpacity="0.2"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="180 90"
          />
          <path
            d="M132 141.5C131.24 139.59 130.12 138.32 128.69 137.98C124.39 136.98 118.91 144.64 116.44 155.13C113.97 165.62 115.44 174.93 119.75 175.94C121.19 176.28 122.75 175.64 124.29 174.27C127.37 171.52 130.36 165.79 132.01 158.8C133.66 151.81 133.54 145.34 132 141.5Z"
            fill="white"
            stroke="#D7D2D2"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="254 14.83"
          />
        </svg>
      )}
    />
  );
};

export default NoSearchResultsIllust;

```

### src/lv1/images/NotFoundSwallow.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { Vibes2021BackgroundColor } from '../../constants';
import NotFoundSwallow from './NotFoundSwallow';

export default {
  component: NotFoundSwallow,
};

export const NotFoundSwallowComponent = () => (
  <NotFoundSwallow {...commonKnobs()} />
);

export const FitWidth = () => (
  <>
    <div
      style={{
        width: '10rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <NotFoundSwallow size="fit-width" />
    </div>
    <div
      style={{
        width: '20rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <NotFoundSwallow size="fit-width" />
    </div>
    <div
      style={{
        width: '30rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <NotFoundSwallow size="fit-width" />
    </div>
  </>
);

export const FitHeight = () => (
  <>
    <div
      style={{
        height: '10rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <NotFoundSwallow size="fit-height" />
    </div>
    <div
      style={{
        height: '20rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <NotFoundSwallow size="fit-height" />
    </div>
    <div
      style={{
        height: '30rem',
        background: Vibes2021BackgroundColor,
        marginBottom: '1rem',
      }}
    >
      <NotFoundSwallow size="fit-height" />
    </div>
  </>
);

```

### src/lv1/images/NotFoundSwallow.tsx
```
typescript
import * as React from 'react';
import { SwallowProps, SwallowContainer } from './SwallowContainer';

type Props = SwallowProps;

const NotFoundSwallow: React.FC<Props> = (props: Props) => {
  return (
    <SwallowContainer
      {...props}
      mediumHeightRem={12}
      renderSVG={({ className, styles }) => (
        <svg
          className={className}
          viewBox="0 0 196 192"
          role="presentation"
          aria-hidden="true"
          style={styles}
        >
          <path
            d="M41.7359,70.342869 L56.8569,98.976869 C57.7609,100.689869 57.1059,102.810869 55.3929,103.715869 C53.6809,104.620869 51.5589,103.965869 50.6539,102.252869 L35.5359,73.621869"
            fill="#B4DC7D"
          ></path>
          <path
            d="M53.7584,105.122569 C52.0824,105.122569 50.5534,104.201569 49.7704,102.720569 L34.6604,74.104569 C34.4024,73.616569 34.5894,73.011569 35.0774,72.753569 C35.5664,72.494569 36.1714,72.682569 36.4284,73.170569 L51.5384,101.785569 C52.1664,102.972569 53.7264,103.466569 54.9254,102.831569 C55.7514,102.396569 56.2624,101.546569 56.2624,100.612569 C56.2624,100.202569 56.1654,99.809569 55.9724,99.443569 L40.8514,70.809569 C40.5934,70.321569 40.7804,69.716569 41.2694,69.458569 C41.7584,69.200569 42.3624,69.387569 42.6204,69.875569 L57.7404,98.510569 C58.0824,99.156569 58.2624,99.884569 58.2624,100.612569 C58.2624,102.291569 57.3414,103.818569 55.8594,104.600569 C55.2134,104.941569 54.4864,105.122569 53.7584,105.122569"
            fill="#2864F0"
          ></path>
          <path
            d="M34.3028,24.887269 C47.8738,29.074269 55.4818,43.470269 51.2948,57.041269 C47.1088,70.612269 32.7128,78.220269 19.1418,74.033269 C5.5708,69.846269 -2.0372,55.451269 2.1488,41.880269 C6.3358,28.308269 20.7318,20.700269 34.3028,24.887269"
            fill="#B4DC7D"
          ></path>
          <path
            d="M26.731,76.183169 C24.067,76.183169 21.415,75.781169 18.847,74.989169 C7.574,71.511169 0,61.255169 0,49.469169 C0,46.806169 0.401,44.153169 1.193,41.585169 C4.379,31.259169 13.387,23.910169 24.143,22.863169 C24.692,22.808169 25.182,23.212169 25.235,23.762169 C25.289,24.311169 24.886,24.800169 24.336,24.853169 C14.386,25.823169 6.052,32.621169 3.105,42.175169 C2.371,44.552169 2,47.006169 2,49.469169 C2,60.372169 9.007,69.860169 19.437,73.078169 C21.814,73.811169 24.268,74.183169 26.731,74.183169 C37.634,74.183169 47.122,67.176169 50.339,56.746169 C51.073,54.370169 51.445,51.915169 51.445,49.452169 C51.445,38.548169 44.438,29.060169 34.008,25.843169 C33.482,25.681169 33.144,25.111169 33.304,24.584169 C33.463,24.057169 33.976,23.747169 34.505,23.903169 C34.515,23.906169 34.609,23.935169 34.619,23.938169 C45.871,27.409169 53.445,37.665169 53.445,49.452169 C53.445,52.116169 53.043,54.768169 52.251,57.336169 C48.773,68.609169 38.517,76.183169 26.731,76.183169"
            fill="#2864F0"
          ></path>
          <path
            d="M32.2354,31.588969 C42.1054,34.633969 47.6384,45.103969 44.5934,54.973969 C41.5484,64.842969 31.0794,70.376969 21.2094,67.331969 C11.3394,64.286969 5.8064,53.817969 8.8504,43.946969 C11.8954,34.076969 22.3654,28.544969 32.2354,31.588969"
            fill="#EBF3FF"
          ></path>
          <path
            d="M26.733,31.756369 C19.169,31.756369 12.15,36.646369 9.806,44.242369 C8.413,48.760369 8.862,53.551369 11.071,57.732369 C13.28,61.912369 16.985,64.982369 21.504,66.376369 C26.022,67.770369 30.812,67.321369 34.994,65.111369 C39.174,62.902369 42.244,59.197369 43.638,54.678369 C46.515,45.351369 41.268,35.422369 31.941,32.544369 C30.21,32.010369 28.457,31.756369 26.733,31.756369 M26.747,69.172369 C24.795,69.172369 22.833,68.879369 20.914,68.287369 C15.885,66.735369 11.762,63.319369 9.303,58.666369 C6.844,54.013369 6.344,48.681369 7.895,43.652369 C11.098,33.272369 22.148,27.430369 32.53,30.633369 C42.911,33.836369 48.752,44.887369 45.549,55.268369 C43.998,60.297369 40.581,64.421369 35.928,66.880369 C33.05,68.400369 29.912,69.172369 26.747,69.172369"
            fill="#2864F0"
          ></path>
          <path
            d="M184.421,0.999568959 C176.511,37.678569 152.412,67.217569 120.728,83.379569 C133.904,86.776569 147.72,88.583569 161.958,88.583569 C173.212,88.583569 184.203,87.454569 194.823,85.303569 L194.359,86.325569 C193.72,87.732569 192.557,88.845569 191.111,89.393569 C183.685,92.203569 176.002,94.492569 168.107,96.215569 C166.407,96.586569 164.811,97.361569 163.551,98.562569 C161.878,100.155569 160.117,101.657569 158.278,103.062569 L188.993,106.636569 C191.082,106.879569 192.811,108.372569 193.356,110.403569 L148.39,110.403569 C146.811,110.403569 145.262,110.753569 143.8,111.350569 C136.911,114.158569 129.417,115.789569 121.567,115.991569 C138.895,136.052569 148.44,162.831569 146.098,190.999569 L74.94,98.528569 C72.424,95.260569 68.837,92.981569 64.809,92.094569 L46.07,87.963569 L55.479,85.678569 L55.474,85.674569 C60.66,79.477569 68.453,75.535569 77.166,75.535569 C78.525,75.535569 79.861,75.630569 81.169,75.816569 C84.345,76.266569 87.568,75.497569 90.11,73.541569 L184.421,0.999568959 Z"
            fill="#FFFFFF"
          ></path>
          <path
            d="M184.421,0.999568959 C176.511,37.678569 152.412,67.217569 120.728,83.379569 C133.904,86.776569 147.72,88.583569 161.958,88.583569 C173.212,88.583569 184.203,87.454569 194.823,85.303569 L194.359,86.325569 C193.72,87.732569 192.557,88.845569 191.111,89.393569 C183.685,92.203569 176.002,94.492569 168.107,96.215569 C166.407,96.586569 164.811,97.361569 163.551,98.562569 C161.878,100.155569 160.117,101.657569 158.278,103.062569 L188.993,106.636569 C191.082,106.879569 192.811,108.372569 193.356,110.403569 L148.39,110.403569 C146.811,110.403569 145.262,110.753569 143.8,111.350569 C136.911,114.158569 129.417,115.789569 121.567,115.991569 C138.895,136.052569 148.44,162.831569 146.098,190.999569 L74.94,98.528569 C72.424,95.260569 68.837,92.981569 64.809,92.094569 L46.07,87.963569 L55.479,85.678569 L55.474,85.674569 C60.66,79.477569 68.453,75.535569 77.166,75.535569 C78.525,75.535569 79.861,75.630569 81.169,75.816569 C84.345,76.266569 87.568,75.497569 90.11,73.541569 L184.421,0.999568959 Z"
            fill="#AAC8FF"
          ></path>
          <path
            d="M146.0977,191.999569 C145.7927,191.999569 145.4977,191.859569 145.3057,191.609569 L74.1467,99.138569 C71.7787,96.061569 68.3857,93.906569 64.5937,93.070569 L45.8547,88.940569 C45.3997,88.840569 45.0747,88.439569 45.0696417,87.974569 C45.0647,87.509569 45.3817,87.102569 45.8337,86.992569 L54.9147,84.786569 C60.4927,78.267569 68.5827,74.535569 77.1657,74.535569 C78.5537,74.535569 79.9477,74.633569 81.3097,74.826569 C81.8447,74.902569 82.3897,74.940569 82.9317,74.940569 C85.3647,74.940569 87.6357,74.183569 89.5007,72.748569 L124.2557,46.015569 C124.6927,45.678569 125.3217,45.760569 125.6587,46.198569 C125.9947,46.636569 125.9127,47.264569 125.4757,47.600569 L90.7207,74.333569 C88.5017,76.039569 85.8087,76.940569 82.9317,76.940569 C82.2967,76.940569 81.6557,76.895569 81.0287,76.806569 C79.7597,76.626569 78.4597,76.535569 77.1657,76.535569 C69.0987,76.535569 61.4987,80.074569 56.2977,86.248569 C56.1607,86.445569 55.9557,86.591569 55.7147,86.650569 L50.5017,87.916569 L65.0247,91.117569 C69.2747,92.054569 73.0767,94.470569 75.7317,97.918569 L145.2847,188.302569 C145.3927,186.393569 145.4477,184.475569 145.4477,182.575569 C145.4477,158.453569 136.6987,135.039569 120.8107,116.645569 C120.5577,116.353569 120.4967,115.940569 120.6527,115.587569 C120.8087,115.233569 121.1557,115.002569 121.5417,114.991569 C129.1037,114.797569 136.4657,113.260569 143.4227,110.424569 C145.0807,109.747569 146.7527,109.403569 148.3897,109.403569 L191.8147,109.403569 C191.1547,108.430569 190.0977,107.771569 188.8767,107.629569 L158.1617,104.055569 C157.7577,104.008569 157.4217,103.720569 157.3137,103.326569 C157.2057,102.934569 157.3477,102.514569 157.6707,102.267569 C159.4757,100.889569 161.2227,99.398569 162.8617,97.838569 C164.1987,96.563569 165.9377,95.665569 167.8927,95.238569 C175.6457,93.546569 183.3377,91.265569 190.7577,88.457569 C191.6647,88.114569 192.4557,87.484569 193.0147,86.677569 C182.8347,88.606569 172.3977,89.583569 161.9577,89.583569 C147.9097,89.583569 133.9537,87.822569 120.4777,84.348569 C120.0757,84.244569 119.7787,83.902569 119.7337,83.489569 C119.6877,83.076569 119.9027,82.677569 120.2727,82.489569 C151.9687,66.321569 174.6417,37.629569 182.8297,3.48556896 L151.0407,27.937569 C150.6027,28.274569 149.9747,28.192569 149.6387,27.754569 C149.3017,27.316569 149.3837,26.688569 149.8207,26.352569 L183.8107,0.207568959 C184.1447,-0.0484310406 184.6007,-0.0694310406 184.9547,0.154568959 C185.3097,0.378568959 185.4867,0.800568959 185.3987,1.21056896 C177.8367,36.277569 155.3507,65.962569 123.5227,83.045569 C136.0447,86.058569 148.9607,87.583569 161.9577,87.583569 C172.9517,87.583569 183.9427,86.486569 194.6237,84.323569 C194.9937,84.247569 195.3707,84.387569 195.6047,84.681569 C195.8397,84.975569 195.8887,85.374569 195.7337,85.717569 L195.2697,86.738569 C194.5197,88.388569 193.1337,89.696569 191.4657,90.328569 C183.9547,93.170569 176.1677,95.479569 168.3197,97.191569 C166.7227,97.540569 165.3127,98.265569 164.2407,99.285569 C163.1317,100.342569 161.9757,101.366569 160.7867,102.347569 L189.1087,105.643569 C191.6197,105.935569 193.6657,107.702569 194.3217,110.145569 C194.4017,110.444569 194.3387,110.766569 194.1487,111.012569 C193.9597,111.259569 193.6667,111.403569 193.3557,111.403569 L148.3897,111.403569 C147.0127,111.403569 145.5957,111.696569 144.1777,112.275569 C137.6287,114.945569 130.7337,116.500569 123.6517,116.905569 C139.0127,135.416569 147.4477,158.653569 147.4477,182.575569 C147.4477,185.398569 147.3287,188.261569 147.0947,191.082569 C147.0597,191.493569 146.7767,191.842569 146.3807,191.958569 C146.2867,191.985569 146.1917,191.999569 146.0977,191.999569"
            fill="#2864F0"
          ></path>
          <path
            d="M77.9493,94.667569 C88.5873,105.602569 103.4603,112.394569 119.9203,112.394569 C134.7163,112.394569 148.2293,106.905569 158.5373,97.855569 C138.9393,98.049569 117.5303,93.593569 104.6373,92.906569 C95.5123,92.307569 86.5563,92.938569 77.9493,94.667569"
            fill="#FFFFFF"
          ></path>
          <path
            d="M77.9493,94.667569 C88.5873,105.602569 103.4603,112.394569 119.9203,112.394569 C134.7163,112.394569 148.2293,106.905569 158.5373,97.855569 C138.9393,98.049569 117.5303,93.593569 104.6373,92.906569 C95.5123,92.307569 86.5563,92.938569 77.9493,94.667569"
            fill="#FFFFFF"
          ></path>
          <path
            d="M119.9205,113.394069 C103.7035,113.394069 88.5435,106.991069 77.2325,95.365069 C76.9775,95.102069 76.8855,94.721069 76.9945,94.372069 C77.1025,94.022069 77.3935,93.759069 77.7525,93.687069 C85.3525,92.160069 93.1405,91.492069 100.9625,91.730069 C101.5155,91.747069 101.9495,92.207069 101.9325,92.760069 C101.9165,93.313069 101.4605,93.720069 100.9035,93.730069 C93.8665,93.518069 86.8645,94.049069 79.9955,95.294069 C90.7715,105.692069 104.8745,111.394069 119.9205,111.394069 C132.9895,111.394069 145.6225,106.958069 155.7865,98.853069 C144.3255,98.727069 132.5425,97.187069 122.0945,95.822069 C118.5685,95.362069 115.2385,94.926069 112.1665,94.580069 C111.6175,94.517069 111.2235,94.022069 111.2855,93.473069 C111.3465,92.924069 111.8415,92.532069 112.3915,92.591069 C115.4815,92.941069 118.8185,93.377069 122.3535,93.839069 C133.5785,95.306069 146.3485,96.969069 158.5275,96.855069 C158.9835,96.884069 159.3225,97.108069 159.4715,97.498069 C159.6205,97.888069 159.5115,98.331069 159.1965,98.606069 C148.3375,108.142069 134.3885,113.394069 119.9205,113.394069"
            fill="#2864F0"
          ></path>
          <path
            d="M74.9327,82.625069 C72.7567,82.625069 70.9927,84.389069 70.9927,86.565069 C70.9927,88.741069 72.7567,90.505069 74.9327,90.505069 C77.1087,90.505069 78.8727,88.741069 78.8727,86.565069 C78.8727,84.389069 77.1087,82.625069 74.9327,82.625069"
            fill="#FFFFFF"
          ></path>
          <path
            d="M74.9327,83.625069 C73.3117,83.625069 71.9927,84.944069 71.9927,86.565069 C71.9927,88.186069 73.3117,89.505069 74.9327,89.505069 C76.5537,89.505069 77.8727,88.186069 77.8727,86.565069 C77.8727,84.944069 76.5537,83.625069 74.9327,83.625069 M74.9327,91.505069 C72.2087,91.505069 69.9927,89.289069 69.9927,86.565069 C69.9927,83.841069 72.2087,81.625069 74.9327,81.625069 C77.6567,81.625069 79.8727,83.841069 79.8727,86.565069 C79.8727,89.289069 77.6567,91.505069 74.9327,91.505069"
            fill="#2864F0"
          ></path>
        </svg>
      )}
    />
  );
};

export default NotFoundSwallow;

```

### src/lv1/images/SwallowContainer.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

export type SwallowProps = {
  /**
   * ロゴの大きさを指定します。`fit-width` と `fit-height` でそれぞれ親要素に対して100%となるよう表示します。
   */
  size?: 'medium' | 'fit-width' | 'fit-height';
} & CommonProps &
  MarginClassProps;

type Props = SwallowProps & {
  /**
   * サイズ無指定で配置した場合の高さを指定します。
   */
  mediumHeightRem: number;
  renderSVG: (props: {
    className: string;
    styles: React.CSSProperties;
  }) => React.ReactNode;
};

export const SwallowContainer: React.FC<Props> = (props: Props) => {
  const {
    size,
    mediumHeightRem,
    renderSVG,
    marginTop,
    marginRight,
    marginLeft,
    marginBottom,
    marginSize,
  } = props;

  const className = 'vb-swallow';

  const width = size === 'fit-width' ? '100%' : 'auto';
  const height =
    size === 'fit-height'
      ? '100%'
      : size === 'fit-width'
      ? 'auto'
      : `${mediumHeightRem}rem`;

  const styles: React.CSSProperties = {
    width: size === 'fit-width' ? '100%' : 'auto',
    height: size === 'fit-width' ? 'auto' : '100%',
  };

  return (
    <div
      {...commonProps(
        props,
        className,
        {},
        { marginTop, marginRight, marginLeft, marginBottom, marginSize }
      )}
      style={{
        width,
        height,
      }}
    >
      {renderSVG({ className: `${className}__svg`, styles })}
    </div>
  );
};

```

### src/lv1/interactiveParts/SegmentControlButton.stories.tsx
```
typescript
import * as React from 'react';
import { MdAdd, MdRemove } from 'react-icons/md';

import { action } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import SegmentControlButton from './SegmentControlButton';
import MarginBase from '../bases/MarginBase';

export default {
  component: SegmentControlButton,
};

export const SegmentControlButtonComponent = () => (
  <div>
    <SegmentControlButton
      current={boolean('Current', false, 'SegmentControlButton')}
      small={boolean('Small', false, 'SegmentControlButton')}
      large={boolean('Large', false, 'SegmentControlButton')}
      onClick={action('click')}
      {...commonKnobs()}
    >
      {text('Children', '通常は単体で置きません', 'SegmentControlButton')}
    </SegmentControlButton>
  </div>
);

export const Default = () => {
  const [index, setIndex] = React.useState(1);

  return (
    <>
      <MarginBase mb={1}>
        <SegmentControlButton current={index === 0} onClick={() => setIndex(0)}>
          申請中
        </SegmentControlButton>
        <SegmentControlButton current={index === 1} onClick={() => setIndex(1)}>
          差し戻し
        </SegmentControlButton>
        <SegmentControlButton current={index === 2} onClick={() => setIndex(2)}>
          承認済み
        </SegmentControlButton>
      </MarginBase>
    </>
  );
};

export const Small = () => {
  const [index, setIndex] = React.useState(1);

  return (
    <div>
      <SegmentControlButton
        current={index === 0}
        small
        onClick={() => setIndex(0)}
      >
        申請中
      </SegmentControlButton>
      <SegmentControlButton
        current={index === 1}
        small
        onClick={() => setIndex(1)}
      >
        差し戻し
      </SegmentControlButton>
      <SegmentControlButton
        current={index === 2}
        small
        onClick={() => setIndex(2)}
      >
        承認済み
      </SegmentControlButton>
    </div>
  );
};

export const Large = () => {
  const [index, setIndex] = React.useState(1);

  return (
    <div>
      <SegmentControlButton
        current={index === 0}
        large
        onClick={() => setIndex(0)}
      >
        申請中
      </SegmentControlButton>
      <SegmentControlButton
        current={index === 1}
        large
        onClick={() => setIndex(1)}
      >
        差し戻し
      </SegmentControlButton>
      <SegmentControlButton
        current={index === 2}
        large
        onClick={() => setIndex(2)}
      >
        承認済み
      </SegmentControlButton>
    </div>
  );
};

export const WithIcon = () => {
  const [index, setIndex] = React.useState(0);
  const [indexSmall, setIndexSmall] = React.useState(0);
  const [indexLarge, setIndexLarge] = React.useState(0);

  return (
    <>
      <MarginBase mb={1}>
        <SegmentControlButton
          current={index === 0}
          onClick={() => setIndex(0)}
          IconComponent={MdAdd}
        >
          ボタンテキスト
        </SegmentControlButton>
        <SegmentControlButton
          current={index === 1}
          onClick={() => setIndex(1)}
          IconComponent={MdRemove}
        >
          ボタンテキスト
        </SegmentControlButton>
      </MarginBase>
      <MarginBase mb={1}>
        <SegmentControlButton
          current={indexSmall === 0}
          small
          onClick={() => setIndexSmall(0)}
          IconComponent={MdAdd}
        >
          ボタンテキスト
        </SegmentControlButton>
        <SegmentControlButton
          current={indexSmall === 1}
          small
          onClick={() => setIndexSmall(1)}
          IconComponent={MdRemove}
        >
          ボタンテキスト
        </SegmentControlButton>
      </MarginBase>
      <MarginBase mb={1}>
        <SegmentControlButton
          current={indexLarge === 0}
          large
          onClick={() => setIndexLarge(0)}
          IconComponent={MdAdd}
        >
          ボタンテキスト
        </SegmentControlButton>
        <SegmentControlButton
          current={indexLarge === 1}
          large
          onClick={() => setIndexLarge(1)}
          IconComponent={MdRemove}
        >
          ボタンテキスト
        </SegmentControlButton>
      </MarginBase>
    </>
  );
};

export const WithHref = () => {
  return (
    <div>
      <SegmentControlButton
        current={false}
        large
        href="https://www.freee.co.jp/"
        target="_blank"
      >
        ページ1
      </SegmentControlButton>
      <SegmentControlButton
        current={true}
        large
        href="https://www.freee.co.jp/"
        target="_blank"
      >
        ページ2
      </SegmentControlButton>
      <SegmentControlButton
        current={false}
        large
        href="https://www.freee.co.jp/"
        target="_blank"
      >
        ページ3
      </SegmentControlButton>
      <SegmentControlButton
        current={false}
        large
        href="https://www.freee.co.jp/"
        target="_blank"
      >
        ページ4
      </SegmentControlButton>
    </div>
  );
};

```

### src/lv1/interactiveParts/SegmentControlButton.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * 選択状態にします
   */
  current?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * サイズを大きくします
   */
  large?: boolean;
  /**
   * 押下時に遷移させるURLを指定します。指定した場合は `<a>` 要素、空文字列もしくはundefinedの場合は `<button>` 要素となります
   */
  href?: string;
  /**
   * target を設定します
   */
  target?: string;
  /**
   * 未指定の場合、`target="_blank"` であれば `noopener noreferrer`となります
   *
   * （空文字列を渡した場合には `""` が指定されます）
   */
  rel?: string;
  /**
   * click ハンドラを設定します
   */
  onClick?: React.MouseEventHandler;
  /**
   * アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  IconComponent?: React.ElementType;
} & CommonProps;

const SegmentControlButton: React.FC<Props> = (props: Props) => {
  const {
    children,
    current,
    small,
    large,
    href,
    target,
    rel,
    onClick,
    IconComponent,
  } = props;

  const buttonBaseClass = 'vb-segmentControlButton';

  const classModifier = {
    current,
    small,
    large,
    icon: !!IconComponent,
  };

  const content = (
    <>
      {IconComponent && (
        <IconComponent
          className={`${buttonBaseClass}__icon`}
          focusable={false}
        />
      )}
      {children}
    </>
  );

  if (href) {
    return (
      <a
        href={href}
        target={target}
        rel={
          rel || rel === ''
            ? rel
            : target === '_blank'
            ? 'noopener noreferrer'
            : undefined
        }
        onClick={onClick}
        {...commonProps(props, buttonBaseClass, classModifier)} // SegmentControlButton 単体では margin は取らない
      >
        {content}
      </a>
    );
  }

  return (
    <button
      type="button"
      onClick={onClick}
      aria-pressed={current}
      {...commonProps(props, buttonBaseClass, classModifier)} // SegmentControlButton 単体では margin は取らない
    >
      {content}
    </button>
  );
};

export default SegmentControlButton;

```

### src/lv1/interactiveParts/StepBlock.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import StepBlock from './StepBlock';

export default {
  title: 'deprecated/interactiveParts/StepBlock',
  component: StepBlock,
};

export const StepBlockComponent = () => (
  <ul style={{ display: 'inline-block', padding: 0, margin: 0 }}>
    <StepBlock
      number={text('Number', '1', 'StepBlock')}
      current={boolean('Current', false, 'StepBlock')}
      done={boolean('Done', false, 'StepBlock')}
      disabled={boolean('Disabled', false, 'StepBlock')}
      {...commonKnobs()}
    >
      {text('Children', 'stepper', 'StepBlock')}
    </StepBlock>
  </ul>
);

export const Default = () => {
  return (
    <ul style={{ display: 'inline-block', padding: 0, margin: 0 }}>
      <StepBlock number="1">stepper</StepBlock>
      <StepBlock number="1" current>
        current
      </StepBlock>
      <StepBlock number="1" done>
        done
      </StepBlock>
      <StepBlock number="1" disabled>
        disabled
      </StepBlock>
    </ul>
  );
};

export const Small = () => {
  return (
    <ul style={{ display: 'inline-block', padding: 0, margin: 0 }}>
      <StepBlock small number="1">
        stepper
      </StepBlock>
      <StepBlock small number="1" current>
        current
      </StepBlock>
      <StepBlock small number="1" done>
        done
      </StepBlock>
      <StepBlock small number="1" disabled>
        disabled
      </StepBlock>
    </ul>
  );
};

```

### src/lv1/interactiveParts/StepBlock.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { StepNumber } from './StepNumber';

type Props = {
  /**
   * 内部の文字列を指定します
   */
  number?: string;
  children?: React.ReactNode;
  /**
   * 見た目を current にします
   */
  current?: boolean;
  /**
   * 見た目を done にします
   */
  done?: boolean;
  /**
   * 見た目を disabled にします
   */
  disabled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
} & MarginClassProps &
  CommonProps;

/**
 * 古いコンポーネントなので使わないでください。丸囲み数字が必要な場合はStepNumberを、リストにしたい場合はStepperを使用してください
 *
 * @deprecated
 */
const StepBlock: React.FC<Props> = (props: Props) => {
  const {
    number,
    children,
    current,
    done,
    disabled,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const stepperBaseClass = 'vb-stepBlock';
  return (
    <li
      {...commonProps(
        props,
        stepperBaseClass,
        {
          current,
          done: !current && done,
          disabled: !current && !done && disabled,
          small,
        },
        { marginTop, marginLeft, marginRight, marginBottom, marginSize }
      )}
      aria-current={current ? 'step' : 'false'}
    >
      <StepNumber
        number={number || 1}
        current={current}
        done={done}
        disabled={disabled}
        small={small}
      />
      {children && (
        <span className={stepperBaseClass + '__title'}>{children}</span>
      )}
    </li>
  );
};

export default StepBlock;

```

### src/lv1/interactiveParts/StepBorder.stories.tsx
```
typescript
import * as React from 'react';

import { boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import StepBorder from './StepBorder';

export default {
  title: 'deprecated/interactiveParts/StepBorder',
  component: StepBorder,
};

export const StepBorderComponent = () => (
  <ul style={{ display: 'inline-block', padding: 0, margin: 0 }}>
    <StepBorder
      done={boolean('Done', false, 'StepBorder')}
      separator={boolean('Separator', false, 'StepBorder')}
      {...commonKnobs()}
    />
  </ul>
);

```

### src/lv1/interactiveParts/StepBorder.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 見た目を done にします
   */
  done?: boolean;
  /**
   * StepBlock の separator として使用します
   */
  separator?: boolean;
} & CommonProps;

/**
 * 古いコンポーネントなので使わないでください
 *
 * @deprecated
 */
const StepBorder: React.FC<Props> = (props: Props) => {
  const { done, separator } = props;
  const stepperBaseClass = 'vb-stepBorder';

  return (
    <li
      {...commonProps(props, stepperBaseClass, { done, separator })}
      aria-hidden="true"
    />
  );
};

export default StepBorder;

```

### src/lv1/interactiveParts/StepNumber.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { StepNumber } from './StepNumber';
import { HStack } from '../layout/HStack';

export default {
  component: StepNumber,
};

export const StepNumberComponent = () => (
  <StepNumber
    number={text('Number', '1', 'StepBlock')}
    current={boolean('Current', false, 'StepBlock')}
    done={boolean('Done', false, 'StepBlock')}
    disabled={boolean('Disabled', false, 'StepBlock')}
    {...commonKnobs()}
  />
);

export const Default = () => {
  return (
    <HStack>
      <StepNumber number={1} />
      <StepNumber number={1} current />
      <StepNumber number={1} done />
      <StepNumber number={1} disabled />
    </HStack>
  );
};

export const Small = () => {
  return (
    <HStack>
      <StepNumber small number={1} />
      <StepNumber small number={1} current />
      <StepNumber small number={1} done />
      <StepNumber small number={1} disabled />
    </HStack>
  );
};

```

### src/lv1/interactiveParts/StepNumber.tsx
```
typescript
import * as React from 'react';
import { MdCheck } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 数字を指定します
   */
  number: number | string;
  /**
   * 見た目を current にします
   */
  current?: boolean;
  /**
   * 見た目を done にします
   */
  done?: boolean;
  /**
   * 見た目を disabled にします
   */
  disabled?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
} & CommonProps;

const baseClassName = 'vb-stepNumber';
export const StepNumber: React.FC<Props> = ({
  number,
  current,
  done,
  disabled,
  small,
  ...props
}: Props) => (
  <span
    {...commonProps(props, baseClassName, { current, done, disabled, small })}
  >
    <span className={`${baseClassName}__numberValue`}>
      {number ? number : '1'}
    </span>
    {done && (
      <figure className={`${baseClassName}__numberCheck`}>
        <MdCheck className={`${baseClassName}__numberCheckSvg`} />
      </figure>
    )}
  </span>
);

```

### src/lv1/interactiveParts/Tab.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Tab from './Tab';

export default {
  component: Tab,
};

export const TabComponent = () => (
  <Tab
    current={boolean('Current', false, 'Tab')}
    small={boolean('Small', false, 'Tab')}
    onClick={action('click')}
    onBlur={action('blur')}
    notification={text('notification', '', 'Tab')}
    {...commonKnobs()}
  >
    {text('Children', 'タブテキスト', 'Tab')}
  </Tab>
);

export const Default = () => {
  const [index, setIndex] = React.useState(1);

  return (
    <div>
      <Tab current={index === 0} onClick={() => setIndex(0)}>
        タブテキスト
      </Tab>
      <Tab current={index === 1} onClick={() => setIndex(1)}>
        タブテキスト
      </Tab>
      <Tab
        current={index === 2}
        onClick={() => setIndex(2)}
        notification="新着メッセージがあります"
      >
        タブテキスト
      </Tab>
    </div>
  );
};

export const Small = () => {
  const [index, setIndex] = React.useState(1);

  return (
    <div>
      <Tab small current={index === 0} onClick={() => setIndex(0)}>
        タブテキスト
      </Tab>
      <Tab small current={index === 1} onClick={() => setIndex(1)}>
        タブテキスト
      </Tab>
      <Tab small current={index === 2} onClick={() => setIndex(2)}>
        タブテキスト
      </Tab>
    </div>
  );
};

```

### src/lv1/interactiveParts/Tab.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * 選択状態にします
   */
  current?: boolean;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  selected?: boolean;
  /**
   * click ハンドラを設定します
   */
  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;
  /**
   * blur ハンドラを設定します
   */
  onBlur?: (event: React.FormEvent<HTMLButtonElement>) => void;
  /**
   * 通知の有無および読み上げられるメッセージを設定します
   */
  notification?: string;
} & MarginClassProps &
  CommonProps;

/**
 * タブひとつひとつを表現するコンポーネントです。単体で使用せず、`lv2/TabBar` を使用してください
 */
const Tab: React.FC<Props> = (props: Props) => {
  const {
    children,
    current,
    small,
    selected,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    onClick,
    onBlur,
    notification,
  } = props;

  const buttonBaseClass = 'vb-tab';
  const classModifier = {
    current,
    small,
    selected,
  };

  return (
    <div className="vb-tab__block">
      <button
        role="tab"
        tabIndex={current ? undefined : -1}
        aria-selected={!!current}
        onClick={onClick}
        onBlur={onBlur}
        type="button"
        {...commonProps(props, buttonBaseClass, classModifier, {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        })}
      >
        {children}
      </button>

      {notification && (
        <span
          className={'vb-tab__notificationDot'}
          aria-label={notification}
          role="img"
        />
      )}
    </div>
  );
};

export default Tab;

```

### src/lv1/layout/HStack.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { HStack } from './HStack';
import Paragraph from '../typography/Paragraph';
import Button from '../buttons/Button';
import { select } from '@storybook/addon-knobs';

export default {
  component: HStack,
};

export const HStackComponent = () => (
  <HStack
    gap={select('gap', [0, 0.25, 0.5, 1, 1.5, 2, 3], 1, 'Stack')}
    justifyContent={
      select(
        'justifycontent',
        {
          undefined: '',
          start: 'start',
          end: 'end',
          center: 'center',
          'space-between': 'space-between',
        },
        '',
        'HStack'
      ) || undefined
    }
    alignItems={
      select(
        'alignItems',
        {
          undefined: '',
          stretch: 'stretch',
          center: 'center',
          start: 'start',
          end: 'end',
        },
        '',
        'HStack'
      ) || undefined
    }
    wrap={
      select(
        'wrap',
        {
          undefined: '',
          wrap: 'wrap',
          nowrap: 'nowrap',
        },
        '',
        'HStack'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Paragraph>Stackを使うと、コンポーネントを等間隔に並べられます</Paragraph>
    <Button>ボタン1</Button>
    <Button>ボタン2</Button>
  </HStack>
);

```

### src/lv1/layout/HStack.tsx
```
typescript
import * as React from 'react';
import { Stack } from './Stack';

type StackProps = React.ComponentProps<typeof Stack>;
type Props = {
  /**
   * 横方向の揃え方を指定します。
   */
  justifyContent?: StackProps['justifyContent'];
  /**
   * 縦方向の揃え方を指定します
   */
  alignItems?: StackProps['alignItems'];
} & Omit<StackProps, 'direction' | 'justifyContent' | 'alignItems'>;

/**
 * 横方向（水平方向）に等間隔でコンポーネントを並べます。
 *
 * - `direction` が固定である以外は `Stack` と同一です
 * - 縦方向（垂直方向）に等間隔でコンポーネントを並べるには、 `VStack` を使用してください
 */
export const HStack: React.FC<Props> = (props) => (
  <Stack direction="horizontal" {...props} />
);

```

### src/lv1/layout/Stack.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { Stack } from './Stack';
import Paragraph from '../typography/Paragraph';
import Button from '../buttons/Button';
import { boolean, select } from '@storybook/addon-knobs';
import SearchField from '../forms/SearchField';
import ContentsBase from '../bases/ContentsBase';
import ColumnBase from '../bases/ColumnBase';
import { Text } from '../typography/Text';

export default {
  component: Stack,
};

export const StackComponent = () => (
  <Stack
    direction={
      select(
        'direction',
        {
          undefined: '',
          vertical: 'vertical',
          horizontal: 'horizontal',
          'vertical-reverse': 'vertical-reverse',
          'horizontal-reverse': 'horizontal-reverse',
        },
        '',
        'Stack'
      ) || undefined
    }
    gap={select('gap', [0, 0.25, 0.5, 1, 1.5, 2, 3], 1, 'Stack')}
    justifyContent={
      select(
        'justifycontent',
        {
          undefined: '',
          start: 'start',
          end: 'end',
          center: 'center',
          'space-between': 'space-between',
        },
        '',
        'Stack'
      ) || undefined
    }
    alignItems={
      select(
        'alignItems',
        {
          undefined: '',
          stretch: 'stretch',
          center: 'center',
          start: 'start',
          end: 'end',
        },
        '',
        'Stack'
      ) || undefined
    }
    wrap={
      select(
        'wrap',
        {
          undefined: '',
          wrap: 'wrap',
          nowrap: 'nowrap',
        },
        '',
        'Stack'
      ) || undefined
    }
    inline={boolean('inline', false, 'Stack')}
    {...commonKnobs()}
  >
    <Paragraph>Stackを使うと、コンポーネントを等間隔に並べられます</Paragraph>
    <Button>ボタン1</Button>
    <Button>ボタン2</Button>
  </Stack>
);

export const Toolbar = () => (
  <Stack direction="horizontal" justifyContent="space-between">
    <Stack direction="horizontal" gap={1}>
      <Button appearance="primary">送信</Button>
      <Button>編集</Button>
      <Button>コピー</Button>
      <SearchField label="検索" />
    </Stack>
    <Stack direction="horizontal" gap={1}>
      <Button>エクスポート</Button>
      <Button danger>削除</Button>
    </Stack>
  </Stack>
);

export const Messages = () => (
  <Stack direction="vertical" alignItems="center">
    <ContentsBase>
      <Stack direction="vertical" gap={1.5}>
        <Paragraph>
          freeeは「スモールビジネスを、世界の主役に。」をミッションに掲げ、統合型経営プラットフォームを開発・提供し、
          <br />
          だれもが自由に自然体で経営できる環境をつくっていきます。
        </Paragraph>
        <Paragraph>
          起業やビジネスを育てていくことを、もっと魅力的で気軽な行為に。個人事業や中小企業などのスモールビジネスに携わるすべての人が、
          <br />
          じぶんらしく自信をもって経営できるように。
        </Paragraph>
        <Paragraph>
          大胆にスピード感をもってアイデアを具現化できるスモールビジネスは、今までにない多様な価値観や生き方、
          <br />
          新しいイノベーションを生み出す起爆剤だと私たちは考えています。スモールビジネスが大企業を刺激し、
          <br />
          社会をさらにオモシロク、世の中全体をより良くする流れを後押ししていきます。
        </Paragraph>
      </Stack>
    </ContentsBase>
  </Stack>
);

export const Direction = () => (
  <Stack gap={2}>
    <Stack direction="vertical">
      <ColumnBase>direction=vertical 1</ColumnBase>
      <ColumnBase>direction=vertical 2</ColumnBase>
      <ColumnBase>direction=vertical 3</ColumnBase>
    </Stack>
    <Stack direction="horizontal">
      <ColumnBase>direction=horizontal 1</ColumnBase>
      <ColumnBase>direction=horizontal 2</ColumnBase>
      <ColumnBase>direction=horizontal 3</ColumnBase>
    </Stack>
    <Stack direction="vertical-reverse">
      <ColumnBase>direction=vertical-reverse 1</ColumnBase>
      <ColumnBase>direction=vertical-reverse 2</ColumnBase>
      <ColumnBase>direction=vertical-reverse 3</ColumnBase>
    </Stack>
    <Stack direction="horizontal-reverse">
      <ColumnBase>direction=horizontal-reverse 1</ColumnBase>
      <ColumnBase>direction=horizontal-reverse 2</ColumnBase>
      <ColumnBase>direction=horizontal-reverse 3</ColumnBase>
    </Stack>
  </Stack>
);

export const JustifyContent = () => (
  <Stack gap={2} alignItems="stretch">
    <Stack direction="horizontal" justifyContent="start">
      <ColumnBase>justifyContent=start 1</ColumnBase>
      <ColumnBase>justifyContent=start 2</ColumnBase>
      <ColumnBase>justifyContent=start 3</ColumnBase>
    </Stack>
    <Stack direction="horizontal" justifyContent="end">
      <ColumnBase>justifyContent=end 1</ColumnBase>
      <ColumnBase>justifyContent=end 2</ColumnBase>
      <ColumnBase>justifyContent=end 3</ColumnBase>
    </Stack>
    <Stack direction="horizontal" justifyContent="center">
      <ColumnBase>justifyContent=center 1</ColumnBase>
      <ColumnBase>justifyContent=center 2</ColumnBase>
      <ColumnBase>justifyContent=center 3</ColumnBase>
    </Stack>
    <Stack direction="horizontal" justifyContent="space-between">
      <ColumnBase>justifyContent=space-between 1</ColumnBase>
      <ColumnBase>justifyContent=space-between 2</ColumnBase>
      <ColumnBase>justifyContent=space-between 3</ColumnBase>
    </Stack>
  </Stack>
);

export const AlignItems = () => (
  <Stack gap={2}>
    <Stack direction="horizontal" alignItems="start">
      <ColumnBase paddingSize="small">
        <Text size={0.875}>alignItems=start 1</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={1.5}>alignItems=start 2</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={0.75}>alignItems=start 3</Text>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" alignItems="center">
      <ColumnBase paddingSize="small">
        <Text size={0.875}>alignItems=center 1</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={1.5}>alignItems=center 2</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={0.75}>alignItems=center 3</Text>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" alignItems="end">
      <ColumnBase paddingSize="small">
        <Text size={0.875}>alignItems=end 1</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={1.5}>alignItems=end 2</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={0.75}>alignItems=end 3</Text>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" alignItems="stretch">
      <ColumnBase paddingSize="small">
        <Text size={0.875}>alignItems=stretch 1</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={1.5}>alignItems=stretch 2</Text>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Text size={0.75}>alignItems=stretch 3</Text>
      </ColumnBase>
    </Stack>
  </Stack>
);

export const Gap = () => (
  <Stack gap={2}>
    <Stack direction="horizontal" gap={3}>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=3 1</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=3 2</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=3 3</Paragraph>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" gap={2}>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=3 1</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=3 2</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=3 3</Paragraph>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" gap={1}>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=1 1</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=1 2</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=1 3</Paragraph>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" gap={0.5}>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0.5 1</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0.5 2</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0.5 3</Paragraph>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" gap={0.25}>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0.25 1</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0.25 2</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0.25 3</Paragraph>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" gap={0}>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0 1</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0 2</Paragraph>
      </ColumnBase>
      <ColumnBase paddingSize="small">
        <Paragraph>gap=0 3</Paragraph>
      </ColumnBase>
    </Stack>
  </Stack>
);

export const Wrap = () => (
  <Stack gap={2}>
    <Stack direction="horizontal" wrap="wrap">
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>wrap</Paragraph>
      </ColumnBase>
    </Stack>
    <Stack direction="horizontal" wrap="nowrap">
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
      <ColumnBase>
        <Paragraph>nowrap</Paragraph>
      </ColumnBase>
    </Stack>
  </Stack>
);

export const Inline = () => (
  <>
    <Stack inline mr={2} gap={0.5} direction="horizontal">
      <Button>ボタン1</Button>
      <Button>ボタン2</Button>
    </Stack>
    <Paragraph inline>
      <code>inline={'{true}'}</code>にすると、<code>inline-flex</code>になります
    </Paragraph>
  </>
);

```

### src/lv1/layout/Stack.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { convertClassModifiers } from '../../utilities/vbClassNames';

type Props = {
  /**
   * 子要素を並べる順番を指定します。
   * `vertical`で垂直方向、`horizontal`で水平方向、`vertical-reverse` `horizontal-reverse` で逆方向になります。
   * デフォルトは `vertical` です。
   */
  direction?:
    | 'vertical'
    | 'horizontal'
    | 'vertical-reverse'
    | 'horizontal-reverse';
  /**
   * オブジェクトの並ぶ間隔を rem 単位で指定します。
   * `0` `0.25` `0.5` `1` `1.5` `2` `3` が指定できます。
   */
  gap?: 0 | 0.25 | 0.5 | 1 | 1.5 | 2 | 3;
  /**
   * `direction` に指定した軸での子要素の並び方を指定します。
   */
  justifyContent?: 'start' | 'end' | 'center' | 'space-between';
  /**
   * `direction` の交差軸上での子要素の並び方を指定します。
   */
  alignItems?: 'stretch' | 'center' | 'start' | 'end';
  /**
   * 折り返しを指定します
   */
  wrap?: 'nowrap' | 'wrap';
  /**
   * `true` にすると、 `display: inline-flex` となり、インライン表示の要素と並べられます。
   */
  inline?: boolean;
  children?: React.ReactNode;
} & CommonProps;

/**
 * 子要素を等間隔に並べるためのコンポーネントです。
 */
export const Stack: React.FC<Props> = ({
  direction = 'vertical',
  gap = 1,
  justifyContent = 'start',
  alignItems = direction === 'vertical' || direction === 'vertical-reverse'
    ? 'start'
    : 'center',
  wrap = 'wrap',
  inline,
  children,
  ...props
}: Props) => {
  const Tag = inline ? 'span' : 'div';
  return (
    <Tag
      {...commonProps(props, 'vb-stack', {
        inline,
        ...convertClassModifiers({
          direction,
          justifyContent,
          alignItems,
          wrap,
        }),
        [`gap${gap * 100}`]: true,
      })}
    >
      {children}
    </Tag>
  );
};

```

### src/lv1/layout/VStack.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { VStack } from './VStack';
import Paragraph from '../typography/Paragraph';
import Button from '../buttons/Button';
import { select } from '@storybook/addon-knobs';

export default {
  component: VStack,
};

export const VStackComponent = () => (
  <VStack
    gap={select('gap', [0, 0.25, 0.5, 1, 1.5, 2, 3], 1, 'Stack')}
    justifyContent={
      select(
        'justifycontent',
        {
          undefined: '',
          start: 'start',
          end: 'end',
          center: 'center',
          'space-between': 'space-between',
        },
        '',
        'VStack'
      ) || undefined
    }
    alignItems={
      select(
        'alignItems',
        {
          undefined: '',
          stretch: 'stretch',
          center: 'center',
          start: 'start',
          end: 'end',
        },
        '',
        'VStack'
      ) || undefined
    }
    wrap={
      select(
        'wrap',
        {
          undefined: '',
          wrap: 'wrap',
          nowrap: 'nowrap',
        },
        '',
        'VStack'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Paragraph>Stackを使うと、コンポーネントを等間隔に並べられます</Paragraph>
    <Button>ボタン1</Button>
    <Button>ボタン2</Button>
  </VStack>
);

```

### src/lv1/layout/VStack.tsx
```
typescript
import * as React from 'react';
import { Stack } from './Stack';

type StackProps = React.ComponentProps<typeof Stack>;
type Props = {
  /**
   * 縦方向の揃え方を指定します。
   */
  justifyContent?: StackProps['justifyContent'];
  /**
   * 横方向の揃え方を指定します
   */
  alignItems?: StackProps['alignItems'];
} & Omit<StackProps, 'direction' | 'justifyContent' | 'alignItems'>;

/**
 * 縦方向（垂直方向）に等間隔でコンポーネントを並べます。
 *
 * - `direction` が固定である以外は `Stack` と同一です
 * - 横方向（水平方向）に等間隔でコンポーネントを並べるには、 `HStack` を使用してください
 */
export const VStack: React.FC<Props> = (props) => (
  <Stack direction="vertical" {...props} />
);

```

### src/lv1/layout/WithDescriptionContent.stories.tsx
```
typescript
import * as React from 'react';

import WithDescriptionContent from './WithDescriptionContent';
import { commonKnobs } from '../../../stories';
import TextField from '../forms/TextField';
import Note from '../typography/Note';
import Paragraph from '../typography/Paragraph';

import { select } from '@storybook/addon-knobs';
import { InlineLink } from '..';
export default {
  component: WithDescriptionContent,
};
export const WithDescriptionContentComponent = () => (
  <WithDescriptionContent
    position={select(
      'Position',
      {
        horizontal: 'horizontal',
        vertical: 'vertical',
        'vertical-reverse': 'vertical-reverse',
      },
      'vertical',
      'WithDescriptionContent'
    )}
    renderContent={(descriptionContentId) => (
      <TextField aria-describedby={descriptionContentId} label="秘密の質問" />
    )}
    renderDescriptionContent={() => (
      <Note>8文字以上20文字以内で入力してください</Note>
    )}
    {...commonKnobs()}
  />
);

export const WithMargin = () => {
  return (
    <>
      <Paragraph mb={1}>
        実際の使用時はマージンを0.5rem程度のmarginをつけて、いい感じに調整してください
      </Paragraph>

      <WithDescriptionContent
        position="horizontal"
        renderContent={(descriptionContentId) => (
          <TextField
            aria-describedby={descriptionContentId}
            label="テキストフィールド"
          />
        )}
        renderDescriptionContent={() => (
          <Note ml={0.5}>ml=0.5をNoteにつけている例</Note>
        )}
        mb={1.5}
      />

      <WithDescriptionContent
        position="vertical"
        renderContent={(descriptionContentId) => (
          <TextField
            aria-describedby={descriptionContentId}
            label="テキストフィールド"
          />
        )}
        renderDescriptionContent={() => (
          <Note mt={0.5}>mt=0.5をNoteにつけている例</Note>
        )}
        mb={1.5}
      />

      <WithDescriptionContent
        position="vertical-reverse"
        renderContent={(descriptionContentId) => (
          <TextField
            aria-describedby={descriptionContentId}
            label="テキストフィールド"
          />
        )}
        renderDescriptionContent={() => (
          <Note mb={0.5}>mb=0.5をNoteにつけている例</Note>
        )}
        mb={1.5}
      />
    </>
  );
};

export const DescriptionWithLink = () => (
  <WithDescriptionContent
    renderDescriptionContent={() => (
      <Note mt={0.5}>
        注釈内に
        <InlineLink href="https://www.freee.co.jp/">
          こんなふうにリンク等がある
        </InlineLink>
        場合、フォーカス順は<code>renderContent</code>内の要素より先になります
      </Note>
    )}
    renderContent={(descId) => (
      <TextField aria-describedby={descId} label="テキストフィールド" />
    )}
  />
);

export const InsideLargeWidth = () => (
  <div style={{ width: '70rem' }}>
    <WithDescriptionContent
      position="horizontal"
      renderContent={(descriptionContentId) => (
        <TextField aria-describedby={descriptionContentId} label="秘密の質問" />
      )}
      renderDescriptionContent={() => (
        <Note>
          横幅が大きい場所に入れたときに表示崩れが起きないことを確認するためのstoryです
        </Note>
      )}
    />
  </div>
);

```

### src/lv1/layout/WithDescriptionContent.tsx
```
typescript
import * as React from 'react';
import useUniqueId from '../../hooks/useUniqueId';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 注釈をつける対象となるコンポーネント。`descriptionContentId` を引数に取るため、 `aria-describedby` で紐付けて使用できます
   */
  renderContent: (descriptionContentId: string) => React.ReactNode;
  /**
   * 注釈の内容。文字サイズやマージン等は指定されていないため、`<Note>` などを使用してください
   */
  renderDescriptionContent: () => React.ReactNode;
  /**
   * `horizontal` で右に、`vertical` で下に注釈をつけます。
   */
  position?: 'horizontal' | 'vertical' | 'vertical-reverse';
} & CommonProps;

/**
 * 注釈をコンポーネントの右または下に置くためのコンポーネントです。
 * DOM上での並び順は見た目とは違い、注釈→対象のコンポーネントとなるため、CSSがあたっていない状態のユーザーに先に注釈を見せることができます。
 *
 * - `renderContent` は `renderDescriptionContent` が配置される要素のidを引数に取るため、 `aria-describedby` で紐付けることができます。
 * - `renderDescriptionContent` には `Note` コンポーネントを配置する想定です。
 * - `WithDescriptionContent` では注釈と対象のあいだのマージンは用意していないので、注釈と対象のどちらかに `0.5rem` 程度のマージンをつけて調整してください。
 * - ラベル（項目名）の配置には `FormControl` 等を使用してください
 * - `horizontal` `vertical` では、**DOM上の要素の順序と見た目上の順序が逆順になる** ことに注意が必要です
     - 「`renderContent` 内の入力フィールド等の状態によって `renderDescriptionContent` が変化する」ような使い方をしないでください
 *   - リンク等を `renderDescriptionContent` に入れた場合、 `renderContent` 内の要素よりも先にフォーカスが移動します
 */
const WithDescriptionContent: React.FC<Props> = (props: Props) => {
  const baseClassName = 'vb-withDescriptionContent';
  const uniqueId = useUniqueId(baseClassName);
  const descriptionContentId = `${uniqueId}__descriptionContent`;
  const { renderContent, renderDescriptionContent, position } = props;

  return (
    <div
      {...commonProps(props, baseClassName, {
        horizontal: position === 'horizontal',
        verticalReverse: position === 'vertical-reverse',
      })}
    >
      <div
        className={`${baseClassName}__description`}
        id={descriptionContentId}
      >
        {renderDescriptionContent()}
      </div>
      <div className={`${baseClassName}__content`}>
        {renderContent(descriptionContentId)}
      </div>
    </div>
  );
};
export default WithDescriptionContent;

```

### src/lv1/layout/WithSideContent.stories.tsx
```
typescript
import * as React from 'react';

import WithSideContent from './WithSideContent';
import Button from '../buttons/Button';
import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';

export default {
  component: WithSideContent,
};

export const WithSideContentComponent = () => (
  <WithSideContent
    verticalAlign={
      select(
        'VerticalAlign',
        { undefined: '', top: 'top', bottom: 'bottom', middle: 'middle' },
        '',
        'WithSideContent'
      ) || undefined
    }
    {...commonKnobs()}
    sideContent={<Button>サブボタン</Button>}
  >
    <Button marginRight>ボタン1</Button>
    <Button>ボタン2</Button>
  </WithSideContent>
);

export const SideContentOnly = () => (
  // childrenなしでも使っていいのよアピール
  <WithSideContent
    verticalAlign={
      select(
        'VerticalAlign',
        { undefined: '', top: 'top', bottom: 'bottom', middle: 'middle' },
        '',
        'WithSideContent'
      ) || undefined
    }
    {...commonKnobs()}
    sideContent={<Button>サブボタン</Button>}
  />
);

export const TextAndButton = () => (
  <WithSideContent
    verticalAlign={
      select(
        'VerticalAlign',
        { undefined: '', top: 'top', bottom: 'bottom', middle: 'middle' },
        'middle',
        'WithSideContent'
      ) || undefined
    }
    {...commonKnobs()}
    sideContent={<Button>サブボタン</Button>}
  >
    左にテキスト、右にボタンなんていうパターンのときは verticalAlign=middle
    がいい感じ
  </WithSideContent>
);

```

### src/lv1/layout/WithSideContent.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * メインコンテンツ（左側）
   */
  children?: React.ReactNode;
  /**
   * サイドコンテンツ（右側）
   */
  sideContent: React.ReactNode;
  /**
   * 左右で高さが違う場合の揃え方
   */
  verticalAlign?: 'top' | 'bottom' | 'middle';
} & CommonProps;

/**
 * 関連機能のボタン等を右側に配置するために使用するコンポーネントです
 *
 * - 左右にボタン等を振り分けて配置するときのほか、右にボタンだけ置きたいというときにも使用できます
 */
const WithSideContent: React.FC<Props> = (props: Props) => {
  const { children, sideContent, verticalAlign } = props;
  const baseClassName = 'vb-withSideContent';
  return (
    <div
      {...commonProps(props, baseClassName, {
        alignTop: verticalAlign === 'top',
        alignBottom: verticalAlign === 'bottom',
        alignMiddle: verticalAlign === 'middle',
      })}
    >
      <div className={`${baseClassName}__content`}>{children}</div>
      <div className={`${baseClassName}__sideContent`}>{sideContent}</div>
    </div>
  );
};
export default WithSideContent;

```

### src/lv1/lists/BorderTableListCell.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, text, select, number } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import BorderTableListCell from './BorderTableListCell';

export default {
  component: BorderTableListCell,
};

export const BorderTableListCellComponent = () => (
  <table style={{ width: '25rem' }}>
    <tbody>
      <tr>
        <BorderTableListCell
          rowSpan={number('rowSpan', 0, {}, 'BorderTableListCell')}
          small={boolean('Small', false, 'BorderTableListCell')}
          alignCenter={boolean('AlignCenter', false, 'BorderTableListCell')}
          alignRight={boolean('AlignRight', false, 'BorderTableListCell')}
          breakWord={boolean('BreakWord', false, 'BorderTableListCell')}
          onClick={action('click')}
          status={select(
            'Status',
            [undefined, 'alert', 'notice', 'success'],
            undefined,
            'BorderTableListCell'
          )}
          {...commonKnobs()}
        >
          {text('Children', 'テーブルセル', 'BorderTableListCell')}
        </BorderTableListCell>
      </tr>
    </tbody>
  </table>
);

```

### src/lv1/lists/BorderTableListCell.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { Keys } from '../../utilities/keyboard';
import vbClassNames from '../../utilities/vbClassNames';

type Props = {
  children?: React.ReactNode;
  /**
   * セルを小さくします
   */
  small?: boolean;
  /**
   * 中央寄せにします
   */
  alignCenter?: boolean;
  /**
   * 右寄せにします
   */
  alignRight?: boolean;
  /**
   * なるべく単語の切れ目で改行するようにします(`word-break: break-word`)。メールアドレスや金額のカラムで指定してください。
   */
  breakWord?: boolean;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  /**
   * クリックハンドラを設定します
   */
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick?: () => any;
  /**
   * ステータスを設定します
   */
  status?: 'alert' | 'notice' | 'success';
  /**
   * 行の見出しかどうかを設定します
   */
  rowHeader?: boolean;
  /**
   * 横スクロール時に行の見出しとして固定表示するどうかを設定します
   */
  fixedRowHeader?: boolean;
  /**
   * 固定表示する行の見出しが複数になる場合の left の値を設定します
   */
  fixedRowHeaderLeft?: number;
  /**
   * rowSpanを設定します
   */
  rowSpan?: number;
} & CommonProps;

const BorderTableListCell: React.FC<Props> = (props: Props) => {
  const {
    children,
    small,
    alignCenter,
    alignRight,
    breakWord,
    noWrap,
    rowSpan,
    onClick,
    status,
    rowHeader,
    fixedRowHeader,
    fixedRowHeaderLeft,
  } = props;
  const baseClass = 'vb-BorderTableListCell';
  const statusBaseClass = `${baseClass}__status`;
  const classModifier = {
    small,
    alignCenter,
    alignRight,
    clickable: !!onClick,
    breakWord,
    noWrap,
  };

  const statusClass = vbClassNames(statusBaseClass, {
    modifier: {
      alert: status === 'alert',
      notice: status === 'notice',
      success: status === 'success',
    },
  });

  const content = (
    <>
      {onClick ? (
        <span
          className={`${baseClass}__clickElement`}
          role="button"
          onClick={(): void => onClick()}
          onKeyDown={(e): void => {
            if (e.key === Keys.SPACE || e.key === Keys.ENTER) {
              e.preventDefault();
              onClick();
            }
          }}
          tabIndex={0}
        >
          {children}
        </span>
      ) : (
        children
      )}
      {status && <div className={statusClass}></div>}
    </>
  );

  if (rowHeader) {
    const cp = {
      ...commonProps(props, baseClass, {
        ...classModifier,
        rowHeader,
        fixedRowHeader,
      }),
    };
    return (
      <th
        scope="row"
        rowSpan={rowSpan}
        {...{
          ...cp,
          className: `${cp.className}${
            rowHeader && fixedRowHeader && fixedRowHeaderLeft
              ? ` ${baseClass}--fixedRowHeaderLeft${fixedRowHeaderLeft}`
              : ''
          }`,
        }}
      >
        {content}
      </th>
    );
  }

  return (
    <td rowSpan={rowSpan} {...commonProps(props, baseClass, classModifier)}>
      {content}
    </td>
  );
};

export default BorderTableListCell;

```

### src/lv1/lists/CheckBoxCell.stories.tsx
```
typescript
import * as React from 'react';

import CheckBoxCell from './CheckBoxCell';
import { text, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: CheckBoxCell,
};

export const CheckBoxCellComponent = () => (
  <CheckBoxCell
    header={boolean('header', false, 'CheckBoxCell')}
    name={text('name', '', 'CheckBoxCell')}
    value={text('value', '', 'CheckBoxCell')}
    checked={boolean('checked', false, 'CheckBoxCell')}
    disabled={boolean('disabled', false, 'CheckBoxCell')}
    aria-label={text('aria-label', '', 'CheckBoxCell')}
    {...commonKnobs()}
  />
);

```

### src/lv1/lists/CheckBoxCell.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  header: boolean;
  name?: string;
  value?: string;
  checked?: boolean;
  'aria-label'?: string;
  disabled?: boolean;
  onChange?: React.ChangeEventHandler<HTMLInputElement>;
} & CommonProps;

const CheckBoxCell: React.FC<Props> = (props: Props) => {
  const { header, name, value, checked, onChange, disabled } = props;
  const baseClassName = 'vb-checkBoxCell';

  /* eslint-disable jsx-a11y/no-noninteractive-element-interactions */
  /* eslint-disable jsx-a11y/click-events-have-key-events */
  const input = (
    <label
      className={`${baseClassName}__label${disabled ? '--disabled' : ''}`}
      onClick={(e) => e.stopPropagation()}
    >
      <input
        type="checkbox"
        aria-label={props['aria-label'] || 'この行を選択'}
        name={name}
        value={value}
        checked={checked}
        disabled={disabled}
        onChange={onChange}
      />
    </label>
  );
  const cellProps = commonProps(props, baseClassName, { header });
  return header ? (
    <th {...cellProps}>{input}</th>
  ) : (
    <td {...cellProps}>{input}</td>
  );
};
export default CheckBoxCell;

```

### src/lv1/lists/DescriptionListCell.stories.tsx
```
typescript
import * as React from 'react';

import { text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import DescriptionListCell from './DescriptionListCell';

export default {
  component: DescriptionListCell,
};

export const DescriptionListCellComponent = () => (
  <table style={{ width: '25rem' }}>
    <tbody>
      <tr>
        <DescriptionListCell {...commonKnobs()}>
          {text('Children', 'テーブルセル', 'DescriptionListCell')}
        </DescriptionListCell>
      </tr>
    </tbody>
  </table>
);

```

### src/lv1/lists/DescriptionListCell.tsx
```
typescript
import * as React from 'react';
import { useResponsive } from '../../utilities/VibesProvider';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
} & CommonProps;

const DescriptionListCell: React.FC<Props> = (props: Props) => {
  const { children } = props;
  const listBaseClass = 'vb-descriptionListCell';

  return (
    <td {...commonProps(props, listBaseClass, { responsive: useResponsive() })}>
      {children}
    </td>
  );
};

export default DescriptionListCell;

```

### src/lv1/lists/DescriptionListHeadCell.stories.tsx
```
typescript
import * as React from 'react';

import { text, select } from '@storybook/addon-knobs';
import DescriptionListHeadCell from './DescriptionListHeadCell';

export default {
  component: DescriptionListHeadCell,
};

export const DescriptionListHeadCellComponent = () => (
  <table style={{ width: '25rem' }}>
    <tbody>
      <tr>
        <DescriptionListHeadCell
          spacing={
            select(
              'Spacing',
              {
                Normal: 'normal',
                Compact: 'compact',
                undefined: '',
              },
              '',
              'DescriptionListHeadCell'
            ) || undefined
          }
        >
          {text('Children', 'テーブルセル', 'DescriptionListHeadCell')}
        </DescriptionListHeadCell>
      </tr>
    </tbody>
  </table>
);

```

### src/lv1/lists/DescriptionListHeadCell.tsx
```
typescript
import * as React from 'react';
import { useResponsive } from '../../utilities/VibesProvider';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * 最小の幅を設定します
   */
  minWidth?: number;
  /**
   * リストの高さを設定します
   */
  spacing?: 'normal' | 'compact';
} & CommonProps;

const DescriptionListHeadCell: React.FC<Props> = (props: Props) => {
  const { children, minWidth, spacing } = props;
  // DescriptionList は横型のテーブルに限られるのでヘッダが対応するスコープは行単位
  const baseClassName = 'vb-descriptionListHeadCell';

  const classModifier = {
    spacingCompact: spacing === 'compact',
    responsive: useResponsive(),
  };

  const cp = commonProps(props, baseClassName, classModifier);
  return (
    <th
      {...{
        ...cp,
        className: `${cp.className}${
          minWidth ? ` ${baseClassName}--minWidth${minWidth}` : ''
        }`,
      }}
      scope="row"
    >
      {children}
    </th>
  );
};

export default DescriptionListHeadCell;

```

### src/lv1/lists/TableListCell.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, number, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TableListCell from './TableListCell';
import JumpButton from '../buttons/JumpButton';
import TextField from '../forms/TextField';
import Button from '../buttons/Button';
import CheckBox from '../forms/CheckBox';
import MessageIcon from '../../lv2/messageIcon/MessageIcon';
import WithBalloon from '../../lv2/withBalloon/WithBalloon';

export default {
  component: TableListCell,
};

type WrapperProps = { children: React.ReactNode; style?: React.CSSProperties };
const Wrapper: React.FC<WrapperProps> = ({ children, style }: WrapperProps) => (
  <table style={style}>
    <tbody>
      <tr>{children}</tr>
    </tbody>
  </table>
);

export const TableListCellComponent = () => (
  <Wrapper style={{ width: '20rem' }}>
    <TableListCell
      url={text('Url', '', 'TableListCell')}
      small={boolean('Small', false, 'TableListCell')}
      alignBottom={boolean('AalignBottom', false, 'TableListCell')}
      alignCenter={boolean('AlignCenter', false, 'TableListCell')}
      alignRight={boolean('Alignright', false, 'TableListCell')}
      alignTop={boolean('AlignTop', false, 'TableListCell')}
      breakWord={boolean('BreakWord', false, 'TableListCell')}
      indentLevel={number('IndentLevel', 0, {}, 'TableListCell')}
      onSelfWindowNavigation={action('self window navigation')}
      {...commonKnobs()}
    >
      {text('Children', 'テーブルセル', 'TableListCell')}
    </TableListCell>
  </Wrapper>
);

export const WithUrlAndClickables = () => (
  <Wrapper>
    <TableListCell
      url="https://www.freee.co.jp/"
      small={boolean('Small', false, 'TableListCell')}
      alignCenter={boolean('AlignCenter', false, 'TableListCell')}
      alignRight={boolean('Alignright', false, 'TableListCell')}
      breakWord={boolean('BreakWord', false, 'TableListCell')}
      indentLevel={number('IndentLevel', 0, {}, 'TableListCell')}
      onSelfWindowNavigation={action('self window navigation')}
      {...commonKnobs()}
    >
      <>
        テキスト <span>span</span>
        <JumpButton url="https://corp.freee.co.jp">リンク</JumpButton>
        <TextField label="テキストフィールド" />
        <Button onClick={action('button click')}>ボタン</Button>
        <CheckBox>チェックボックス</CheckBox>
        <MessageIcon label="バルーン">MessageIcon</MessageIcon>
        <WithBalloon
          balloonContent="WithBalloon"
          border="default"
          renderContent={() => 'WithBalloon'}
        />
      </>
    </TableListCell>
  </Wrapper>
);

export const VerticalAlign = () => (
  <Wrapper>
    <TableListCell alignTop>上寄せのカラム</TableListCell>
    <TableListCell alignBottom>下寄せのカラム</TableListCell>
    <TableListCell>
      複数行のカラム
      <br />
      複数行のカラム
      <br />
      複数行のカラム
      <br />
      複数行のカラム
      <br />
      複数行のカラム
      <br />
    </TableListCell>
  </Wrapper>
);

export const WithTruncatedText = () => (
  <Wrapper style={{ width: 480, tableLayout: 'fixed' }}>
    <TableListCell>
      <div
        style={{
          overflow: 'hidden',
          textOverflow: 'ellipsis',
          whiteSpace: 'nowrap',
        }}
      >
        長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
        長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
        長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
      </div>
    </TableListCell>
    <TableListCell>隣のカラム</TableListCell>
  </Wrapper>
);

```

### src/lv1/lists/TableListCell.tsx
```
typescript
import * as React from 'react';
import useUniqueId from '../../hooks/useUniqueId';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';

type Props = {
  children?: React.ReactNode;
  /**
   * hrefを設定します
   */
  url?: string;
  /**
   * セルを小さくします
   */
  small?: boolean;
  /**
   * 下寄せにします
   */
  alignBottom?: boolean;
  /**
   * 中央寄せにします
   */
  alignCenter?: boolean;
  /**
   * 右寄せにします
   */
  alignRight?: boolean;
  /**
   * 上寄せにします
   */
  alignTop?: boolean;
  /**
   * なるべく単語の切れ目で改行するようにします(`word-break: break-word`)。メールアドレスや金額のカラムで指定してください。
   */
  breakWord?: boolean;
  /**
   * colSpanを設定します
   */
  colSpan?: number;
  /**
   * ツリー状の表現のためのインデントレベルです。左端のカラムにのみ使われる想定です
   */
  indentLevel?: number;
} & SelfWindowNavigationProp &
  CommonProps;

const TableListCell: React.FC<Props> = (props: Props) => {
  const {
    children,
    url,
    small,
    alignBottom,
    alignCenter,
    alignRight,
    alignTop,
    breakWord,
    colSpan,
    indentLevel,
    onSelfWindowNavigation,
  } = props;

  const listBaseClass = 'vb-tableListCell';
  const classModifier = {
    small,
    breakWord,
    alignBottom,
    alignCenter,
    alignRight,
    alignTop,
  };
  const uniqueId = useUniqueId('vb-tabeListcell');
  const textNodeId = `${uniqueId}__text`;

  return (
    <td {...commonProps(props, listBaseClass, classModifier)} colSpan={colSpan}>
      {/* IEのみdisplay:tableで表示するため、indentContainerWrapperが必要 */}
      <span className="vb-tableListCell__indentContainerWrapper">
        <span className="vb-tableListCell__indentContainer">
          {!!indentLevel &&
            Array(indentLevel)
              .fill(null)
              .map((_, i) => (
                <span
                  className="vb-tableListCell__indent"
                  key={i}
                  role="presentation"
                  aria-hidden="true"
                >
                  &nbsp;
                </span>
              ))}
          <span
            className={vbClassNames('vb-tableListCell__indentedContent', {
              modifier: { alignCenter, alignRight },
            })}
          >
            {!!url && (
              // eslint-disable-next-line jsx-a11y/anchor-has-content
              <a
                href={url}
                className="vb-tableListCell__link"
                tabIndex={-1}
                aria-labelledby={textNodeId}
                onClick={(e) => {
                  const navigator = selfWindowNavigator(onSelfWindowNavigation);
                  if (navigator) {
                    navigator(e, url);
                  }
                }}
              />
            )}
            <span
              className={vbClassNames('vb-tableListCell__text', {
                modifier: {
                  withLink: !!url,
                },
              })}
              id={textNodeId}
            >
              {children}
            </span>
          </span>
        </span>
      </span>
    </td>
  );
};

export default TableListCell;

```

### src/lv1/lists/TableListHead.stories.tsx
```
typescript
import * as React from 'react';

import TableListHead from './TableListHead';
import { boolean, number } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TableListHeadCell from './TableListHeadCell';

export default {
  component: TableListHead,
};

export const TableListHeadComponent = () => (
  <table style={{ width: '25rem' }}>
    <tbody>
      <TableListHead
        fixedHeader={boolean('fixedHeader', false, 'TableListHead')}
        fixedHeaderOffset={number('fixedHeaderOffset', 0, {}, 'TableListHead')}
        {...commonKnobs()}
      >
        <TableListHeadCell>テーブルセル1</TableListHeadCell>
        <TableListHeadCell>テーブルセル2</TableListHeadCell>
        <TableListHeadCell>テーブルセル3</TableListHeadCell>
      </TableListHead>
    </tbody>
  </table>
);

```

### src/lv1/lists/TableListHead.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children?: React.ReactNode;
  /**
   * ページ上部または、 `overflow: auto` な領域内にある場合にはその領域上部に貼り付く形でヘッダーを表示します
   */
  fixedHeader?: boolean;
  /**
   * `fixedHeader` 使用時にその上下方向の位置を調整します
   * numberで指定するとpx単位、stringで指定するとCSSの値を指定できます
   */
  fixedHeaderOffset?: number | string;
} & CommonProps;

const TableListHead: React.FC<Props> = (props: Props) => {
  const { children, fixedHeader, fixedHeaderOffset } = props;

  return (
    <>
      <tr
        {...commonProps(props, 'vb-tableListHead', { fixedHeader })}
        style={{
          top: fixedHeader ? fixedHeaderOffset : undefined,
        }}
      >
        {children}
      </tr>
    </>
  );
};

export default TableListHead;

```

### src/lv1/lists/TableListHeadCell.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TableListHeadCell from './TableListHeadCell';

export default {
  component: TableListHeadCell,
};

export const TableListHeadCellComponent = () => (
  <table style={{ width: '25rem' }}>
    <tbody>
      <tr>
        <TableListHeadCell
          alignCenter={boolean('AlignCenter', false, 'TableListHeadCell')}
          alignRight={boolean('Alignright', false, 'TableListHeadCell')}
          ordering={
            select(
              'Ordering',
              { desc: 'desc', asc: 'asc', undefined: '' },
              '',
              'TableListHeadCell'
            ) || undefined
          }
          minWidth={number('MinWidth', 0, undefined, 'TableListHeadCell')}
          maxWidth={number('MaxWidth', 0, undefined, 'TableListHeadCell')}
          onClick={action('click')}
          {...commonKnobs()}
        >
          {text('Children', 'テーブルセル', 'TableListHeadCell')}
        </TableListHeadCell>
      </tr>
    </tbody>
  </table>
);

```

### src/lv1/lists/TableListHeadCell.tsx
```
typescript
import * as React from 'react';
import { MdArrowUpward, MdArrowDownward, MdSwapVert } from 'react-icons/md';
import { Keys } from '../../utilities/keyboard';
import commonProps, { CommonProps } from '../../utilities/commonProps';

export type Order = 'asc' | 'desc' | 'init';
type Props = {
  children?: React.ReactNode;
  /**
   * 中央寄せにします
   */
  alignCenter?: boolean;
  /**
   * 右寄せにします
   */
  alignRight?: boolean;
  /**
   * ソートアイコンを設定します
   */
  ordering?: Order;
  /**
   * クリックハンドラを設定します
   */
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick?: () => any;
  /**
   * 幅を設定します
   */
  width?: number;
  /**
   * 最小の幅を設定します
   */
  minWidth?: number;
  /**
   * 最大の幅を設定します
   */
  maxWidth?: number;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  /**
   * 行の見出しかどうかを設定します
   */
  rowHeader?: boolean;
  /**
   * 横スクロール時に行の見出しとして固定表示するどうかを設定します
   */
  fixedRowHeader?: boolean;
  /**
   * 固定表示する行の見出しが複数になる場合の left の値を設定します
   */
  fixedRowHeaderLeft?: number;
} & CommonProps;

const TableListHeadCell: React.FC<Props> = (props: Props) => {
  const {
    children,
    alignCenter,
    alignRight,
    ordering,
    onClick,
    width,
    minWidth,
    maxWidth,
    noWrap,
    rowHeader,
    fixedRowHeader,
    fixedRowHeaderLeft,
  } = props;
  const orderInit = ordering === 'init';
  const orderAscending = ordering === 'asc';
  const orderDescending = ordering === 'desc';

  const listBaseClass = 'vb-tableListHeadCell';
  const content = (
    <>
      {children}
      {orderAscending ? (
        <span
          className={`${listBaseClass}__iconWrapper`}
          role="img"
          aria-label="昇順に並んでいます"
        >
          <MdArrowUpward className={`${listBaseClass}__headerArrowUp`} />
        </span>
      ) : orderDescending ? (
        <span
          className={`${listBaseClass}__iconWrapper`}
          role="img"
          aria-label="降順に並んでいます"
        >
          <MdArrowDownward className={`${listBaseClass}__headerArrowDown`} />
        </span>
      ) : orderInit ? (
        <span
          className={`${listBaseClass}__iconWrapper`}
          role="img"
          aria-label="並び替え可能です"
        >
          <MdSwapVert className={`${listBaseClass}__headerSwapVert`} />
        </span>
      ) : (
        ''
      )}
    </>
  );

  const cp = commonProps(props, listBaseClass, {
    alignCenter,
    alignRight,
    orderAscending,
    orderDescending,
    clickable: !!onClick,
    noWrap,
    rowHeader,
    fixedRowHeader: rowHeader && fixedRowHeader, // rowHeader が true の時のみ有効化する
  });
  return (
    <th
      {...{
        ...cp,
        className: `${cp.className}${
          width ? ` ${listBaseClass}--width${width}` : ''
        }${minWidth ? ` ${listBaseClass}--minWidth${minWidth}` : ''}${
          maxWidth ? ` ${listBaseClass}--maxWidth${maxWidth}` : ''
        }${
          rowHeader && fixedRowHeader && fixedRowHeaderLeft
            ? ` ${listBaseClass}--fixedRowHeaderLeft${fixedRowHeaderLeft}`
            : ''
        }`,
      }}
    >
      {onClick ? (
        <span
          className={`${listBaseClass}__clickElement`}
          role="button"
          onClick={(): void => onClick()}
          onKeyDown={(e): void => {
            if (e.key === Keys.SPACE || e.key === Keys.ENTER) {
              e.preventDefault();
              onClick();
            }
          }}
          tabIndex={0}
        >
          {content}
        </span>
      ) : (
        content
      )}
    </th>
  );
};

export default TableListHeadCell;

```

### src/lv1/lists/TableListRow.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TableListCell from './TableListCell';
import TableListRow from './TableListRow';

export default {
  component: TableListRow,
};

export const TableListRowComponent = () => {
  return (
    <table style={{ width: '25rem' }}>
      <tbody>
        <TableListRow
          url={text('Url', '', 'TableListCell')}
          onClick={action('click')}
          onSelfWindowNavigation={action('self window navigation')}
          {...commonKnobs()}
        >
          <TableListCell>テーブルセル1</TableListCell>
          <TableListCell>テーブルセル2</TableListCell>
          <TableListCell>テーブルセル3</TableListCell>
        </TableListRow>
      </tbody>
    </table>
  );
};

```

### src/lv1/lists/TableListRow.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { KeyCodes } from '../../utilities/keyboard';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';
import {
  TableRowAriaProps,
  filterTableRowAriaProps,
} from '../../utilities/AriaProps';

type Props = {
  children?: React.ReactNode;
  /**
   * hrefを設定します
   */
  url?: string;
  /**
   * クリックハンドラを設定します
   */
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick?: () => any;
} & CommonProps &
  SelfWindowNavigationProp &
  TableRowAriaProps;

const TableListRow: React.ForwardRefRenderFunction<
  HTMLTableRowElement,
  Props
> = (props: Props, ref: React.Ref<HTMLTableRowElement>) => {
  const { children, onClick, url, onSelfWindowNavigation } = props;

  const baseClassName = 'vb-tableListRow';
  const classModifier = {
    clickable: !!onClick || !!url,
  };

  return onClick || url ? (
    <tr
      tabIndex={0}
      ref={ref}
      onClick={onClick}
      onKeyDown={(e): void => {
        if (e.target !== e.currentTarget) {
          return;
        }
        if (e.keyCode === KeyCodes.ENTER) {
          e.preventDefault();
          if (url) {
            const a = document.createElement('a');
            a.setAttribute('href', url);
            const event = new MouseEvent('click', {
              ctrlKey: e.ctrlKey,
              shiftKey: e.shiftKey,
              metaKey: e.metaKey,
              altKey: e.altKey,
              cancelable: true,
            });
            const navigator = selfWindowNavigator(onSelfWindowNavigation);
            if (navigator) {
              a.addEventListener('click', (e) => navigator(e, url));
            }
            a.dispatchEvent(event);
          }
          if (onClick) {
            onClick();
          }
        }
      }}
      {...commonProps(props, baseClassName, classModifier)}
      {...filterTableRowAriaProps(props)}
      /* FIXME: role的にはクリック可能であることが伝わらないが、roleを変えるとテーブルとしての読み上げが上手くいかないおそれがある */
    >
      {children}
    </tr>
  ) : (
    <tr
      {...commonProps(props, baseClassName, classModifier)}
      {...filterTableRowAriaProps(props)}
      ref={ref}
    >
      {children}
    </tr>
  );
};

export default React.forwardRef(TableListRow);

```

### src/lv1/lists/TreeFoldingButtonCell.stories.tsx
```
typescript
import * as React from 'react';

import TreeFoldingButtonCell from './TreeFoldingButtonCell';
import { boolean } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';

export default {
  component: TreeFoldingButtonCell,
};

export const TreeFoldingButtonCellComponent = () => (
  <table>
    <tbody>
      <tr>
        <TreeFoldingButtonCell
          folded={boolean('folded', false, 'TreeFoldingButtonCell')}
          onToggleFolded={action('toggleFolded')}
        />
      </tr>
    </tbody>
  </table>
);

```

### src/lv1/lists/TreeFoldingButtonCell.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MdExpandMore, MdChevronRight } from 'react-icons/md';

type Props = {
  folded: boolean;
  onToggleFolded: (folded: boolean) => void;
} & CommonProps;

const TreeFoldingButtonCell: React.FC<Props> = (props: Props) => {
  const { folded, onToggleFolded } = props;
  const className = 'vb-treeFoldingButtonCell';
  return (
    <td {...commonProps(props, className)}>
      <button
        className={`${className}__button`}
        aria-label={folded ? '展開する' : '折り畳む'}
        aria-expanded={!folded}
        onClick={(e) => {
          onToggleFolded(!folded);

          e.stopPropagation();
        }}
      >
        {folded ? (
          <MdChevronRight className={`${className}__icon`} />
        ) : (
          <MdExpandMore className={`${className}__icon`} />
        )}
      </button>
    </td>
  );
};

export default TreeFoldingButtonCell;

```

### src/lv1/messages/Message.stories.tsx
```
typescript
import * as React from 'react';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import ZebraBase from '../bases/ZebraBase';
import Message from './Message';

export default {
  component: Message,
};

export const MessageComponent = () => (
  <Message
    info={boolean('Info', false, 'Message')}
    error={boolean('Error', false, 'Message')}
    notice={boolean('Notice', false, 'Message')}
    success={boolean('Success', false, 'Message')}
    {...commonKnobs()}
  >
    {text('Children', 'メッセージメッセージメッセージ', 'Message')}
  </Message>
);

export const Samples = () => (
  <>
    <ZebraBase>
      <Message info marginRight>
        情報メッセージ情報メッセージ情報メッセージ
      </Message>
    </ZebraBase>
    <ZebraBase>
      <Message info marginRight>
        あのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。
      </Message>
    </ZebraBase>
    <ZebraBase>
      <Message notice marginRight>
        <span>
          メンテナンスのお知らせ
          <br />
          2019年1月1日 0:00から2019年12月31日 23:59
          のあいだ、メンテナンスのため会計フリーをお使いいただけませんのでご注意ください。
        </span>
      </Message>
    </ZebraBase>

    <ZebraBase>
      <Message error marginRight>
        エラーメッセージ
      </Message>
      <Message notice marginRight>
        警告メッセージ
      </Message>
      <Message success marginRight>
        成功メッセージ
      </Message>
    </ZebraBase>
  </>
);

```

### src/lv1/messages/Message.tsx
```
typescript
import * as React from 'react';
import { MdError, MdWarning, MdCheckCircle, MdInfo } from 'react-icons/md';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
// lv1を参照しちゃうけど許して
// TODO: Messageコンポーネントをlv2に移動
import MaterialIcon from '../icons/MaterialIcon';

export type MessageTypes = {
  /**
   * error アイコンを表示します
   */
  error?: boolean;
  /**
   * notice アイコンを表示します
   */
  notice?: boolean;
  /**
   * success アイコンを表示します
   */
  success?: boolean;
  /**
   * info アイコンを表示します
   */
  info?: boolean;
};

type Props = {
  children?: React.ReactNode;
} & MessageTypes &
  MarginClassProps &
  CommonProps;

export default function Message(props: Props): React.ReactElement {
  const {
    children,
    error,
    notice,
    success,
    info,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  return (
    <span
      {...commonProps(
        props,
        'vb-message',
        { error, notice, success, info },
        { marginBottom, marginLeft, marginRight, marginSize, marginTop }
      )}
    >
      <span className="vb-message__icon">
        {error ? (
          <MaterialIcon IconComponent={MdError} error mr={0.5} />
        ) : notice ? (
          <MaterialIcon IconComponent={MdWarning} notice mr={0.5} />
        ) : success ? (
          <MaterialIcon IconComponent={MdCheckCircle} success mr={0.5} />
        ) : (
          <MaterialIcon IconComponent={MdInfo} color="S8" mr={0.5} />
        )}
      </span>
      <span className="vb-message__content">{children}</span>
    </span>
  );
}

```

### src/lv1/progress/ProgressBar.stories.tsx
```
typescript
import * as React from 'react';
import { ProgressBar } from './ProgressBar';
import { Button } from '../../';

export default {
  component: ProgressBar,
};
export const ProgressBarComponent = ({
  value = 30,
  maxValue = 100,
  indeterminate = false,
  width = 'default',
  ariaLabel = '××の進捗',
  ariaLabelledby = undefined,
  ...args
}: React.ComponentProps<typeof ProgressBar>) => (
  <ProgressBar
    value={value}
    maxValue={maxValue}
    indeterminate={indeterminate}
    width={width}
    ariaLabel={ariaLabel}
    ariaLabelledby={ariaLabelledby}
    {...args}
  />
);

export const IndeterminateProgressBar = (
  args: React.ComponentProps<typeof ProgressBar>
) => <ProgressBar {...args} indeterminate />;

export const AutoIncreaseSample = ({
  width = 'default',
  ...args
}: React.ComponentProps<typeof ProgressBar>) => {
  const [progress, setProgress] = React.useState(0);
  const [intervalId, setIntervalId] = React.useState<number | null>(null);

  const start = () => {
    if (intervalId) {
      return;
    }
    setIntervalId(
      window.setInterval(() => {
        setProgress((progress) => (progress >= 100 ? 0 : progress + 1));
      }, 50)
    );
  };

  const stop = () => {
    intervalId && window.clearInterval(intervalId);
    setIntervalId(null);
  };

  return (
    <>
      <ProgressBar width={width} {...args} value={progress} />
      <Button
        ml={1}
        onClick={() => {
          if (intervalId) {
            stop();
          } else {
            start();
          }
        }}
      >
        {intervalId ? 'stop' : 'start'}
      </Button>
      <Button
        ml={0.5}
        onClick={() => {
          setProgress(0);
          stop();
        }}
      >
        reset
      </Button>
    </>
  );
};

```

### src/lv1/progress/ProgressBar.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 進捗を数値化できる場合にその数値を渡します
   */
  value?: number;
  /**
   * `value` の最大値です。指定しない場合 `100` となります
   */
  maxValue?: number;
  /**
   * 進捗を数値化できない場合に `true` にすると、ループするアニメーションを表示します
   */
  indeterminate?: boolean;
  /**
   * `default` 時に横幅11rem、`full` の場合 `100%` となります
   */
  width?: 'default' | 'full' | 'large' | 'small' | 'xSmall';
  /**
   * ProgressBarのラベルとして `aria-label` を指定します。
   * WAI-ARIAの`progressbar` roleでアクセシブルな名前が要求されるため、 `ariaLabel` または `ariaLabelledby` を指定してください。
   */
  ariaLabel?: string;
  /**
   * ProgressBarのラベルとして `aria-labelledby` を指定します。
   * WAI-ARIAの`progressbar` roleでアクセシブルな名前が要求されるため、 `ariaLabel` または `ariaLabelledby` を指定してください。
   */
  ariaLabelledby?: string;
} & CommonProps;

/**
 * インポートや外部サービス連携など、時間のかかる処理の進捗表示に使用するプログレスバーです。
 *
 * - 進捗を数値化できる場合は `value` `maxValue` を使用し、ユーザーがあとどれくらい待てば良いのか予測できるようにしてください
 * - 進捗を数値化できない場合は `indeterminate` を使用してください。こちらの使用は可能なかぎり避け、なるべく数値化できるようにしてください
 * - OSのアクセシビリティ設定等で「視差効果を減らす」「動きを減らす」設定を有効化している場合、 `indeterminate` 時にはアニメーションしません
 *
 */
export const ProgressBar: React.FC<Props> = ({
  value,
  maxValue = 100,
  indeterminate = false,
  width = 'default',
  ariaLabel,
  ariaLabelledby,
  ...props
}: Props) => {
  const className = 'vb-progressBar';
  const status = () => {
    if (value === 0 || value === undefined) {
      return 'initial';
    } else if (value === maxValue) {
      return 'complete';
    } else {
      return 'progressing';
    }
  };

  return (
    <span
      {...commonProps(props, className, {
        widthFull: width === 'full',
        widthLarge: width === 'large',
        widthSmall: width === 'small',
        widthXSmall: width === 'xSmall',
        progressing: status() === 'progressing',
      })}
      role="progressbar"
      aria-label={ariaLabel}
      aria-labelledby={ariaLabelledby}
      aria-valuemax={indeterminate ? undefined : maxValue}
      aria-valuenow={indeterminate ? undefined : value}
    >
      {indeterminate ? (
        <span className={`${className}__indeterminateBar`} />
      ) : (
        <span
          className={`${className}__valueBar ${className}__valueBar--${status()}`}
          style={{
            transform: `translate(${
              (value ? (100 * value) / maxValue : 0) - 100
            }%, 0)`,
          }}
        />
      )}
    </span>
  );
};

```

### src/lv1/skeleton/SkeletonBase.tsx
```
typescript
import * as React from 'react';
import ContentLoader from 'react-content-loader';
import { convertRemToPixel } from '../../utilities/convertRemToPixel';

type Props = {
  /**
   * 幅をremで指定します
   */
  width: number;
  /**
   * 高さをremで指定します
   */
  height: number;
};

export const SkeletonBase: React.FC<Props> = (props) => {
  const widthPixel = convertRemToPixel(props.width);
  const heightPixel = convertRemToPixel(props.height);

  return (
    <ContentLoader
      speed={1}
      width={widthPixel}
      height={heightPixel}
      viewBox={`0 0 ${widthPixel} ${heightPixel}`}
      backgroundColor="rgba(212,212,212,0.3)" // #FFFFFF 上で #F2F2F2
      foregroundColor="rgba(188,188,188,0.3)" // #FFFFFF 上で #ebebeb
    >
      <rect x="0" y="0" rx="4" ry="4" width={widthPixel} height={heightPixel} />
    </ContentLoader>
  );
};

```

### src/lv1/typography/InternalHeadline.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useResponsive } from '../../utilities/VibesProvider';

type HeadlineProps = {
  children?: React.ReactNode;
  className: string;
  id?: string;
  inline?: boolean;
  textAlign?: 'left' | 'center' | 'right';
  headlineLevel: 1 | 2 | 3 | 4 | 5 | 6 | -1;
} & CommonProps &
  MarginClassProps;

/**
 * 他の headline の基底コンポーネント。vibes のコンポーネントとしては export していないので storybook も作成していない。
 */
function InternalHeadline(
  props: HeadlineProps,
  ref?: React.Ref<HTMLHeadingElement>
): React.ReactElement {
  const {
    children,
    className,
    id,
    inline,
    textAlign,
    headlineLevel,
    marginTop,
    marginRight,
    marginLeft,
    marginBottom,
    marginSize,
  } = props;

  const elementProps = {
    ...commonProps(
      props,
      className,
      {
        inline,
        responsive: useResponsive(),
        alignLeft: textAlign === 'left',
        alignRight: textAlign === 'right',
        alignCenter: textAlign === 'center',
      },
      { marginTop, marginRight, marginLeft, marginBottom, marginSize }
    ),
    id,
    ref,
    tabIndex: -1,
  };
  switch (headlineLevel) {
    case 1:
      return <h1 {...elementProps}>{children}</h1>;
    case 2:
      return <h2 {...elementProps}>{children}</h2>;
    case 3:
      return <h3 {...elementProps}>{children}</h3>;
    case 4:
      return <h4 {...elementProps}>{children}</h4>;
    case 5:
      return <h5 {...elementProps}>{children}</h5>;
    case 6:
      return <h6 {...elementProps}>{children}</h6>;
    default:
      return <span {...elementProps}>{children}</span>;
  }
}

export default React.forwardRef<HTMLHeadingElement, HeadlineProps>(
  InternalHeadline
);

```

### src/lv1/typography/Note.stories.tsx
```
typescript
import * as React from 'react';

import { text, boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Note from './Note';

export default {
  component: Note,
};

export const NoteComponent = () => (
  <Note
    inline={boolean('Inline', false, 'Note')}
    textAlign={
      select(
        'TextAlign',
        { left: 'left', center: 'center', right: 'right', undefined: '' },
        '',
        'Note'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text(
      'Children',
      '注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈注釈',
      'Note'
    )}
  </Note>
);

export const EllipsisWhenOverflow = () => {
  return (
    <div style={{ width: '300px' }}>
      <Note ellipsis>
        ellipsisを指定するとテキストが溢れた時には省略されます
      </Note>
      <Note inline ellipsis mt={1}>
        inlineのときもellipsisを指定するとテキストが溢れた時には省略されます
      </Note>
    </div>
  );
};

```

### src/lv1/typography/Note.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { TypographyStyle, TypographyStyleProps } from './TypographyStyle';
import styled from 'styled-components';
import { CaptionFont, VibesBurntColor } from '../../constants';

type Props = {
  children?: React.ReactNode;
} & TypographyStyleProps &
  CommonProps &
  MarginClassProps;

const Style = styled(TypographyStyle)`
  color: ${VibesBurntColor};
  font: ${CaptionFont};
`;

export default function Note(props: Props): React.ReactElement {
  return <Style as={props.inline ? 'span' : 'p'} {...props} />;
}

```

### src/lv1/typography/PageTitle.stories.tsx
```
typescript
import * as React from 'react';

import { text, boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../buttons/Button';
import PageTitle from './PageTitle';

export default {
  component: PageTitle,
};

export const PageTitleComponent = () => (
  <PageTitle
    inline={boolean('Inline', false, 'PageTitle')}
    textAlign={
      select(
        'TextAlign',
        { left: 'left', center: 'center', right: 'right', undefined: '' },
        '',
        'PageTitle'
      ) || undefined
    }
    headlineLevel={
      select(
        'HeadlineLevel',
        {
          '1': 1,
          '2': 2,
          '3': 3,
          '4': 4,
          '5': 5,
          '6': 6,
          '-1': -1,
          undefined: '',
        } as const,
        '',
        'PageTitle'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text('Children', 'ページタイトル', 'PageTitle')}
  </PageTitle>
);

export const WithRef = () => {
  const WithRefInner = () => {
    const ref = React.useRef<HTMLHeadingElement | null>(null);

    return (
      <>
        <PageTitle ref={ref}>ページタイトル</PageTitle>
        <Button
          appearance="tertiary"
          onClick={() => {
            if (ref.current) {
              ref.current.focus();
            }
          }}
        >
          focus a heading element
        </Button>
      </>
    );
  };
  return <WithRefInner />;
};

```

### src/lv1/typography/PageTitle.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { HeadlineStyle, HeadlineStyleProps } from './TypographyStyle';
import styled from 'styled-components';
import {
  HeadlineFont1,
  MobileBoundaryWidth,
  MobileHeadlineFont1,
  VibesBlackColor,
} from '../../constants';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children?: React.ReactNode;
  id?: string;
  /**
   * 見出しレベルを指定します。これに応じて `h1` から `h6` 要素としてrenderされます。初期値は1です。
   * -1 にすると `span` 要素となります。
   */
  headlineLevel?: HeadlineStyleProps['headlineLevel'];
} & Omit<HeadlineStyleProps, 'headlineLevel' | 'ellipsis'> & // headlineLevelは再定義のため、ellipsisは元々非対応だったのでいったんOmitしている
  CommonProps &
  MarginClassProps;

const Style = styled(HeadlineStyle).attrs(
  ({ responsive }: { responsive?: boolean }) => ({ responsive })
)`
  color: ${VibesBlackColor};
  font: ${HeadlineFont1};

  ${({ responsive }) =>
    responsive
      ? `
        @media (max-width: ${MobileBoundaryWidth}) {
          font: ${MobileHeadlineFont1};
        }`
      : ''}
`;

const RenderPageTitle: React.ForwardRefRenderFunction<
  HTMLHeadingElement,
  Props
> = (
  { headlineLevel = 1, ...props }: Props,
  ref?: React.Ref<HTMLHeadingElement>
) => {
  return (
    <Style
      responsive={useResponsive()}
      headlineLevel={headlineLevel}
      tabIndex={-1}
      {...props}
      ref={ref}
    />
  );
};

const PageTitle = React.forwardRef<HTMLHeadingElement, Props>(RenderPageTitle);

export default PageTitle;

```

### src/lv1/typography/Paragraph.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Paragraph from './Paragraph';

export default {
  component: Paragraph,
};

export const ParagraphComponent = () => (
  <Paragraph
    inline={boolean('Inline', false, 'Paragraph')}
    textAlign={
      select(
        'TextAlign',
        { left: 'left', center: 'center', right: 'right', undefined: '' },
        '',
        'Paragraph'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text(
      'Children',
      '本文本文本文本文本文本文本文本文本文本文本文',
      'Paragraph'
    )}
  </Paragraph>
);

export const EllipsisWhenOverflow = () => {
  return (
    <div style={{ width: '300px' }}>
      <Paragraph ellipsis>
        ellipsisを指定するとテキストが溢れた時には省略されます
      </Paragraph>
      <Paragraph inline ellipsis mt={1}>
        inlineのときもellipsisを指定するとテキストが溢れた時には省略されます
      </Paragraph>
    </div>
  );
};

```

### src/lv1/typography/Paragraph.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { TypographyStyle, TypographyStyleProps } from './TypographyStyle';

type Props = {
  children?: React.ReactNode;
} & TypographyStyleProps &
  CommonProps &
  MarginClassProps;

export default function Paragraph(props: Props): React.ReactElement {
  return <TypographyStyle as={props.inline ? 'span' : 'p'} {...props} />;
}

```

### src/lv1/typography/SectionTitle.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../buttons/Button';
import SectionTitle from './SectionTitle';

export default {
  component: SectionTitle,
};

export const SectionTitleComponent = () => (
  <SectionTitle
    inline={boolean('Inline', false, 'SectionTitle')}
    textAlign={
      select(
        'TextAlign',
        { left: 'left', center: 'center', right: 'right', undefined: '' },
        '',
        'SectionTitle'
      ) || undefined
    }
    headlineLevel={
      select(
        'HeadlineLevel',
        {
          '1': 1,
          '2': 2,
          '3': 3,
          '4': 4,
          '5': 5,
          '6': 6,
          '-1': -1,
          undefined: '',
        } as const,
        '',
        'SectionTitle'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text('Children', 'セクションタイトル', 'SectionTitle')}
  </SectionTitle>
);

export const WithRef = () => {
  const WithRefInner = () => {
    const ref = React.useRef<HTMLHeadingElement | null>(null);

    return (
      <>
        <SectionTitle ref={ref}>セクションタイトル</SectionTitle>
        <Button
          appearance="tertiary"
          onClick={() => {
            if (ref.current) {
              ref.current.focus();
            }
          }}
        >
          focus a heading element
        </Button>
      </>
    );
  };
  return <WithRefInner />;
};

```

### src/lv1/typography/SectionTitle.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { HeadlineStyle, HeadlineStyleProps } from './TypographyStyle';
import styled from 'styled-components';
import {
  HeadlineFont2,
  MobileBoundaryWidth,
  MobileHeadlineFont2,
  VibesBlackColor,
} from '../../constants';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children?: React.ReactNode;
  id?: string;
  /**
   * 見出しレベルを指定します。これに応じて `h1` から `h6` 要素としてrenderされます。初期値は2です。
   * -1にすると `span` 要素となります。
   */
  headlineLevel?: HeadlineStyleProps['headlineLevel'];
} & Omit<HeadlineStyleProps, 'headlineLevel' | 'ellipsis'> & // headlineLevelは再定義のため、ellipsisは元々非対応だったのでいったんOmitしている
  CommonProps &
  MarginClassProps;

const Style = styled(HeadlineStyle).attrs(
  ({ responsive }: { responsive?: boolean }) => ({ responsive })
)`
  color: ${VibesBlackColor};
  font: ${HeadlineFont2};

  ${({ responsive }) =>
    responsive
      ? `
        @media (max-width: ${MobileBoundaryWidth}) {
          font: ${MobileHeadlineFont2};
        }`
      : ''}
`;

const RenderSectionTitle: React.ForwardRefRenderFunction<
  HTMLHeadingElement,
  Props
> = (
  { headlineLevel = 2, ...props }: Props,
  ref?: React.Ref<HTMLHeadingElement>
) => {
  return (
    <Style
      responsive={useResponsive()}
      headlineLevel={headlineLevel}
      tabIndex={-1}
      {...props}
      ref={ref}
    />
  );
};

const SectionTitle = React.forwardRef<HTMLHeadingElement, Props>(
  RenderSectionTitle
);
export default SectionTitle;

```

### src/lv1/typography/SubSectionTitle.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../buttons/Button';
import SubSectionTitle from './SubSectionTitle';

export default {
  component: SubSectionTitle,
};

export const SubSectionTitleComponent = () => (
  <SubSectionTitle
    inline={boolean('Inline', false, 'SubSectionTitle')}
    textAlign={
      select(
        'TextAlign',
        { left: 'left', center: 'center', right: 'right', undefined: '' },
        '',
        'SubSectionTitle'
      ) || undefined
    }
    headlineLevel={
      select(
        'HeadlineLevel',
        {
          '1': 1,
          '2': 2,
          '3': 3,
          '4': 4,
          '5': 5,
          '6': 6,
          '-1': -1,
          undefined: '',
        } as const,
        '',
        'SubSectionTitle'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text('Children', 'サブセクションタイトル', 'SubSectionTitle')}
  </SubSectionTitle>
);

export const WithRef = () => {
  const WithRefInner = () => {
    const ref = React.useRef<HTMLHeadingElement | null>(null);

    return (
      <>
        <SubSectionTitle ref={ref}>サブセクションタイトル</SubSectionTitle>
        <Button
          appearance="tertiary"
          onClick={() => {
            if (ref.current) {
              ref.current.focus();
            }
          }}
        >
          focus a heading element
        </Button>
      </>
    );
  };
  return <WithRefInner />;
};

```

### src/lv1/typography/SubSectionTitle.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps } from '../../utilities/commonProps';
import { HeadlineStyle, HeadlineStyleProps } from './TypographyStyle';
import styled from 'styled-components';
import {
  HeadlineFont3,
  MobileBoundaryWidth,
  MobileHeadlineFont3,
  VibesBurntColor,
} from '../../constants';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  children?: React.ReactNode;
  id?: string;
  /**
   * 見出しレベルを指定します。これに応じて `h1` から `h6` 要素としてrenderされます。初期値は3です。
   * -1にすると `span` 要素となります。
   */
  headlineLevel?: HeadlineStyleProps['headlineLevel'];
} & Omit<HeadlineStyleProps, 'headlineLevel' | 'ellipsis'> & // headlineLevelは再定義のため、ellipsisは元々非対応だったのでいったんOmitしている
  CommonProps &
  MarginClassProps;

const Style = styled(HeadlineStyle).attrs(
  ({ responsive }: { responsive?: boolean }) => ({ responsive })
)`
  color: ${VibesBurntColor};
  font: ${HeadlineFont3};

  ${({ responsive }) =>
    responsive
      ? `
        @media (max-width: ${MobileBoundaryWidth}) {
          font: ${MobileHeadlineFont3};
        }`
      : ''}
`;

const RenderSubSectionTitle: React.ForwardRefRenderFunction<
  HTMLHeadingElement,
  Props
> = (
  { headlineLevel = 3, ...props }: Props,
  ref?: React.Ref<HTMLHeadingElement>
) => {
  return (
    <Style
      responsive={useResponsive()}
      headlineLevel={headlineLevel}
      tabIndex={-1}
      {...props}
      ref={ref}
    />
  );
};

const SubSectionTitle = React.forwardRef<HTMLHeadingElement, Props>(
  RenderSubSectionTitle
);

export default SubSectionTitle;

```

### src/lv1/typography/Text.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { Text } from './Text';
import { boolean, select, text } from '@storybook/addon-knobs';
import { Vibes2021BackgroundColor } from '../../constants';

export default {
  component: Text,
};

export const TextComponent = () => (
  <Text
    ellipsis={boolean('ellipsis', false, 'Text')}
    weight={select('weight', ['normal', 'bold', undefined], undefined, 'Text')}
    size={select('size', [0.75, 0.875, 1, 1.5, undefined], undefined, 'Text')}
    color={select(
      'color',
      [
        'black',
        'burnt',
        'link',
        'alert',
        'notice',
        'white',
        'GY7',
        'S9',
        'P7',
        'P5',
        'RE5',
        'YE10',
        undefined,
      ],
      undefined,
      'Text'
    )}
    {...commonKnobs()}
  >
    {text('children', 'テキスト', 'Text')}
  </Text>
);

export const Size = () => (
  <>
    <div>
      <Text size={0.75} ma={1}>
        size=0.75 (12px)
      </Text>
      <Text size={0.875} ma={1}>
        size=0.875 (14px)
      </Text>
      <Text size={1} ma={1}>
        size=1 (16px)
      </Text>
      <Text size={1.5} ma={1}>
        size=1.5 (24px)
      </Text>
    </div>

    <div>
      <Text size={0.75} weight="bold" ma={1}>
        size=0.75 (12px)
      </Text>
      <Text size={0.875} weight="bold" ma={1}>
        size=0.875 (14px)
      </Text>
      <Text size={1} weight="bold" ma={1}>
        size=1 (16px)
      </Text>
      <Text size={1.5} weight="bold" ma={1}>
        size=1.5 (24px)
      </Text>
    </div>
  </>
);

export const Color = () => (
  <>
    <div>
      <Text color="black" ma={1}>
        black
      </Text>
      <Text color="burnt" ma={1}>
        burnt
      </Text>
      <Text color="link" ma={1}>
        link
      </Text>
      <Text color="alert" ma={1}>
        alert
      </Text>
      <Text color="notice" ma={1}>
        notice
      </Text>
      <Text color="white" ma={1}>
        white
      </Text>
    </div>

    <div>
      <Text color="GY7" ma={1}>
        GY7
      </Text>
      <Text color="S9" ma={1}>
        S9
      </Text>
      <Text color="P7" ma={1}>
        P7
      </Text>
      <Text color="P5" ma={1}>
        P5
      </Text>
      <Text color="RE5" ma={1}>
        RE5
      </Text>
      <Text color="YE10" ma={1}>
        YE10
      </Text>
    </div>
  </>
);

export const Ellipsis = () => (
  <>
    <div style={{ width: '10rem' }}>
      <Text ellipsis>長いテキストの省略表示を作れます</Text>
    </div>
  </>
);

export const OverflowWrap = () => (
  <>
    <p
      style={{
        backgroundColor: Vibes2021BackgroundColor,
        width: '8rem',
        marginBottom: '1rem',
      }}
    >
      <Text>
        default(overflowWrap=&apos;normal&apos;) 単語区切り の 位置 が
        どう変わるか https://toolong/path/longlonglonglonglonglonglong 他の単語
        は こうみえるよ
      </Text>
    </p>
    <p
      style={{
        backgroundColor: Vibes2021BackgroundColor,
        width: '8rem',
        marginBottom: '1rem',
      }}
    >
      <Text overflowWrap="anywhere">
        overflowWrap=&apos;anywhere&apos; 単語区切り の 位置 が 変わるか
        https://toolong/path/longlonglonglonglonglonglong 他の単語 は
        こうみえるよ
      </Text>
    </p>
    <p
      style={{
        backgroundColor: Vibes2021BackgroundColor,
        width: '8rem',
        marginBottom: '1rem',
      }}
    >
      <Text overflowWrap="break-word">
        overflowWrap=&apos;break-word&apos; 単語区切り の 位置 が 変わるか
        https://toolong/path/longlonglonglonglonglonglong 他の単語 は
        こうみえるよ
      </Text>
    </p>
  </>
);

```

### src/lv1/typography/Text.tsx
```
typescript
import * as React from 'react';
import styled from 'styled-components';
import {
  Colors2021GY07,
  Colors2021P05,
  Colors2021P07,
  Colors2021RE05,
  Colors2021S09,
  Colors2021YE10,
} from '../../constants';
import { CommonProps } from '../../utilities/commonProps';
import { TypographyStyle, TypographyStyleProps } from './TypographyStyle';

type FontColor =
  | 'black'
  | 'burnt'
  | 'link'
  | 'alert'
  | 'notice'
  | 'white'
  | 'GY7'
  | 'S9'
  | 'P7'
  | 'P5'
  | 'RE5'
  | 'YE10';
type FontSize = 0.75 | 0.875 | 1 | 1.5;
type FontWeight = 'normal' | 'bold';

type TextProps = {
  /**
   * テキストのサイズをrem単位で指定します。
   *
   * 1rem = 16px換算で、0.75rem = 12px, 0.875rem = 14px, 1.5rem = 24px となります
   *
   */
  size?: FontSize;
  /** テキストの太さを指定します */
  weight?: FontWeight;
  /** テキストの色を指定します */
  color?: FontColor;
  /**
   * テキストのoverflowWrapを指定します。
   *
   * この指定により、テキストが親要素（の幅）をあふれないように、分割できない文字列の途中で「改行を入れるかどうか」の設定ができます
   */
  overflowWrap?: 'break-word' | 'normal' | 'anywhere';
} & Pick<TypographyStyleProps, 'ellipsis'>;

type Props = {
  children?: React.ReactNode;
} & TextProps &
  CommonProps;

const Style = styled(TypographyStyle).attrs(
  ({
    color = 'black',
    size = 0.875,
    weight = 'normal',
    ellipsis = false,
    overflowWrap = 'normal',
  }: TextProps & TypographyStyleProps) => ({
    color,
    size,
    weight,
    ellipsis,
    inline: true,
    overflowWrap,
  })
)`
  display: ${({ ellipsis }) => (ellipsis ? 'inline-block' : 'inline')};
  font-size: ${({ size }) => size}rem;
  font-weight: ${({ weight }) => weight};
  overflow-wrap: ${({ overflowWrap }) => overflowWrap};
  color: ${({ color }) =>
    color === 'burnt' || color === 'S9'
      ? Colors2021S09
      : color === 'link' || color === 'P7'
      ? Colors2021P07
      : color === 'P5'
      ? Colors2021P05
      : color === 'alert' || color === 'RE5'
      ? Colors2021RE05
      : color === 'notice' || color === 'YE10'
      ? Colors2021YE10
      : color === 'white'
      ? '#FFFFFF'
      : Colors2021GY07};
`;
/**
 * 様々なフォントサイズ・フォントウェイト・色のインラインテキストを作ることができるコンポーネントです
 */
export const Text: React.FC<Props> = (props) => <Style {...props} />;

```

### src/lv2/accordionPanel/AccordionPanel.stories.tsx
```
typescript
import * as React from 'react';

import { Meta, StoryObj } from '@storybook/react';
import { expect, userEvent, within } from '@storybook/test';
import AccordionPanel from './AccordionPanel';
import Paragraph from '../../lv1/typography/Paragraph';

export default {
  component: AccordionPanel,
} as Meta<typeof AccordionPanel>;

type Story = StoryObj<typeof AccordionPanel>;

export const Basic: Story = {
  args: {
    title: 'アコーディオン',
  },
  render: (args) => {
    // eslint-disable-next-line react-hooks/rules-of-hooks
    const [isOpen, setOpen] = React.useState(false);

    return (
      <AccordionPanel
        {...args}
        open={isOpen}
        onClick={() => setOpen((prev) => !prev)}
      >
        <Paragraph>ほげほげほげほげ</Paragraph>
        <Paragraph>ふがふがふがふが</Paragraph>
      </AccordionPanel>
    );
  },
};

export const Interaction: Story = {
  ...Basic,
  play: async ({ canvasElement }) => {
    const canvas = within(canvasElement);
    const accordionPanel = canvas.getByRole('button');

    expect(accordionPanel).toBeInTheDocument();
    expect(accordionPanel.ariaExpanded).toBe('false');

    await userEvent.click(accordionPanel);
    expect(accordionPanel.ariaExpanded).toBe('true');

    await userEvent.click(accordionPanel);
    expect(accordionPanel.ariaExpanded).toBe('false');
  },
};

export const HasSiblings: Story = {
  render: () => {
    // eslint-disable-next-line react-hooks/rules-of-hooks
    const [isOpen, setOpen] = React.useState([false, false, false]);

    return (
      <>
        <AccordionPanel
          title="アコーディオン1"
          open={isOpen[0]}
          onClick={() => setOpen((prev) => [!prev[0], prev[1], prev[2]])}
        >
          <Paragraph>あいうえお</Paragraph>
        </AccordionPanel>
        <AccordionPanel
          title="アコーディオン2"
          open={isOpen[1]}
          onClick={() => setOpen((prev) => [prev[0], !prev[1], prev[2]])}
          border="top"
        >
          <Paragraph>かきくけこ</Paragraph>
        </AccordionPanel>
        <AccordionPanel
          title="アコーディオン3"
          open={isOpen[2]}
          onClick={() => setOpen((prev) => [prev[0], prev[1], !prev[2]])}
          border="top"
        >
          <Paragraph>さしすせそ</Paragraph>
        </AccordionPanel>
      </>
    );
  },
};

```

### src/lv2/accordionPanel/AccordionPanel.tsx
```
typescript
import * as React from 'react';
import { MdExpandLess, MdExpandMore } from 'react-icons/md';
import { Keys } from '../../utilities/keyboard';
import useUniqueId from '../../hooks/useUniqueId';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import AnimateHeight from 'react-animate-height';
import { useLang, useResponsive } from '../../utilities/VibesProvider';
import vbClassNames from '../../utilities/vbClassNames';

type Props = {
  title: React.ReactNode;
  children?: React.ReactNode;
  open?: boolean;
  /**
   * border を表示するか
   */
  border?: 'both' | 'bottom' | 'top';
  /**
   * @deprecated この値を指定しても何も変わりません
   */
  small?: boolean;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick: () => any;
} & MarginClassProps &
  CommonProps;

const AccordionPanel: React.FC<Props> = (props: Props) => {
  const {
    title,
    children,
    open,
    border,
    small,
    onClick,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const baseClass = 'vb-accordionPanel';
  const uid = useUniqueId(baseClass);
  const Icon = open ? MdExpandLess : MdExpandMore;
  const lang = useLang();
  return (
    <div
      {...commonProps(
        props,
        baseClass,
        {
          open,
          borderBoth: border === 'both',
          borderBottom: border === 'bottom',
          borderTop: border === 'top',
          small,
          close: !open,
        },
        { marginTop, marginLeft, marginRight, marginBottom, marginSize }
      )}
    >
      <div
        className={vbClassNames(`${baseClass}__title`, {
          modifier: { responsive: useResponsive() },
        })}
        aria-controls={`${uid}__description`}
        aria-expanded={open}
        tabIndex={0}
        role="button"
        onClick={onClick}
        onKeyDown={(e): void => {
          if (e.key === Keys.SPACE || e.key === Keys.ENTER) {
            e.preventDefault();
            onClick();
          }
        }}
      >
        {title}
        <Icon
          className={vbClassNames(`${baseClass}__icon`, {
            modifier: { responsive: useResponsive() },
          })}
          role="img"
          aria-label={
            lang === 'ja'
              ? open
                ? 'クリックで閉じる'
                : 'クリックで開く'
              : open
              ? 'Click to close'
              : 'Click to open'
          }
        />
      </div>
      <AnimateHeight
        duration={open ? 200 : 150}
        height={open ? 'auto' : 0}
        animateOpacity={true}
      >
        <div
          className={vbClassNames(`${baseClass}__description`, {
            modifier: { responsive: useResponsive() },
          })}
          id={`${uid}__description`}
          aria-hidden={!open}
        >
          {children}
        </div>
      </AnimateHeight>
    </div>
  );
};

export default AccordionPanel;

```

### src/lv2/basicTable/BasicTable.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';

import JumpButton from '../../lv1/buttons/JumpButton';
import Checkbox from '../../lv1/forms/CheckBox';

import BasicTable from './BasicTable';
import { TableHeader } from '../listTable/ListTable';
import MessageIcon from '../messageIcon/MessageIcon';
import { boolean } from '@storybook/addon-knobs';

const headers: TableHeader[] = [
  {
    value: '左寄せ',
    ordering: 'asc',
    onClick: action('header cell click'),
  },
  {
    value: (
      <>
        左寄せソート不可
        <MessageIcon label="ヘルプ" small>
          hoge
        </MessageIcon>
      </>
    ),
  },
  {
    value: (
      <>
        中央寄せ
        {/* クリック可能なヘッダーセルにクリック可能なものを置く場合、クリックが伝播しないようにする必要がある */}
        {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
        <span
          onClick={(e) => e.stopPropagation()}
          onKeyDown={(e) => e.stopPropagation()}
        >
          <MessageIcon label="ヘルプ" small>
            hoge
          </MessageIcon>
        </span>
      </>
    ),
    alignCenter: true,
    onClick: action('header cell click'),
  },
  {
    value: '右寄せ、文字小さめ',
    alignRight: true,
    onClick: action('header cell click'),
  },
];

const rows = [
  {
    cells: [
      { value: 'テーブルリスト' },
      {
        value: (
          <>
            テーブルリスト
            <MessageIcon label="ヘルプ">hoge</MessageIcon>
          </>
        ),
      },
      { value: 'テーブルリスト', alignCenter: true },
      { value: 10000000, alignRight: true, small: true },
    ],
  },
  {
    url: 'https://www.freee.co.jp/',
    cells: [
      {
        value: <Checkbox></Checkbox>,
      },
      {
        value: (
          <JumpButton url="https://corp.freee.co.jp/" target="_blank" small>
            ボタン
          </JumpButton>
        ),
      },
      { value: '行リンク', alignCenter: true },
      { value: 10000000, alignRight: true, small: true },
    ],
  },
  {
    cells: [
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト', alignCenter: true },
      {
        value: (
          <JumpButton small url="https://www.freee.co.jp/">
            ボタン
          </JumpButton>
        ),
      },
    ],
  },
  {
    onClick: action('row2-clicked'),
    cells: [
      {
        value: (
          // Checkboxにclickイベントを持たせられないのでspanに持たせている
          // eslint-disable-next-line jsx-a11y/no-static-element-interactions
          <span
            onKeyDown={(e) => e.stopPropagation()}
            onClick={(e) => e.stopPropagation()}
          >
            <Checkbox></Checkbox>
          </span>
        ),
      },
      { value: 'テーブルリスト、文字小さめ', small: true },
      { value: 'テーブルリスト、文字小さめ', alignCenter: true, small: true },
      { value: 10000000, alignRight: true },
    ],
  },
  {
    cells: [
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト' },
      {
        value: (
          <div>
            あああ
            <br /> いいい <br /> ううう
            <br />
            えええ
          </div>
        ),
        alignCenter: true,
      },
      {
        value: (
          <JumpButton small url="https://www.freee.co.jp/">
            ボタン
          </JumpButton>
        ),
        alignRight: true,
      },
    ],
  },
];

export default {
  title: 'deprecated/basicTable/BasicTable',
  component: BasicTable,
};

export const ListTableComponent = () => (
  <BasicTable
    withCheckBox={boolean('withCheckBox', false, 'ListTable')}
    {...commonKnobs()}
    headers={headers}
    rows={rows}
  />
);

```

### src/lv2/basicTable/BasicTable.tsx
```
typescript
import * as React from 'react';
import ListTable from '../listTable/ListTable';

type Props = Parameters<typeof ListTable>[0];

/**
 * BasicTableはListTableにリネームされました。
 * 新規に使用する場合はListTableを使用してください。
 */
const BasicTable = (props: Props) => <ListTable {...props} />;
export default BasicTable;

```

### src/lv2/breadcrumbs/Breadcrumbs.stories.tsx
```
typescript
import { Meta, StoryObj } from '@storybook/react';
import { expect, fn, userEvent, within } from '@storybook/test';
import Breadcrumbs from './Breadcrumbs';

export default {
  component: Breadcrumbs,
} as Meta<typeof Breadcrumbs>;

type Story = StoryObj<typeof Breadcrumbs>;

export const Basic: Story = {
  args: {
    links: [
      {
        title: 'ホーム',
        url: '/',
        onSelfWindowNavigation: fn(),
      },
      {
        title: '一覧',
        url: '/',
        onSelfWindowNavigation: fn(),
      },
      {
        title: '一覧2',
        onClick: fn(),
      },
      {
        title: '詳細',
      },
    ],
    label: 'パンくずリスト',
  },
};

export const Interaction: Story = {
  ...Basic,
  play: async ({ args, canvasElement }) => {
    const canvas = within(canvasElement);
    const breadcrumb = canvas.getByRole('navigation');
    const links = canvas.getAllByRole('link');
    const buttons = canvas.getAllByRole('button');
    const current = canvas.getByText('詳細');

    expect(breadcrumb).toBeInTheDocument();
    expect(links).toHaveLength(2);
    expect(buttons).toHaveLength(1);
    expect(current).toBeInTheDocument();

    expect(links[0]).toHaveTextContent('ホーム');
    expect(links[1]).toHaveTextContent('一覧');
    expect(buttons[0]).toHaveTextContent('一覧2');

    expect(links[0]).toHaveAttribute('href', '/');
    expect(links[1]).toHaveAttribute('href', '/');
    expect(buttons[0]).not.toHaveAttribute('href');
    expect(current).not.toHaveAttribute('href');

    expect(links[0]).not.toHaveAttribute('aria-current');
    expect(links[1]).not.toHaveAttribute('aria-current');
    expect(buttons[0]).not.toHaveAttribute('aria-current');
    expect(current).toHaveAttribute('aria-current', 'page');

    await userEvent.click(links[0]);
    expect(args.links[0].onSelfWindowNavigation).toHaveBeenCalled();

    await userEvent.click(links[1]);
    expect(args.links[1].onSelfWindowNavigation).toHaveBeenCalled();

    await userEvent.click(buttons[0]);
    expect(args.links[2].onClick).toHaveBeenCalled();
  },
};

export const WithLoadingElement: Story = {
  args: {
    links: [
      {
        title: '口座一覧',
        url: '/',
        onSelfWindowNavigation: fn(),
      },
      {
        title: '口座名',
        url: '/',
        onSelfWindowNavigation: fn(),
        loading: true,
      },
      {
        title: '科目一覧',
        onClick: fn(),
      },
      {
        title: '科目名',
        loading: true,
      },
    ],
    label: 'パンくずリスト',
  },
};

```

### src/lv2/breadcrumbs/Breadcrumbs.tsx
```
typescript
import * as React from 'react';
import { MdChevronRight } from 'react-icons/md';
import InlineLink from '../../lv1/buttons/InlineLink';
import { MarginClassProps } from '../../utilities/marginClasses';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SkeletonParagraph } from '../skeleton/SkeletonParagraph';

type Props = {
  links: ({
    title: string;
    url?: string;
    onClick?: () => void;
    /**
     * @deprecated `onSelfWindowNavigation` を使用してください
     */
    onClickNavigator?: () => void;
    /**
     * Shows a skeleton instead of the title while loading / 読込中に項目名を Skeleton 表示にします
     */
    loading?: boolean;
  } & SelfWindowNavigationProp)[];
  label?: string;
} & MarginClassProps &
  CommonProps;

const Breadcrumbs: React.FC<Props> = (props: Props) => {
  const {
    links,
    label,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  return (
    <div
      {...commonProps(
        props,
        'vb-breadcrumbs',
        {},
        { marginTop, marginLeft, marginRight, marginBottom, marginSize }
      )}
    >
      <nav role="navigation" aria-label={label || '現在位置'}>
        <ul className="vb-breadcrumbs__list">
          {links.map((linkCont, index) => {
            const lastItem = index === links.length - 1;
            const title = linkCont.loading ? (
              <SkeletonParagraph size="small" />
            ) : (
              <>{linkCont.title}</>
            );
            return (
              <li
                className="vb-breadcrumbs__item"
                key={index}
                aria-current={lastItem ? 'page' : undefined}
              >
                {linkCont.url || linkCont.onClick ? (
                  <InlineLink
                    href={linkCont.url}
                    onClick={linkCont.onClick}
                    onSelfWindowNavigation={
                      linkCont.onSelfWindowNavigation ||
                      linkCont.onClickNavigator
                    }
                  >
                    {title}
                  </InlineLink>
                ) : (
                  title
                )}
                {!lastItem && (
                  <MdChevronRight
                    className="vb-breadcrumbs__divider"
                    aria-label=">"
                  />
                )}
              </li>
            );
          })}
        </ul>
      </nav>
    </div>
  );
};

export default Breadcrumbs;

```

### src/lv2/bulletedList/BulletedList.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import BulletedList from './BulletedList';

export default {
  component: BulletedList,
};

const listSamples = [
  { value: 'リストコンテンツ' },
  { value: 'link (default: target="_self")', url: 'https://www.freee.co.jp/' },
  {
    value:
      '長いリストコンテンツ長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い',
  },
  {
    value: 'link (target="_blank")',
    url: 'https://www.freee.co.jp/',
    target: '_blank',
    rel: 'noopener noreferrer',
    'data-guide': 'guide',
    'data-test': 'test',
    'data-tracking': 'tracking',
  },
];

export const BulletedListComponent = () => (
  <BulletedList
    listContents={listSamples}
    listStyleType={
      select(
        'ListStyleType',
        { disc: 'disc', decimal: 'decimal', undefined: '' },
        '',
        'BulletedList'
      ) || undefined
    }
    small={boolean('Small', false, 'BulletedList')}
    {...commonKnobs()}
  />
);

export const Small = () => <BulletedList listContents={listSamples} small />;

```

### src/lv2/bulletedList/BulletedList.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import InlineLink from '../../lv1/buttons/InlineLink';
import vbClassNames from '../../utilities/vbClassNames';

export type BulletedListContent = {
  value: React.ReactNode;
  url?: string;
  target?: string;
  rel?: string;
  'data-guide'?: string;
  'data-test'?: string;
  'data-tracking'?: string;
  'data-masking'?: boolean;
};
type Props = {
  /**
   * リスト項目要素を設定します
   */
  listContents?: BulletedListContent[];
  /**
   * リスト項目要素のマーカーを設定します
   */
  listStyleType?: 'decimal' | 'disc';
  /**
   * 文字サイズを小さくします
   */
  small?: boolean;
} & MarginClassProps &
  CommonProps;

/**
 * 箇条書きのためのコンポーネントです
 */
const BulletedList: React.FC<Props> = (props: Props) => {
  const {
    listContents,
    listStyleType,
    small,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const listBaseClass = 'vb-bulletedList';

  const listItems =
    listContents &&
    listContents.map((listCont, index) => (
      <li key={index} className={`${listBaseClass}__list__listItem`}>
        {listCont.url ? (
          <InlineLink
            href={listCont.url}
            target={listCont.target || ''}
            data-guide={listCont['data-guide']}
            data-test={listCont['data-test']}
            data-tracking={listCont['data-tracking']}
            data-masking={listCont['data-masking']}
            rel={listCont.rel}
          >
            {listCont.value}
          </InlineLink>
        ) : (
          listCont.value
        )}
      </li>
    ));

  switch (listStyleType) {
    case 'decimal':
      return (
        <div
          {...commonProps(
            props,
            listBaseClass,
            { small },
            { marginBottom, marginLeft, marginRight, marginSize, marginTop }
          )}
        >
          <ol
            className={vbClassNames(`${listBaseClass}__list`, {
              modifier: { decimal: true },
            })}
          >
            {listItems}
          </ol>
        </div>
      );
    case 'disc':
    default:
      return (
        <div
          {...commonProps(
            props,
            listBaseClass,
            { small },
            { marginBottom, marginLeft, marginRight, marginSize, marginTop }
          )}
        >
          <ul
            className={vbClassNames(`${listBaseClass}__list`, {
              modifier: { decimal: false },
            })}
          >
            {listItems}
          </ul>
        </div>
      );
  }
};

export default BulletedList;

```

### src/lv2/buttonGroup/ButtonGroup.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../../lv1/buttons/Button';
import ButtonGroup from './ButtonGroup';

export default {
  component: ButtonGroup,
};

export const ButtonGroupComponent = () => (
  <ButtonGroup
    responsive={boolean('Responsive', false, 'ButtonGroup')}
    align={
      select(
        'Align',
        {
          left: 'left',
          center: 'center',
          undefined: '',
        },
        '',
        'ButtonGroup'
      ) || undefined
    }
    mobileButtonLayout={
      select(
        'mobileButtonLayout',
        {
          row: 'row',
          column: 'column',
          undefined: '',
        },
        '',
        'ButtonGroup'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Button primary>OK</Button>
    <Button>キャンセル</Button>
  </ButtonGroup>
);

export const ResponsiveButtonGroup = () => (
  <ButtonGroup
    responsive={true}
    align={
      select(
        'Align',
        {
          left: 'left',
          center: 'center',
          undefined: '',
        },
        '',
        'ButtonGroup'
      ) || undefined
    }
    mobileButtonLayout={
      select(
        'MobileButtonLayout',
        {
          row: 'row',
          column: 'column',
          undefined: '',
        },
        'row',
        'ButtonGroup'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Button primary>OK</Button>
    <Button>キャンセル</Button>
  </ButtonGroup>
);

export const Responsive3Buttons = () => (
  <ButtonGroup
    responsive={true}
    align={
      select(
        'Align',
        {
          left: 'left',
          center: 'center',
          undefined: '',
        },
        '',
        'ButtonGroup'
      ) || undefined
    }
    mobileButtonLayout={
      select(
        'MobileButtonLayout',
        {
          row: 'row',
          column: 'column',
          undefined: '',
        },
        'row',
        'ButtonGroup'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Button appearance="primary">OK</Button>
    <Button>キャンセル</Button>
    <Button appearance="tertiary">他のアクション</Button>
  </ButtonGroup>
);

```

### src/lv2/buttonGroup/ButtonGroup.tsx
```
typescript
import * as React from 'react';
import vbClassNames from '../../utilities/vbClassNames';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = {
  children: React.ReactNodeArray | React.ReactNode;
  align?: 'left' | 'center';
  responsive?: boolean;
  /** レスポンシブビューで、画面幅が狭い場合のボタンの並び方を調整します。 `column` を指定した場合はすべてのボタンが縦に並び、`row` を指定した場合は最初の2つのボタンが横に並び、残りのボタンは縦に並びます */
  mobileButtonLayout?: 'row' | 'column';
} & MarginClassProps &
  CommonProps;

/** 主にレスポンシブビューを想定して、複数のボタンをグループ化して配置します。 */

const ButtonGroup: React.FC<Props> = (props: Props) => {
  const {
    children,
    align,
    responsive,
    mobileButtonLayout,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const childrenArray = React.Children.toArray(children);
  const baseClassName = 'vb-buttonGroup';

  return (
    <div
      {...commonProps(
        props,
        baseClassName,
        {
          responsive,
          alignLeft: align === 'left',
        },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      {childrenArray.length > 1 ? (
        <>
          <div
            className={vbClassNames(`${baseClassName}__topPair`, {
              modifier: { mobileButtonLayoutRow: mobileButtonLayout === 'row' },
            })}
          >
            {childrenArray.slice(0, 2).map(
              (child, i) =>
                child && ( // undefinedが来た場合に備えてnil guardしている
                  <div
                    key={i}
                    className={vbClassNames(`${baseClassName}__topItem`, {
                      modifier: {
                        mobileButtonLayoutRow: mobileButtonLayout === 'row',
                      },
                    })}
                  >
                    {child}
                  </div>
                )
            )}
          </div>
          {childrenArray.slice(2).map(
            (child, i) =>
              child && ( // undefinedが来た場合に備えてnil guardしている
                <div key={i + 2} className="vb-buttonGroup__item">
                  {child}
                </div>
              )
          )}
        </>
      ) : (
        children
      )}
    </div>
  );
};

export default ButtonGroup;

```

### src/lv2/calendar/Calendar.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Calendar from './Calendar';

export default {
  component: Calendar,
};

export const CalendarComponent = () => (
  <Calendar
    year="2018"
    month="12"
    startFromMonday={boolean('StartFromMonday', false, 'Calendar')}
    contents={[
      {
        type: 'TimeRecord',
        date: '2018-12-09',
        status: 'alert',
        dateLabel: '通常',
        openingTime: '20:00',
        endingTime: '24:00',
      },
      {
        type: 'TimeRecord',
        date: '2018-12-10',
        status: 'success',
        dateLabel: '通常',
        openingTime: '9:00',
        endingTime: '19:00',
      },
      {
        type: 'TimeRecord',
        date: '2018-12-11',
        dateLabel: '通常',
        openingTime: '9:00',
        endingTime: '19:00',
      },
      {
        type: 'TimeRecord',
        date: '2018-12-12',
        dateLabel: '通常',
        openingTime: '9:00',
        endingTime: '19:00',
      },
      {
        type: 'TimeRecord',
        date: '2018-12-15',
        status: 'notice',
        dateLabel: '通常',
        openingTime: '9:00',
        endingTime: '19:00',
      },
    ]}
    nationalHolidays={['2018-12-24']}
    onClickDate={action('click date')}
    {...commonKnobs()}
  />
);

```

### src/lv2/calendar/Calendar.tsx
```
typescript
import * as React from 'react';
import CalendarHead from '../../lv1/calendar/CalendarHead';
import Weeks from './Weeks';
import { TimeRecord } from '../../lv1/calendar/CalendarDate';
import { KeyCodes } from '../../utilities/keyboard';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { startOfMonth, getDate } from 'date-fns';

type Props = {
  year: string;
  month: string;
  contents?: TimeRecord[]; // unionで足していく
  startFromMonday?: boolean;
  nationalHolidays?: string[];
  onClickDate?: (date: string) => void;
} & CommonProps;

export default class Calendar extends React.Component<Props> {
  selectableDateRefs: HTMLDivElement[] = [];
  render(): React.ReactElement {
    this.selectableDateRefs = [];

    const {
      year,
      month,
      startFromMonday,
      contents,
      nationalHolidays,
      onClickDate,
    } = this.props;
    const starDateOfMonth = startOfMonth(new Date(`${year}/${month}/1`));
    const weekStartsOn = startFromMonday ? 1 : 0;
    return (
      <table {...commonProps(this.props, 'vb-calendar')}>
        <thead>
          <CalendarHead weekStartsOn={weekStartsOn} />
        </thead>
        <tbody>
          <Weeks
            weekStartsOn={weekStartsOn}
            starDateOfMonth={starDateOfMonth}
            contents={contents}
            nationalHolidays={nationalHolidays}
            onClickDate={onClickDate}
            selectableDateRefs={this.selectableDateRefs}
            handleKeyDownSelectedDate={this.handleKeyDownSelectedDate.bind(
              this
            )}
          />
        </tbody>
      </table>
    );
  }

  handleKeyDownSelectedDate = (
    e: React.KeyboardEvent<HTMLDivElement>,
    date: string,
    onClickDate?: (date: string) => void
  ): void => {
    const dateNum = getDate(new Date(date));
    switch (e.keyCode) {
      case KeyCodes.ESC:
        e.preventDefault();
        this.selectableDateRefs[dateNum - 1] &&
          this.selectableDateRefs[dateNum - 1].blur();
        break;
      case KeyCodes.UP:
        e.preventDefault();
        this.selectableDateRefs[dateNum - 8] &&
          this.selectableDateRefs[dateNum - 8].focus();
        break;
      case KeyCodes.DOWN:
        e.preventDefault();
        this.selectableDateRefs[dateNum + 6] &&
          this.selectableDateRefs[dateNum + 6].focus();
        break;
      case KeyCodes.LEFT:
        e.preventDefault();
        this.selectableDateRefs[dateNum - 2] &&
          this.selectableDateRefs[dateNum - 2].focus();
        break;
      case KeyCodes.RIGHT:
        e.preventDefault();
        this.selectableDateRefs[dateNum] &&
          this.selectableDateRefs[dateNum].focus();
        break;
      case KeyCodes.ENTER:
        e.preventDefault();
        onClickDate && onClickDate(date);
        break;
    }
  };
}

```

### src/lv2/calendar/DatePicker.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import DatePicker from './DatePicker';

export default {
  component: DatePicker,
};

export const DatePickerComponent = () => (
  <DatePicker
    date={text('Date', '2020-11-15', 'DatePicker')}
    minDate={text('MinDate', '2020-09-15', 'DatePicker')}
    maxDate={text('MaxDate', '2020-12-15', 'DatePicker')}
    onDateClick={action('date click')}
    {...commonKnobs()}
  />
);

```

### src/lv2/calendar/DatePicker.tsx
```
typescript
import * as React from 'react';
import {
  format,
  isSameDay,
  addDays,
  startOfMonth,
  addMonths,
  differenceInDays,
  isBefore,
  isAfter,
} from 'date-fns';
import Button from '../../lv1/buttons/Button';
import {
  formatDate,
  getValidDateNearestTarget,
  isValidDateInRange,
  parseDate,
} from '../../utilities/date';
import useUniqueId from '../../hooks/useUniqueId';
import { Keys } from '../../utilities/keyboard';
import { pickCommonProps, CommonProps } from '../../utilities/commonProps';

type Props = {
  date?: string | Date;
  onDateClick: (date: string) => void;
  minDate?: string | Date;
  maxDate?: string | Date;
} & CommonProps;

function DatePicker(
  props: Props,
  ref: React.Ref<HTMLDivElement>
): React.ReactElement {
  const { date, onDateClick, minDate, maxDate } = props;
  const now = new Date();
  const targetDate =
    parseDate(date) || getValidDateNearestTarget(now, minDate, maxDate) || now;
  const [showingMonth, setShowingMonth] = React.useState(targetDate);
  const beginningOfMonth = startOfMonth(showingMonth);
  const beginningOfCalendar = addDays(
    beginningOfMonth,
    beginningOfMonth.getDay() * -1
  );
  const endOfMonth = addDays(addMonths(beginningOfMonth, 1), -1);
  const endOfCalendar = addDays(endOfMonth, 6 - endOfMonth.getDay());
  const countOfWeeks = Math.ceil(
    differenceInDays(endOfCalendar, beginningOfCalendar) / 7
  );
  const weeks = [...Array(countOfWeeks)].map((_, week) =>
    [...Array(7)].map((_, day) => addDays(beginningOfCalendar, week * 7 + day))
  );
  const tableRef = React.useRef<HTMLTableElement>(null);
  const uniqueId = useUniqueId('vb-datePicker');

  React.useEffect(() => {
    const parsedDate = parseDate(date);
    if (parsedDate) {
      setShowingMonth(parsedDate);
    }
  }, [date]);
  React.useEffect(() => {
    const parsedDate = parseDate(date);
    if (parsedDate) {
      const focused = document.activeElement;
      // テーブル内にフォーカスがあるとき、dateやshowingMonthが変化したらそこにフォーカスも移動させる
      // テーブルの外（前/次の月ボタンなど）にフォーカスがあるときは何もしない
      if (focused && tableRef.current && tableRef.current.contains(focused)) {
        const elm = tableRef.current.querySelector(
          `#${uniqueId}__${formatDate(parsedDate)}`
        );
        elm && (elm as HTMLElement).focus();
      }
    }
  }, [date, showingMonth, uniqueId]);

  return (
    <div
      className="vb-datePicker"
      id={uniqueId}
      ref={ref}
      {...pickCommonProps(props)}
    >
      <div className="vb-datePicker__header">
        <Button
          appearance="tertiary"
          small
          onClick={(): void => setShowingMonth(addMonths(showingMonth, -1))}
        >
          前の月
        </Button>
        <div
          className="vb-datePicker__month"
          aria-live="polite"
          aria-atomic="true"
        >
          {format(showingMonth, 'YYYY年M月')}
        </div>
        <Button
          appearance="tertiary"
          small
          onClick={(): void => setShowingMonth(addMonths(showingMonth, 1))}
        >
          次の月
        </Button>
      </div>

      <table className="vb-datePicker__calendar" ref={tableRef}>
        <thead>
          <tr>
            <th className="vb-datePicker__calendarHead" aria-label="日曜日">
              日
            </th>
            <th className="vb-datePicker__calendarHead" aria-label="月曜日">
              月
            </th>
            <th className="vb-datePicker__calendarHead" aria-label="火曜日">
              火
            </th>
            <th className="vb-datePicker__calendarHead" aria-label="水曜日">
              水
            </th>
            <th className="vb-datePicker__calendarHead" aria-label="木曜日">
              木
            </th>
            <th className="vb-datePicker__calendarHead" aria-label="金曜日">
              金
            </th>
            <th className="vb-datePicker__calendarHead" aria-label="土曜日">
              土
            </th>
          </tr>
        </thead>
        <tbody>
          {weeks.map((week, i) => (
            <tr key={i}>
              {week.map((day, j) => {
                const isSelectedDay = date && isSameDay(day, date);
                const isToday = isSameDay(day, now);
                const isDisabledDay = !isValidDateInRange(
                  day,
                  minDate,
                  maxDate
                );
                const isOtherMonth =
                  isBefore(day, beginningOfMonth) || isAfter(day, endOfMonth);

                return (
                  <td
                    key={j}
                    className={`vb-datePicker__calendarCell${
                      isDisabledDay
                        ? ' vb-datePicker__calendarCell--disabled'
                        : ''
                    }${
                      isSelectedDay
                        ? ' vb-datePicker__calendarCell--selected'
                        : ''
                    }${
                      isOtherMonth
                        ? ' vb-datePicker__calendarCell--otherMonth'
                        : ''
                    }`}
                  >
                    <span
                      className="vb-datePicker__dateButton"
                      tabIndex={isDisabledDay || isOtherMonth ? -1 : 0}
                      onClick={(): void => {
                        !isDisabledDay && onDateClick(formatDate(day));
                      }}
                      onKeyDown={(e): void => {
                        if (
                          !isDisabledDay &&
                          (e.key === Keys.ENTER || e.key === Keys.SPACE)
                        ) {
                          e.preventDefault();
                          onDateClick(formatDate(day));
                        }
                      }}
                      id={`${uniqueId}__${formatDate(day)}`}
                      aria-label={`${format(day, 'YYYY年M月D日')}`}
                      aria-current={isToday ? 'date' : undefined}
                      aria-pressed={!!isSelectedDay}
                      role="button"
                      aria-disabled={isDisabledDay}
                    >
                      <span
                        className={`vb-datePicker__dateNumber${
                          isToday ? ' vb-datePicker__dateNumber--today' : ''
                        }`}
                      >
                        {format(day, 'D')}
                      </span>
                    </span>
                  </td>
                );
              })}
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
export default React.forwardRef(DatePicker);

```

### src/lv2/calendar/Week.tsx
```
typescript
import * as React from 'react';
import CalendarDate, { TimeRecord } from '../../lv1/calendar/CalendarDate';

import {
  startOfWeek,
  addDays,
  isToday,
  isSunday,
  isSaturday,
  isSameMonth,
  format,
} from 'date-fns';

type Props = {
  weekStartsOn: number;
  starDateOfMonth: Date;
  baseDateOfWeek: Date;
  contents?: Array<TimeRecord>;
  nationalHolidays?: string[];
  onClickDate?: (date: string) => void;
  selectableDateRefs: HTMLDivElement[];
  handleKeyDownSelectedDate: (
    e: React.KeyboardEvent<HTMLDivElement>,
    date: string,
    onClickDate?: (date: string) => void
  ) => void;
};

function selectDateLabel(
  sameMonth: boolean,
  isPrimaryHoliday: boolean,
  isSecondaryHoliday: boolean,
  isNationalHoliday: boolean,
  content?: TimeRecord
): string {
  if (!sameMonth) {
    return '入力不可';
  } else if (content && content.dateLabel) {
    return content.dateLabel;
  } else if (isPrimaryHoliday || isSecondaryHoliday || isNationalHoliday) {
    return '休み';
  } else {
    return '未入力';
  }
}

export default function Week({
  weekStartsOn,
  starDateOfMonth,
  baseDateOfWeek,
  contents,
  nationalHolidays,
  onClickDate,
  selectableDateRefs,
  handleKeyDownSelectedDate,
}: Props): React.ReactElement {
  const startDateOfWeek = startOfWeek(baseDateOfWeek, {
    weekStartsOn: weekStartsOn,
  });

  return (
    <React.Fragment>
      {[...Array(7)].map((unused, i) => {
        const certainDate = addDays(startDateOfWeek, i);
        const formattedDate = format(certainDate, 'YYYY-MM-DD');
        const content: TimeRecord | undefined = contents
          ? contents.filter((content) => content.date === formattedDate)[0]
          : undefined;
        const today = isToday(certainDate);
        const isPrimaryHoliday = isSunday(certainDate);
        const isSecondaryHoliday = isSaturday(certainDate);
        const isNationalHoliday = !!(
          nationalHolidays &&
          nationalHolidays.filter(
            (nationalHoliday) => nationalHoliday === formattedDate
          )[0]
        );
        const sameMonth = isSameMonth(starDateOfMonth, certainDate);
        const dateLabel = selectDateLabel(
          sameMonth,
          isPrimaryHoliday,
          isSecondaryHoliday,
          isNationalHoliday,
          content
        );

        return (
          <CalendarDate
            key={i}
            date={formattedDate}
            dateLabel={dateLabel}
            today={today}
            primaryHoliday={isPrimaryHoliday}
            secondaryHoliday={isSecondaryHoliday}
            nationalHoliday={isNationalHoliday}
            disabled={!sameMonth}
            content={content}
            onClickDate={onClickDate}
            selectableDateRef={(el: HTMLDivElement | null): void => {
              el && selectableDateRefs.push(el);
            }}
            onKeyDown={handleKeyDownSelectedDate}
          />
        );
      })}
    </React.Fragment>
  );
}

```

### src/lv2/calendar/Weeks.tsx
```
typescript
import * as React from 'react';
import Week from './Week';
import { TimeRecord } from '../../lv1/calendar/CalendarDate';
import { differenceInCalendarWeeks, endOfMonth, addWeeks } from 'date-fns';

type Props = {
  weekStartsOn: number;
  starDateOfMonth: Date;
  contents?: TimeRecord[];
  nationalHolidays?: string[];
  onClickDate?: (date: string) => void;
  selectableDateRefs: HTMLDivElement[];
  handleKeyDownSelectedDate: (
    e: React.KeyboardEvent<HTMLDivElement>,
    date: string,
    onClickDate?: (date: string) => void
  ) => void;
};

export default function Weeks({
  weekStartsOn,
  starDateOfMonth,
  contents,
  nationalHolidays,
  onClickDate,
  selectableDateRefs,
  handleKeyDownSelectedDate,
}: Props): React.ReactElement {
  // date-fns v2系から使える https://date-fns.org/v2.0.0/docs/getWeeksInMonth の実装と揃える
  // [FYI] https://github.com/date-fns/date-fns/blob/v2.0.0/src/getWeeksInMonth/index.js#L44
  const totalWeek =
    differenceInCalendarWeeks(endOfMonth(starDateOfMonth), starDateOfMonth, {
      weekStartsOn: weekStartsOn,
    }) + 1;

  return (
    <React.Fragment>
      {[...Array(totalWeek)].map((unused, i) => (
        <tr key={i}>
          <Week
            weekStartsOn={weekStartsOn}
            starDateOfMonth={starDateOfMonth}
            baseDateOfWeek={addWeeks(starDateOfMonth, i)}
            contents={contents}
            nationalHolidays={nationalHolidays}
            onClickDate={onClickDate}
            selectableDateRefs={selectableDateRefs}
            handleKeyDownSelectedDate={handleKeyDownSelectedDate}
          />
        </tr>
      ))}
    </React.Fragment>
  );
}

```

### src/lv2/cardNavigation/CardNavigation.stories.tsx
```
typescript
import * as React from 'react';

import CardNavigation from './CardNavigation';
import { text } from '@storybook/addon-knobs';
import { MdCreditCard, MdPerson, MdReportProblem } from 'react-icons/md';

export default {
  component: CardNavigation,
};

export const CardNavigationComponent = () => (
  <CardNavigation
    navigationContents={[
      {
        title: text('Title1', 'カードナビゲーション', 'CardNavigation'),
        text: text(
          'Text1',
          'テキストテキストテキストテキストテキストテキストテキスト',
          'CardNavigation'
        ),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdCreditCard,
      },
      {
        title: text('Title2', 'URLなし', 'CardNavigation'),
        text: text('Text2', 'URLなし', 'CardNavigation'),
        IconComponent: MdPerson,
      },
      {
        title: text('Title3', 'TEXTなし', 'CardNavigation'),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdReportProblem,
      },
      {
        title: text(
          'Title4',
          '長い長い長い長い長い長い長い長い長い長いタイトル',
          'CardNavigation'
        ),
        text: text(
          'Text4',
          'テキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト',
          'CardNavigation'
        ),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdReportProblem,
      },
    ]}
  />
);

export const CardNavigationComponentLength4 = () => (
  <CardNavigation
    navigationContents={[
      {
        title: text('Title4-1', 'カードナビ', 'CardNavigation'),
        text: text(
          'Text4-1',
          'テキストテキストテキストテキストテキストテキスト',
          'CardNavigation'
        ),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdCreditCard,
      },
      {
        title: text('Title4-2', 'URLなし', 'CardNavigation'),
        text: text('Text4-2', 'URLなし', 'CardNavigation'),
        IconComponent: MdPerson,
      },
      {
        title: text('Title4-3', 'TEXTなし', 'CardNavigation'),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdReportProblem,
      },
      {
        title: text('Title4-4', 'カードナビ', 'CardNavigation'),
        text: text(
          'Text4-4',
          'テキストテキストテキストテキストテキストテキスト',
          'CardNavigation'
        ),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdCreditCard,
      },
    ]}
  />
);

export const CardNavigationComponentLength2 = () => (
  <CardNavigation
    navigationContents={[
      {
        title: text('Title1', 'カードナビゲーション', 'CardNavigation'),
        text: text(
          'Text1',
          'テキストテキストテキストテキストテキストテキストテキスト',
          'CardNavigation'
        ),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdCreditCard,
      },
      {
        title: text('Title2', 'URLなし', 'CardNavigation'),
        text: text('Text2', 'URLなし', 'CardNavigation'),
        IconComponent: MdPerson,
      },
    ]}
  />
);

export const CardNavigationComponentLength1 = () => (
  <CardNavigation
    navigationContents={[
      {
        title: text('Title1', 'カードナビゲーション', 'CardNavigation'),
        text: text(
          'Text1',
          'テキストテキストテキストテキストテキストテキストテキスト',
          'CardNavigation'
        ),
        url: text('Url', '#', 'CardNavigation'),
        IconComponent: MdCreditCard,
      },
    ]}
  />
);

```

### src/lv2/cardNavigation/CardNavigation.tsx
```
typescript
import * as React from 'react';
import { MdKeyboardArrowRight } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import MaterialIcon from '../../lv1/icons/MaterialIcon';
import Paragraph from '../../lv1/typography/Paragraph';
import SectionTitle from '../../lv1/typography/SectionTitle';
import CardBase from '../../lv1/bases/CardBase';

type Props = {
  navigationContents: Array<{
    title: React.ReactNode;
    text?: React.ReactNode;
    url?: string;
    IconComponent?: React.ElementType;
  }>;
} & CommonProps;

const CardNavigation: React.FC<Props> = (props: Props) => {
  const { navigationContents } = props;
  const className = 'vb-cardNavigation';
  return (
    <div {...commonProps(props, className)}>
      {navigationContents.map((naviContent, index) => (
        <div
          className={`${className}__item ${className}__item--${navigationContents.length}`}
          key={index}
        >
          <CardBase url={naviContent.url} clickable>
            <div
              className={`${className}__content ${className}__content--${navigationContents.length}`}
            >
              <div className={`${className}__main`}>
                <div
                  className={`${className}__title${
                    naviContent.text ? ` ${className}__title--text` : ''
                  }`}
                >
                  {naviContent.IconComponent && (
                    <naviContent.IconComponent
                      className={`${className}__icon`}
                      focusable={false}
                    />
                  )}
                  <SectionTitle>{naviContent.title}</SectionTitle>
                </div>
                {naviContent.text && <Paragraph>{naviContent.text}</Paragraph>}
              </div>
              <div className={`${className}__arrow`}>
                <MaterialIcon IconComponent={MdKeyboardArrowRight} />
              </div>
            </div>
          </CardBase>
        </div>
      ))}
    </div>
  );
};

export default CardNavigation;

```

### src/lv2/combobox/ApiComboBox.stories.tsx
```
typescript
/* eslint-disable react/display-name */
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import ApiComboBox, {
  SingleComboBoxOption,
  useApiComboBox,
} from './ApiComboBox';
import { FormControlGroup, TextField } from '../..';
import { FormControl } from '..';
import { boolean } from '@storybook/addon-knobs';
import { SubSectionTitle } from '../../lv1';
import Button from '../../lv1/buttons/Button';

type Item = {
  id: number;
  name: string;
  shortcut?: string;
  shortcutNum?: string;
  disabled?: boolean;
  other_1?: string;
  other_2?: string;
};

const createMockApi = (suffix: string) => ({
  async fetch({ name, page }: { name: string; page: number }) {
    // eslint-disable-next-line compat/compat
    await new Promise((resolve) => setTimeout(resolve, 2000));

    const limit = 30;
    const items = Array(limit)
      .fill(undefined)
      .map((_, i) => {
        const baseNum = (page - 1) * limit + i + 1;
        return {
          id: baseNum,
          name: `${suffix}_${baseNum}`,
          shortcut: `hinmoku_${baseNum + 1}`,
          shortcutNum: `品目${baseNum + 2}`,
          other_1: `その他の項目A_${baseNum}`,
          other_2: `その他の項目B_${baseNum}`,
        };
      }) as Item[];

    return {
      items: name
        ? items.filter(
            (item) =>
              item.name.indexOf(name) > -1 ||
              (item.shortcut && item.shortcut.indexOf(name) > -1) ||
              (item.shortcutNum && item.shortcutNum.indexOf(name) > -1)
          )
        : items,
      meta: {
        limit,
        currentPage: page,
        totalPages: 100,
        totalCount: 498,
      },
    };
  },
});

export default {
  component: ApiComboBox,
};

export const ApiComboboxComponent = () => {
  const [value, setValue] = React.useState<SingleComboBoxOption>();
  const items = useApiComboBox<Item>({
    fetchItems: createMockApi('item').fetch,
    createOptions: (items) =>
      items.map(
        ({ id, name, shortcut, shortcutNum }): SingleComboBoxOption => ({
          id,
          label: name,
          keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
          disabled: id % 10 === 0,
        })
      ),
  });

  return (
    <ApiComboBox
      value={value}
      createNewItem={(fieldValue?: string) =>
        setValue({ id: 10000, label: fieldValue || '' })
      }
      onChange={(opt) => {
        setValue(opt);
      }}
      {...items}
      borderless={boolean('borderless', false, 'ApiComboBox')}
      {...commonKnobs()}
    />
  );
};

const useFetchItemA = () => {
  return useApiComboBox<Item>({
    fetchItems: createMockApi('item_A').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });
};

const useFetchItemB = () => {
  return useApiComboBox<Item>({
    fetchItems: createMockApi('item_B').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });
};

const useFetchItemC = () => {
  return useApiComboBox<Item>({
    fetchItems: createMockApi('item_C').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });
};

const ComboBoxLine = ({
  id,
  itemA,
  itemB,
  itemC,
}: {
  id: number;
  itemA: ReturnType<typeof useFetchItemA>;
  itemB: ReturnType<typeof useFetchItemB>;
  itemC: ReturnType<typeof useFetchItemC>;
}) => {
  const [valueA, setValueA] = React.useState<SingleComboBoxOption>();
  const [valueB, setValueB] = React.useState<SingleComboBoxOption>();
  const [valueC, setValueC] = React.useState<SingleComboBoxOption>();

  return (
    <FormControlGroup key={id} mt={id > 1 ? 1 : undefined}>
      <FormControl label="id">
        <TextField value={`${id}`} width="xSmall" disabled />
      </FormControl>
      <FormControl label="item_A" ml={1}>
        <ApiComboBox
          value={valueA}
          onChange={(opt) => {
            setValueA(opt);
          }}
          {...itemA}
        />
      </FormControl>
      <FormControl label="item_B" ml={1}>
        <ApiComboBox
          value={valueB}
          onChange={(opt) => {
            setValueB(opt);
          }}
          {...itemB}
        />
      </FormControl>
      <FormControl label="item_C" ml={1}>
        <ApiComboBox
          value={valueC}
          onChange={(opt) => {
            setValueC(opt);
          }}
          {...itemC}
        />
      </FormControl>
    </FormControlGroup>
  );
};

export const MultiLineAndRow = () => {
  const itemA = useFetchItemA();
  const itemB = useFetchItemB();
  const itemC = useFetchItemC();

  return Array(5)
    .fill(undefined)
    .map((_, i) => (
      <ComboBoxLine
        key={i}
        id={i + 1}
        itemA={itemA}
        itemB={itemB}
        itemC={itemC}
      />
    ));
};

const useFetchBankAccount = () => {
  const initialName = '銀行_20';
  const [selectedBank, setSelectedBank] =
    React.useState<SingleComboBoxOption>();
  const [bankNameKana, setBankNameKana] = React.useState<string>();
  const [bankCode, setBankCode] = React.useState<string>();

  const bank = useApiComboBox<Item>({
    initialName,
    fetchItems: createMockApi('銀行').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });

  React.useEffect(() => {
    const initialBank = bank.items.find(({ name }) => name === initialName);

    if (initialBank) {
      setSelectedBank(bank.createOptions([initialBank])[0]);
      setBankNameKana(initialBank.other_1);
      setBankCode(initialBank.other_2);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [bank.items]);

  return {
    ...bank,
    selectedBank,
    setSelectedBank,
    bankNameKana,
    setBankNameKana,
    bankCode,
    setBankCode,
  };
};

const useFetchBankBranch = (selectedBankLabel?: string) => {
  const [selectedBranch, setSelectedBranch] =
    React.useState<SingleComboBoxOption>();
  const [branchNameKana, setBranchNameKana] = React.useState<string>();
  const [branchCode, setBranchCode] = React.useState<string>();

  const branch = useApiComboBox<Item>({
    fetchItems: createMockApi(`${selectedBankLabel}_支店`).fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });

  React.useEffect(() => {
    if (selectedBankLabel) {
      branch.fetchItems();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [selectedBankLabel]);

  React.useEffect(() => {
    if (branch.items.length > 0) {
      setSelectedBranch(branch.createOptions([branch.items[0]])[0]);
      setBranchNameKana(branch.items[0].other_1);
      setBranchCode(branch.items[0].other_2);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [branch.items]);

  return {
    ...branch,
    selectedBranch,
    setSelectedBranch,
    branchNameKana,
    setBranchNameKana,
    branchCode,
    setBranchCode,
  };
};

export const UsingWrappedHooksForOtherComponents = () => {
  const {
    selectedBank,
    setSelectedBank,
    bankNameKana,
    setBankNameKana,
    bankCode,
    setBankCode,
    ...bank
  } = useFetchBankAccount();
  const {
    selectedBranch,
    setSelectedBranch,
    branchNameKana,
    setBranchNameKana,
    branchCode,
    setBranchCode,
    ...branch
  } = useFetchBankBranch(selectedBank?.label);

  return (
    <>
      <SubSectionTitle>選択に応じて他のフィールドに値が入る</SubSectionTitle>
      <FormControlGroup mt={0.5}>
        <FormControl label="銀行名">
          <ApiComboBox
            value={selectedBank}
            onChange={(opt) => {
              setSelectedBank(opt);
              setBankNameKana(
                bank.items.find(({ id }) => id === opt?.id)?.other_1
              );
              setBankCode(bank.items.find(({ id }) => id === opt?.id)?.other_2);
            }}
            {...bank}
          />
        </FormControl>
        <FormControl label="銀行名（カナ）" ml={1}>
          <TextField
            value={bankNameKana}
            onChange={(e) => setBankNameKana(e.target.value)}
          />
        </FormControl>
        <FormControl label="銀行コード" ml={1}>
          <TextField
            value={bankCode}
            onChange={(e) => setBankCode(e.target.value)}
          />
        </FormControl>
      </FormControlGroup>
      <FormControlGroup mt={1}>
        <FormControl label="支店名">
          <ApiComboBox
            value={selectedBranch}
            onChange={(opt) => {
              setSelectedBranch(opt);
              setBranchNameKana(
                branch.items.find(({ id }) => id === opt?.id)?.other_1
              );
              setBranchCode(
                branch.items.find(({ id }) => id === opt?.id)?.other_2
              );
            }}
            {...branch}
          />
        </FormControl>
        <FormControl label="支店名（カナ）" ml={1}>
          <TextField
            value={branchNameKana}
            onChange={(e) => setBranchNameKana(e.target.value)}
          />
        </FormControl>
        <FormControl label="支店コード" ml={1}>
          <TextField
            value={branchCode}
            onChange={(e) => setBranchCode(e.target.value)}
          />
        </FormControl>
      </FormControlGroup>
    </>
  );
};

export const ManualFocus = () => {
  const ref = React.useRef<HTMLInputElement>(null);
  const onClick = () => {
    ref.current?.focus();
  };
  const [value, setValue] = React.useState<SingleComboBoxOption>();
  const items = useApiComboBox<Item>({
    fetchItems: createMockApi('item').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });

  return (
    <>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <ApiComboBox
        ref={ref}
        value={value}
        createNewItem={(fieldValue?: string) =>
          setValue({ id: 10000, label: fieldValue || '' })
        }
        onChange={(opt) => {
          setValue(opt);
        }}
        {...items}
        borderless={boolean('borderless', false, 'ApiComboBox')}
      />
    </>
  );
};

export const LongOption = () => {
  const [value, setValue] = React.useState<SingleComboBoxOption>();
  const items = useApiComboBox<Item>({
    fetchItems: createMockApi(
      'LongLongLongLongLongLongLongLongLongLongLongLongLongLongLongLongLongLongLongOption'
    ).fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });

  return (
    <ApiComboBox
      value={value}
      createNewItem={(fieldValue?: string) =>
        setValue({ id: 10000, label: fieldValue || '' })
      }
      onChange={(opt) => {
        setValue(opt);
      }}
      {...items}
      borderless={boolean('borderless', false, 'ApiComboBox')}
      {...commonKnobs()}
    />
  );
};

export const WithSubLabel = () => {
  const [value, setValue] = React.useState<SingleComboBoxOption>();
  const itemsWithSubLabel = useApiComboBox<Item>({
    fetchItems: createMockApi('item').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        subLabel: shortcut,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });

  return (
    <ApiComboBox
      value={value}
      createNewItem={(fieldValue?: string) =>
        setValue({ id: 10000, label: fieldValue || '' })
      }
      onChange={(opt) => {
        setValue(opt);
      }}
      {...itemsWithSubLabel}
      borderless={boolean('borderless', false, 'ApiComboBox')}
      {...commonKnobs()}
    />
  );
};

```

### src/lv2/combobox/ApiComboBox.tsx
```
typescript
import * as React from 'react';
import { MdExpandMore } from 'react-icons/md';
import {
  MarginClassProps,
  pickMarginClassProps,
} from '../../utilities/marginClasses';
import commonProps, {
  CommonProps,
  pickCommonDataProps,
} from '../../utilities/commonProps';
import TextField from '../../lv1/forms/TextField';
import PopupBase from '../../lv1/bases/PopupBase';
import MarginBase from '../../lv1/bases/MarginBase';
import useUniqueId from '../../hooks/useUniqueId';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import Note from '../../lv1/typography/Note';
import ScrollPortal from '../../utilities/ScrollPortal';
import { ItemLabel } from './ItemLabel';
import {
  SingleComboBoxOption,
  InternalComboBoxOption,
  useAdjustListPosition,
  createListBoxClassName,
  FetchParams,
  ApiMetaData,
} from './hooks';
import { useApiComboBoxInternal } from './hooks/apiComboBox';
import { LoadMoreItem } from './LoadMoreItem';
import InlineSpinner from '../../lv1/InlineSpinner';
import { CreateNewItem } from './CreateNewItem';
import { pickFunctionalMarginProps } from '../../utilities/functionalMarginClasses';
import vbClassNames from '../../utilities/vbClassNames';

export { useApiComboBox } from './hooks/apiComboBox';
export type { SingleComboBoxOption } from './hooks';
type PropsFromTextField = Pick<
  Parameters<typeof TextField>[0],
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'disabled'
  | 'error'
  | 'small'
  | 'large'
  | 'width'
  | 'onInput'
  | 'onKeyDown'
  | 'borderless'
>;

type Props = {
  /**
   * コンボボックスに表示するためのデータを取得するメソッドです。
   * 検索やページネーションのタイミングで呼び出されます。
   */
  fetchItems: (params: FetchParams) => Promise<any>;
  /**
   * APIのローディング状態です。trueの間はコンボボックス上にスピナーが表示されます。
   */
  isLoading: boolean;
  /**
   * ページネーションのためのメタ情報です。
   */
  meta: ApiMetaData;
  /**
   * 新規登録時のハンドラです。新規登録を表示するか否かの判定も兼ねています。
   */
  createNewItem?: (fieldValue: string) => void;
  value?: SingleComboBoxOption;
  options: SingleComboBoxOption[];
  listWidth?: 'xSmall' | 'small' | 'medium' | 'large';
  emptyMessage?: React.ReactNode;
  onChange?: (option?: SingleComboBoxOption) => void;
  onBlur?: (
    e: React.FormEvent,
    fetchParams: FetchParams,
    value?: SingleComboBoxOption
  ) => void;
  onFocus?: (
    e: React.FormEvent,
    fetchParams: FetchParams,
    isFieldChanged: boolean,
    value?: SingleComboBoxOption
  ) => void;
} & PropsFromTextField &
  MarginClassProps &
  CommonProps;

function ApiComboBoxInner(
  props: Props,
  ref?: React.Ref<HTMLInputElement> | React.MutableRefObject<HTMLInputElement>
): React.ReactElement {
  const {
    value,
    options,
    id,
    label,
    labelledby,
    placeholder,
    name,
    required,
    disabled,
    error,
    small,
    large,
    borderless,
    width,
    listWidth,
    emptyMessage,
    isLoading,
    onChange,
    onFocus,
    onBlur,
    onInput,
    onKeyDown,
    fetchItems,
    meta: { currentPage, totalPages },
    createNewItem,
  } = props;

  const uniqueId = useUniqueId('vb-comboBox');
  const {
    fieldValue,
    isLoadingMore,
    isOpen,
    listOptionsRef,
    loadMore,
    onFieldBlur,
    onFieldChange,
    onFieldFocus,
    onFieldKeyDown,
    onSelectOption,
    selectedIndex,
    selectedOptionRef,
  } = useApiComboBoxInternal({
    createNewItem,
    currentPage,
    fetchItems,
    onBlur,
    onChange,
    onFocus,
    onKeyDown,
    options,
    totalPages,
    value,
  });
  const listBoxClassName = createListBoxClassName({ isOpen, listWidth, width });
  const { textFieldRef, listOptionsMaxHeight } = useAdjustListPosition(
    isOpen,
    ref
  );
  const hasNextPages = currentPage < totalPages;
  const listIsEmpty = !isLoading && options.length === 0;
  const isLoadingAll = isLoading && !isLoadingMore;

  return (
    <div {...commonProps(pickCommonDataProps(props), 'vb-comboBox')}>
      <TextField
        ref={textFieldRef}
        value={fieldValue}
        id={id}
        label={label}
        labelledby={labelledby}
        name={name}
        required={required}
        disabled={disabled}
        placeholder={placeholder}
        error={error}
        small={small}
        large={large}
        width={width}
        borderless={borderless}
        onBlur={onFieldBlur}
        onFocus={onFieldFocus}
        onChange={onFieldChange}
        onInput={onInput}
        onKeyDown={onFieldKeyDown}
        role="combobox"
        autoComplete="off"
        aria-expanded={isOpen}
        aria-autocomplete="list"
        aria-controls={`${uniqueId}__listbox`}
        aria-haspopup="listbox"
        aria-activedescendant={
          selectedIndex >= 0 && isOpen
            ? `${uniqueId}__listOption__${selectedIndex}`
            : undefined
        }
        aria-describedby={`${uniqueId}__description`}
        aria-atomic={true}
        IconComponent={MdExpandMore}
        loading={isLoadingAll}
        {...pickFunctionalMarginProps(props)}
        {...pickMarginClassProps(props)}
      />
      <VisuallyHidden id={`${uniqueId}__description`}>
        上下キーで選択、Enterキーで確定できます
      </VisuallyHidden>
      <ScrollPortal
        isActive={isOpen}
        onOverflow={() => textFieldRef.current && textFieldRef.current.blur()}
        positionalBaseElement={textFieldRef.current}
        data-masking={props['data-masking']}
      >
        <div
          id={`${uniqueId}__listbox`}
          className={listBoxClassName}
          role="listbox"
          tabIndex={-1}
          onMouseDown={(e: React.MouseEvent): void => e.preventDefault()} // blur抑止のため、やむをえずonMouseDownを書いてる
        >
          <PopupBase paddingSize="small">
            <MarginBase ma={-1}>
              <div
                className="vb-comboBox__listOptions"
                ref={listOptionsRef}
                style={{ maxHeight: listOptionsMaxHeight }}
              >
                {!listIsEmpty ? (
                  options.map((option: InternalComboBoxOption, i: number) => {
                    const isSelected = i === selectedIndex;
                    return (
                      /* eslint-disable-next-line jsx-a11y/click-events-have-key-events */
                      <div
                        id={`${uniqueId}__listOption__${i}`}
                        key={i}
                        className={vbClassNames('vb-comboBox__listOption', {
                          modifier: {
                            selected: isSelected,
                            disabled: option.disabled,
                          },
                        })}
                        role="option"
                        aria-selected={!(option.disabled || !isSelected)}
                        aria-disabled={option.disabled}
                        tabIndex={-1}
                        onClick={(): void => onSelectOption(option)}
                        ref={isSelected ? selectedOptionRef : undefined}
                      >
                        <ItemLabel fieldValue={fieldValue} option={option} />
                        {option.subLabel && (
                          <div className="vb-comboBox__listOptionSubLabel">
                            {option.subLabel}
                          </div>
                        )}
                      </div>
                    );
                  })
                ) : isLoadingAll ? null : (
                  <div className="vb-comboBox__emptyMessage">
                    <Note>{emptyMessage || '該当する候補はありません'}</Note>
                  </div>
                )}

                {isLoadingMore ? (
                  <div className="vb-comboBox__spinner">
                    <InlineSpinner isLoading />
                  </div>
                ) : (
                  !isLoading &&
                  !listIsEmpty &&
                  hasNextPages && (
                    <LoadMoreItem
                      fieldValue={fieldValue}
                      isSelected={selectedIndex === options.length}
                      loadMore={loadMore}
                      selectedOptionRef={selectedOptionRef}
                      uniqueId={uniqueId}
                    />
                  )
                )}
                {createNewItem &&
                  !options.find(({ label }) => label === fieldValue) && (
                    <CreateNewItem
                      createNewItem={createNewItem}
                      fieldValue={fieldValue}
                      isSelected={
                        selectedIndex ===
                        options.length + (hasNextPages ? 1 : 0)
                      }
                      selectedOptionRef={selectedOptionRef}
                      uniqueId={uniqueId}
                    />
                  )}
              </div>
            </MarginBase>
          </PopupBase>
        </div>
      </ScrollPortal>
    </div>
  );
}

/**
 * SingleComboBox に API による検索とページネーションの機能を付与したコンポーネントです。
 *
 * * リソース管理のため、基本的には`useApiComboBox`を併用してください
 * * リスト内の項目が固定されている場合は`SingleComboBox`を使用してください。
 */
const ApiComboBox = React.forwardRef(ApiComboBoxInner);
export default ApiComboBox;

```

### src/lv2/combobox/ApiMultiComboBox.stories.tsx
```
typescript
/* eslint-disable react/display-name */
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import ApiMultiComboBox, {
  MultiComboBoxOption,
  useApiMultiComboBox,
} from './ApiMultiComboBox';
import { FormControlGroup, TextField } from '../..';
import { FormControl } from '..';
import { boolean, text } from '@storybook/addon-knobs';
import Button from '../../lv1/buttons/Button';

type Item = {
  id: number;
  name: string;
  shortcut?: string;
  shortcutNum?: string;
  disabled?: boolean;
  other_1?: string;
  other_2?: string;
};

const createMockApi = (suffix: string) => ({
  async fetch({ name, page }: { name: string; page: number }) {
    // eslint-disable-next-line compat/compat
    await new Promise((resolve) => setTimeout(resolve, 3000));

    const limit = 30;
    const items = Array(limit)
      .fill(undefined)
      .map((_, i) => {
        const baseNum = (page - 1) * limit + i + 1;
        return {
          id: baseNum,
          name: `${suffix}_${baseNum}`,
          shortcut: `hinmoku_${baseNum + 1}`,
          shortcutNum: `品目${baseNum + 2}`,
          other_1: `その他の項目A_${baseNum}`,
          other_2: `その他の項目B_${baseNum}`,
        };
      }) as Item[];

    return {
      items: name
        ? items.filter(
            (item) =>
              item.name.indexOf(name) > -1 ||
              (item.shortcut && item.shortcut.indexOf(name) > -1) ||
              (item.shortcutNum && item.shortcutNum.indexOf(name) > -1)
          )
        : items,
      meta: {
        limit,
        currentPage: page,
        totalPages: 100,
        totalCount: 498,
      },
    };
  },
});

export default {
  component: ApiMultiComboBox,
};

export const ApiMultiComboBoxComponent = () => {
  const [values, setValues] = React.useState<MultiComboBoxOption[]>();
  const items = useApiMultiComboBox<Item>({
    fetchItems: createMockApi('item').fetch,
    createOptions: (items) =>
      items.map(
        ({ id, name, shortcut, shortcutNum }): MultiComboBoxOption => ({
          id,
          label: name,
          keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
          disabled: id % 10 === 0,
        })
      ),
  });

  return (
    <ApiMultiComboBox
      id={text('id', 'apimulticombobox-id', 'ApiMultiComboBox')}
      values={values}
      createNewItem={(fieldValue: string) => {
        if (!fieldValue) return;
        setValues((values) => [
          ...(values ?? []),
          { id: 10000, label: fieldValue },
        ]);
      }}
      onChange={(options) => {
        setValues(options);
      }}
      {...items}
      borderless={boolean('borderless', false, 'ApiMultiComboBox')}
      {...commonKnobs()}
    />
  );
};

const useFetchItemA = () => {
  return useApiMultiComboBox<Item>({
    fetchItems: createMockApi('item_A').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });
};

const useFetchItemB = () => {
  return useApiMultiComboBox<Item>({
    fetchItems: createMockApi('item_B').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });
};

const useFetchItemC = () => {
  return useApiMultiComboBox<Item>({
    fetchItems: createMockApi('item_C').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });
};

const ComboBoxLine = ({
  id,
  itemA,
  itemB,
  itemC,
}: {
  id: number;
  itemA: ReturnType<typeof useFetchItemA>;
  itemB: ReturnType<typeof useFetchItemB>;
  itemC: ReturnType<typeof useFetchItemC>;
}) => {
  const [valuesA, setValuesA] = React.useState<MultiComboBoxOption[]>();
  const [valuesB, setValuesB] = React.useState<MultiComboBoxOption[]>();
  const [valuesC, setValuesC] = React.useState<MultiComboBoxOption[]>();

  return (
    <FormControlGroup key={id} mt={id > 1 ? 1 : undefined}>
      <FormControl label="id">
        <TextField value={`${id}`} width="xSmall" disabled />
      </FormControl>
      <FormControl label="item_A" ml={1}>
        <ApiMultiComboBox
          values={valuesA}
          onChange={(opt) => {
            setValuesA(opt);
          }}
          {...itemA}
        />
      </FormControl>
      <FormControl label="item_B" ml={1}>
        <ApiMultiComboBox
          values={valuesB}
          onChange={(opt) => {
            setValuesB(opt);
          }}
          {...itemB}
        />
      </FormControl>
      <FormControl label="item_C" ml={1}>
        <ApiMultiComboBox
          values={valuesC}
          onChange={(opt) => {
            setValuesC(opt);
          }}
          {...itemC}
        />
      </FormControl>
    </FormControlGroup>
  );
};

export const MultiLineAndRow = () => {
  const itemA = useFetchItemA();
  const itemB = useFetchItemB();
  const itemC = useFetchItemC();

  return Array(5)
    .fill(undefined)
    .map((_, i) => (
      <ComboBoxLine
        key={i}
        id={i + 1}
        itemA={itemA}
        itemB={itemB}
        itemC={itemC}
      />
    ));
};

export const SingleSelect = () => {
  const [values, setValues] = React.useState<MultiComboBoxOption[]>();
  const items = useApiMultiComboBox<Item>({
    fetchItems: createMockApi('item').fetch,
    createOptions: (items) =>
      items.map(({ id, name, shortcut, shortcutNum }) => ({
        id,
        label: name,
        keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
      })),
  });

  return (
    <ApiMultiComboBox
      values={values}
      createNewItem={(fieldValue: string) => {
        if (!fieldValue) return;
        setValues((values) => [
          ...(values ?? []),
          { id: 10000, label: fieldValue },
        ]);
      }}
      onChange={(options) => {
        setValues(options);
      }}
      {...items}
      borderless={boolean('borderless', false, 'ApiMultiComboBox')}
      maxSelectionCount={1}
      {...commonKnobs()}
    />
  );
};

export const ManualFocus = () => {
  const ref = React.useRef<HTMLInputElement>(null);
  const onClick = () => {
    ref.current?.focus();
  };
  const [values, setValues] = React.useState<MultiComboBoxOption[]>();
  const items = useApiMultiComboBox<Item>({
    fetchItems: createMockApi('item').fetch,
    createOptions: (items) =>
      items.map(
        ({ id, name, shortcut, shortcutNum }): MultiComboBoxOption => ({
          id,
          label: name,
          keywords: [shortcut, shortcutNum].filter((v) => v) as string[],
          disabled: id % 10 === 0,
        })
      ),
  });

  return (
    <>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <ApiMultiComboBox
        ref={ref}
        id={text('id', 'apimulticombobox-id', 'ApiMultiComboBox')}
        values={values}
        createNewItem={(fieldValue: string) => {
          if (!fieldValue) return;
          setValues((values) => [
            ...(values ?? []),
            { id: 10000, label: fieldValue },
          ]);
        }}
        onChange={(options) => {
          setValues(options);
        }}
        {...items}
        borderless={boolean('borderless', false, 'ApiMultiComboBox')}
        {...commonKnobs()}
      />
    </>
  );
};

```

### src/lv2/combobox/ApiMultiComboBox.tsx
```
typescript
import * as React from 'react';
import { PopupBase, Note, InlineSpinner } from '../../lv1';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import ScrollPortal from '../../utilities/ScrollPortal';
import useUniqueId from '../../hooks/useUniqueId';
import { LoadMoreItem } from './LoadMoreItem';
import { CreateNewItem } from './CreateNewItem';
import { ItemLabel } from './ItemLabel';
import { PropsFromTextField } from './MultiComboBox';
import { MultiComboBoxField } from './MultiComboBoxField';
import {
  ApiMetaData,
  createListBoxClassName,
  FetchParams,
  MultiComboBoxOption,
  useAdjustListPosition,
} from './hooks';
import { useApiMultiComboBoxInternal } from './hooks/apiMultiComboBox';
import vbClassNames from '../../utilities/vbClassNames';

export { useApiMultiComboBox } from './hooks/apiMultiComboBox';
export type { ApiMetaData } from './hooks';
export type { MultiComboBoxOption } from './hooks';

const baseClassName = 'vb-multiComboBox';

type Props = {
  /**
   * コンボボックスに表示するためのデータを取得するメソッドです。
   * 検索やページネーションのタイミングで呼び出されます。
   */
  fetchItems: (params: FetchParams) => Promise<any>;
  /**
   * APIのローディング状態です。trueの間はコンボボックス上にスピナーが表示されます。
   */
  isLoading: boolean;
  /**
   * ページネーションのためのメタ情報です。
   */
  meta: ApiMetaData;
  /**
   * 新規登録時のハンドラです。新規登録を表示するか否かの判定も兼ねています。
   */
  createNewItem?: (fieldValue: string) => void;
  values?: MultiComboBoxOption[];
  options: MultiComboBoxOption[];
  maxSelectionCount?: number;
  listWidth?: 'xSmall' | 'small' | 'medium' | 'large';
  emptyMessage?: string;
  onChange?: (values: MultiComboBoxOption[]) => void;
  onBlur?: (
    e: React.FormEvent,
    fetchParams: FetchParams,
    values?: MultiComboBoxOption[]
  ) => void;
  onFocus?: () => void;
} & Omit<PropsFromTextField, 'onFocus' | 'onBlur'> &
  CommonProps;

function ApiMultiComboBoxInner(
  props: Props,
  ref?: React.Ref<HTMLInputElement> | React.MutableRefObject<HTMLInputElement>
): React.ReactElement {
  const {
    fetchItems,
    isLoading,
    meta: { currentPage, totalPages },
    createNewItem,
    values = [],
    options,
    maxSelectionCount,
    emptyMessage,
    listWidth,
    id,
    label,
    labelledby,
    name,
    required,
    disabled,
    width,
    error,
    borderless,
    onBlur,
    onFocus,
    onInput,
    onKeyDown,
    onChange,
  } = props;

  const uniqueId = useUniqueId(id || baseClassName);
  const {
    filteredOptions,
    isLoadingMore,
    loadMore,
    fieldValue: textFieldValue,
    isOpen,
    setOpen,
    selectedIndex,
    listOptionsRef,
    selectedOptionRef,
    borderRef,
    onFieldBlur,
    onFieldChange,
    onFieldFocus,
    onFieldKeyDown,
    onSelectOption,
    onRemoveOption,
    onClickNewItem,
  } = useApiMultiComboBoxInternal({
    createNewItem,
    currentPage,
    fetchItems,
    onBlur,
    onChange,
    onFocus,
    onKeyDown,
    options,
    totalPages,
    values,
    maxSelectionCount,
  });

  const listBoxClassName = createListBoxClassName({ isOpen, listWidth, width });
  const { textFieldRef, listOptionsMaxHeight } = useAdjustListPosition(
    isOpen,
    ref
  );
  const hasNextPages = currentPage < totalPages;
  const listIsEmpty = !isLoading && filteredOptions.length === 0;
  const isLoadingAll = isLoading && !isLoadingMore;

  React.useEffect(() => {
    if (maxSelectionCount) {
      if (
        document.activeElement?.isSameNode(textFieldRef.current) &&
        values.length < maxSelectionCount
      ) {
        setOpen(true);
      }
      if (values.length >= maxSelectionCount) {
        setOpen(false);
      }
    }
  }, [values, maxSelectionCount, textFieldRef, setOpen]);

  return (
    <span
      {...commonProps(props, baseClassName, {
        widthXSmall: width === 'xSmall',
        widthSmall: width === 'small',
        widthMedium: width === 'medium' || !width,
        widthLarge: width === 'large',
        widthFull: width === 'full',
      })}
    >
      <MultiComboBoxField
        baseClassName={baseClassName}
        originalId={id}
        uniqueId={uniqueId}
        withBorder={!borderless}
        borderRef={borderRef}
        textFieldRef={textFieldRef}
        selectedIndex={selectedIndex}
        isOpen={isOpen}
        values={values}
        maxSelectionCount={maxSelectionCount}
        textFieldValue={textFieldValue}
        onBlur={onFieldBlur}
        onChange={onFieldChange}
        onFocus={onFieldFocus}
        onKeyDown={onFieldKeyDown}
        onRemoveOption={onRemoveOption}
        name={name}
        width={width}
        disabled={disabled}
        error={error}
        required={required}
        onInput={onInput}
        label={label}
        labelledby={labelledby}
      />
      <ScrollPortal
        isActive={isOpen}
        onOverflow={() => textFieldRef.current && textFieldRef.current.blur()}
        positionalBaseElement={borderRef.current || undefined}
        data-masking={props['data-masking']}
      >
        <div // eslint-disable-line jsx-a11y/no-static-element-interactions
          id={`${uniqueId}__listbox`}
          className={listBoxClassName}
          role="listbox"
          tabIndex={-1}
          onMouseDown={(e: React.MouseEvent): void => e.preventDefault()} // blur抑止のため、やむをえずonMouseDownを書いてる
        >
          <PopupBase paddingSize="zero">
            <div
              className="vb-comboBox__listOptions"
              ref={listOptionsRef}
              style={{ maxHeight: listOptionsMaxHeight }}
            >
              {isLoadingAll ? null : listIsEmpty ? (
                <div className="vb-comboBox__emptyMessage">
                  <Note>{emptyMessage || '該当する候補はありません'}</Note>
                </div>
              ) : (
                filteredOptions.map((option, i) => {
                  const isSelected = i === selectedIndex;
                  return (
                    /* eslint-disable-next-line jsx-a11y/click-events-have-key-events */
                    <div
                      id={`${uniqueId}__listOption__${i}`}
                      key={i}
                      className={vbClassNames('vb-comboBox__listOption', {
                        modifier: {
                          selected: isSelected,
                          disabled: option.disabled,
                        },
                      })}
                      role="option"
                      aria-selected={!(option.disabled || !isSelected)}
                      aria-disabled={option.disabled}
                      tabIndex={-1}
                      onClick={(): void => onSelectOption(option)}
                      ref={isSelected ? selectedOptionRef : undefined}
                    >
                      <ItemLabel fieldValue={textFieldValue} option={option} />
                      {option.type && (
                        <div className="vb-comboBox__listOptionSubLabel">
                          {option.type}
                        </div>
                      )}
                    </div>
                  );
                })
              )}
              {isLoading ? (
                <div className="vb-comboBox__spinner">
                  <InlineSpinner isLoading />
                </div>
              ) : (
                hasNextPages && (
                  <LoadMoreItem
                    fieldValue={textFieldValue}
                    isSelected={selectedIndex === filteredOptions.length}
                    loadMore={loadMore}
                    selectedOptionRef={selectedOptionRef}
                    uniqueId={uniqueId}
                  />
                )
              )}
              {createNewItem &&
                ![...values, ...filteredOptions].find(
                  ({ label }) => label === textFieldValue
                ) && (
                  <CreateNewItem
                    createNewItem={onClickNewItem}
                    fieldValue={textFieldValue}
                    isSelected={
                      selectedIndex ===
                      filteredOptions.length + (hasNextPages ? 1 : 0)
                    }
                    selectedOptionRef={selectedOptionRef}
                    uniqueId={uniqueId}
                  />
                )}
            </div>
          </PopupBase>
        </div>
      </ScrollPortal>
    </span>
  );
}

/**
 * `MultiComboBox` に API による検索とページネーションの機能を付与したコンポーネントです。使い方・使い分けについては `MultiComboBox` も参照してください
 *
 * * リソース管理のため、基本的には`useApiMultiComboBox`を併用してください
 * * リスト内の項目が固定されている場合は`MultiComboBox`を使用してください。
 */
const ApiMultiComboBox = React.forwardRef(ApiMultiComboBoxInner);
export default ApiMultiComboBox;

```

### src/lv2/combobox/CreateNewItem.tsx
```
typescript
import * as React from 'react';
import { MdAdd } from 'react-icons/md';
import vbClassName from '../../utilities/vbClassNames';

type Props = {
  createLabel?: (fieldValue: string) => React.ReactNode;
  createNewItem: (fieldValue: string) => void;
  fieldValue: string;
  isSelected: boolean;
  selectedOptionRef: React.RefObject<HTMLDivElement>;
  uniqueId: string;
};

export const CreateNewItem = ({
  createLabel,
  createNewItem,
  fieldValue,
  isSelected,
  selectedOptionRef,
  uniqueId,
}: Props) => (
  /* eslint-disable-next-line jsx-a11y/click-events-have-key-events */
  <div
    id={`${uniqueId}__listOption__createNew`}
    className={`vb-comboBox__listOption ${
      isSelected ? 'vb-comboBox__listOption--selected' : ''
    }`}
    role="option"
    aria-selected={isSelected}
    tabIndex={-1}
    onClick={() => createNewItem(fieldValue)}
    ref={isSelected ? selectedOptionRef : undefined}
  >
    <div
      className={vbClassName(
        `vb-comboBox__fixedItem ${
          isSelected ? 'vb-comboBox__fixedItem--selected' : ''
        }`,
        {
          modifier: { add: true },
        }
      )}
    >
      <MdAdd
        className={vbClassName('vb-comboBox__fixedItemIcon', {
          modifier: { more: true },
        })}
        focusable={false}
      />
      {createLabel
        ? createLabel(fieldValue)
        : fieldValue
        ? `${fieldValue}（新規登録）`
        : '新規登録'}
    </div>
  </div>
);

```

### src/lv2/combobox/ItemLabel.tsx
```
typescript
import * as React from 'react';
import { MdAdd } from 'react-icons/md';
import vbClassName from '../../utilities/vbClassNames';
import type { InternalComboBoxOption, FixedItems } from './hooks';
import type { TrailingItem } from './hooks/singleComboBox';

export const ItemLabel = ({
  fixedItemOption,
  fieldValue,
  option,
  trailingItem,
}: {
  fixedItemOption?: {
    fixedItems: FixedItems;
    isSelected: boolean;
  };
  fieldValue: string;
  option: InternalComboBoxOption;
  trailingItem?: TrailingItem;
}) => {
  if (option.isTrailingItem && trailingItem) {
    return <>{trailingItem.render(fieldValue)}</>;
  }

  if (fixedItemOption) {
    const { fixedItems, isSelected } = fixedItemOption;
    if (option.fixedItemType === 'more') {
      return (
        <div
          className={vbClassName('vb-comboBox__fixedItem', {
            modifier: { more: true, selected: isSelected },
          })}
        >
          {fixedItems[0].label ? fixedItems[0].label(fieldValue) : 'もっと見る'}
        </div>
      );
    } else if (option.fixedItemType === 'add' && fixedItems[1]) {
      return (
        <div
          className={vbClassName('vb-comboBox__fixedItem', {
            modifier: { add: true, selected: isSelected },
          })}
        >
          <MdAdd
            className={vbClassName('vb-comboBox__fixedItemIcon', {
              modifier: { more: true },
            })}
            focusable={false}
          />
          {fixedItems[1].label
            ? fixedItems[1].label(fieldValue)
            : `${fieldValue}（新規登録）`}
        </div>
      );
    }
  }

  return <div className="vb-comboBox__listOptionLabel">{option.label}</div>;
};

```

### src/lv2/combobox/LoadMoreItem.tsx
```
typescript
import * as React from 'react';
import vbClassName from '../../utilities/vbClassNames';

type Props = {
  createLabel?: (fieldValue: string) => string;
  fieldValue: string;
  isSelected: boolean;
  loadMore: () => void;
  selectedOptionRef: React.RefObject<HTMLDivElement>;
  uniqueId: string;
};

export const LoadMoreItem = ({
  createLabel,
  fieldValue,
  isSelected,
  loadMore,
  selectedOptionRef,
  uniqueId,
}: Props) => (
  /* eslint-disable-next-line jsx-a11y/click-events-have-key-events */
  <div
    id={`${uniqueId}__listOption__loadMore`}
    className={`vb-comboBox__listOption ${
      isSelected ? 'vb-comboBox__listOption--selected' : ''
    }`}
    role="option"
    aria-selected={isSelected}
    tabIndex={-1}
    onClick={loadMore}
    ref={isSelected ? selectedOptionRef : undefined}
  >
    <div
      className={vbClassName(
        `vb-comboBox__fixedItem ${
          isSelected ? 'vb-comboBox__fixedItem--selected' : ''
        }`,
        {
          modifier: { more: true },
        }
      )}
    >
      {createLabel ? createLabel(fieldValue) : 'もっと見る'}
    </div>
  </div>
);

```

### src/lv2/combobox/MultiComboBox.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { FormControl } from '..';
import { MultiComboBoxOption } from './hooks';
import { MultiComboBox } from './MultiComboBox';
import { number, select, text } from '@storybook/addon-knobs';

export default {
  component: MultiComboBox,
};

export const MultiComboBoxComponent = () => {
  const [values, setValues] = React.useState<MultiComboBoxOption[]>([]);

  return (
    <>
      <MultiComboBox
        id={text('id', 'multicombobox-id', 'MultiComboBox')}
        values={values}
        onChange={(v) => setValues(v)}
        options={[
          {
            id: 1,
            type: '取引先',
            label: 'freee株式会社',
            keywords: [
              'ふりーかぶしきがいしゃ',
              'フリーカブシキガイシャ',
              'freee',
            ],
            color: 'RE',
          },
          {
            id: 2,
            type: '取引先',
            label: '株式会社サイトビジット',
            keywords: ['さいとびじっと', 'サイトビジット', 'SiGHTViSiT'],
            color: 'RE',
          },
          {
            id: 3,
            type: 'メモタグ',
            label: '昼ごはん',
            keywords: ['ひるごはん', 'ヒルゴハン', 'lunch', 'hirugohan'],
            color: 'YE',
          },
          {
            id: 4,
            type: 'メモタグ',
            label: '晩ごはん',
            keywords: ['ばんごはん', 'バンゴハン', 'dinner', 'yorugohan'],
            color: 'YE',
          },
          {
            id: 5,
            type: 'メモタグ',
            label: '晩ごはん2',
            keywords: ['ばんごはん2', 'バンゴハンツー', 'dinner', 'yorugohan'],
            color: 'YE',
          },
          {
            id: 6,
            type: 'メモタグ',
            label: '晩ごはん3',
            keywords: [
              'ばんごはん3',
              'バンゴハンスリー',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 7,
            type: 'メモタグ',
            label: '晩ごはん4',
            keywords: [
              'ばんごはん4',
              'バンゴハンフォー',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 8,
            type: 'メモタグ',
            label: '晩ごはん5',
            keywords: [
              'ばんごはん5',
              'バンゴハンファイブ',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 9,
            type: 'メモタグ',
            label: '晩ごはん6',
            keywords: [
              'ばんごはん6',
              'バンゴハンシックス',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 10,
            type: 'メモタグ',
            label: '晩ごはん7',
            keywords: [
              'ばんごはん7',
              'バンゴハンセブン',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 11,
            type: 'メモタグ',
            label: '晩ごはん8',
            keywords: [
              'ばんごはん8',
              'バンゴハンエイト',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 12,
            type: 'メモタグ',
            label: '晩ごはん9',
            keywords: [
              'ばんごはん9',
              'バンゴハンナイン',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 13,
            type: 'メモタグ',
            label: '晩ごはん10',
            keywords: ['ばんごはん10', 'バンゴハンテン', 'dinner', 'yorugohan'],
            color: 'YE',
          },
          {
            id: 14,
            type: 'メモタグ',
            label: '晩ごはん11',
            keywords: [
              'ばんごはん11',
              'バンゴハンイレブン',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            id: 15,
            type: 'メモタグ',
            label: '晩ごはん12',
            keywords: [
              'ばんごはん12',
              'バンゴハントゥエルブ',
              'dinner',
              'yorugohan',
            ],
            color: 'YE',
          },
          {
            label: '海鮮助六',
            type: 'メモタグ',
            id: 16,
            keywords: [
              'かいせんすけろく',
              'kaisensukeroku',
              'さやか',
              'sayaka',
            ],
            color: 'YE',
          },
          {
            label: '助六',
            type: 'メモタグ',
            id: 17,
            keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
            color: 'YE',
          },
          {
            label: '助六',
            type: 'メモタグ',
            id: 18,
            keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
            color: 'YE',
          },
        ]}
        width={select(
          'Width',
          {
            XSmall: 'xSmall',
            Small: 'small',
            Medium: 'medium',
            Large: 'large',
            Full: 'full',
          },
          'large',
          'MultiComboBox'
        )}
        maxSelectionCount={number(
          'maxSelectionCount',
          0,
          undefined,
          'MultiComboBox'
        )}
        {...commonKnobs()}
      />
    </>
  );
};

export const SingleSelect = () => {
  const options: MultiComboBoxOption[] = [
    {
      id: 1,
      type: '取引先',
      label: 'freee株式会社',
      keywords: [
        'ふりーかぶしきがいしゃ',
        'フリーカブシキガイシャ',
        'freee kabusikikaisha',
      ],
      color: 'RE',
    },
    {
      id: 2,
      type: '取引先',
      label: '五反田食品株式会社',
      keywords: [
        'ごたんだしょくひんかぶしきがいしゃ',
        'ゴタンダショクヒンカブシキガイシャ',
        'gotanda shokuhin kabusikikaisha',
      ],
      color: 'RE',
    },
    {
      id: 3,
      type: '取引先',
      label: '大崎インターナショナルデザイン株式会社',
      keywords: [
        'おおさきいんたーなしょなるでざいんかぶしきがいしゃ',
        'オオサキインターナショナルデザインカブシキガイシャ',
        'oosaki international design kabusikikaisha',
      ],
      color: 'RE',
    },
  ];
  const [values, setValues] = React.useState<MultiComboBoxOption[]>([]);

  return (
    <FormControl fieldId="singleSelect" label="単一選択">
      <MultiComboBox
        id="singleSelect"
        values={values}
        options={options}
        onChange={(v) => setValues(v)}
        maxSelectionCount={1}
      />
    </FormControl>
  );
};

export const MaxSelectionCount2 = () => {
  const options: MultiComboBoxOption[] = [
    {
      id: 1,
      type: '取引先',
      label: 'freee株式会社',
      keywords: [
        'ふりーかぶしきがいしゃ',
        'フリーカブシキガイシャ',
        'freee kabusikikaisha',
      ],
      color: 'RE',
    },
    {
      id: 2,
      type: '取引先',
      label: '五反田食品株式会社',
      keywords: [
        'ごたんだしょくひんかぶしきがいしゃ',
        'ゴタンダショクヒンカブシキガイシャ',
        'gotanda shokuhin kabusikikaisha',
      ],
      color: 'RE',
    },
    {
      id: 3,
      type: '取引先',
      label: '大崎インターナショナルデザイン株式会社',
      keywords: [
        'おおさきいんたーなしょなるでざいんかぶしきがいしゃ',
        'オオサキインターナショナルデザインカブシキガイシャ',
        'oosaki international design kabusikikaisha',
      ],
      color: 'RE',
    },
  ];
  const [values, setValues] = React.useState<MultiComboBoxOption[]>([]);

  return (
    <FormControl fieldId="maxSelectionCount2" label="2つまで選べる">
      <MultiComboBox
        id="maxSelectionCount2"
        values={values}
        options={options}
        onChange={(v) => setValues(v)}
        maxSelectionCount={2}
        width="large"
      />
    </FormControl>
  );
};

const dummyOption: MultiComboBoxOption = {
  id: 1,
  type: '取引先',
  label: 'freee株式会社',
  keywords: ['ふりーかぶしきがいしゃ', 'フリーカブシキガイシャ', 'freee'],
  color: 'RE',
};

export const Error = () => {
  return <MultiComboBox values={[dummyOption]} options={[dummyOption]} error />;
};

export const Disabled = () => {
  return (
    <MultiComboBox values={[dummyOption]} options={[dummyOption]} disabled />
  );
};

export const LongOption = () => {
  const options: MultiComboBoxOption[] = [
    {
      id: 1,
      type: '長いテキスト',
      label:
        '寿限無寿限無五劫の擦り切れ海砂利水魚の水行末雲来末風来末喰う寝る処ところに住む処ところ藪柑子の藪柑子パイポパイポパイポのシューリンガンシューリンガングーリンダイグーリンダイのポンポコピーのポンポコナの長久命の長助',
      color: 'RE',
    },
    {
      id: 2,
      type: '長いテキスト',
      label:
        'ある日の暮方の事である。一人の下人が、羅生門の下で雨やみを待っていた。広い門の下には、この男のほかに誰もいない。ただ、所々丹塗の剥げた、大きな円柱に、蟋蟀が一匹とまっている。羅生門が、朱雀大路にある以上は、この男のほかにも、雨やみをする市女笠や揉烏帽子が、もう二三人はありそうなものである。',
      color: 'RE',
    },
  ];
  const [values, setValues] = React.useState<MultiComboBoxOption[]>([
    options[0],
  ]);

  return (
    <MultiComboBox
      values={values}
      options={options}
      onChange={(v) => setValues(v)}
      width="large"
    />
  );
};

```

### src/lv2/combobox/MultiComboBox.tsx
```
typescript
import * as React from 'react';
import { PopupBase, Loading, Note } from '../../lv1';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import ScrollPortal from '../../utilities/ScrollPortal';
import useUniqueId from '../../hooks/useUniqueId';

import {
  createListBoxClassName,
  MultiComboBoxOption,
  useAdjustListPosition,
  useMultiComboBox,
} from './hooks';
import { ItemLabel } from './ItemLabel';
import { MultiComboBoxField, PropsFromTextField } from './MultiComboBoxField';
import vbClassNames from '../../utilities/vbClassNames';
export type { MultiComboBoxOption } from './hooks';

// FIXME: これvibesの外に公開されているのおかしいのでexportやめたい。(型定義は MultiComboBoxFieldのファイルに移動してあるので、あとでこの行を消す)
export type { PropsFromTextField } from './MultiComboBoxField';

type Props = {
  values?: MultiComboBoxOption[];
  options: MultiComboBoxOption[];
  /**
   * 選択できる項目の最大数を指定します。無指定または `0` を指定した場合、いくつでも選択できるようになります
   */
  maxSelectionCount?: number;
  listWidth?: 'xSmall' | 'small' | 'medium' | 'large';
  emptyMessage?: string;
  isLoading?: boolean;
  onChange?: (values: MultiComboBoxOption[]) => void;
} & PropsFromTextField &
  CommonProps;

const baseClassName = 'vb-multiComboBox';

const MultiComboBoxInternal = (
  {
    values = [],
    options,
    isLoading,
    emptyMessage,
    listWidth,
    id,
    label,
    labelledby,
    name,
    required,
    disabled,
    width,
    error,
    borderless,
    onBlur,
    onFocus,
    onInput,
    onKeyDown,
    onChange,
    maxSelectionCount,
    ...props
  }: Props,
  ref: React.Ref<HTMLInputElement>
) => {
  const {
    fieldValue: textFieldValue,
    setFieldValue: setTextFieldValue,
    isOpen,
    setOpen,
    selectedIndex,
    setSelectedIndex,
    borderRef,
    selectedOptionRef,
    listOptionsRef,
    filteredOptions,
    onSelectOption,
    onRemoveOption,
    handleKeyDown,
  } = useMultiComboBox({
    values,
    options,
    onChange,
    onKeyDown,
    maxSelectionCount,
    alreadyFilteredByFieldValue: false,
  });

  const uniqueId = useUniqueId(id || baseClassName);
  const { textFieldRef, listOptionsMaxHeight } = useAdjustListPosition(
    isOpen,
    ref
  );
  const listBoxClassName = createListBoxClassName({ isOpen, listWidth, width });

  React.useEffect(() => {
    if (maxSelectionCount) {
      if (
        document.activeElement?.isSameNode(textFieldRef.current) &&
        values.length < maxSelectionCount
      ) {
        setOpen(true);
      }
      if (values.length >= maxSelectionCount) {
        setOpen(false);
      }
    }
  }, [values, maxSelectionCount, textFieldRef, setOpen]);

  return (
    <span
      {...commonProps(props, baseClassName, {
        widthXSmall: width === 'xSmall',
        widthSmall: width === 'small',
        widthMedium: width === 'medium' || !width,
        widthLarge: width === 'large',
        widthFull: width === 'full',
      })}
    >
      <MultiComboBoxField
        baseClassName={baseClassName}
        originalId={id}
        uniqueId={uniqueId}
        withBorder={!borderless}
        borderRef={borderRef}
        textFieldRef={textFieldRef}
        isOpen={isOpen}
        values={values}
        textFieldValue={textFieldValue}
        selectedIndex={selectedIndex}
        maxSelectionCount={maxSelectionCount}
        onBlur={(e) => {
          setOpen(false);
          setTextFieldValue('');
          if (onBlur) {
            onBlur(e);
          }
        }}
        onChange={(e) => {
          setTextFieldValue(e.target.value);
          setSelectedIndex(0);
        }}
        onFocus={(e) => {
          (!maxSelectionCount || values.length < maxSelectionCount) &&
            setOpen(true);
          if (onFocus) {
            onFocus(e);
          }
        }}
        onKeyDown={(e) => {
          handleKeyDown(e);
        }}
        onRemoveOption={onRemoveOption}
        name={name}
        width={width}
        disabled={disabled}
        error={error}
        required={required}
        onInput={onInput}
        label={label}
        labelledby={labelledby}
      />
      <ScrollPortal
        isActive={isOpen}
        onOverflow={() => textFieldRef.current && textFieldRef.current.blur()}
        positionalBaseElement={borderRef.current || undefined}
        data-masking={props['data-masking']}
      >
        <div // eslint-disable-line jsx-a11y/no-static-element-interactions
          id={`${uniqueId}__listbox`}
          className={listBoxClassName}
          role="listbox"
          tabIndex={-1}
          onMouseDown={(e: React.MouseEvent): void => e.preventDefault()} // blur抑止のため、やむをえずonMouseDownを書いてる
        >
          <PopupBase paddingSize="zero">
            <Loading isLoading={!!isLoading}>
              {filteredOptions.length > 0 ? (
                <div
                  className="vb-comboBox__listOptions"
                  ref={listOptionsRef}
                  style={{ maxHeight: listOptionsMaxHeight }}
                >
                  {filteredOptions.map((option, i) => {
                    const isSelected = i === selectedIndex;
                    return (
                      /* eslint-disable-next-line jsx-a11y/click-events-have-key-events */
                      <div
                        id={`${uniqueId}__listOption__${i}`}
                        key={i}
                        className={vbClassNames('vb-comboBox__listOption', {
                          modifier: {
                            selected: isSelected,
                            disabled: option.disabled,
                          },
                        })}
                        role="option"
                        aria-selected={!(option.disabled || !isSelected)}
                        aria-disabled={option.disabled}
                        tabIndex={-1}
                        onClick={(): void => onSelectOption(option)}
                        ref={isSelected ? selectedOptionRef : undefined}
                      >
                        <ItemLabel
                          fieldValue={textFieldValue}
                          option={option}
                        />
                        {option.type && (
                          <div className="vb-comboBox__listOptionSubLabel">
                            {option.type}
                          </div>
                        )}
                      </div>
                    );
                  })}
                </div>
              ) : (
                <div className="vb-comboBox__emptyMessage">
                  <Note>{emptyMessage || '該当する候補はありません'}</Note>
                </div>
              )}
            </Loading>
          </PopupBase>
        </div>
      </ScrollPortal>
    </span>
  );
};

/**
 * 複数の項目を選択したり、種別をまたいで選択したりできるコンボボックスです
 *
 * - 選択できる項目が単一で、種別をまたがない場合には `SingleComboBox` または `ApiComboBox` の使用も検討してください
 *   - 「他の場所で MultiComboBox を使用している種別である」など、単一種別・単一項目を選択であってもMultiComboBoxの使用が妥当だと判断できる場合は MultiComboBox を使用しても問題ありません
 * - 選択した候補には `RE` `OR` `YE` `YG` `GR` `BG` `PU` `GY` の色を指定できます。種別ごとに一貫した色を使用してください。
 * - API経由での項目の取得が必要となる場合は `ApiMultiComboBox` の使用も検討してください
 */
export const MultiComboBox = React.forwardRef(MultiComboBoxInternal);

```

### src/lv2/combobox/MultiComboBoxField.tsx
```
typescript
import * as React from 'react';
import { MdExpandMore } from 'react-icons/md';
import { FocusHighlight, TextField, VisuallyHidden } from '../../lv1';
import vbClassNames from '../../utilities/vbClassNames';
import { MultiComboBoxOption } from './hooks';
import { MiniTag } from '../tagBox/MiniTag';

export type PropsFromTextField = Pick<
  Parameters<typeof TextField>[0],
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'disabled'
  | 'error'
  | 'width'
  | 'onFocus'
  | 'onBlur'
  | 'onInput'
  | 'onKeyDown'
  | 'borderless'
  // 以下未対応
  // | 'small'
  // | 'large'
>;

type WithBorderProps = {
  withBorder: boolean;
  children: React.ReactNode;
} & Pick<PropsFromTextField, 'width'>;

const WithBorder = ({ withBorder, width, children }: WithBorderProps) => {
  return withBorder ? (
    <FocusHighlight
      cornerStyle="round"
      width={width === 'full' ? 'full' : 'fit-content'}
    >
      {children}
    </FocusHighlight>
  ) : (
    <>{children}</>
  );
};

type Props = {
  baseClassName: string;
  originalId?: string;
  uniqueId: string;
  withBorder: boolean;
  borderRef: React.RefObject<HTMLSpanElement>;
  textFieldRef: React.MutableRefObject<HTMLInputElement>;
  isOpen: boolean;
  values?: MultiComboBoxOption[];
  textFieldValue: string;
  selectedIndex: number;
  maxSelectionCount?: number;
  onBlur: React.FocusEventHandler<HTMLInputElement>;
  onChange: React.ChangeEventHandler<HTMLInputElement>;
  onFocus: React.FocusEventHandler<HTMLInputElement>;
  onKeyDown: React.KeyboardEventHandler<HTMLInputElement>;
  onRemoveOption: (option: MultiComboBoxOption) => void;
} & Pick<
  PropsFromTextField,
  | 'name'
  | 'width'
  | 'disabled'
  | 'error'
  | 'required'
  | 'onInput'
  | 'label'
  | 'labelledby'
>;

/**
 * MultiComboBoxで使う、TextFieldと選択内容（MiniTag）コンポーネント
 */
export const MultiComboBoxField = ({
  baseClassName,
  originalId,
  uniqueId,
  withBorder,
  borderRef,
  textFieldRef,
  isOpen,
  values = [],
  textFieldValue,
  selectedIndex,
  onBlur,
  onChange,
  onFocus,
  onKeyDown,
  onRemoveOption,
  name,
  width,
  disabled,
  error,
  required,
  onInput,
  label,
  labelledby,
  maxSelectionCount,
}: Props) => {
  return (
    <WithBorder withBorder={withBorder} width={width}>
      {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */}
      <span
        className={vbClassNames(`${baseClassName}__border`, {
          modifier: {
            widthXSmall: width === 'xSmall',
            widthSmall: width === 'small',
            widthMedium: width === 'medium' || !width,
            widthLarge: width === 'large',
            widthFull: width === 'full',
            disabled,
            error,
          },
        })}
        onClick={() => textFieldRef.current?.focus()}
        ref={borderRef}
      >
        <span className={`${baseClassName}__flex`}>
          <VisuallyHidden autoRead>
            {values.length > 0
              ? `選択している項目: ${values.length}個${
                  maxSelectionCount
                    ? `(${maxSelectionCount}個まで選択できます)`
                    : ''
                }`
              : '選択している項目はありません'}
          </VisuallyHidden>
          <span className={`${baseClassName}__list`} role="list">
            {values.map((v) => (
              // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions
              <span
                className={`${baseClassName}__listItem`}
                role="listitem"
                key={v.id}
                onClick={(e) => {
                  e.preventDefault();
                  e.stopPropagation();
                  !disabled && textFieldRef.current?.focus();
                }}
              >
                <MiniTag
                  disabledRemoveButton={disabled}
                  removable={true}
                  onRemove={() => onRemoveOption(v)}
                  type={v.type}
                  removeButtonTabIndex={-1}
                  color={v.color}
                >
                  {v.label}
                </MiniTag>
              </span>
            ))}
          </span>
          <span
            className={`${baseClassName}__field${
              maxSelectionCount && values.length >= maxSelectionCount
                ? ` ${baseClassName}__field--maxSelectionCountReached`
                : ''
            }`}
          >
            <TextField
              id={originalId}
              borderless
              role="combobox"
              ref={textFieldRef}
              value={textFieldValue}
              label={label}
              labelledby={labelledby}
              name={name}
              required={required}
              disabled={disabled}
              width="full"
              onChange={(e) => {
                (!maxSelectionCount || values.length < maxSelectionCount) &&
                  onChange(e);
              }}
              onInput={onInput}
              onFocus={onFocus}
              onBlur={onBlur}
              onKeyDown={onKeyDown}
              aria-expanded={isOpen}
              aria-autocomplete="list"
              aria-controls={`${uniqueId}__listbox`}
              aria-haspopup="listbox"
              aria-activedescendant={
                selectedIndex >= 0 && isOpen
                  ? `${uniqueId}__listOption__${selectedIndex}`
                  : undefined
              }
              aria-describedby={`${uniqueId}__description`}
              aria-atomic={true}
              IconComponent={MdExpandMore}
            />
            <VisuallyHidden id={`${uniqueId}__description`}>
              {maxSelectionCount && values.length >= maxSelectionCount
                ? `${maxSelectionCount}個の項目を選択済みのため、これ以上追加できません`
                : '上下キーで選択、Enterキーで確定できます'}
            </VisuallyHidden>
          </span>
        </span>
      </span>
    </WithBorder>
  );
};

```

### src/lv2/combobox/SingleComboBox.stories.tsx
```
typescript
/* eslint-disable react/display-name */
import * as React from 'react';

import { MdAdd } from 'react-icons/md';
import { actions, action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../../lv1/buttons/Button';
import MarginBase from '../../lv1/bases/MarginBase';
import MaterialIcon from '../../lv1/icons/MaterialIcon';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import TaskDialog from '../dialogs/TaskDialog';
import SingleComboBox, { SingleComboBoxOption } from './SingleComboBox';
import TagBox from '../tagBox/TagBox';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import WithBalloon from '../withBalloon/WithBalloon';

const handlers = actions({
  onChange: 'onChange',
  onInput: 'onInput',
  onFocus: 'onFocus',
  onBlur: 'onBlur',
  onKeyDown: 'onKeyDown',
});

const sampleOptions = [
  { label: '杏', id: 0, keywords: ['あんず', 'anzu'] },
  { label: '円', id: 1, keywords: ['まどか', 'madoka'] },
  { label: '桜', id: 2, keywords: ['さくら', 'sakura'] },
  { label: '巴', id: 3, keywords: ['ともえ', 'tomoe'] },
  { label: '焔', id: 4, keywords: ['ほむら', 'homura'] },
  { label: '渚', id: 5, keywords: ['なぎさ', 'nagisa'] },
  {
    label: '海鮮助六',
    id: 6,
    keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
  },
  {
    label: '助六',
    id: 7,
    keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
  },
  {
    label: '助六',
    id: 8,
    keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
  },
  {
    label:
      'とてもながいとてもながいとてもながいせんたくしのとてもながいひょうじ',
    id: 9,
    keywords: [
      'totemonagaitotemonagaitotemonagaisentakushinototemonagaihyouji',
    ],
  },
  {
    label: '[+}-@test.com',
    id: 10,
    keywords: ['[+}-@test.com'],
  },
  { label: 'VibesAlpha', id: 11, keywords: ['VibesAlpha'] },
  { label: 'VibesBeta', id: 12, keywords: ['VibesBeta'] },
  { label: 'Vibes', id: 13, keywords: ['Vibes'] },
  { label: 'disabled', id: 14, disabled: true },
];

export default {
  component: SingleComboBox,
};

export const SingleComboboxComponent = () => (
  <SingleComboBox
    options={sampleOptions}
    required={boolean('Required', false, 'SingleComboBox')}
    disabled={boolean('Disabled', false, 'SingleComboBox')}
    error={boolean('Error', false, 'SingleComboBox')}
    small={boolean('Small', false, 'SingleComboBox')}
    large={boolean('Large', false, 'SingleComboBox')}
    placeholder={text('placeholder', '', 'SingleComboBox')}
    borderless={boolean('borderless', false, 'SingleComboBox')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'SingleComboBox'
    )}
    listWidth={select(
      'listWidth',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
      },
      'medium',
      'SingleComboBox'
    )}
    emptyMessage={text(
      'EmptyMessage',
      '該当する候補が見つかりません',
      'SingleComboBox'
    )}
    isLoading={boolean('isLoading', false, 'SingleComboBox')}
    {...handlers}
    {...commonKnobs()}
  />
);
const trailingItem = {
  onSelect: action('trailing item selected'),
  isVisible: (fieldValue: string) => !fieldValue,
  render: () => (
    <span>
      <span style={{ verticalAlign: 'middle' }}>
        <MaterialIcon IconComponent={MdAdd} />
      </span>
      もっと見る
    </span>
  ),
};

export const WithTrailingItem = () => (
  <SingleComboBox
    options={sampleOptions}
    required={boolean('Required', false, 'SingleComboBox')}
    disabled={boolean('Disabled', false, 'SingleComboBox')}
    error={boolean('Error', false, 'SingleComboBox')}
    small={boolean('Small', false, 'SingleComboBox')}
    placeholder={text('placeholder', '', 'SingleComboBox')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'SingleComboBox'
    )}
    listWidth={select(
      'listWidth',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
      },
      'medium',
      'SingleComboBox'
    )}
    emptyMessage={text(
      'EmptyMessage',
      '該当する候補が見つかりません',
      'SingleComboBox'
    )}
    isLoading={boolean('isLoading', false, 'SingleComboBox')}
    trailingItem={trailingItem}
    {...handlers}
  />
);

export const InteractiveSample = () => {
  const [val, setVal] = React.useState<SingleComboBoxOption | undefined>(
    sampleOptions[0]
  );
  return (
    <SingleComboBox
      value={val}
      options={sampleOptions}
      onChange={(opt) => {
        setVal(opt);
      }}
      trailingItem={trailingItem}
    />
  );
};

export const WithDialog = () => {
  const [isOpen, setIsOpen] = React.useState(false);
  const [values, setValues] = React.useState<
    (SingleComboBoxOption | undefined)[]
  >(Array(10).fill(undefined));

  return (
    <>
      <Button onClick={() => setIsOpen(true)}>ダイアログを表示</Button>
      <TaskDialog
        closeButtonLabel="閉じる"
        isOpen={isOpen}
        onRequestClose={() => setIsOpen(false)}
        title="ダイアログ"
      >
        {Array(10)
          .fill(null)
          .map((_v, i) => {
            return (
              <MarginBase key={i} marginBottom>
                <SingleComboBox
                  value={values[i]}
                  options={sampleOptions}
                  onChange={(option) =>
                    setValues((values) =>
                      values.map((value, j) => (j === i ? option : value))
                    )
                  }
                />
              </MarginBase>
            );
          })}
      </TaskDialog>
    </>
  );
};

export const InsideScroll = () => (
  <div style={{ width: '50rem', height: '50rem', display: 'flex' }}>
    <ScrollableBase scrollableX scrollableY>
      <div style={{ position: 'relative', width: '200rem', height: '200rem' }}>
        <div style={{ position: 'absolute', left: '100rem', top: '100rem' }}>
          <SingleComboBox
            options={sampleOptions}
            onChange={action('onChange')}
          />
        </div>
      </div>
    </ScrollableBase>
  </div>
);

export const FixedItems = () => {
  const [val, setVal] = React.useState<SingleComboBoxOption | undefined>(
    undefined
  );
  const [options, setOptions] = React.useState<SingleComboBoxOption[]>(
    sampleOptions.slice(0, Math.floor(sampleOptions.length / 2))
  );

  return (
    <>
      <SingleComboBox
        value={val}
        options={options}
        onChange={(opt) => {
          setVal(opt);
        }}
        emptyMessage="アイテムが登録されていません。新規登録してください。"
        fixedItems={[
          {
            onSelect: () => setOptions(sampleOptions),
            isVisible: () => options.length < sampleOptions.length,
            label: () => 'アイテムをもっと見る',
          },
          {
            onSelect: (fieldValue: string) => {
              const newOption = { label: fieldValue, id: '' };
              setVal(newOption);
            },
            isVisible: (
              fieldValue: string,
              filteredOptions: SingleComboBoxOption[]
            ) =>
              !!fieldValue &&
              (filteredOptions.length === 0 ||
                !filteredOptions.find((e) => e.label === fieldValue)),
            label: (fieldValue: string) => `${fieldValue}を新規登録する`,
          },
        ]}
      />
      <div>
        <div>label: {val?.label}</div>
        <div>id: {val?.id}</div>
        <div>{val && !val?.id && '新規登録の選択肢です'}</div>
      </div>
    </>
  );
};

export const AllowNewOption = () => {
  const [val, setVal] = React.useState<SingleComboBoxOption | undefined>(
    undefined
  );
  return (
    <>
      <SingleComboBox
        value={val}
        options={sampleOptions}
        onChange={(opt) => {
          setVal(opt);
        }}
        trailingItem={{
          selectIfOnly: true,
          onSelect: (fieldValue: string) => {
            const newOption = { label: fieldValue, id: '' };
            setVal(newOption);
          },
          render: (fieldValue: string) => `${fieldValue} (新規登録)`,
          isVisible: (
            fieldValue: string,
            filteredOptions: SingleComboBoxOption[]
          ) =>
            !!fieldValue &&
            (filteredOptions.length === 0 ||
              !filteredOptions.find((e) => e.label === fieldValue)),
        }}
      />
      <div>
        <div>label: {val?.label}</div>
        <div>id: {val?.id}</div>
        <div>{val && !val?.id && '新規登録の選択肢です'}</div>
      </div>
    </>
  );
};

export const AllowMoreOption = () => {
  const [val, setVal] = React.useState<SingleComboBoxOption | undefined>(
    undefined
  );
  const [options, setOptions] = React.useState<SingleComboBoxOption[]>(
    sampleOptions.slice(0, Math.floor(sampleOptions.length / 2))
  );

  return (
    <SingleComboBox
      value={val}
      options={options}
      onChange={(opt) => {
        setVal(opt);
      }}
      trailingItem={{
        onSelect: () => setOptions(sampleOptions),
        render: () => 'もっと見る',
        isVisible: () => options.length < sampleOptions.length,
        isMoreOption: true,
      }}
    />
  );
};

export const MultiSelect = () => {
  const [selected, setSelected] = React.useState<SingleComboBoxOption[]>([]);
  const messageRef = React.useRef<HTMLDivElement>(null);
  const [message, setMessage] = React.useState<string>('');

  return (
    <>
      <div>
        {selected.map((val, i) => (
          <TagBox
            key={i}
            removable
            onRemove={() => {
              setSelected(selected.filter((e) => e.id !== val.id));
            }}
            mb={0.5}
            mr={0.5}
          >
            {val.label}
          </TagBox>
        ))}
      </div>
      <VisuallyHidden>
        <div ref={messageRef} tabIndex={-1}>
          {message}
        </div>
      </VisuallyHidden>
      <SingleComboBox
        options={sampleOptions.filter(
          // 選択済みの選択肢を除外する
          (e) => selected.findIndex((s) => s.id === e.id) < 0
        )}
        onChange={(opt) => {
          if (opt) {
            setSelected(selected.concat([opt]));
            setMessage(`${opt.label} を選択しました`);
            // スクリーンリーダー向けのメッセージをsetMessageするとともに、その部分へフォーカスを移動することで、
            // コンボボックスにフォーカスが残り続け、選択肢ボックスが出ない状態になるのを防いでいる
            messageRef.current?.focus();
          }
        }}
      />
    </>
  );
};

export const ManualFocus = () => {
  const ref = React.useRef<HTMLInputElement>(null);
  const onClick = () => {
    ref.current?.focus();
  };

  return (
    <>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <SingleComboBox
        ref={ref}
        options={sampleOptions}
        onChange={action('onChange')}
      />
    </>
  );
};

export const Events = () => {
  const [eventList, setEventList] = React.useState<Array<string>>([]);
  const eventAction = (signature: string) =>
    setEventList([
      ...eventList,
      `${new Date().toString()} ${signature}イベント発火`,
    ]);

  return (
    <>
      <SingleComboBox
        options={sampleOptions}
        onChange={() => eventAction('onChange')}
        onBlur={() => eventAction('onBlur')}
        onInput={() => eventAction('onInput')}
        onFocus={() => eventAction('onFocus')}
        onKeyDown={() => eventAction('onKeyDown')}
      />
      <ul>
        {eventList.map((e) => (
          <li key={e}>{e}</li>
        ))}
      </ul>
    </>
  );
};

export const WithSubLabel = () => (
  <SingleComboBox
    options={sampleOptions.map((opt) => ({
      ...opt,
      subLabel: opt.keywords?.[0],
    }))}
    onChange={action('onChange')}
  />
);

export const DescribedByBalloon = () => (
  <WithBalloon
    renderBalloonContent={() => <>注釈文を付けることができます。</>}
    renderContent={(balloonId?: string) => (
      <SingleComboBox
        options={sampleOptions}
        onChange={action('onChange')}
        describedBy={balloonId}
      />
    )}
  />
);

```

### src/lv2/combobox/SingleComboBox.tsx
```
typescript
import * as React from 'react';
import { MdExpandMore } from 'react-icons/md';
import {
  MarginClassProps,
  pickMarginClassProps,
} from '../../utilities/marginClasses';
import commonProps, {
  CommonProps,
  pickCommonDataProps,
} from '../../utilities/commonProps';
import TextField from '../../lv1/forms/TextField';
import PopupBase from '../../lv1/bases/PopupBase';
import NegativeMarginBase from '../../lv1/bases/NegativeMarginBase';
import useUniqueId from '../../hooks/useUniqueId';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import Note from '../../lv1/typography/Note';
import ScrollPortal from '../../utilities/ScrollPortal';
import Loading from '../../lv1/Loading';
import { ItemLabel } from './ItemLabel';
import {
  SingleComboBoxOption,
  InternalComboBoxOption,
  FixedItems,
  useAdjustListPosition,
  createListBoxClassName,
} from './hooks';
import { useSingleComboBox, TrailingItem } from './hooks/singleComboBox';
import { pickFunctionalMarginProps } from '../../utilities/functionalMarginClasses';
import vbClassNames from '../../utilities/vbClassNames';
export type { ComboBoxOption, SingleComboBoxOption } from './hooks';

type PropsFromTextField = Pick<
  Parameters<typeof TextField>[0],
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'disabled'
  | 'error'
  | 'small'
  | 'large'
  | 'width'
  | 'onFocus'
  | 'onBlur'
  | 'onInput'
  | 'onKeyDown'
  | 'borderless'
>;

type Props = {
  value?: SingleComboBoxOption;
  options: SingleComboBoxOption[];
  listWidth?: 'xSmall' | 'small' | 'medium' | 'large';
  emptyMessage?: React.ReactNode;
  isLoading?: boolean;
  onChange?: (option?: SingleComboBoxOption) => void;

  /**
   * @deprecated fixedItems を使用してください
   */
  trailingItem?: TrailingItem;
  /**
   * リストの最後尾に追加するアイテム 一つ目はもっと見る、二つ目新規登録を想定しています
   */
  fixedItems?: FixedItems;
  describedBy?: string;
} & PropsFromTextField &
  MarginClassProps &
  CommonProps;

function SingleComboBoxInner(
  props: Props,
  ref?: React.Ref<HTMLInputElement> | React.MutableRefObject<HTMLInputElement>
): React.ReactElement {
  const {
    value,
    options,
    id,
    label,
    labelledby,
    placeholder,
    name,
    required,
    disabled,
    error,
    small,
    large,
    width,
    listWidth,
    emptyMessage,
    isLoading,
    onChange,
    onFocus,
    onBlur,
    onInput,
    onKeyDown,
    trailingItem,
    fixedItems,
    borderless,
    describedBy,
  } = props;

  const {
    filteredOptions,
    isOpen,
    fieldValue,
    onFieldBlur,
    onFieldFocus,
    onFieldChange,
    onFieldKeyDown,
    selectedIndex,
    listOptionsRef,
    onSelectOption,
    selectedOptionRef,
  } = useSingleComboBox({
    value,
    options,
    onChange,
    onFocus,
    onBlur,
    onKeyDown,
    trailingItem,
    fixedItems,
  });
  const uniqueId = useUniqueId('vb-comboBox');
  const listBoxClassName = createListBoxClassName({ isOpen, listWidth, width });
  const { textFieldRef, listOptionsMaxHeight } = useAdjustListPosition(
    isOpen,
    ref
  );

  return (
    <div {...commonProps(pickCommonDataProps(props), 'vb-comboBox')}>
      <TextField
        ref={textFieldRef}
        value={fieldValue}
        id={id}
        label={label}
        labelledby={labelledby}
        name={name}
        required={required}
        disabled={disabled}
        placeholder={placeholder}
        error={error}
        small={small}
        large={large}
        width={width}
        onBlur={onFieldBlur}
        onFocus={onFieldFocus}
        onChange={onFieldChange}
        onInput={onInput}
        onKeyDown={onFieldKeyDown}
        borderless={borderless}
        role="combobox"
        autoComplete="off"
        aria-expanded={isOpen}
        aria-autocomplete="list"
        aria-controls={`${uniqueId}__listbox`}
        aria-haspopup="listbox"
        aria-activedescendant={
          selectedIndex >= 0 && isOpen
            ? `${uniqueId}__listOption__${selectedIndex}`
            : undefined
        }
        aria-describedby={`${describedBy || ''} ${uniqueId}__description`}
        aria-atomic={true}
        IconComponent={MdExpandMore}
        {...pickMarginClassProps(props)}
        {...pickFunctionalMarginProps(props)}
      />
      <VisuallyHidden id={`${uniqueId}__description`}>
        上下キーで選択、Enterキーで確定できます
      </VisuallyHidden>
      <ScrollPortal
        isActive={isOpen}
        onOverflow={() => textFieldRef.current && textFieldRef.current.blur()}
        positionalBaseElement={textFieldRef.current}
        data-masking={props['data-masking']}
      >
        <div // eslint-disable-line jsx-a11y/no-static-element-interactions
          id={`${uniqueId}__listbox`}
          className={listBoxClassName}
          role="listbox"
          tabIndex={-1}
          onMouseDown={(e: React.MouseEvent): void => e.preventDefault()} // blur抑止のため、やむをえずonMouseDownを書いてる
        >
          <PopupBase paddingSize="small">
            <NegativeMarginBase marginSize="small" top left bottom right>
              <Loading isLoading={!!isLoading}>
                {filteredOptions.length > 0 ? (
                  <div
                    className="vb-comboBox__listOptions"
                    ref={listOptionsRef}
                    style={{ maxHeight: listOptionsMaxHeight }}
                  >
                    {filteredOptions[0].fixedItemType === 'add' && (
                      <div className="vb-comboBox__emptyMessage">
                        <Note>
                          {emptyMessage || '該当する候補はありません'}
                        </Note>
                      </div>
                    )}
                    {filteredOptions.map(
                      (option: InternalComboBoxOption, i: number) => {
                        const isSelected = i === selectedIndex;
                        return (
                          /* eslint-disable-next-line jsx-a11y/click-events-have-key-events */
                          <div
                            id={`${uniqueId}__listOption__${i}`}
                            key={i}
                            className={vbClassNames('vb-comboBox__listOption', {
                              modifier: {
                                selected: isSelected,
                                disabled: option.disabled,
                              },
                            })}
                            role="option"
                            aria-selected={!(option.disabled || !isSelected)}
                            aria-disabled={option.disabled}
                            tabIndex={-1}
                            onClick={(): void => onSelectOption(option)}
                            ref={isSelected ? selectedOptionRef : undefined}
                          >
                            <ItemLabel
                              fixedItemOption={
                                fixedItems && { fixedItems, isSelected }
                              }
                              fieldValue={fieldValue}
                              option={option}
                              trailingItem={trailingItem}
                            />
                            {option.subLabel && (
                              <div className="vb-comboBox__listOptionSubLabel">
                                {option.subLabel}
                              </div>
                            )}
                          </div>
                        );
                      }
                    )}
                  </div>
                ) : (
                  <div className="vb-comboBox__emptyMessage">
                    <Note>{emptyMessage || '該当する候補はありません'}</Note>
                  </div>
                )}
              </Loading>
            </NegativeMarginBase>
          </PopupBase>
        </div>
      </ScrollPortal>
    </div>
  );
}

const SingleComboBox = React.forwardRef(SingleComboBoxInner);
export default SingleComboBox;

```

### src/lv2/descriptionList/DescriptionList.stories.tsx
```
typescript
import * as React from 'react';

import DescriptionList from './DescriptionList';
import TextField from '../../lv1/forms/TextField';
import { commonKnobs } from '../../../stories';
import { number, text, select } from '@storybook/addon-knobs';
import Note from '../../lv1/typography/Note';

export default {
  component: DescriptionList,
};

export const DescriptionListComponent = () => (
  <DescriptionList
    headCellMinWidth={
      number('headCellMinWidth', 0, undefined, 'DescriptionList') || undefined
    }
    listContents={[
      {
        title: text('title', '見出し', 'DescriptionList'),
        value: text('value', 'テキストテキストテキスト', 'DescriptionList'),
      },
      {
        title: '見出し2',
        value: 'テキスト2',
      },
      { title: '見出し3', value: <a href="hoge">fuga</a> },
      {
        title: '見出し見出し見出し',
        value: (
          <>
            テキスト
            <br />
            テキスト
            <br />
            テキスト
            <br />
            テキスト
          </>
        ),
      },
      {
        title: (
          <label htmlFor="descriptionList-textfield-1">
            見出し見出し見出し
          </label>
        ),
        value: <TextField id="descriptionList-textfield-1" />,
      },
      {
        title: (
          <label htmlFor="descriptionList-textfield-2">
            見出し見出し見出し
          </label>
        ),
        value: (
          <>
            <TextField id="descriptionList-textfield-2" />
            <Note marginTop marginSize="xSmall">
              全角英数で入力してください
            </Note>
          </>
        ),
      },
    ]}
    spacing={
      select(
        'Spacing',
        {
          Normal: 'normal',
          Compact: 'compact',
          undefined: '',
        },
        '',
        'DescriptionList'
      ) || undefined
    }
    {...commonKnobs()}
  />
);

```

### src/lv2/descriptionList/DescriptionList.tsx
```
typescript
import * as React from 'react';
import DescriptionListHeadCell from '../../lv1/lists/DescriptionListHeadCell';
import DescriptionListCell from '../../lv1/lists/DescriptionListCell';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  listContents: Array<{
    title: React.ReactNode;
    value?: React.ReactNode;
  }>;
  /**
   * 見出しセルの最小幅を設定します
   */
  headCellMinWidth?: number;
  /**
   * リストの高さを設定します
   */
  spacing?: 'normal' | 'compact';
} & MarginClassProps &
  CommonProps;

/**
 * ## accessibility
 * DescriptionListにてフィールドを扱う場合、「フィールドとラベル」の紐付けを実装時に行う必要があります。
 *
 * 典型的な例として、以下のような対応が挙げられます。
 *
 * - valueに含まれるフィールドにidを付与する。
 * - titleを<label>で囲み、htmlForにフィールドのidを指定する
 *
 * storyのフィールドのある行が実装例として参考になります。
 *
 */
const DescriptionList: React.FC<Props> = (props: Props) => {
  const {
    listContents,
    headCellMinWidth,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    spacing,
  } = props;

  return (
    <div
      {...commonProps(
        props,
        'vb-descriptionList',
        { responsive: useResponsive() },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        }
      )}
    >
      <table className="vb-descriptionList__table">
        <thead className="vb-descriptionList__header">
          <tr>
            <th>項目名</th>
            <th>内容</th>
          </tr>
        </thead>
        <tbody>
          {listContents.map((listCont, index) => (
            <tr
              className={vbClassNames('vb-descriptionList__row', {
                modifier: { spacingCompact: spacing === 'compact' },
              })}
              key={index}
            >
              <DescriptionListHeadCell
                minWidth={headCellMinWidth}
                spacing={spacing}
              >
                {listCont.title}
              </DescriptionListHeadCell>
              <DescriptionListCell>{listCont.value}</DescriptionListCell>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

export default DescriptionList;

```

### src/lv2/dialogs/GuideDialog.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { text, number } from '@storybook/addon-knobs';
import GuideDialog from './GuideDialog';
import Paragraph from '../../lv1/typography/Paragraph';
import { commonKnobs } from '../../../stories';
import ToggleDialog from './ToggleDialog';
import { walkthroughImage } from './parts/walkthroughImage';

export default {
  component: GuideDialog,
};

export const GuideDialogComponent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <GuideDialog
        isOpen={isOpen}
        id={text('Id', '', 'GuideDialog')}
        title={text('Title', 'ガイドダイアログ', 'GuideDialog')}
        stepCount={number('stepCount', 1, undefined, 'GuideDialog')}
        totalStepCount={number('totalStepCount', 3, undefined, 'GuideDialog')}
        onRequestBackward={action('backward')}
        backwardButtonLabel={text('BackwardButtonLabel', '戻る', 'GuideDialog')}
        onRequestForward={action('forward')}
        forwardButtonLabel={text('ForwardButtonLabel', '次へ', 'GuideDialog')}
        onRequestClose={toggle}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'GuideDialog')}
        image={{
          src: walkthroughImage,
          alt: '',
        }}
        {...commonKnobs()}
      >
        <Paragraph>
          サービスのチュートリアル
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </GuideDialog>
    )}
  />
);

export const GuideStartDialogComponent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <GuideDialog
        isOpen={isOpen}
        title={text('Title', 'ガイドスタートダイアログ', 'GuideDialog')}
        onRequestForward={action('forward')}
        forwardButtonLabel={text('ForwardButtonLabel', '次へ', 'GuideDialog')}
        onRequestClose={toggle}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'GuideDialog')}
        image={{
          src: walkthroughImage,
          alt: '',
        }}
        type="start"
        {...commonKnobs()}
      >
        <Paragraph>
          サービスの紹介
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </GuideDialog>
    )}
  />
);

```

### src/lv2/dialogs/GuideDialog.tsx
```
typescript
import * as React from 'react';
import { MdClose } from 'react-icons/md';
import Button from '../../lv1/buttons/Button';
import MarginBase from '../../lv1/bases/MarginBase';
import PageTitle from '../../lv1/typography/PageTitle';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import DialogBase from '../../lv1/bases/DialogBase';
import Dialog, { DialogContentProps } from '../../utilities/Dialog';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import GuideStepCount from './parts/GuideStepCount';

type Props = {
  /**
   * ダイアログの見出しとなる文字列を指定します。
   */
  title: string;
  /**
   * レイアウトのタイプを指定します。指定しない場合はstepとなります。
   * （start: 始点用、ステップ番号と戻るボタンなし, step: ステップ用）
   */
  type?: 'start' | 'step';
  /**
   * ダイアログの本文となる要素を指定します。
   */
  children: React.ReactNode;
  /**
   * 現在のステップ番号を指定します。
   */
  stepCount?: number;
  /**
   * 合計ステップ数を指定します。
   * stepCount / totalStepCount で表示されます。
   */
  totalStepCount?: number;
  /**
   * 戻るボタンの click ハンドラを設定します。省略した場合はボタンは表示されません。
   */
  onRequestBackward?: React.MouseEventHandler;
  /**
   * 戻るボタンのラベルとなる文字列を指定します。
   */
  backwardButtonLabel?: string;
  /**
   * 次へボタンの click ハンドラを設定します。省略した場合はボタンは表示されません。
   */
  onRequestForward?: React.MouseEventHandler;
  /**
   * 次へボタンのラベルとなる文字列を指定します。
   */
  forwardButtonLabel?: string;
  /**
   * Close ボタンの click ハンドラを設定します。
   */
  onRequestClose: React.MouseEventHandler;
  /**
   * Close ボタンのラベルとなる文字列を指定します。
   */
  closeButtonLabel: string;
  /**
   * ダイアログ内に表示する画像を指定します。
   */
  image?: {
    /**
     * 画像のURLを指定します。
     */
    src: string;
    /**
     * 画像の横幅を指定します。
     */
    width?: string;
    /**
     * 画像の縦幅を指定します。
     */
    height?: string;
    /**
     * 画像のaltを指定します。
     */
    alt: string;
  };
} & DialogContentProps &
  CommonProps;

export const GuideDialogContent: React.FC<Props> = ({
  id,
  titleId,
  title,
  type,
  children,
  stepCount,
  totalStepCount,
  onRequestBackward,
  backwardButtonLabel,
  onRequestForward,
  forwardButtonLabel,
  onRequestClose,
  closeButtonLabel,
  image,
  ...props
}: Props) => (
  <div {...commonProps(props, 'vb-guideDialog', { responsive: true })} id={id}>
    <DialogBase message>
      <div className="vb-guideDialog__inner">
        <div className="vb-guideDialog__closeButtonBlock">
          <IconOnlyButton
            appearance="tertiary"
            IconComponent={MdClose}
            label="閉じる"
            onClick={onRequestClose}
            mt={-0.5}
            mr={-0.5}
          />
        </div>

        <div
          className={'vb-guideDialog__body'}
          // 表示領域が足りないときにスクロールするので、tabIndexをつける（キーボードでスクロールできるようになる）
          // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
          tabIndex={0}
        >
          {image && (
            <img
              className="vb-guideDialog__image"
              src={image.src}
              alt={image.alt}
              style={{
                width: image.width,
                height: image.height,
              }}
            />
          )}
          <PageTitle mb={1.5} id={titleId}>
            {title}
          </PageTitle>
          {children}
        </div>

        {type === 'start' ? (
          <>
            {onRequestForward && (
              <MarginBase mt={1}>
                <Button
                  hasMinWidth
                  appearance="primary"
                  onClick={onRequestForward}
                >
                  {forwardButtonLabel || '次へ'}
                </Button>
              </MarginBase>
            )}
            <MarginBase mt={1}>
              <Button onClick={onRequestClose}>{closeButtonLabel}</Button>
            </MarginBase>
          </>
        ) : (
          <>
            {stepCount && totalStepCount && totalStepCount > 1 && (
              <GuideStepCount
                stepCount={stepCount}
                totalStepCount={totalStepCount}
                mt={1}
              />
            )}
            <div className="vb-guideDialog__buttonBlock">
              <MarginBase mt={1}>
                {onRequestBackward && (
                  <Button hasMinWidth onClick={onRequestBackward}>
                    {backwardButtonLabel || '戻る'}
                  </Button>
                )}
              </MarginBase>
              <MarginBase mt={1}>
                {onRequestForward ? (
                  <Button
                    hasMinWidth
                    appearance="primary"
                    onClick={onRequestForward}
                  >
                    {forwardButtonLabel || '次へ'}
                  </Button>
                ) : (
                  <Button
                    hasMinWidth
                    appearance="primary"
                    onClick={onRequestClose}
                  >
                    {closeButtonLabel || '閉じる'}
                  </Button>
                )}
              </MarginBase>
            </div>
          </>
        )}
      </div>
    </DialogBase>
  </div>
);

/**
 * チュートリアルなどのガイドで使用します。
 *
 * - `isOpen` propで開閉します
 *
 * ## accessibility
 * dialogが閉じた際、dialogが開く直前にフォーカスしていた要素（多くの場合はdialogを開かせたボタン）に戻るようになっています。
 *
 * ただし、UIの状態の変化等の理由でdialogが開く直前にフォーカスしていた要素に戻れない場合は、戻り先として適切な任意の要素を指定するようにしてください。(`elementFocusAfterClose`を使って指定できます)
 *
 */
const GuideDialog = (
  props: Omit<Props, 'titleId'> &
    Pick<
      Parameters<typeof Dialog>[0],
      'isOpen' | 'elementFocusAfterClose' | 'contentRef'
    >
) => (
  <Dialog
    id={props.id}
    alertDialog={true}
    contentRef={props.contentRef}
    shouldCloseOnOverlayClickOrEsc={true}
    isOpen={props.isOpen}
    onRequestClose={props.onRequestClose}
    elementFocusAfterClose={props.elementFocusAfterClose}
    render={(p) => <GuideDialogContent {...props} {...p} />}
  />
);
export default GuideDialog;

```

### src/lv2/dialogs/MessageDialog.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { text, boolean } from '@storybook/addon-knobs';
import TaskDialog from './TaskDialog';

import MessageDialog, { MessageDialogContent } from './MessageDialog';
import Paragraph from '../../lv1/typography/Paragraph';
import { commonKnobs } from '../../../stories';
import ToggleDialog from './ToggleDialog';
import ColumnBase from '../../lv1/bases/ColumnBase';
import { VibesProvider } from '../../utilities';
import { Button, SectionTitle, WithSideContent } from '../../lv1';
import { MdEdit, MdCheck, MdCancel } from 'react-icons/md';

export default {
  component: MessageDialog,
};

export const MessageDialogComponent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <MessageDialog
        id={text('Id', '', 'MessageDialog')}
        isOpen={isOpen}
        title={text('Title', 'タスクダイアログ', 'MessageDialog')}
        onRequestClose={toggle}
        closeButtonLabel={text(
          'CloseButtonLabel',
          'キャンセル',
          'MessageDialog'
        )}
        responsive={boolean('Responsive', false, 'MessageDialog')}
        {...commonKnobs()}
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialog>
    )}
  />
);

export const OnTaskDialog = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <>
        <TaskDialog
          isOpen={isOpen}
          title="タスクダイアログ"
          onRequestClose={toggle}
          closeButtonLabel="キャンセル"
        >
          タスクダイアログ タスクダイアログ タスクダイアログ タスクダイアログ
          タスクダイアログ タスクダイアログ タスクダイアログ タスクダイアログ
          タスクダイアログ タスクダイアログ タスクダイアログ
        </TaskDialog>
        <MessageDialog
          isOpen={isOpen}
          id={text('Id', '', 'MessageDialog')}
          title={text('Title', 'タスクダイアログ', 'MessageDialog')}
          onRequestClose={toggle}
          closeButtonLabel={text(
            'CloseButtonLabel',
            'キャンセル',
            'MessageDialog'
          )}
          responsive={boolean('Responsive', false, 'MessageDialog')}
          {...commonKnobs()}
        >
          <Paragraph>
            文字量や構成要素のすくないメッセージなどは中央寄せで表示
            <br />
            テキストテキストテキストテキストテキストテキスト
          </Paragraph>
        </MessageDialog>
      </>
    )}
  />
);

export const Responsive = () => (
  <VibesProvider fixedLayout={false}>
    <ToggleDialog
      render={(isOpen, toggle) => (
        <MessageDialog
          isOpen={isOpen}
          title="レスポンシブ"
          onRequestClose={toggle}
          closeButtonLabel="閉じる"
        >
          <Paragraph>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
        </MessageDialog>
      )}
    />
  </VibesProvider>
);

export const BigContent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <MessageDialog
        isOpen={isOpen}
        title="コンテンツの量が多いとき"
        onRequestClose={toggle}
        closeButtonLabel="キャンセル"
      >
        {Array(50)
          .fill(0)
          .map((i) => (
            <Paragraph key={i}>
              コンテンツの量が多い場合はスクロールします
            </Paragraph>
          ))}
      </MessageDialog>
    )}
  />
);

export const ContentSamples = () => (
  <>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      <MessageDialogContent
        title="メッセージダイアログ"
        onRequestClose={action('close')}
        closeButtonLabel="OK"
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogContent
        title="メッセージダイアログ"
        onRequestClose={action('close')}
        closeButtonLabel="OK"
        closeButtonAppearance="primary"
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogContent
        title="メッセージダイアログ"
        onRequestClose={action('close')}
        closeButtonLabel="OK"
        closeButtonAppearance="secondary"
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogContent
        title="メッセージダイアログ"
        onRequestClose={action('close')}
        closeButtonLabel="OK"
        closeButtonAppearance="tertiary"
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogContent
        title="メッセージダイアログ"
        onRequestClose={action('close')}
        closeButtonLabel="OK"
        closeButtonAppearance="secondary"
        contentAlign="left"
      >
        <ColumnBase ml={-1.5} mr={-1.5}>
          <Paragraph>
            原則としては文字量や構成要素のすくないメッセージが入ることを想定していますが、横や縦に長いコンテンツを入れざるを得ない場合は、横幅が70remまで広げられ、縦方向にはスクロールするようになります。場合に応じてColumnBaseを敷いたり、コンテンツのみを左寄せにするレイアウトも可能です。
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
          </Paragraph>
        </ColumnBase>
      </MessageDialogContent>
    </div>
  </>
);

export const FocusElementAfterClose = () => {
  const [mode, setMode] = React.useState<'view' | 'edit'>('view');
  const [isModalOpen, setModalOpen] = React.useState(false);
  const elmRef = React.useRef<HTMLHeadingElement>(null);
  return (
    <>
      <WithSideContent
        verticalAlign="middle"
        mb={1}
        sideContent={
          <>
            {mode === 'view' ? (
              <Button IconComponent={MdEdit} onClick={() => setMode('edit')}>
                編集
              </Button>
            ) : (
              <>
                <Button
                  IconComponent={MdCheck}
                  appearance="primary"
                  mr={1}
                  onClick={() => setModalOpen(true)}
                >
                  保存
                </Button>
                <Button
                  IconComponent={MdCancel}
                  appearance="tertiary"
                  onClick={() => setMode('view')}
                >
                  キャンセル
                </Button>
              </>
            )}
            <MessageDialog
              title="変更を反映しました"
              onRequestClose={() => {
                setMode('view');
                setModalOpen(false);
              }}
              closeButtonLabel="OK"
              isOpen={isModalOpen}
              elementFocusAfterClose={
                (elmRef.current as HTMLElement) || undefined
              }
            >
              なんか別の画面で見られたりします
            </MessageDialog>
          </>
        }
      >
        <SectionTitle ref={elmRef}>見出し</SectionTitle>
      </WithSideContent>
      <Paragraph mb={1}>
        <code>elementFocusAfterClose</code>
        を指定することで、ダイアログを閉じたときに特定の要素にフォーカスを移すことができます。
      </Paragraph>
      <Paragraph mb={1}>
        モーダルを開くのに使用したボタンが、ダイアログを閉じたときに存在しなくなる場合に使用します。
      </Paragraph>
      <Paragraph>
        このサンプルでは編集モードから保存するときに確認ダイアログを表示し、閉じると見出し部分にフォーカスします
      </Paragraph>
    </>
  );
};

```

### src/lv2/dialogs/MessageDialog.tsx
```
typescript
import * as React from 'react';
import PageTitle from '../../lv1/typography/PageTitle';
import Button, { ButtonAppearanceType } from '../../lv1/buttons/Button';
import DialogBase from '../../lv1/bases/DialogBase';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import Dialog, { DialogContentProps } from '../../utilities/Dialog';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  /**
   * ダイアログの見出しとなる文字列を指定します。（場合に応じて、アイコンを並べるなどもできます）
   */
  title: React.ReactNode;
  /**
   * ダイアログの本文となる要素を指定します。
   */
  children: React.ReactNode;
  /**
   * Close ボタンのラベルとなる文字列を指定します。
   */
  closeButtonLabel: string;
  /**
   * 導線の優先度から、ボタンの種類を指定するのに使います。
   * primaryは背景ベタ塗り+白字、secondaryは白背景+グレーの枠線+リンク色字、tertiaryは枠線なし+リンク色字となります。
   */
  closeButtonAppearance?: ButtonAppearanceType;
  /**
   * 指定するとブラウザ幅に応じてダイアログも狭くなります。指定しない場合の幅は 40 rem 固定です。
   */
  responsive?: boolean;
  /**
   * コンテントの揃えを指定できます。デフォルトはcenterですが、情報量が多いときなど左揃えにすることもできます。
   */
  contentAlign?: 'left';
} & DialogContentProps &
  CommonProps;

/**
 * Storybookの都合でDocsに表示されていませんが、 `isOpen` propで開閉します
 */
export const MessageDialogContent: React.FC<Props> = (props: Props) => {
  const {
    id,
    titleId,
    title,
    children,
    onRequestClose,
    closeButtonLabel,
    closeButtonAppearance,
    responsive,
    contentAlign,
  } = props;
  const baseClassName = 'vb-messageDialog';

  // 雑にに書いてますが、各パーツをコンポーネントとして切り出すリファクタをする際に直します。
  const alignLeftClass =
    contentAlign === 'left' ? 'vb-messageDialog__body--alignLeft' : '';
  return (
    <div
      {...commonProps(props, baseClassName, {
        responsive: useResponsive(responsive),
      })}
      id={id}
    >
      <DialogBase message paddingSize="zero">
        <div className={`${baseClassName}__inner`}>
          <div className={`${baseClassName}__header`}>
            <PageTitle id={titleId}>{title}</PageTitle>
          </div>
          <div
            className={`${baseClassName}__body ${alignLeftClass}`}
            // 表示領域が足りないときにスクロールするので、tabIndexをつける（キーボードでスクロールできるようになる）
            // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
            tabIndex={0}
          >
            {children}
          </div>
          <div className={`${baseClassName}__footer`}>
            <Button
              hasMinWidth
              appearance={closeButtonAppearance}
              onClick={onRequestClose}
            >
              {closeButtonLabel}
            </Button>
          </div>
        </div>
      </DialogBase>
    </div>
  );
};

/**
 * 確認に用いる閉じるボタンのみのダイアログです
 *
 * - 確認はなるべく短いメッセージにしましょう。（データの内容を表示するなど表示領域が必要な場合は、横幅は70remまで伸び縦にはスクロールが起こります）
 * - 選択肢が1つしかないため、Escキー押下またはモーダル領域外のクリックで閉じられます
 *
 * ## accessibility
 * dialogが閉じた際、dialogが開く直前にフォーカスしていた要素（多くの場合はdialogを開かせたボタン）に戻るようになっています。
 *
 * ただし、UIの状態の変化等の理由でdialogが開く直前にフォーカスしていた要素に戻れない場合は、戻り先として適切な任意の要素を指定するようにしてください。(`elementFocusAfterClose`を使って指定できます)
 */
const MessageDialog = (
  props: Omit<Props, 'titleId'> &
    Pick<
      Parameters<typeof Dialog>[0],
      'isOpen' | 'elementFocusAfterClose' | 'contentRef'
    >
) => (
  <Dialog
    id={props.id}
    alertDialog={true}
    contentRef={props.contentRef}
    shouldCloseOnOverlayClickOrEsc={true}
    isOpen={props.isOpen}
    onRequestClose={props.onRequestClose}
    elementFocusAfterClose={props.elementFocusAfterClose}
    render={(p) => <MessageDialogContent {...props} {...p} />}
  />
);

export default MessageDialog;

```

### src/lv2/dialogs/MessageDialogConfirm.stories.tsx
```
typescript
import * as React from 'react';

import { MdOpenInNew, MdEdit, MdCheck, MdCancel } from 'react-icons/md';
import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';

import MessageDialogConfirm, {
  MessageDialogConfirmContent,
} from './MessageDialogConfirm';
import Paragraph from '../../lv1/typography/Paragraph';
import { commonKnobs } from '../../../stories';
import ToggleDialog from './ToggleDialog';
import TaskDialog from './TaskDialog';
import ColumnBase from '../../lv1/bases/ColumnBase';
import { VibesProvider } from '../../utilities';
import { Button, SectionTitle, WithSideContent } from '../../lv1';

export default {
  component: MessageDialogConfirm,
};

export const MessageDialogConfirmComponent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <MessageDialogConfirm
        id={text('Id', '', 'MessageDialogConfirm')}
        isOpen={isOpen}
        title={text(
          'Title',
          'タスクダイアログ（確認）',
          'MessageDialogConfirm'
        )}
        onRequestClose={toggle}
        onConfirm={action('confirm')}
        closeButtonLabel={text(
          'CloseButtonLabel',
          'キャンセル',
          'MessageDialogConfirm'
        )}
        confirmButtonLabel={text(
          'ConfirmButtonLabel',
          'OK',
          'MessageDialogConfirm'
        )}
        confirmButtonHref={text(
          'ConfirmButtonHref',
          '',
          'MessageDialogConfirm'
        )}
        confirmButtonTarget={select(
          'ConfirmButtonTarget',
          {
            _blank: '_blank',
            _self: '_self',
          },
          '_self',
          'MessageDialogConfirm'
        )}
        confirmButtonIconComponent={
          boolean('ConfirmButtonWithIcon', false, 'MessageDialogConfirm')
            ? MdOpenInNew
            : undefined
        }
        confirmButtonIconPosition={select(
          'ConfirmButtonIconPosition',
          { left: 'left', right: 'right' },
          'left',
          'MessageDialogConfirm'
        )}
        responsive={boolean('Responsive', false, 'MessageDialogConfirm')}
        mobileButtonLayout={
          select(
            'mobileButtonLayout',
            {
              row: 'row',
              column: 'column',
              undefined: '',
            },
            '',
            'MessageDialogConfirm'
          ) || undefined
        }
        {...commonKnobs()}
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogConfirm>
    )}
  />
);

export const OnTaskDialog = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <>
        <TaskDialog
          isOpen={isOpen}
          title="タスクダイアログ"
          onRequestClose={toggle}
          closeButtonLabel="キャンセル"
        >
          タスクダイアログ タスクダイアログ タスクダイアログ タスクダイアログ
          タスクダイアログ タスクダイアログ タスクダイアログ タスクダイアログ
          タスクダイアログ タスクダイアログ タスクダイアログ
        </TaskDialog>
        <MessageDialogConfirm
          isOpen={isOpen}
          id={text('Id', '', 'MessageDialogConfirm')}
          title={text(
            'Title',
            'タスクダイアログ（確認）',
            'MessageDialogConfirm'
          )}
          onRequestClose={toggle}
          onConfirm={toggle}
          closeButtonLabel={text(
            'CloseButtonLabel',
            'キャンセル',
            'MessageDialogConfirm'
          )}
          confirmButtonLabel={text(
            'ConfirmButtonLabel',
            'OK',
            'MessageDialogConfirm'
          )}
          responsive={boolean('Responsive', false, 'MessageDialogConfirm')}
          mobileButtonLayout={
            select(
              'mobileButtonLayout',
              {
                row: 'row',
                column: 'column',
                undefined: '',
              },
              '',
              'MessageDialogConfirm'
            ) || undefined
          }
          {...commonKnobs()}
        >
          <Paragraph>
            文字量や構成要素のすくないメッセージなどは中央寄せで表示
            <br />
            テキストテキストテキストテキストテキストテキスト
          </Paragraph>
        </MessageDialogConfirm>
      </>
    )}
  />
);

export const Responsive = () => (
  <VibesProvider fixedLayout={false}>
    <ToggleDialog
      render={(isOpen, toggle) => (
        <MessageDialogConfirm
          isOpen={isOpen}
          title="レスポンシブ"
          onRequestClose={toggle}
          confirmButtonLabel="OK"
          onConfirm={toggle}
          closeButtonLabel="キャンセル"
        >
          <Paragraph>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
        </MessageDialogConfirm>
      )}
    />
  </VibesProvider>
);

export const BigContent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <MessageDialogConfirm
        isOpen={isOpen}
        title="コンテンツの量が多いとき"
        onRequestClose={toggle}
        confirmButtonLabel="OK"
        onConfirm={toggle}
        closeButtonLabel="キャンセル"
      >
        {Array(50)
          .fill(0)
          .map((i) => (
            <Paragraph key={i}>
              コンテンツの量が多い場合はスクロールします
            </Paragraph>
          ))}
      </MessageDialogConfirm>
    )}
  />
);
export const ContentSamples = () => (
  <>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogConfirmContent
        title="メッセージダイアログ（確認）"
        onRequestClose={action('close')}
        onConfirm={action('confirm')}
        closeButtonLabel="キャンセル"
        confirmButtonLabel="OK"
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogConfirmContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogConfirmContent
        title="メッセージダイアログ（デンジャー）"
        onRequestClose={action('close')}
        onConfirm={action('confirm')}
        closeButtonLabel="キャンセル"
        confirmButtonLabel="OK"
        danger
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogConfirmContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogConfirmContent
        title="メッセージダイアログ（disabled）"
        onRequestClose={action('close')}
        onConfirm={action('confirm')}
        closeButtonLabel="キャンセル"
        confirmButtonLabel="OK"
        disabled
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogConfirmContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogConfirmContent
        title="メッセージダイアログ（suspend）"
        onRequestClose={action('close')}
        onConfirm={action('confirm')}
        closeButtonLabel="キャンセル"
        confirmButtonLabel="OK"
        suspend
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogConfirmContent>
    </div>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <MessageDialogConfirmContent
        title="メッセージダイアログ（情報量が多い場合）"
        onRequestClose={action('close')}
        onConfirm={action('confirm')}
        closeButtonLabel="キャンセル"
        confirmButtonLabel="OK"
        contentAlign="left"
      >
        <ColumnBase ml={-1.5} mr={-1.5}>
          <Paragraph>
            原則としては文字量や構成要素のすくないメッセージが入ることを想定していますが、横や縦に長いコンテンツを入れざるを得ない場合は、横幅が70remまで広げられ、縦方向にはスクロールするようになります。場合に応じてColumnBaseを敷いたり、コンテンツのみを左寄せにするレイアウトも可能です。
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
            <br />
            テキストテキストテキストテキストテキストテキスト
          </Paragraph>
        </ColumnBase>
      </MessageDialogConfirmContent>
    </div>
  </>
);

export const ResponsiveMessageDialogConfirmSample = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <MessageDialogConfirm
        id={text('Id', '', 'MessageDialogConfirm')}
        isOpen={isOpen}
        title="モバイルでボタンが横並びになる例"
        onRequestClose={toggle}
        onConfirm={action('confirm')}
        closeButtonLabel={text(
          'CloseButtonLabel',
          'キャンセル',
          'MessageDialogConfirm'
        )}
        confirmButtonLabel={text(
          'ConfirmButtonLabel',
          'OK',
          'MessageDialogConfirm'
        )}
        confirmButtonHref={text(
          'ConfirmButtonHref',
          '',
          'MessageDialogConfirm'
        )}
        confirmButtonTarget={select(
          'ConfirmButtonTarget',
          {
            _blank: '_blank',
            _self: '_self',
          },
          '_self',
          'MessageDialogConfirm'
        )}
        confirmButtonIconComponent={
          boolean('ConfirmButtonWithIcon', false, 'MessageDialogConfirm')
            ? MdOpenInNew
            : undefined
        }
        confirmButtonIconPosition={select(
          'ConfirmButtonIconPosition',
          { left: 'left', right: 'right' },
          'left',
          'MessageDialogConfirm'
        )}
        responsive={true}
        mobileButtonLayout="row"
        {...commonKnobs()}
      >
        <Paragraph>
          文字量や構成要素のすくないメッセージなどは中央寄せで表示
          <br />
          テキストテキストテキストテキストテキストテキスト
        </Paragraph>
      </MessageDialogConfirm>
    )}
  />
);

export const FocusElementAfterClose = () => {
  const [mode, setMode] = React.useState<'view' | 'edit'>('view');
  const [isModalOpen, setModalOpen] = React.useState(false);
  const elmRef = React.useRef<HTMLHeadingElement>(null);
  return (
    <>
      <WithSideContent
        verticalAlign="middle"
        mb={1}
        sideContent={
          <>
            {mode === 'view' ? (
              <Button IconComponent={MdEdit} onClick={() => setMode('edit')}>
                編集
              </Button>
            ) : (
              <>
                <Button
                  IconComponent={MdCheck}
                  appearance="primary"
                  mr={1}
                  onClick={() => setModalOpen(true)}
                >
                  保存
                </Button>
                <Button
                  IconComponent={MdCancel}
                  appearance="tertiary"
                  onClick={() => setMode('view')}
                >
                  キャンセル
                </Button>
              </>
            )}
            <MessageDialogConfirm
              title="変更を保存しますか？"
              onConfirm={() => {
                setMode('view');
                setModalOpen(false);
              }}
              onRequestClose={() => setModalOpen(false)}
              confirmButtonLabel="保存"
              closeButtonLabel="キャンセル"
              isOpen={isModalOpen}
              elementFocusAfterClose={
                (elmRef.current as HTMLElement) || undefined
              }
              danger
            >
              この変更により、よからぬことが起きることがあります。本当に保存しますか？
            </MessageDialogConfirm>
          </>
        }
      >
        <SectionTitle ref={elmRef}>見出し</SectionTitle>
      </WithSideContent>
      <Paragraph mb={1}>
        <code>elementFocusAfterClose</code>
        を指定することで、ダイアログを閉じたときに特定の要素にフォーカスを移すことができます。
      </Paragraph>
      <Paragraph mb={1}>
        モーダルを開くのに使用したボタンが、ダイアログを閉じたときに存在しなくなる場合に使用します。
      </Paragraph>
      <Paragraph>
        このサンプルでは編集モードから保存するときに確認ダイアログを表示し、閉じると見出し部分にフォーカスします
      </Paragraph>
    </>
  );
};

```

### src/lv2/dialogs/MessageDialogConfirm.tsx
```
typescript
import * as React from 'react';
import PageTitle from '../../lv1/typography/PageTitle';
import Button from '../../lv1/buttons/Button';
import Dialog, { DialogContentProps } from '../../utilities/Dialog';
import DialogBase from '../../lv1/bases/DialogBase';
import ButtonGroup from '../buttonGroup/ButtonGroup';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { useResponsive } from '../../utilities/VibesProvider';

type Props = {
  /**
   * ダイアログの見出しとなる文字列を指定します。（場合に応じて、アイコンを並べるなどもできます）
   */
  title: React.ReactNode;
  /**
   * ダイアログの本文となる要素を指定します。
   */
  children: React.ReactNode;
  /**
   * Confirm ボタンの click ハンドラを設定します。
   */
  onConfirm: React.MouseEventHandler;
  /**
   * Confirm ボタンのラベルとなる文字列を指定します。
   */
  confirmButtonLabel: string;
  /**
   * Confirm ボタンの押下時に遷移させるURLを指定します。指定した場合は `<a>` 要素、空文字列もしくはundefinedの場合は `<button>` 要素となります
   */
  confirmButtonHref?: string;
  /**
   * Confirm ボタンの target を設定します
   */
  confirmButtonTarget?: string;
  /**
   * Confirm ボタンの アイコンの配置箇所を設定します
   */
  confirmButtonIconPosition?: 'left' | 'right';
  /**
   * Confirm ボタンの アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  confirmButtonIconComponent?: React.ElementType;
  /**
   * Close ボタンのラベルとなる文字列を指定します。
   */
  closeButtonLabel: string;
  /**
   * Confirm ボタン、 Close ボタンともに disalbed に設定します。データの読み込み中や Confirm ボタンを押した後のレスポンス待ちの間など、ユーザーに何も操作させず待たせたいときに指定します。
   */
  disabled?: boolean;
  /**
   * Confirm ボタンのみを disalbed に設定します。Confirm 前に何かしらの操作が必要な場合など、「キャンセルはできるけど実行はできない」場合に指定します。
   */
  suspend?: boolean;
  /**
   * Confirm ボタンを danger に設定します。ボタンを押したものの動作が危険性を伴う場合に指定します。
   */
  danger?: boolean;
  /**
   * 指定するとブラウザ幅に応じてダイアログも狭くなります。指定しない場合の幅は 40 rem 固定です。
   */
  responsive?: boolean;
  /**
   * コンテントの揃えを指定できます。デフォルトはcenterですが、情報量が多いときなど左揃えにすることもできます。
   */
  contentAlign?: 'left';
  /**
   * ボタンのレスポンシブ時の並び方を指定できます。
   */
  mobileButtonLayout?: 'row' | 'column';
} & DialogContentProps &
  CommonProps;

export const MessageDialogConfirmContent: React.FC<Props> = (props: Props) => {
  const {
    id,
    titleId,
    title,
    children,
    onRequestClose,
    onConfirm,
    confirmButtonLabel,
    confirmButtonHref,
    confirmButtonTarget,
    confirmButtonIconPosition,
    confirmButtonIconComponent,
    closeButtonLabel,
    disabled,
    suspend,
    danger,
    contentAlign,
    mobileButtonLayout,
  } = props;
  const baseClassName = 'vb-messageDialog';
  // 雑にに書いてますが、各パーツをコンポーネントとして切り出すリファクタをする際に直します。
  const alignLeftClass =
    contentAlign === 'left' ? 'vb-messageDialog__body--alignLeft' : '';
  const responsive = useResponsive(props.responsive);
  return (
    <div
      {...commonProps(props, baseClassName, {
        responsive,
      })}
      id={id}
    >
      <DialogBase message paddingSize="zero">
        <div className={`${baseClassName}__inner`}>
          <div className={`${baseClassName}__header`}>
            <PageTitle id={titleId}>{title}</PageTitle>
          </div>
          <div
            className={`${baseClassName}__body ${alignLeftClass}`}
            // 表示領域が足りないときにスクロールするので、tabIndexをつける（キーボードでスクロールできるようになる）
            // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
            tabIndex={0}
          >
            {children}
          </div>
          <div className={`${baseClassName}__footer`}>
            <ButtonGroup
              responsive={responsive}
              mobileButtonLayout={mobileButtonLayout}
            >
              <Button
                onClick={onConfirm}
                disabled={!!disabled || !!suspend}
                primary={!danger}
                danger={!!danger}
                href={confirmButtonHref}
                target={confirmButtonTarget}
                iconPosition={confirmButtonIconPosition}
                IconComponent={confirmButtonIconComponent}
                hasMinWidth
              >
                {confirmButtonLabel}
              </Button>
              <Button
                hasMinWidth
                onClick={onRequestClose}
                disabled={!!disabled}
              >
                {closeButtonLabel}
              </Button>
            </ButtonGroup>
          </div>
        </div>
      </DialogBase>
    </div>
  );
};

/**
 * 操作（タスク）の確認に用いるダイアログです
 *
 * - 確認が必要となる操作の例には、削除などの不可逆的な操作や支払いなど金銭が絡むなど操作が間違うとリスクを生む場合が当てはまります。
 * - 原則として確認はなるべく、短い質問で2択で答えるようにしましょう。（データの内容を表示するなど表示領域が必要な場合は、横幅は70remまで伸び縦にはスクロールが起こります）
 * - モーダルで行う必要のあるタスク自体には `TaskDialog` を使用してください
 * - TaskDialogよりも上に表示されるので、TaskDialogでの操作に対する確認としても使えます。
 *
 * ## accessibility
 * dialogが閉じた際、dialogが開く直前にフォーカスしていた要素（多くの場合はdialogを開かせたボタン）に戻るようになっています。
 *
 * ただし、UIの状態の変化等の理由でdialogが開く直前にフォーカスしていた要素に戻れない場合は、戻り先として適切な任意の要素を指定するようにしてください。(`elementFocusAfterClose`を使って指定できます)
 *
 */
const MessageDialogConfirm = (
  props: Omit<Props, 'titleId'> &
    Pick<
      Parameters<typeof Dialog>[0],
      'isOpen' | 'elementFocusAfterClose' | 'contentRef'
    >
) => (
  <Dialog
    id={props.id}
    alertDialog={true}
    contentRef={props.contentRef}
    shouldCloseOnOverlayClickOrEsc={false}
    isOpen={props.isOpen}
    onRequestClose={props.onRequestClose}
    elementFocusAfterClose={props.elementFocusAfterClose}
    render={(p) => <MessageDialogConfirmContent {...props} {...p} />}
  />
);
export default MessageDialogConfirm;

```

### src/lv2/dialogs/TaskDialog.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { text, boolean, select } from '@storybook/addon-knobs';
import TaskDialog, { TaskDialogContent } from './TaskDialog';
import Paragraph from '../../lv1/typography/Paragraph';
import TextButton from '../../lv1/buttons/TextButton';
import CheckBox from '../../lv1/forms/CheckBox';
import { commonKnobs } from '../../../stories';
import ToggleDialog from './ToggleDialog';
import MessageIcon from '../messageIcon/MessageIcon';
import { Button } from '../../lv1';
import { MdAdd } from 'react-icons/md';
import { VibesProvider } from '../../utilities';

export default {
  component: TaskDialog,
};

export const TaskDialogComponent = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <TaskDialog
        id={text('Id', '', 'TaskDialog')}
        isOpen={isOpen}
        title={text('Title', 'タスクダイアログ', 'TaskDialog')}
        onRequestClose={toggle}
        onPrimaryAction={action('primary action')}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'TaskDialog')}
        primaryButtonLabel={text('PrimaryButtonLabel', 'OK', 'TaskDialog')}
        danger={boolean('Danger', false, 'TaskDialog')}
        disabled={boolean('Disabled', false, 'TaskDialog')}
        suspend={boolean('Suspend', false, 'TaskDialog')}
        shouldCloseOnOverlayClickOrEsc={boolean(
          'ShouldCloseOnOverlayClickOrEsc',
          false,
          'TaskDialog'
        )}
        responsive={boolean('Responsive', false, 'TaskDialog')}
        mobileButtonLayout={
          select(
            'mobileButtonLayout',
            {
              row: 'row',
              column: 'column',
              undefined: '',
            },
            '',
            'TaskDialog'
          ) || undefined
        }
        {...commonKnobs()}
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialog>
    )}
  />
);

export const HeaderSideContentSample = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <TaskDialog
        isOpen={isOpen}
        id={text('Id', '', 'TaskDialog')}
        title={text('Title', 'タスクダイアログ', 'TaskDialog')}
        onRequestClose={toggle}
        onPrimaryAction={action('primary action')}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'TaskDialog')}
        primaryButtonLabel={text('PrimaryButtonLabel', 'OK', 'TaskDialog')}
        responsive={boolean('Responsive', true, 'TaskDialog')}
        headerSideContent={<Button>ボタン</Button>}
        {...commonKnobs()}
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialog>
    )}
  />
);

export const DialogFooterSample = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <TaskDialog
        isOpen={isOpen}
        id={text('Id', '', 'TaskDialog')}
        title={text('Title', 'タスクダイアログ', 'TaskDialog')}
        onRequestClose={toggle}
        onPrimaryAction={action('primary action')}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'TaskDialog')}
        primaryButtonLabel={text('PrimaryButtonLabel', 'OK', 'TaskDialog')}
        responsive={boolean('Responsive', true, 'TaskDialog')}
        footerOptionalContent={<CheckBox>チェックボックス</CheckBox>}
        footerSideContent={<TextButton>テキストボタン</TextButton>}
        {...commonKnobs()}
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialog>
    )}
  />
);

export const ResponsiveDialogFooterSample = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <TaskDialog
        isOpen={isOpen}
        id={text('Id', '', 'TaskDialog')}
        title="モバイルで上位2ボタンだけ横並びになる例"
        onRequestClose={toggle}
        onPrimaryAction={action('primary action')}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'TaskDialog')}
        primaryButtonLabel={text('PrimaryButtonLabel', 'OK', 'TaskDialog')}
        responsive={true}
        footerOptionalContent={
          <Button appearance="tertiary" IconComponent={MdAdd}>
            ターシャリボタン
          </Button>
        }
        footerSideContent={<TextButton>テキストボタン</TextButton>}
        mobileButtonLayout="row"
        {...commonKnobs()}
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialog>
    )}
  />
);

export const Responsive = () => (
  <VibesProvider fixedLayout={false}>
    <ToggleDialog
      render={(isOpen, toggle) => (
        <TaskDialog
          id={text('Id', '', 'TaskDialog')}
          isOpen={isOpen}
          title="レスポンシブレイアウト"
          onRequestClose={toggle}
          onPrimaryAction={toggle}
          closeButtonLabel="キャンセル"
          primaryButtonLabel="OK"
          mobileButtonLayout={
            select(
              'mobileButtonLayout',
              {
                row: 'row',
                column: 'column',
                undefined: '',
              },
              '',
              'TaskDialog'
            ) || undefined
          }
          {...commonKnobs()}
        >
          <Paragraph mb={1}>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
          <Paragraph mb={1}>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
          <Paragraph mb={1}>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
          <Paragraph mb={1}>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
          <Paragraph>
            <code>responsive</code> prop または{' '}
            <code>
              &lt;VibesProvider responsive={'{'}false{'}'}&gt;
            </code>{' '}
            を使用すると、レスポンシブレイアウトで使用できます
          </Paragraph>
        </TaskDialog>
      )}
    />
  </VibesProvider>
);

export const ContentLabel = () => (
  <ToggleDialog
    render={(isOpen, toggle) => (
      <TaskDialog
        isOpen={isOpen}
        id={text('Id', '', 'TaskDialog')}
        title={text('Title', 'タスクダイアログ', 'TaskDialog')}
        onRequestClose={toggle}
        onPrimaryAction={action('primary action')}
        closeButtonLabel={text('CloseButtonLabel', 'キャンセル', 'TaskDialog')}
        primaryButtonLabel={text('PrimaryButtonLabel', 'OK', 'TaskDialog')}
        responsive={boolean('Responsive', true, 'TaskDialog')}
        headerSideContent={<Button>ボタン</Button>}
        contentLabel={text('ContentLabel', 'タスクダイアログ', 'TaskDialog')}
        {...commonKnobs()}
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialog>
    )}
  />
);

export const ContentSamples = () => (
  <>
    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <TaskDialogContent
        title="タスクダイアログ"
        onRequestClose={action('close')}
        onPrimaryAction={action('primary action')}
        closeButtonLabel="キャンセル"
        primaryButtonLabel="OK"
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialogContent>
    </div>

    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <TaskDialogContent
        title="タスクダイアログ（without primaryButton）"
        onRequestClose={action('close')}
        closeButtonLabel="キャンセル"
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialogContent>
    </div>

    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <TaskDialogContent
        title="タスクダイアログ（disabled）"
        onRequestClose={action('close')}
        onPrimaryAction={action('primary action')}
        closeButtonLabel="キャンセル"
        primaryButtonLabel="OK"
        danger
        disabled
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialogContent>
    </div>

    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      {/* $FlowFixMe */}
      <TaskDialogContent
        title="タスクダイアログ（suspend）"
        onRequestClose={action('close')}
        onPrimaryAction={action('primary action')}
        closeButtonLabel="キャンセル"
        primaryButtonLabel="OK"
        danger
        suspend
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialogContent>
    </div>

    <div style={{ display: 'flex', marginBottom: '1rem' }}>
      <TaskDialogContent
        title={
          <>
            タイトルに文字列と他の要素を合わせて置く例
            {/* タイトルと合わせて使う場合はMessageIconにlargeサイズの指定があると良い */}
            <MessageIcon ml={0.5} label="ヘルプ">
              ここに説明が入ります
            </MessageIcon>
          </>
        }
        onRequestClose={action('close')}
        onPrimaryAction={action('primary action')}
        closeButtonLabel="キャンセル"
        primaryButtonLabel="OK"
      >
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
        <Paragraph>
          フォームやリストなどのユーザー操作が含まれる場合はタスクダイアログを使用
        </Paragraph>
      </TaskDialogContent>
    </div>
  </>
);

```

### src/lv2/dialogs/TaskDialog.tsx
```
typescript
import * as React from 'react';
import PageTitle from '../../lv1/typography/PageTitle';
import Button from '../../lv1/buttons/Button';
import DialogBase from '../../lv1/bases/DialogBase';
import DialogFooter from './parts/DialogFooter';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import Dialog, { DialogContentProps } from '../../utilities/Dialog';
import { useResponsive } from '../../utilities/VibesProvider';
import { WithSideContent } from '../..';

type Props = {
  /**
   * ダイアログの見出しとなります。
   * 基本は文字列のみの想定ですが、用途に応じて他の要素を合わせて表示もできます。
   */
  title: React.ReactNode;
  /**
   * ダイアログの本文となる要素を指定します。
   */
  children: React.ReactNode;
  /**
   * プライマリボタンの click ハンドラを設定します。
   */
  onPrimaryAction?: React.MouseEventHandler;
  /**
   * プライマリボタンのラベルとなる文字列を指定します。
   */
  primaryButtonLabel?: string;
  /**
   * Close ボタンのラベルとなる文字列を指定します。
   */
  closeButtonLabel: string;
  /**
   * プライマリボタンを danger に設定します。ボタンを押したものの動作が危険性を伴う場合に指定します。
   */
  danger?: boolean;
  /**
   * プライマリボタン、 Close ボタンともに disalbed に設定します。データの読み込み中やプライマリボタンを押した後のレスポンス待ちの間など、ユーザーに何も操作させず待たせたいときに指定します。
   */
  disabled?: boolean;
  /**
   * プライマリボタンのみを disalbed に設定します。Confirm 前に何かしらの操作が必要な場合など、「キャンセルはできるけど実行はできない」場合に指定します。
   */
  suspend?: boolean;
  /**
   * Esc キーの押下やオーバーレイのクリックでダイアログを閉じられるようになります。
   *
   *  - 無指定の場合は `false` の状態になっています
   *  - ダイアログ内にフォーム等がある状態で `true` にする場合は、変更がある場合に確認ダイアログを出すなどして、Esc キーの押下やオーバーレイのクリックによって作業内容が不意に消えてしまうようなことが起きないようにしてください
   *  - ダイアログ内にフォーム等がない場合や、フォーム等の値に変更がない場合は、 `true` にして問題ありません
   */
  shouldCloseOnOverlayClickOrEsc?: boolean;
  /**
   * 指定するとブラウザ幅に応じてダイアログも狭くなります。指定しない場合の最低幅は 40 rem です。
   */
  responsive?: boolean;
  /**
   * ヘッダーに右寄せでコンテンツを配置したい場合に使います。
   */
  headerSideContent?: React.ReactNode;
  /**
   * 左寄せのPrimaryアクションのボタンとキャンセルボタンに続けて置きたい場合に使います。
   */
  footerOptionalContent?: React.ReactNode;
  /**
   * 右寄せに何か置きたい場合に使います。
   */
  footerSideContent?: React.ReactNode;
  /**
   * 上位2ボタンのレスポンシブ時の並び方を指定できます。
   */
  mobileButtonLayout?: 'row' | 'column';
  /**
   * モーダルのaria-labelを指定できます。
   * 指定しなかった場合はaria-labelledbyによってタイトルの文言が参照されます。
   */
  contentLabel?: string;
} & DialogContentProps &
  CommonProps;

export const TaskDialogContent: React.FC<Props> = (props: Props) => {
  const {
    id,
    titleId,
    title,
    children,
    onRequestClose,
    onPrimaryAction,
    primaryButtonLabel,
    closeButtonLabel,
    disabled,
    suspend,
    danger,
    headerSideContent,
    footerOptionalContent,
    footerSideContent,
    mobileButtonLayout,
  } = props;
  const baseClassName = 'vb-taskDialog';
  const responsive = useResponsive(props.responsive);
  return (
    <div {...commonProps(props, baseClassName, { responsive })} id={id}>
      <DialogBase paddingSize="zero">
        <div className={`${baseClassName}__inner`}>
          <div className={`${baseClassName}__flex`}>
            <div className={`${baseClassName}__header`}>
              {headerSideContent ? (
                <WithSideContent sideContent={headerSideContent}>
                  <PageTitle id={titleId}>{title}</PageTitle>
                </WithSideContent>
              ) : (
                <PageTitle id={titleId}>{title}</PageTitle>
              )}
            </div>
            {/* 表示領域が足りないときにスクロールするので、tabIndexをつける（キーボードでスクロールできるようになる） */}
            {/* eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex */}
            <div className={`${baseClassName}__body`} tabIndex={0}>
              {children}
            </div>
            <div className={`${baseClassName}__footer`}>
              <DialogFooter
                responsive={responsive}
                sideContent={footerSideContent && footerSideContent}
                mobileButtonLayout={mobileButtonLayout}
              >
                {primaryButtonLabel && onPrimaryAction && (
                  <Button
                    onClick={onPrimaryAction}
                    disabled={!!disabled || !!suspend}
                    primary={!danger}
                    danger={!!danger}
                    hasMinWidth
                  >
                    {primaryButtonLabel}
                  </Button>
                )}
                <Button
                  hasMinWidth
                  onClick={onRequestClose}
                  disabled={!!disabled}
                >
                  {closeButtonLabel}
                </Button>
                {footerOptionalContent && footerOptionalContent}
              </DialogFooter>
            </div>
          </div>
        </div>
      </DialogBase>
    </div>
  );
};

/**
 * 内部にフォームなどの複雑で大きなコンテンツを配置する場合に使用します。コンテンツ部分は大きくなるとスクロールします。
 *
 * - `isOpen` propで開閉します
 * - 表示するコンテンツが多く、入り切らない場合は `FullScreenModal` の使用を検討してください。
 *
 * ## accessibility
 * dialogが閉じた際、dialogが開く直前にフォーカスしていた要素（多くの場合はdialogを開かせたボタン）に戻るようになっています。
 *
 * ただし、UIの状態の変化等の理由でdialogが開く直前にフォーカスしていた要素に戻れない場合は、戻り先として適切な任意の要素を指定するようにしてください。(`elementFocusAfterClose`を使って指定できます)
 *
 */
const TaskDialog = (
  props: Omit<Props, 'titleId'> &
    Pick<
      Parameters<typeof Dialog>[0],
      'isOpen' | 'elementFocusAfterClose' | 'contentRef'
    >
) => (
  <Dialog
    id={props.id}
    alertDialog={false}
    shouldCloseOnOverlayClickOrEsc={!!props.shouldCloseOnOverlayClickOrEsc}
    isOpen={props.isOpen}
    onRequestClose={props.onRequestClose}
    contentLabel={props.contentLabel}
    contentRef={props.contentRef}
    elementFocusAfterClose={props.elementFocusAfterClose}
    render={(p) => <TaskDialogContent {...props} {...p} />}
  />
);
export default TaskDialog;

```

### src/lv2/dialogs/ToggleDialog.tsx
```
typescript
import * as React from 'react';
import Button from '../../lv1/buttons/Button';

type ToggleDialogProps = {
  render: (isOpen: boolean, toggle: () => void) => void;
};

const ToggleDialog: React.FC<ToggleDialogProps> = (
  props: ToggleDialogProps
) => {
  const [isOpen, setOpen] = React.useState<boolean>(false);
  const toggle = () => setOpen(!isOpen);
  return (
    <>
      <Button onClick={toggle}>open</Button>
      {props.render(isOpen, toggle)}
    </>
  );
};
export default ToggleDialog;

```

### src/lv2/dialogs/parts/DialogFooter.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../../stories';
import Button from '../../../lv1/buttons/Button';
import TextButton from '../../../lv1/buttons/TextButton';
import CheckBox from '../../../lv1/forms/CheckBox';
import DialogFooter from './DialogFooter';

export default {
  component: DialogFooter,
};

export const DialogFooterComponent = () => (
  <DialogFooter
    sideContent={<TextButton>テキストボタン</TextButton>}
    responsive={boolean('responsive', true, 'DialogFooter')}
    mobileButtonLayout={
      select(
        'mobileButtonLayout',
        {
          row: 'row',
          column: 'column',
          undefined: '',
        },
        '',
        'DialogFooter'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Button primary>ボタン1</Button>
    <Button>ボタン2</Button>
    <CheckBox>チェックボックス</CheckBox>
  </DialogFooter>
);

export const ResponsiveDialogFooter = () => (
  <DialogFooter
    sideContent={<TextButton>テキストボタン</TextButton>}
    responsive={true}
    mobileButtonLayout="row"
    {...commonKnobs()}
  >
    <Button primary>ボタン1</Button>
    <Button>ボタン2</Button>
    <CheckBox>チェックボックス</CheckBox>
  </DialogFooter>
);

```

### src/lv2/dialogs/parts/DialogFooter.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../../utilities/commonProps';
import vbClassNames from '../../../utilities/vbClassNames';
import ButtonGroup from '../../buttonGroup/ButtonGroup';

type Props = {
  /**
   * 左寄せに置かれます。
   */
  children: React.ReactNodeArray | React.ReactNode;
  /**
   * 右寄せにボタン等を任意で置けます。
   */
  sideContent?: React.ReactNodeArray | React.ReactNode;
  responsive?: boolean;
  /**
   * 上位2ボタンのレスポンシブ時の並び方を指定できます。
   */
  mobileButtonLayout?: 'row' | 'column';
} & CommonProps;

/**
 * Dialogのfooterに「任意のコンポーネントを置く & レスポンシブ対応する」ためのパーツです。
 *
 * 「左寄せでボタン等を並べられる」かつ「任意で右寄せに何か置ける」を想定しています。
 *
 *  レスポンシブ時は、全てのパーツが中央寄せで、縦済みになります。
 */

const DialogFooter: React.FC<Props> = (props: Props) => {
  const { children, sideContent, responsive, mobileButtonLayout } = props;
  const baseClassName = 'vb-DialogFooter';

  return (
    <div {...commonProps(props, baseClassName, { responsive })}>
      <ButtonGroup
        align="left"
        responsive={responsive}
        mobileButtonLayout={mobileButtonLayout}
      >
        {children}
      </ButtonGroup>
      {sideContent && (
        <div
          className={vbClassNames(`${baseClassName}__sideContent`, {
            modifier: { responsive },
          })}
        >
          <ButtonGroup responsive={responsive}>{sideContent}</ButtonGroup>
        </div>
      )}
    </div>
  );
};

export default DialogFooter;

```

### src/lv2/dialogs/parts/GuideStepCount.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../../utilities/commonProps';

type Props = {
  stepCount: number;
  totalStepCount: number;
} & CommonProps;

const GuideStepCount: React.FC<Props> = (props: Props) => {
  const { stepCount, totalStepCount } = props;

  return (
    <div {...commonProps(props, 'vb-guideStepCount')}>
      <span className="vb-guideStepCount__currentStep">{stepCount}</span>
      <span> / </span>
      <span>{totalStepCount}</span>
    </div>
  );
};

export default GuideStepCount;

```

### src/lv2/dropdown/Dropdown.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import Dropdown from './Dropdown';
import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';
import Note from '../../lv1/typography/Note';

export default {
  component: Dropdown,
};

export const DropdownComponent = () => (
  <Dropdown
    onRequestClose={action('onRequestClose')}
    contents={[
      {
        type: 'selectable',
        text: 'freee株式会社',
        ariaLabel: 'freee株式会社 に切り替える',
        onClick: action('menu clicked'),
        'data-test': '選択可能なアイテム',
      },
      {
        type: 'selectable',
        text: (
          <>
            テスト（株）<Note>備考備考備考</Note>
          </>
        ),
        ariaLabel: 'テスト（株） に切り替える',
        onClick: action('menu clicked'),
      },
      {
        type: 'selectable',
        text: '株式会社テストテストテスト に切り替える',
        onClick: action('menu clicked'),
      },
      {
        type: 'selectable',
        text: '株式会社テストテストテスト に切り替える（unread）',
        unread: true,
      },
      {
        type: 'selectable',
        text: '株式会社テストテストテスト に切り替える（選択不可）',
        disabled: true,
      },
      {
        type: 'selectable',
        text: '削除',
        danger: true,
      },
      {
        type: 'selectable',
        text: '削除',
        disabled: true,
        danger: true,
      },
      {
        type: 'selectable',
        text: 'リンク',
        url: 'https://www.freee.co.jp',
      },
      {
        type: 'selectable',
        text: '外部リンク',
        url: 'https://www.freee.co.jp',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        type: 'selectable',
        text: 'リンク (disabled)',
        disabled: true,
        url: 'https://www.freee.co.jp',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        type: 'selectable',
        text: 'リンク（with react-router）',
        url: 'https://www.freee.co.jp',
        onSelfWindowNavigation: action('selfWindowNavigation'),
      },
      {
        type: 'selectable',
        text: 'とてもとてもとてもとてもとてもとてもとてもとてもとてもとても長い',
        url: 'https://www.freee.co.jp',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        type: 'checkbox',
        text: 'チェックボックス',
        value: 'checkbox',
        name: 'checkbox',
        onChange: action('checkbox change'),
        checked: false,
        'data-test': 'チェック可能なアイテム',
      },
      { type: 'rule' },
      {
        type: 'textOnly',
        text: '現在の事業所番号\nXXX-XXXX-XXXX',
        'data-test': 'テキストアイテム',
      },
    ]}
    align={
      select(
        'align',
        { left: 'left', right: 'right', none: '' },
        '',
        'Dropdown'
      ) || undefined
    }
    {...commonKnobs()}
  />
);
export const SingleOption = () => (
  <Dropdown
    contents={[
      {
        type: 'selectable',
        text: 'freee株式会社',
        ariaLabel: 'freee株式会社 に切り替える',
        onClick: action('menu clicked'),
      },
    ]}
  />
);

```

### src/lv2/dropdown/Dropdown.tsx
```
typescript
import * as React from 'react';
import PopupBase from '../../lv1/bases/PopupBase';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import DropdownMenuContent from './DropdownMenuContent';
import { Keys } from '../../utilities/keyboard';

type Props = Pick<
  Parameters<typeof DropdownMenuContent>[0],
  'contents' | 'firstSelectableItemRef' | 'onRequestClose'
> & {
  align?: 'left' | 'right';
  positionRelative?: boolean;
} & CommonProps;

/**
 * ドロップダウンメニューのコンポーネントです。
 *
 * 「ボタンを押したらメニューが表示される」UIであれば、DropdownButtonコンポーネントを使用してください。
 */
const Dropdown: React.FC<Props> = (props: Props) => {
  const {
    firstSelectableItemRef,
    onRequestClose,
    contents,
    align,
    positionRelative,
  } = props;
  return (
    <div
      {...commonProps(props, 'vb-dropdown', {
        alignRight: align === 'right',
        positionRelative,
      })}
    >
      {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
      <div
        className="vb-dropdown__body"
        onKeyDown={(e) =>
          e.key === Keys.ESC && onRequestClose && onRequestClose()
        }
      >
        <PopupBase paddingSize="zero">
          <DropdownMenuContent
            contents={contents}
            onRequestClose={onRequestClose}
            onFocusOut={onRequestClose}
            firstSelectableItemRef={firstSelectableItemRef}
          />
        </PopupBase>
      </div>
    </div>
  );
};
export default Dropdown;

```

### src/lv2/dropdown/DropdownMenuContent.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import DropdownMenuContent from './DropdownMenuContent';
import { DropdownContent } from './types';
import { commonKnobs } from '../../../stories';
import Button from '../../lv1/buttons/Button';
import Note from '../../lv1/typography/Note';

export default {
  component: DropdownMenuContent,
};

export const DropdownComponent = () => (
  <DropdownMenuContent
    contents={[
      {
        type: 'selectable',
        text: 'freee株式会社',
        ariaLabel: 'freee株式会社 に切り替える',
        onClick: action('menu clicked'),
      },
      {
        type: 'selectable',
        text: (
          <>
            テスト（株）<Note>備考備考備考</Note>
          </>
        ),
        ariaLabel: 'テスト（株） に切り替える',
        onClick: action('menu clicked'),
      },
      {
        type: 'selectable',
        text: '株式会社テストテストテスト に切り替える',
        onClick: action('menu clicked'),
      },
      {
        type: 'selectable',
        text: '株式会社テストテストテスト に切り替える（unread）',
        unread: true,
      },
      {
        type: 'selectable',
        text: '株式会社テストテストテスト に切り替える（選択不可）',
        disabled: true,
      },
      {
        type: 'selectable',
        text: 'リンク',
        url: 'https://www.freee.co.jp',
      },
      {
        type: 'selectable',
        text: '外部リンク',
        url: 'https://www.freee.co.jp',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        type: 'selectable',
        text: 'リンク (disabled)',
        disabled: true,
        url: 'https://www.freee.co.jp',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        type: 'selectable',
        text: '削除',
        danger: true,
      },
      {
        type: 'selectable',
        text: '削除',
        disabled: true,
        danger: true,
      },
      {
        type: 'selectable',
        text: 'リンク（with react-router）',
        url: 'https://www.freee.co.jp',
        onSelfWindowNavigation: action('selfWindowNavigation'),
      },
      {
        type: 'selectable',
        text: 'とてもとてもとてもとてもとてもとてもとてもとてもとてもとても長い',
        url: 'https://www.freee.co.jp',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        type: 'checkbox',
        text: 'チェックボックス',
        value: 'checkbox',
        name: 'checkbox',
        onChange: action('checkbox change'),
        checked: false,
      },
      { type: 'rule' },
      {
        type: 'textOnly',
        text: '現在の事業所番号\nXXX-XXXX-XXXX',
      },
    ]}
    {...commonKnobs()}
  />
);
export const SingleOption = () => (
  <DropdownMenuContent
    contents={[
      {
        type: 'selectable',
        text: 'freee株式会社',
        ariaLabel: 'freee株式会社 に切り替える',
        onClick: action('menu clicked'),
      },
    ]}
  />
);
export const ManyOptions = () => {
  const [state, setState] = React.useState<number>(new Date().getTime());

  const contents: DropdownContent[] = [...Array(100)].map((_, i) => ({
    type: 'selectable',
    text: `リンク${i}`,
    onClick: action('menu clicked'),
  }));

  return (
    <>
      <Button onClick={() => setState(new Date().getTime())}>refresh</Button>
      <DropdownMenuContent key={state} contents={contents} />
    </>
  );
};

```

### src/lv2/dropdown/DropdownMenuContent.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import Item from './Item';
import { Keys } from '../../utilities/keyboard';
import { DropdownContent } from './types';

type Props = {
  contents: Array<DropdownContent>;
  firstSelectableItemRef?: React.Ref<
    HTMLButtonElement | HTMLAnchorElement | HTMLInputElement
  >;
  menuMaxHeightOffset?: number;
  onRequestClose?: () => void;
  onFocusOut?: (direction: 'upward' | 'downward') => void;
} & CommonProps;

const getFocusableItemsOfList = (listEl: HTMLElement) =>
  listEl.querySelectorAll(
    '.vb-dropdownItem--selectable:not(.vb-dropdownItem--disabled) button, .vb-dropdownItem--selectable:not(.vb-dropdownItem--disabled) a, .vb-dropdownItem--checkbox input:not([disabled])'
  );
const getIndexOfTargetElement = (
  targetEl: Element,
  items: NodeListOf<Element>
) => Array.prototype.indexOf.call(items, targetEl);

const handleKeyDownSelectableItem = (
  e: React.KeyboardEvent<
    HTMLButtonElement | HTMLAnchorElement | HTMLInputElement
  >,
  selfRef: React.Ref<HTMLUListElement>,
  onFocusOut?: (direction: 'upward' | 'downward') => void
): void => {
  const current =
    selfRef instanceof HTMLUListElement
      ? selfRef
      : typeof selfRef === 'object'
      ? selfRef?.current
      : null;
  switch (e.key) {
    case Keys.UP:
      e.preventDefault();
      if (current) {
        const items = getFocusableItemsOfList(current);
        const currentIndex = getIndexOfTargetElement(
          e.target as Element,
          items
        );
        if (currentIndex > 0) {
          const prev = items[currentIndex - 1];
          if (
            prev instanceof HTMLButtonElement ||
            prev instanceof HTMLAnchorElement ||
            prev instanceof HTMLInputElement
          ) {
            prev.focus();
          }
        } else if (currentIndex === 0) {
          onFocusOut && onFocusOut('upward');
        }
      }
      break;
    case Keys.DOWN:
      e.preventDefault();
      if (current) {
        const items = getFocusableItemsOfList(current);
        const currentIndex = getIndexOfTargetElement(
          e.target as Element,
          items
        );
        if (currentIndex >= 0 && currentIndex < items.length - 1) {
          const next = items[currentIndex + 1];
          if (
            next instanceof HTMLButtonElement ||
            next instanceof HTMLAnchorElement ||
            next instanceof HTMLInputElement
          ) {
            next.focus();
          }
        } else if (currentIndex === items.length - 1) {
          onFocusOut && onFocusOut('downward');
        }
      }
      break;
  }
};

/**
 * ドロップダウンメニューの内部コンポーネントです。
 *
 * - 単体で使用される想定のないコンポーネントです。PopupBaseに包んで使用してください。
 * - ボタンをクリックした際に表示されるような場合はDropdownButton、そのボタン部分をカスタマイズしたい場合はWithDropdownを使用してください。
 */
const DropdownMenuContentInternal: React.ForwardRefRenderFunction<
  HTMLDivElement,
  Props
> = (props: Props, ref: React.Ref<HTMLDivElement>) => {
  const selfRef = React.useRef<HTMLUListElement>(null);
  const {
    firstSelectableItemRef,
    menuMaxHeightOffset = 0,
    onRequestClose,
    onFocusOut,
    contents,
  } = props;

  const forwardFocus: React.FocusEventHandler<HTMLElement> = (e) => {
    if (e.target !== e.currentTarget) {
      return;
    }
    const firstElm = getFocusableItemsOfList(e.currentTarget)[0];
    if (
      firstElm instanceof HTMLAnchorElement ||
      firstElm instanceof HTMLButtonElement ||
      firstElm instanceof HTMLInputElement
    ) {
      firstElm.focus();
    }
  };

  const [menuMaxHeight, setMenuMaxHeight] = React.useState<
    number | undefined
  >();
  React.useEffect(() => {
    if (selfRef?.current) {
      const rect = selfRef.current.getBoundingClientRect();
      const windowHeight = window.innerHeight;
      setMenuMaxHeight(windowHeight - rect.top - menuMaxHeightOffset);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [selfRef?.current?.getBoundingClientRect().top]);

  let selectableItemIdxCounter = 0;
  return (
    <div
      {...commonProps(props, 'vb-dropdownMenuContent')}
      // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
      tabIndex={-1}
      // ここにフォーカスが来たら最初の選択可能アイテムにフォーカスを移動する
      onFocus={forwardFocus}
      ref={ref}
    >
      {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events */}
      <ul
        className="vb-dropdownMenuContent__list"
        role="menu"
        ref={selfRef}
        style={{
          ...(menuMaxHeight
            ? { maxHeight: `min(60vh, calc(${menuMaxHeight}px - 1rem)) ` }
            : {}),
          minHeight: '2.5rem',
        }}
        // ここにtabIndexをつけているのは、親要素のtabIndex=-1へのフォーカス移動を阻止するため
        tabIndex={-1}
      >
        {contents.map((content, i) => {
          const isAvailable =
            (content.type === 'selectable' || content.type === 'checkbox') &&
            !content.disabled;
          // selectableなcontentの中で何番目か
          const selectableItemIdx = isAvailable
            ? selectableItemIdxCounter++
            : 0;
          const itemRef =
            isAvailable && selectableItemIdx === 0
              ? firstSelectableItemRef
              : undefined;
          return (
            <Item
              key={i}
              content={content}
              onKeyDown={(e) =>
                handleKeyDownSelectableItem(e, selfRef, onFocusOut)
              }
              selectableItemRef={itemRef}
              onRequestClose={onRequestClose}
            />
          );
        })}
      </ul>
    </div>
  );
};
const DropdownMenuContent = React.forwardRef(DropdownMenuContentInternal);
export default DropdownMenuContent;

```

### src/lv2/dropdown/Item.tsx
```
typescript
import * as React from 'react';
import { DropdownContent } from './types';
import { MdOpenInNew } from 'react-icons/md';
import CheckBox from '../../lv1/forms/CheckBox';
import MaterialIcon from '../../lv1/icons/MaterialIcon';
import { pickCommonDataProps } from '../../utilities/commonProps';
import selfWindowNavigator from '../../utilities/selfWindowNavigator';

type Props = {
  content: DropdownContent;
  onKeyDown: (
    e: React.KeyboardEvent<
      HTMLButtonElement | HTMLAnchorElement | HTMLInputElement
    >
  ) => void;
  selectableItemRef?: React.Ref<
    HTMLButtonElement | HTMLAnchorElement | HTMLInputElement
  >;
  onRequestClose?: () => void;
};

const Item: React.FC<Props> = ({
  content,
  onKeyDown,
  selectableItemRef,
  onRequestClose,
}: Props) => {
  const baseClass = 'vb-dropdownItem';
  switch (content.type) {
    case 'rule':
      return (
        <li className={`${baseClass} ${baseClass}--rule`} role="separator" />
      );
    case 'textOnly':
      return (
        <li
          className={`${baseClass}${
            content.unread ? ` ${baseClass}--unread` : ''
          }`}
          role="menuitem"
        >
          <span
            className={`${baseClass}__text`}
            {...pickCommonDataProps(content)}
          >
            {content.text}
          </span>
        </li>
      );
    case 'checkbox':
      return (
        <li className={`${baseClass} ${baseClass}--checkbox`} role="menuitem">
          <span className={`${baseClass}__checkBoxItem`}>
            <CheckBox
              value={content.value}
              checked={content.checked}
              onChange={content.onChange}
              name={content.name}
              disabled={content.disabled}
              onKeyDown={onKeyDown}
              ref={selectableItemRef as React.Ref<HTMLInputElement>}
              {...pickCommonDataProps(content)}
            >
              {content.text}
            </CheckBox>
          </span>
        </li>
      );
    case 'selectable':
    default: {
      const unreadClass = content.unread ? ` ${baseClass}--unread` : '';
      const disabledClass = content.disabled ? ` ${baseClass}--disabled` : '';
      const dangerContentClass = content.danger
        ? ` ${baseClass}__content--danger`
        : '';

      return (
        <li
          className={`${baseClass} ${baseClass}--selectable ${unreadClass} ${disabledClass}`}
          role="menuitem"
        >
          {content.url ? (
            <a
              href={content.url}
              target={content.target}
              className={`${baseClass}__selectable${
                content.target === '_blank'
                  ? ` ${baseClass}__selectable--rightIcon`
                  : ''
              }`}
              onClick={(e) => {
                content.onClick && content.onClick(e);
                if (onRequestClose && !content.disableOnRequestClose) {
                  onRequestClose();
                }
                const navigator = selfWindowNavigator(
                  content.onSelfWindowNavigation
                );
                navigator && navigator(e, content.url);
              }}
              onKeyDown={(
                e: React.KeyboardEvent<HTMLButtonElement | HTMLAnchorElement>
              ): void => {
                onKeyDown(e);
              }}
              ref={selectableItemRef as React.Ref<HTMLAnchorElement>}
              aria-label={content.ariaLabel ? content.ariaLabel : undefined}
              rel={content.rel}
              {...pickCommonDataProps(content)}
            >
              {content.target === '_blank' && (
                <span className={`${baseClass}__rightIcon`}>
                  <MaterialIcon IconComponent={MdOpenInNew} />
                </span>
              )}
              <span className={`${baseClass}__content`}>{content.text}</span>
            </a>
          ) : (
            <button
              className={`${baseClass}__selectable`}
              type="button"
              disabled={content.disabled}
              onClick={(e) => {
                content.onClick && content.onClick(e);
                if (onRequestClose && !content.disableOnRequestClose) {
                  onRequestClose();
                }
              }}
              onKeyDown={(
                e: React.KeyboardEvent<HTMLButtonElement | HTMLAnchorElement>
              ): void => {
                onKeyDown(e);
              }}
              ref={selectableItemRef as React.Ref<HTMLButtonElement>}
              aria-label={content.ariaLabel ? content.ariaLabel : undefined}
              {...pickCommonDataProps(content)}
            >
              <span className={`${baseClass}__content ${dangerContentClass}`}>
                {content.text}
              </span>
            </button>
          )}
        </li>
      );
    }
  }
};
export default Item;

```

### src/lv2/dropdownButton/DropdownButton.stories.tsx
```
typescript
import * as React from 'react';

import type { StoryObj } from '@storybook/react';
import DropdownButton from './DropdownButton';
import { text, boolean, select } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import TaskDialog from '../dialogs/TaskDialog';
import Button from '../../lv1/buttons/Button';
import { InlineLink, Note } from '../../lv1';
import { FormActions } from '../../../src';
import { DropdownContent } from '../dropdown/types';

export default {
  component: DropdownButton,
};

export const DropdownButtonComponent = () => (
  <DropdownButton
    buttonLabel={text('ButtonLabel', 'ボタンラベル', 'DropdownButton')}
    disabled={boolean('Disabled', false, 'DropdownButton')}
    small={boolean('small', false, 'DropdownButton')}
    large={boolean('large', false, 'DropdownButton')}
    appearance={
      select(
        'Appearance',
        {
          undefined: '',
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
        },
        'secondary',
        'DropdownButton'
      ) || undefined
    }
    iconOnly={boolean('iconOnly', false, 'DropdownButton')}
    iconPosition={
      select(
        'IconPosition',
        {
          undefined: '',
          left: 'left',
          right: 'right',
        },
        'right',
        'DropdownButton'
      ) || undefined
    }
    dropdownContents={[
      {
        type: 'selectable',
        text: 'menu1',
        ariaLabel: 'menu1',
        onClick: action('click'),
        'data-test': '選択可能なアイテム',
      },
      {
        type: 'selectable',
        text: 'menu2',
        ariaLabel: 'menu2',
        onClick: action('click'),
      },
      {
        type: 'selectable',
        text: 'とてもとてもとてもとてもとてもとてもとても長い',
        ariaLabel: 'menu3',
        onClick: action('click'),
      },
      {
        type: 'selectable',
        text: 'menu4 (disabled)',
        ariaLabel: 'menu4',
        disabled: true,
      },
      {
        type: 'checkbox',
        text: 'チェックボックス',
        value: 'checkbox-value',
        onChange: action('checkbox change'),
        checked: false,
        'data-test': 'チェック可能なアイテム',
      },
      { type: 'selectable', text: 'もっと見る', disableOnRequestClose: true },
      {
        type: 'textOnly',
        text: (
          <Note>
            詳しくは{' '}
            <InlineLink href="https://support.freee.co.jp" target="_blank">
              ヘルプページ
            </InlineLink>
            をご覧ください
          </Note>
        ),
        'data-test': 'テキストアイテム',
      },
    ]}
    onOpen={action('open')}
    onClose={action('close')}
    {...commonKnobs()}
  />
);

export const IconOnlyDropdownButton = () => (
  <DropdownButton
    buttonLabel={text(
      'ButtonLabel',
      'ボタンのラベルはaria-labelとなるため、必ず意味のあるものを指定してください',
      'DropdownButton'
    )}
    disabled={boolean('Disabled', false, 'DropdownButton')}
    iconOnly={true}
    small={boolean('small', false, 'DropdownButton')}
    large={boolean('large', false, 'DropdownButton')}
    appearance={
      select(
        'Appearance',
        {
          undefined: '',
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
        },
        'secondary',
        'DropdownButton'
      ) || undefined
    }
    iconPosition={
      select(
        'IconPosition',
        {
          undefined: '',
          left: 'left',
          right: 'right',
        },
        'right',
        'DropdownButton'
      ) || undefined
    }
    dropdownContents={[
      {
        type: 'selectable',
        text: 'menu1',
        ariaLabel: 'menu1',
        onClick: action('click'),
      },
      {
        type: 'selectable',
        text: 'menu2',
        ariaLabel: 'menu2',
        onClick: action('click'),
      },
      {
        type: 'selectable',
        text: 'とてもとてもとてもとてもとてもとてもとても長い',
        ariaLabel: 'menu3',
        onClick: action('click'),
      },
      {
        type: 'selectable',
        text: 'menu4 (disabled)',
        ariaLabel: 'menu4',
        disabled: true,
      },
    ]}
    {...commonKnobs()}
  />
);

export const CheckboxDropdown = () => {
  const options = ['ステータスを表示', '金額を表示', '負の値を△で表示'];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(options.length).fill(false)
  );
  return (
    <DropdownButton
      buttonLabel={text('ButtonLabel', '表示設定', 'DropdownButton')}
      disabled={boolean('Disabled', false, 'DropdownButton')}
      small={boolean('small', false, 'DropdownButton')}
      appearance={
        select(
          'Appearance',
          {
            undefined: '',
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
          },
          'secondary',
          'DropdownButton'
        ) || undefined
      }
      dropdownContents={options.map((opt, idx) => ({
        type: 'checkbox',
        text: opt,
        checked: status[idx],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[idx] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      {...commonKnobs()}
    />
  );
};

export const SingleOption = () => (
  <DropdownButton
    buttonLabel={text('ButtonLabel', 'ボタンラベル', 'DropdownButton')}
    disabled={boolean('Disabled', false, 'DropdownButton')}
    small={boolean('small', false, 'DropdownButton')}
    appearance={
      select(
        'Appearance',
        {
          undefined: '',
          primary: 'primary',
          secondary: 'secondary',
          tertiary: 'tertiary',
        },
        'secondary',
        'DropdownButton'
      ) || undefined
    }
    iconPosition={
      select(
        'IconPosition',
        {
          undefined: '',
          left: 'left',
          right: 'right',
        },
        'right',
        'DropdownButton'
      ) || undefined
    }
    dropdownContents={[
      {
        type: 'selectable',
        text: 'menu1',
        ariaLabel: 'menu1',
        onClick: action('click'),
        target: '_blank',
        url: 'https://www.freee.co.jp',
      },
    ]}
    {...commonKnobs()}
  />
);

export const InBigBlock = () => (
  <div style={{ padding: '20rem 80rem' }}>
    <DropdownButton
      buttonLabel={text('ButtonLabel', 'ボタンラベル', 'DropdownButton')}
      disabled={boolean('Disabled', false, 'DropdownButton')}
      small={boolean('small', false, 'DropdownButton')}
      large={boolean('large', false, 'DropdownButton')}
      iconOnly={boolean('IconOnly', false, 'DropdownButton')}
      appearance={
        select(
          'Appearance',
          {
            undefined: '',
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
          },
          'secondary',
          'DropdownButton'
        ) || undefined
      }
      iconPosition={
        select(
          'IconPosition',
          {
            undefined: '',
            left: 'left',
            right: 'right',
          },
          'right',
          'DropdownButton'
        ) || undefined
      }
      dropdownContents={[
        {
          type: 'selectable',
          text: 'menu1',
          ariaLabel: 'menu1',
          onClick: action('click'),
        },
        {
          type: 'selectable',
          text: 'menu2',
          ariaLabel: 'menu2',
          onClick: action('click'),
        },
        {
          type: 'selectable',
          text: 'とてもとてもとてもとてもとてもとてもとても長い',
          ariaLabel: 'menu3',
          onClick: action('click'),
        },
        {
          type: 'selectable',
          text: 'menu4 (disabled)',
          ariaLabel: 'menu4',
          disabled: true,
        },
      ]}
      {...commonKnobs()}
    />
  </div>
);

const TaskDialogSample = () => {
  const [isOpen, setIsOpen] = React.useState(false);

  return (
    <>
      <Button onClick={() => setIsOpen(true)}>open dialog</Button>

      <TaskDialog
        onRequestClose={() => {
          setIsOpen(false);
        }}
        title="TaskDialog"
        isOpen={isOpen}
        closeButtonLabel="閉じる"
      >
        <DropdownButton
          buttonLabel={text('ButtonLabel', 'ボタンラベル', 'DropdownButton')}
          disabled={boolean('Disabled', false, 'DropdownButton')}
          small={boolean('small', false, 'DropdownButton')}
          large={boolean('large', false, 'DropdownButton')}
          iconOnly={boolean('IconOnly', false, 'DropdownButton')}
          appearance={
            select(
              'Appearance',
              {
                undefined: '',
                primary: 'primary',
                secondary: 'secondary',
                tertiary: 'tertiary',
              },
              'secondary',
              'DropdownButton'
            ) || undefined
          }
          iconPosition={
            select(
              'IconPosition',
              {
                undefined: '',
                left: 'left',
                right: 'right',
              },
              'right',
              'DropdownButton'
            ) || undefined
          }
          dropdownContents={[
            {
              type: 'selectable',
              text: 'menu1',
              ariaLabel: 'menu1',
              onClick: action('click'),
            },
            {
              type: 'selectable',
              text: 'menu2',
              ariaLabel: 'menu2',
              onClick: action('click'),
            },
            {
              type: 'selectable',
              text: 'とてもとてもとてもとてもとてもとてもとても長い',
              ariaLabel: 'menu3',
              onClick: action('click'),
            },
            {
              type: 'selectable',
              text: 'menu4 (disabled)',
              ariaLabel: 'menu4',
              disabled: true,
            },
          ]}
          {...commonKnobs()}
        />
      </TaskDialog>
    </>
  );
};

export const InsideTaskDialog = () => <TaskDialogSample />;

export const FixedDropdownButton: StoryObj<typeof DropdownButton> = {
  parameters: {
    docs: {
      story: {
        height: '500px',
        inline: false,
      },
    },
  },
  render: () => {
    const dropdownContents: DropdownContent[] = [
      {
        type: 'selectable',
        text: 'menu1',
        ariaLabel: 'menu1',
        onClick: action('click'),
      },
      {
        type: 'selectable',
        text: 'menu2',
        ariaLabel: 'menu2',
        onClick: action('click'),
      },
    ];

    return (
      <div style={{ height: 2000 }}>
        <div
          style={{
            position: 'fixed',
            top: 0,
            right: 0,
            left: 0,
            background: 'white',
            padding: '1rem 2.5rem',
          }}
        >
          <DropdownButton
            buttonLabel={'ヘッダー表示設定'}
            appearance="primary"
            dropdownContents={dropdownContents}
          />
        </div>
        <div style={{ position: 'sticky', top: '8rem', marginTop: '12rem' }}>
          <DropdownButton
            buttonLabel="position: sticky"
            appearance="primary"
            dropdownContents={dropdownContents}
          />
        </div>
        <FormActions align="left" position="fixed">
          <DropdownButton
            buttonLabel={'フッダー表示設定'}
            appearance="primary"
            dropdownContents={dropdownContents}
          />
        </FormActions>
      </div>
    );
  },
};

```

### src/lv2/dropdownButton/DropdownButton.tsx
```
typescript
import * as React from 'react';
import { MdArrowDropDown, MdMoreHoriz } from 'react-icons/md';
import Button, { ButtonAppearanceType } from '../../lv1/buttons/Button';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import { DropdownContent } from '../dropdown/types';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import WithDropdown from '../withDropdown/WithDropdown';
import {
  ButtonAriaProps,
  filterButtonAriaProps,
} from '../../utilities/AriaProps';

type Props = {
  /**
   * ボタンのラベルとなる文字列。必ず指定してください。 `iconOnly` を使用する場合も必ず指定してください。
   */
  buttonLabel: string;
  disabled?: boolean;
  small?: boolean;
  large?: boolean;
  dropdownContents: Array<DropdownContent>;
  appearance?: ButtonAppearanceType;
  /**
   * trueにすることでラベルを省略し、アイコンのみのボタンとなります。
   * デフォルトのアイコンは「…」です。
   */
  iconOnly?: boolean;
  iconPosition?: 'left' | 'right';
  /**
   * @deprecated このプロパティは使用されません
   */
  contentsFixed?: boolean;
  /**
   * iconOnly時のデフォルトのアイコンは「…」ですが、任意のアイコンを指定することもできます。
   * アイコンはreact-iconsの利用が想定されています。
   */
  IconOnlyComponent?: React.ElementType;
  /**
   * dropdownを開いた時に発火します。useEffectのトリガーになるためメモ化したものを渡すことを推奨します。
   */
  onOpen?: () => void;
  /**
   * dropdownを閉じた時に発火します。useEffectのトリガーになるためメモ化したものを渡すことを推奨します。
   */
  onClose?: () => void;
} & MarginClassProps &
  ButtonAriaProps &
  CommonProps;

/**
 * ボタンを押すとドロップダウンメニューが表示されるボタン。
 *
 * - 上下キーでフォーカス移動、ESCキーで閉じられます。Tabキーでフォーカスを移動させる場合、メニューの外に出るとボタンへのフォーカスに戻ります
 * - メニューに入れられる項目は「クリック可能な項目（ボタンまたはリンク）」「チェックボックス」「区切り線」「テキスト」です
 *   - クリック可能な項目は `url` を渡されるとリンクとなります。遷移先のURLを特定できる場合は必ず `url` を渡してください
 *   - リンクに `target="_blank"` を渡した場合、右側に OpenInNew アイコンが表示されます。
 * - `iconOnly` を `true` とすることで、ラベルを表示せず「…」アイコンのみのボタンとなります。 **この場合も `aria-label` として使用するため、必ず `buttonLabel` に意味のある文字列を指定してください**
 * - ユーザーが設定したものが並ぶ場合など、項目が多くなるときは `DropdownButton` の使用を検討してください。
 *
 * ## `SelectBox` との違い
 *
 * DropdownButtonは「押下するとドロップダウンメニューを開く **ボタン**」で、SelectBox は「選択肢のなかから一つを選ぶ **フォームの部品** 」です。
 *
 * - `SelectBox` は `TextField` などのフォームコンポーネントと同じく、別に配置した `FormControlLabel` などのラベルを紐付けて使用します。
 *   `DropdownButton` はボタンのラベルが accessible name （スクリーンリーダーが認識する名称）となり、別に配置したラベルを紐付けることはできません。
 * - コンポーネントを操作していないとき、 `SelectBox` は選択中の選択肢の名前を表示します。 `DropdownButton` はボタンのラベル ( `buttonLabel` ) を表示します。
 * - `DropdownButton` のボタンのラベル ( `buttonLabel` ) には、「押下することでメニューが開く」挙動であることが自然な文言を指定してください（「選択中のもの」の表示に使用しないでください）
 *
 * @param props
 */
const DropdownButton = (props: Props): React.ReactElement => {
  const {
    buttonLabel,
    disabled,
    small,
    large,
    dropdownContents,
    appearance,
    iconOnly,
    iconPosition,
    IconOnlyComponent,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
    onOpen,
    onClose,
  } = props;

  return (
    <span
      {...commonProps(
        props,
        'vb-dropdownButton',
        {},
        { marginTop, marginLeft, marginRight, marginBottom, marginSize }
      )}
    >
      <WithDropdown
        dropdownContents={dropdownContents}
        disabled={disabled}
        renderButton={(dropdownId, isOpen, ref) =>
          iconOnly ? (
            <IconOnlyButton
              {...filterButtonAriaProps(props)}
              IconComponent={IconOnlyComponent || MdMoreHoriz}
              appearance={appearance}
              aria-controls={dropdownId}
              aria-expanded={isOpen}
              aria-haspopup={true}
              disabled={disabled}
              label={buttonLabel}
              small={small}
              large={large}
              ref={ref as React.Ref<HTMLButtonElement>}
              type="button"
            />
          ) : (
            <Button
              {...filterButtonAriaProps(props)}
              IconComponent={MdArrowDropDown}
              iconPosition={iconPosition || 'right'}
              disabled={disabled}
              small={small}
              large={large}
              appearance={appearance}
              aria-expanded={isOpen}
              aria-haspopup={true}
              aria-controls={dropdownId}
              ref={ref as React.Ref<HTMLButtonElement>}
              type="button"
            >
              {buttonLabel}
            </Button>
          )
        }
        onOpen={onOpen}
        onClose={onClose}
      />
    </span>
  );
};

export default DropdownButton;

```

### src/lv2/emptyStates/NoDataCreated.stories.tsx
```
typescript
import * as React from 'react';

import NoDataCreated from './NoDataCreated';
import { commonKnobs } from '../../../stories';
import { select, text } from '@storybook/addon-knobs';
import Button from '../../lv1/buttons/Button';

export default {
  component: NoDataCreated,
};

export const NoDataCreatedComponent = () => (
  <NoDataCreated
    actionWord={text('ActionWord', '作成', 'NoDataCreated')}
    objectName={text('ObjectName', '取引', 'NoDataCreated')}
    mainText={text('MainText', '', 'NoDataCreated')}
    subText={text('SubText', '', 'NoDataCreated')}
    size={
      select(
        'Size',
        {
          medium: 'medium',
          'fit-height': 'fit-height',
          'fit-width': 'fit-width',
        },
        '',
        'NoDataCreated'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Button mt={1} appearance="primary">
      新規作成
    </Button>
  </NoDataCreated>
);

```

### src/lv2/emptyStates/NoDataCreated.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import Paragraph from '../../lv1/typography/Paragraph';
import SectionTitle from '../../lv1/typography/SectionTitle';
import NoDataIllust from '../../lv1/images/NoDataIllust';
import { SwallowProps } from '../../lv1/images/SwallowContainer';

type Props = {
  /**
   * 「作成・登録・追加」など、データを作る際の言葉を指定できます。指定しない場合は「作成」と表記されます。
   */
  actionWord?: string;
  /**
   * データの名前を指定できます。指定しない場合は「データ」と表記されます。
   */
  objectName?: string;
  /**
   * 任意の画像を使用したい場合に使います。
   */
  image?: {
    /**
     * 任意の画像のURLを指定します。
     */
    src: string;
    /**
     * 任意の画像の横幅を指定します。
     */
    width?: string;
    /**
     * 任意の画像の縦幅を指定します。
     */
    height?: string;
  };
  mainText?: React.ReactNode;
  subText?: React.ReactNode;
  /**
   * テキストの下に新規作成ボタンなどのアクションを用意する際に使います
   */
  children?: React.ReactNode;
} & Pick<SwallowProps, 'size'> &
  CommonProps;

/**
 * このコンポーネントは作成されたデータがまだ存在しない場合に使う、empty UIです。
 * 検索条件に合致するものがない場合は `NoSearchResults` の使用を検討してください。
 *
 * - 「まだデータがないこと」「作成されると一覧に表示されること」の２つをデフォルトの表示として伝えています。
 * - テキストはそれぞれ任意のものにも差し替え可能です。
 * - テキストの下に新規作成ボタンなどのアクションを用意することも可能です。
 * - オンボーディングにつなげるなどの理由でより複雑なレイアウトにしたい場合は独自にempty UIを用意してください。
 *   - このコンポーネントはそういった特別な意図がない場合に手軽に empty UI を構築する用途で使用することを想定しています。
 */
const NoDataCreated: React.FC<Props> = (props: Props) => {
  const {
    actionWord,
    objectName,
    image,
    mainText,
    subText,
    children,
    size = 'medium',
  } = props;
  const baseClassName = 'vb-noDataCreated';
  return (
    <div {...commonProps(props, baseClassName, {}, {})}>
      {image ? (
        <img
          className={`${baseClassName}__image`}
          src={image.src}
          alt=""
          style={{
            width: image.width,
            height: image.height,
          }}
        />
      ) : (
        <NoDataIllust mb={1} size={size} />
      )}
      <SectionTitle headlineLevel={-1} mb={0.25}>
        {mainText ||
          `${actionWord || '作成'}された${
            objectName || 'データ'
          }はまだありません`}
      </SectionTitle>
      <Paragraph>
        {subText ||
          `新規に${actionWord || '作成'}をすると一覧として表示されます`}
      </Paragraph>
      {children}
    </div>
  );
};

export default NoDataCreated;

```

### src/lv2/emptyStates/NoSearchResults.stories.tsx
```
typescript
import * as React from 'react';

import NoSearchResults from './NoSearchResults';
import { commonKnobs } from '../../../stories';
import { text, select } from '@storybook/addon-knobs';

export default {
  component: NoSearchResults,
};

export const NoSearchResultsComponent = () => (
  <NoSearchResults
    objectName={text('ObjectName', '取引', 'NoSearchResults')}
    mainText={text('MainText', '', 'NoSearchResults')}
    subText={text('SubText', '', 'NoSearchResults')}
    size={
      select(
        'Size',
        {
          medium: 'medium',
          'fit-height': 'fit-height',
          'fit-width': 'fit-width',
        },
        '',
        'NoSearchResults'
      ) || undefined
    }
    {...commonKnobs()}
  />
);

```

### src/lv2/emptyStates/NoSearchResults.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import NoSearchResultsIllust from '../../lv1/images/NoSearchResultsIllust';
import Paragraph from '../../lv1/typography/Paragraph';
import SectionTitle from '../../lv1/typography/SectionTitle';
import { SwallowProps } from '../../lv1/images/SwallowContainer';

type Props = {
  /**
   * 検索対象の名前を指定します。
   */
  objectName?: string;
  /**
   * 任意の画像を使用したい場合に使います。
   */
  image?: {
    /**
     * 画像のURLを指定します。
     */
    src: string;
    /**
     * 画像の横幅を指定します。
     */
    width?: string;
    /**
     * 画像の縦幅を指定します。
     */
    height?: string;
  };
  mainText?: React.ReactNode;
  subText?: React.ReactNode;
} & Pick<SwallowProps, 'size'> &
  CommonProps;

/**
 * このコンポーネントは検索結果に合致するデータがない場合に使う、empty UIです。
 * データ自体が１件もない場合は `NoDataCreated` を使用してください。
 *
 * - 特に特別な考慮が必要のない時に使う想定です。
 * - 画像やメッセージは任意のものにも入れ替えられるようになっていますが、それ以上の事を実装したい場合は独自にempty UI を用意してください。
 * - デフォルトの見せ方で良い場合は、`objectName` を指定するだけで使えます。
 */
const NoSearchResults: React.FC<Props> = (props: Props) => {
  const { objectName, image, mainText, subText, size = 'medium' } = props;
  const baseClassName = 'vb-noSearchResults';
  return (
    <div {...commonProps(props, baseClassName, {}, {})}>
      {image ? (
        <img
          className={`${baseClassName}__image`}
          src={image.src}
          alt=""
          style={{
            width: image.width,
            height: image.height,
          }}
        />
      ) : (
        <NoSearchResultsIllust mt={2} mb={1} size={size} />
      )}
      <SectionTitle headlineLevel={-1} mb={0.25}>
        {mainText ||
          `検索に該当する${objectName || 'データ'}はありませんでした`}
      </SectionTitle>
      <Paragraph>
        {subText || '検索条件を変えて再度絞り込みをお試しください'}
      </Paragraph>
    </div>
  );
};

export default NoSearchResults;

```

### src/lv2/fileUploader/FileDropArea.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import FileDropArea from './FileDropArea';
import { Button, Loading, Paragraph } from '../../lv1';

export default {
  component: FileDropArea,
};

export const FileDropAreaComponent = () => (
  <FileDropArea
    fileLabel={text('fileLabel', 'ファイルラベル', 'FileDropArea')}
    fileName={text('fileName', 'dummy.csv', 'FileDropArea')}
    onFileSelect={action('file select')}
    multiple={boolean('multiple', true, 'FileDropArea')}
    status={
      select(
        'Status',
        {
          default: 'default',
          selected: 'selected',
          uploading: 'uploading',
          processing: 'processing',
          undefined: '',
        },
        '',
        'FileDropArea'
      ) || undefined
    }
    processingMessage={text(
      'processingMessage',
      '処理中のメッセージ',
      'FileDropArea'
    )}
    disabled={boolean('disabled', false, 'FileDropArea')}
    disabledMessage={text(
      'disabledMessage',
      'disabled時に表示するメッセージ',
      'FileDropArea'
    )}
    {...commonKnobs()}
  >
    <Paragraph mb={1}>
      長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
      長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
      長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
    </Paragraph>
    <Button onClick={action('button clicked')}>ファイルを選択</Button>
  </FileDropArea>
);

export const FileDropAreaWithLoading = () => (
  <FileDropArea
    fileLabel={text('FileLabel', 'ファイルラベル', 'FileDropArea')}
    fileName={text('FileName', 'dummy.csv', 'FileDropArea')}
    onFileSelect={action('file select')}
    multiple={boolean('Multiple', true, 'FileDropArea')}
    status={
      select(
        'Status',
        {
          default: 'default',
          selected: 'selected',
          uploading: 'uploading',
          processing: 'processing',
          undefined: '',
        },
        '',
        'FileDropArea'
      ) || undefined
    }
    processingMessage={text(
      'processingMessage',
      '処理中のメッセージ',
      'FileDropArea'
    )}
    disabled={boolean('disabled', false, 'FileDropArea')}
    disabledMessage={text(
      'disabledMessage',
      'disabled時に表示するメッセージ',
      'FileDropArea'
    )}
    {...commonKnobs()}
  >
    <Loading isLoading={true}>
      <Paragraph mb={1}>
        長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
        長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
        長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト長いテキスト
      </Paragraph>
    </Loading>
    <Button onClick={action('button clicked')}>ファイルを選択</Button>
  </FileDropArea>
);

```

### src/lv2/fileUploader/FileDropArea.tsx
```
typescript
import * as React from 'react';
import { DndProvider } from 'react-dnd';
import { HTML5Backend } from 'react-dnd-html5-backend';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import Paragraph from '../../lv1/typography/Paragraph';
import { useDropFile } from './hooks';
import { FileType, FileUploaderStatus } from './types';
import { CSSTransition } from 'react-transition-group';
import { MdBlock } from 'react-icons/md';
import vbClassNames from '../../utilities/vbClassNames';

type Props = {
  children: React.ReactNodeArray | React.ReactNode;
  /**
   * 選択可能なファイル種別を設定します
   */
  acceptFileTypes?: Array<FileType>;
  /**
   * 表示用のファイルタイプを設定します
   */
  fileLabel: string;
  /**
   * 選択中のファイル名を設定します
   */
  fileName?: string;
  /**
   * 複数選択可能かどうかを設定します
   */
  multiple?: boolean;
  /**
   * ファイル選択時のイベントハンドラを設定します
   */
  onFileSelect: (files: Array<File>) => any;
  /**
   * ファイルの状態を設定します
   */
  status?: FileUploaderStatus;
  /**
   * 処理中の際に表示するメッセージ
   */
  processingMessage?: string;
  /**
   * DnD可能かどうかを設定します
   */
  disabled?: boolean;
  /**
   * disabled === true かつ、ドラッグした際に表示するメッセージ
   */
  disabledMessage?: string;
} & CommonProps;

const overlayClassName = (
  partName: 'overlay' | 'icon' | 'contentDescription',
  disabled?: boolean
) =>
  vbClassNames(`vb-fileDropArea__${partName}`, {
    modifier: { disabled },
  });

const DraggingContents: React.FC<{
  fileLabel: string;
  status?: FileUploaderStatus;
  processingMessage?: string;
  disabled?: boolean;
  disabledMessage?: string;
}> = ({ fileLabel, status, processingMessage, disabled, disabledMessage }) => {
  if (disabled) {
    return (
      <>
        <MdBlock className={overlayClassName('icon', true)} />
        <Paragraph>
          <div className={overlayClassName('contentDescription', true)}>
            {disabledMessage ?? 'ドラッグ＆ドロップできません'}
          </div>
        </Paragraph>
      </>
    );
  } else if (status === 'uploading' || status === 'processing') {
    return (
      <>
        <svg
          className="vb-fileDropArea__icon"
          width="48"
          height="48"
          role="img"
        >
          <path
            d="M38.7 12.08C37.34 5.18 31.28 0 24 0c-5.78 0-10.8 3.28-13.3 8.08C4.68 8.72 0 13.82 0 20c0 6.62 5.38 12 12 12h26c5.52 0 10-4.48 10-10 0-5.28-4.1-9.56-9.3-9.92zM38 28H12c-4.42 0-8-3.58-8-8s3.58-8 8-8h1.42C14.74 7.38 18.96 4 24 4c6.08 0 11 4.92 11 11v1h3c3.32 0 6 2.68 6 6s-2.68 6-6 6z"
            id="a"
          />
        </svg>
        <Paragraph>
          <div className="vb-fileDropArea__contentDescription">
            {status === 'uploading' ? 'アップロード中' : processingMessage}
          </div>
        </Paragraph>
      </>
    );
  } else {
    return (
      <>
        <svg
          className="vb-fileDropArea__icon"
          width="48"
          height="48"
          role="img"
        >
          <path
            d="M38.7 12.08C37.34 5.18 31.28 0 24 0c-5.78 0-10.8 3.28-13.3 8.08C4.68 8.72 0 13.82 0 20c0 6.62 5.38 12 12 12h26c5.52 0 10-4.48 10-10 0-5.28-4.1-9.56-9.3-9.92zM28 18v8h-8v-8h-6L24 8l10 10h-6z"
            id="a"
          />
        </svg>
        <Paragraph>
          <div className="vb-fileDropArea__contentDescription">
            {fileLabel}をドロップしてアップロード
          </div>
        </Paragraph>
      </>
    );
  }
};

const FileDropAreaInnerContainer: React.FC<Props> = (props: Props) => {
  const {
    children,
    acceptFileTypes,
    fileLabel,
    multiple,
    onFileSelect,
    status,
    processingMessage,
    disabled,
    disabledMessage,
  } = props;

  const nodeRef = React.useRef<HTMLDivElement>(null);
  const { canDrop, isOver, drop } = useDropFile(
    disabled ? () => undefined : onFileSelect,
    acceptFileTypes,
    multiple
  );
  const isDragging = status !== 'uploading' && canDrop && isOver;
  const isActive =
    isDragging || status === 'uploading' || status === 'processing';

  return (
    <div ref={drop} {...commonProps(props, 'vb-fileDropArea')}>
      {children}
      <CSSTransition
        classNames="vb-fileDropArea__fade"
        in={isActive}
        timeout={300}
        exit
        unmountOnExit
        // StrictModeで、"Warning: findDOMNode is deprecated in StrictMode."が出ないように
        // [FYI] https://github.com/reactjs/react-transition-group/issues/668#issuecomment-695162879
        nodeRef={nodeRef}
      >
        <div ref={nodeRef} className={overlayClassName('overlay', disabled)}>
          <DraggingContents
            fileLabel={fileLabel}
            status={status}
            processingMessage={processingMessage}
            disabled={disabled}
            disabledMessage={disabledMessage}
          />
        </div>
      </CSSTransition>
    </div>
  );
};

/**
 * D&Dでしか操作できないことを防ぐため、必ず「ファイル選択ボタン」か` <input type="file"> `と一緒に使ってください
 */
const FileDropArea: React.FC<Props> = (props) => {
  return (
    <DndProvider backend={HTML5Backend}>
      <FileDropAreaInnerContainer {...props} />
    </DndProvider>
  );
};
export default FileDropArea;

```

### src/lv2/fileUploader/FileUploader.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import ContentsBase from '../../lv1/bases/ContentsBase';
import FileUploader from './FileUploader';
import { FileUploaderStatus, FileTypes } from './types';
import Button from '../../lv1/buttons/Button';
import { MdFileUpload } from 'react-icons/md';

export default {
  component: FileUploader,
};

export const FileUploaderComponent = () => (
  <div style={{ height: '25rem' }}>
    <FileUploader
      fileLabel={text('FileLabel', 'ファイルラベル', 'FileUploader')}
      fileName={text('FileName', 'dummy.csv', 'FileUploader')}
      isUploading={boolean('IsUploading', false, 'FileUploader')}
      onFileSelect={action('file select')}
      multiple={boolean('Multiple', false, 'FileUploader')}
      status={
        select(
          'Status',
          {
            default: 'default',
            selected: 'selected',
            uploading: 'uploading',
            processing: 'processing',
            undefined: '',
          },
          '',
          'FileUploader'
        ) || undefined
      }
      type={
        select(
          'Type',
          {
            Normal: 'normal',
            Compact: 'compact',
            undefined: '',
          },
          '',
          'FileUploader'
        ) || undefined
      }
      width={
        select(
          'Width',
          {
            Medium: 'medium',
            Full: 'full',
            undefined: '',
          },
          '',
          'FileUploader'
        ) || undefined
      }
      processingMessage={text(
        'processingMessage',
        '処理中のメッセージ',
        'FileUploader'
      )}
      {...commonKnobs()}
    />
  </div>
);

export const AcceptFileTypes = () => (
  <>
    <FileUploader
      fileLabel="CSVファイル"
      acceptFileTypes={[FileTypes.CSV]}
      isUploading={false}
      onFileSelect={() => undefined}
      marginBottom
    />
    <FileUploader
      fileLabel="TSVファイル"
      acceptFileTypes={[FileTypes.TSV]}
      isUploading={false}
      onFileSelect={() => undefined}
      marginBottom
    />
    <FileUploader
      fileLabel="画像"
      acceptFileTypes={[FileTypes.JPG, FileTypes.GIF, FileTypes.PNG]}
      isUploading={false}
      onFileSelect={() => undefined}
      marginBottom
    />
    <FileUploader
      fileLabel="PDFファイル"
      acceptFileTypes={[FileTypes.PDF]}
      isUploading={false}
      onFileSelect={() => undefined}
      marginBottom
    />
  </>
);

export const InteractiveSample = () => {
  const [files, setFiles] = React.useState<File[]>([]);
  const [status, setStatus] = React.useState<FileUploaderStatus>('default');
  const disabled = status !== 'selected';
  const fileName = React.useMemo(() => {
    if (!files.length) {
      return '';
    }
    return files.length > 1 ? `${files.length}個のファイル` : files[0].name;
  }, [files]);

  const handleFileSelect = (files: File[]) => {
    if (files.length) {
      setFiles(files);
      setStatus('selected');
    } else {
      setFiles([]);
      setStatus('default');
    }
  };

  const handleClickUpload = () => {
    setStatus('uploading');
    setTimeout(() => {
      setFiles([]);
      setStatus('default');
    }, 3000);
  };

  return (
    <ContentsBase>
      <div style={{ display: 'inline-block', textAlign: 'center' }}>
        <FileUploader
          acceptFileTypes={[FileTypes.CSV]}
          fileLabel="CSVファイル"
          fileName={fileName}
          onFileSelect={handleFileSelect}
          status={status}
          multiple
          mb={1.5}
        />
        <Button
          IconComponent={MdFileUpload}
          disabled={disabled}
          onClick={handleClickUpload}
        >
          アップロード
        </Button>
      </div>
    </ContentsBase>
  );
};

export const StatusSample = () => (
  <>
    <FileUploader
      fileLabel="画像"
      acceptFileTypes={[FileTypes.JPG, FileTypes.GIF, FileTypes.PNG]}
      isUploading={false}
      onFileSelect={() => undefined}
      status="default"
      marginBottom
    />
    <FileUploader
      fileLabel="画像"
      acceptFileTypes={[FileTypes.JPG, FileTypes.GIF, FileTypes.PNG]}
      isUploading={false}
      onFileSelect={() => undefined}
      status="selected"
      marginBottom
    />
    <FileUploader
      fileLabel="画像"
      acceptFileTypes={[FileTypes.JPG, FileTypes.GIF, FileTypes.PNG]}
      isUploading={false}
      onFileSelect={() => undefined}
      status="uploading"
      marginBottom
    />
    <FileUploader
      fileLabel="画像"
      acceptFileTypes={[FileTypes.JPG, FileTypes.GIF, FileTypes.PNG]}
      isUploading={false}
      onFileSelect={() => undefined}
      status="processing"
      marginBottom
    />
  </>
);

export const ProcessingMessageSample = () => (
  <>
    <FileUploader
      fileLabel="画像"
      acceptFileTypes={[FileTypes.JPG, FileTypes.GIF, FileTypes.PNG]}
      isUploading={false}
      onFileSelect={() => undefined}
      status="processing"
      processingMessage="OCR処理中"
      marginBottom
    />
  </>
);

```

### src/lv2/fileUploader/FileUploader.tsx
```
typescript
import * as React from 'react';
import { ConnectDropTarget, DndProvider } from 'react-dnd';
import { HTML5Backend } from 'react-dnd-html5-backend';
import { MdBlock, MdRefresh } from 'react-icons/md';

import CsvUploadIllust from '../../lv1/images/CsvUploadIllust';
import CloudUploadIllust from '../../lv1/images/CloudUploadIllust';
import FileUploadIllust from '../../lv1/images/FileUploadIllust';
import ImageUploadIllust from '../../lv1/images/ImageUploadIllust';
import CloudSkeletonIllust from '../../lv1/images/CloudSkeletonIllust';

import Button from '../../lv1/buttons/Button';
import Paragraph from '../../lv1/typography/Paragraph';

import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';
import { useDropFile } from './hooks';
import {
  FileUploaderStatus,
  FileType,
  FileTypes,
  ImageTypes,
  FileExtensions,
} from './types';
import { VisuallyHidden } from '../..';

type Props = {
  /**
   * 選択可能なファイル種別を設定します
   */
  acceptFileTypes?: Array<FileType>;
  /**
   * 表示用のファイルタイプを設定します
   */
  fileLabel: string;
  /**
   * 選択中のファイル名を設定します
   */
  fileName?: string;
  /**
   * @deprecated status を使用してください
   */
  isUploading?: boolean;
  /**
   * 複数選択可能かどうかを設定します
   */
  multiple?: boolean;
  /**
   * ファイル選択時のイベントハンドラを設定します
   */
  onFileSelect: (files: Array<File>) => any;
  /**
   * ファイルの状態を設定します
   */
  status?: FileUploaderStatus;
  /**
   * 処理中の際に表示するメッセージ
   */
  processingMessage?: string;
  /**
   * 幅を設定します
   */
  width?: 'medium' | 'full';
  /**
   * コンポーネントの表示方法を設定します
   */
  type?: 'normal' | 'compact';
} & MarginClassProps &
  CommonProps;

type InnerProps = Omit<Props, 'isUploading'> & {
  canDrop?: boolean;
  connectDropTarget: ConnectDropTarget;
  isOver?: boolean;
  invalidFileDropped: boolean;
};

const getFileIllust = (
  mimeTypes: FileType[] | undefined
): React.FC<CommonProps> => {
  if (!mimeTypes) {
    return FileUploadIllust;
  } else if (mimeTypes.every((value) => ImageTypes.indexOf(value) >= 0)) {
    return ImageUploadIllust;
  } else if (mimeTypes.length === 1 && mimeTypes[0] === FileTypes.CSV) {
    return CsvUploadIllust;
  }
  return FileUploadIllust;
};

const FileUploaderInner = (props: InnerProps) => {
  const {
    acceptFileTypes,
    canDrop,
    connectDropTarget,
    invalidFileDropped,
    fileLabel,
    fileName,
    isOver,
    marginBottom,
    marginLeft,
    marginRight,
    marginSize,
    marginTop,
    multiple,
    onFileSelect,
    status = 'default',
    processingMessage = '処理中',
    width,
    type,
  } = props;

  const fileInputRef = React.useRef<HTMLInputElement | null>(null);
  const handleFileSelected = React.useCallback(
    (event: React.ChangeEvent<HTMLInputElement>): void => {
      if (status === 'uploading') {
        return;
      }
      const files = Array.from(event.target.files ?? []);
      if (!files.length) {
        return;
      }

      onFileSelect(files);

      // 同じファイル名をアップロードしようとするとvalueが同じなのでonChangeが発火されないのでvalueを空にしておく
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    },
    [onFileSelect, status]
  );

  const isDragging = status !== 'uploading' && canDrop && isOver;
  const classModifier = {
    widthMedium: width === 'medium' || !width,
    widthFull: width === 'full',
    typeNormal: type === 'normal' || !type,
    typeCompact: type === 'compact',
    active: isDragging,
    error: invalidFileDropped,
  };

  const FileIllust = getFileIllust(acceptFileTypes);
  const acceptValue = acceptFileTypes
    ? acceptFileTypes
        .reduce(
          (prev, t) => prev.concat([t], FileExtensions[t] || []),
          [] as string[]
        )
        .join(',')
    : undefined;

  const handleClick = () => {
    // eventを作ってinputに発火させる
    const evt = document.createEvent('mouseevent');
    evt.initEvent('click', false, false);
    fileInputRef.current && fileInputRef.current.dispatchEvent(evt);
  };

  return (
    <div
      ref={connectDropTarget}
      {...commonProps(props, 'vb-fileUploader', classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    >
      <div className="vb-fileUploader__dropMessage" aria-hidden={!isDragging}>
        {/* いい感じのトランジションを表現するために、要素を消すのではなくaria-hiddenしています */}
        <div className="vb-fileUploader__contentIllust">
          <CloudUploadIllust mb={1} />
        </div>
        <div className="vb-fileUploader__contentDescription">
          <Paragraph marginBottom>
            {fileLabel}をドロップしてアップロード
          </Paragraph>
        </div>
      </div>
      <VisuallyHidden autoRead assertive={true}>
        {invalidFileDropped ? 'このファイル形式は受け付けられません' : ''}
      </VisuallyHidden>
      <div
        className="vb-fileUploader__errorMessage"
        aria-hidden={!invalidFileDropped}
      >
        <MdBlock className={'vb-fileUploader__icon'} />
        <div className="vb-fileUploader__contentDescription">
          <Paragraph marginBottom>
            このファイル形式は受け付けられません
          </Paragraph>
        </div>
      </div>
      {status === 'uploading' && (
        <div
          className={vbClassNames('vb-fileUploader__content', {
            modifier: { disabled: invalidFileDropped },
          })}
        >
          <div className="vb-fileUploader__contentIllust">
            <CloudSkeletonIllust mb={1} />
          </div>
          <div className="vb-fileUploader__contentDescription">
            <Paragraph>アップロード中</Paragraph>
          </div>
        </div>
      )}
      {status === 'processing' && (
        <div
          className={vbClassNames('vb-fileUploader__content', {
            modifier: { disabled: invalidFileDropped },
          })}
        >
          <div className="vb-fileUploader__contentIllust">
            <CloudSkeletonIllust mb={1} />
          </div>
          <div className="vb-fileUploader__contentDescription">
            <Paragraph>{processingMessage}</Paragraph>
          </div>
        </div>
      )}
      {status === 'selected' && (
        <div
          className={vbClassNames('vb-fileUploader__content', {
            modifier: { disabled: invalidFileDropped },
          })}
          aria-hidden={isDragging}
        >
          <div className="vb-fileUploader__contentIllust">
            <FileIllust mb={1} />
          </div>
          <div className="vb-fileUploader__contentDescription">
            {fileName && <Paragraph mb={1}>{fileName}</Paragraph>}
            <Button
              IconComponent={MdRefresh}
              onClick={handleClick}
              disabled={invalidFileDropped}
              type="button"
            >
              ファイルを再選択
            </Button>
          </div>
        </div>
      )}
      {status === 'default' && (
        <div
          className={vbClassNames('vb-fileUploader__content', {
            modifier: { disabled: invalidFileDropped },
          })}
          aria-hidden={isDragging}
        >
          <div className="vb-fileUploader__contentIllust">
            <FileIllust mb={1} />
          </div>
          <div className="vb-fileUploader__contentDescription">
            <Paragraph mb={1}>{fileLabel}をここにドラッグ＆ドロップ</Paragraph>
            <Paragraph mb={1}>または</Paragraph>
            <Button
              onClick={handleClick}
              disabled={invalidFileDropped}
              type="button"
            >
              ファイルを選択
            </Button>
          </div>
        </div>
      )}
      <input
        accept={acceptValue}
        multiple={multiple}
        onChange={handleFileSelected}
        ref={fileInputRef}
        style={{ display: 'none' }}
        type="file"
      />
    </div>
  );
};

const FileUploaderInnerContainer = (props: Props) => {
  const {
    acceptFileTypes,
    isUploading,
    multiple,
    onFileSelect,
    status: tmpStatus,
    ...others
  } = props;
  // status が設定されていない場合は isUploading の値を status に変換して props から isUploading を取り除く
  const status = tmpStatus ?? (isUploading ? 'uploading' : 'default');
  const { canDrop, isOver, drop, invalidFileDropped } = useDropFile(
    onFileSelect,
    acceptFileTypes,
    multiple
  );

  return (
    <FileUploaderInner
      {...others}
      acceptFileTypes={acceptFileTypes}
      canDrop={canDrop}
      connectDropTarget={drop}
      isOver={isOver}
      invalidFileDropped={invalidFileDropped}
      multiple={multiple}
      onFileSelect={onFileSelect}
      status={status}
    />
  );
};

const FileUploader: React.FC<Props> = (props) => {
  return (
    <DndProvider backend={HTML5Backend}>
      <FileUploaderInnerContainer {...props} />
    </DndProvider>
  );
};

export default FileUploader;

```

### src/lv2/filterTag/FilterTag.stories.tsx
```
typescript
import * as React from 'react';
import { commonKnobs } from '../../../stories';
import FilterTag from './FilterTag';
import { Button, Text, HStack, VStack, PopupBase, TextField } from '../..';

export default {
  component: FilterTag,
};

export const Base = () => {
  return (
    <VStack>
      <Text>labelのみが設定されている場合</Text>
      <FilterTag
        label="取引先"
        renderPopup={() => <></>}
        {...commonKnobs()}
      ></FilterTag>
      <Text>labelとvalueが設定されている場合</Text>
      <FilterTag
        label="取引先"
        value="取引先名"
        renderPopup={() => <></>}
        {...commonKnobs()}
      ></FilterTag>
    </VStack>
  );
};

export const Popup = () => {
  const [value, setValue] = React.useState('');
  const [currentValue, setCurrentValue] = React.useState('');
  return (
    <>
      <FilterTag
        label="取引先"
        value={value}
        renderPopup={(onRequestClose) => (
          <div style={{ width: '20rem' }}>
            <PopupBase paddingSize="small" fitContent>
              <TextField
                value={currentValue}
                onChange={(e) => setCurrentValue(e.target.value)}
              />
              <HStack gap={0.5} mt={0.5}>
                <Button
                  appearance="primary"
                  onClick={() => setValue(currentValue)}
                >
                  適用
                </Button>
                <Button onClick={onRequestClose}>閉じる</Button>
              </HStack>
            </PopupBase>
          </div>
        )}
        {...commonKnobs()}
      ></FilterTag>
    </>
  );
};

```

### src/lv2/filterTag/FilterTag.tsx
```
typescript
import * as React from 'react';
import { MdArrowDropDown } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { WithPopup } from '..';

type RenderPopupT = Parameters<typeof WithPopup>[0]['renderPopup'];

type Props = {
  /**
   * ポップアップを描画するrender functionです。詳細は `WithPopup` の `renderPopup` propを参照してください。
   * Render function for popup. See `renderPopup` prop of `WithPopup for details.
   */
  renderPopup: RenderPopupT;
  /**
   * ボタン内に表示するラベルを指定します。
   * The label of the button.
   */
  label: string;
  /**
   * ボタン内に表示する値を指定します。
   * 値を指定している場合はボタンがアクティブになり、値の前に「：」が表示されます。
   * The value of the button.
   * If the value is specified, the button will be active and a colon will be displayed before the value.
   */
  value?: string;
} & CommonProps;

/**
 * フィルタなどの絞り込み処理において、下記を満たす表示となります
 * - 項目毎に存在
 * - 適用中、適用なしの状態を持つ
 * - クリック可能で、その項目の変更を行う導線を表示できる
 *
 * ボタンをクリックすることで、項目に合わせたポップアップを表示します。
 * ポップアップの中身は `renderPopup` prop を用いて指定します。
 */
const FilterTag: React.FC<Props> = ({
  renderPopup,
  label,
  value,
  ...props
}: Props) => {
  const baseClass = 'vb-filterTag';

  return (
    <span {...commonProps(props, baseClass)}>
      <WithPopup
        render={(popupId, isOpen, controlRef) => (
          <button
            ref={controlRef as React.RefObject<HTMLButtonElement>}
            className={`${baseClass}__block ${
              value != null && value !== '' ? 'active' : ''
            }`}
            aria-controls={popupId}
            aria-expanded={isOpen}
          >
            <span className={`${baseClass}__body`}>
              {label}
              {value != null && value !== '' ? '：' : ''}
              {value}
            </span>
            <MdArrowDropDown className={`${baseClass}__icon`} />
          </button>
        )}
        renderPopup={renderPopup}
      />
    </span>
  );
};

export default FilterTag;

```

### src/lv2/filterableDropdownButton/FilterableDropdownButton.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import FilterableDropdownButton from './FilterableDropdownButton';
import { boolean, select, text } from '@storybook/addon-knobs';
import { Button } from '../..';
import { MdAdd } from 'react-icons/md';

export default {
  component: FilterableDropdownButton,
};

export const FilterableDropdownComponent = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  return (
    <FilterableDropdownButton
      buttonLabel={text(
        'buttonLabel',
        '開閉ボタン',
        'FilterableDropdownButton'
      )}
      appearance={
        select(
          'appearance',
          {
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
            undefined: '',
          },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      iconOnly={boolean('iconOnly', false, 'FilterableDropdownButton')}
      disabled={boolean('disabled', false, 'FilterableDropdownButton')}
      small={boolean('small', false, 'FilterableDropdownButton')}
      large={boolean('large', false, 'FilterableDropdownButton')}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      iconPosition={
        select(
          'iconPosition',
          { left: 'left', right: 'right', undefined: '' },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      {...commonKnobs()}
    ></FilterableDropdownButton>
  );
};

export const FilterableMenu = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  return (
    <FilterableDropdownButton
      buttonLabel={text(
        'buttonLabel',
        '開閉ボタン',
        'FilterableDropdownButton'
      )}
      appearance={
        select(
          'appearance',
          {
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
            undefined: '',
          },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      iconOnly={boolean('iconOnly', false, 'FilterableDropdownButton')}
      disabled={boolean('disabled', false, 'FilterableDropdownButton')}
      small={boolean('small', false, 'FilterableDropdownButton')}
      dropdownContents={data.map((d) => ({
        type: 'selectable',
        text: d.label,
        keywords: d.keywords,
        onClick: action(`click menu ${d.label}`),
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      iconPosition={
        select(
          'iconPosition',
          { left: 'left', right: 'right', undefined: '' },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      {...commonKnobs()}
    ></FilterableDropdownButton>
  );
};

export const WithFixedItems = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  return (
    <FilterableDropdownButton
      buttonLabel={text(
        'buttonLabel',
        '開閉ボタン',
        'FilterableDropdownButton'
      )}
      appearance={
        select(
          'appearance',
          {
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
            undefined: '',
          },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      iconOnly={boolean('iconOnly', false, 'FilterableDropdownButton')}
      disabled={boolean('disabled', false, 'FilterableDropdownButton')}
      small={boolean('small', false, 'FilterableDropdownButton')}
      large={boolean('large', false, 'FilterableDropdownButton')}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      iconPosition={
        select(
          'iconPosition',
          { left: 'left', right: 'right', undefined: '' },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      fixedItems={[
        {
          onSelect: () => {
            // no-op
          },
          isVisible: () => true,
          label: 'もっと見る',
          disableOnRequestClose: true,
        },
        {
          onSelect: () => {
            // no-op
          },
          isVisible: () => true,
          label: (value) => `${value}を新規登録`,
        },
        {
          onSelect: () => {
            // no-op
          },
          isVisible: (value) => !value,
          label: 'valueが空の時だけ表示',
        },
      ]}
      {...commonKnobs()}
    ></FilterableDropdownButton>
  );
};

export const WithNoItems = () => {
  const data: any[] = [];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  return (
    <FilterableDropdownButton
      buttonLabel={text(
        'buttonLabel',
        '開閉ボタン',
        'FilterableDropdownButton'
      )}
      appearance={
        select(
          'appearance',
          {
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
            undefined: '',
          },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      iconOnly={boolean('iconOnly', false, 'FilterableDropdownButton')}
      disabled={boolean('disabled', false, 'FilterableDropdownButton')}
      small={boolean('small', false, 'FilterableDropdownButton')}
      large={boolean('large', false, 'FilterableDropdownButton')}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      iconPosition={
        select(
          'iconPosition',
          { left: 'left', right: 'right', undefined: '' },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      {...commonKnobs()}
    ></FilterableDropdownButton>
  );
};

export const WithDropdownBottomContent = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  return (
    <FilterableDropdownButton
      buttonLabel={text(
        'buttonLabel',
        '開閉ボタン',
        'FilterableDropdownButton'
      )}
      appearance={
        select(
          'appearance',
          {
            primary: 'primary',
            secondary: 'secondary',
            tertiary: 'tertiary',
            undefined: '',
          },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      iconOnly={boolean('iconOnly', false, 'FilterableDropdownButton')}
      disabled={boolean('disabled', false, 'FilterableDropdownButton')}
      small={boolean('small', false, 'FilterableDropdownButton')}
      large={boolean('large', false, 'FilterableDropdownButton')}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      renderDropdownBottomContent={(requestClose) => (
        <Button
          type="button"
          appearance="tertiary"
          iconPosition="left"
          IconComponent={MdAdd}
          onClick={() => requestClose()}
          mr={1}
        >
          取引先を追加
        </Button>
      )}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      iconPosition={
        select(
          'iconPosition',
          { left: 'left', right: 'right', undefined: '' },
          '',
          'FilterableDropdownButton'
        ) || undefined
      }
      {...commonKnobs()}
    ></FilterableDropdownButton>
  );
};

```

### src/lv2/filterableDropdownButton/FilterableDropdownButton.tsx
```
typescript
import * as React from 'react';
import Button, { ButtonAppearanceType } from '../../lv1/buttons/Button';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import WithFilterableDropdown from '../withFilterableDropdown/WithFilterableDropdown';
import { MdArrowDropDown, MdMoreHoriz } from 'react-icons/md';
import { pickCommonProps } from '../../utilities/commonProps';

type PropsFromWithFilterableDropdown = Omit<
  Parameters<typeof WithFilterableDropdown>[0],
  'render'
>;

type PropsFromButton = Pick<
  Parameters<typeof Button>[0],
  'iconPosition' | 'IconComponent'
>;
type Props = PropsFromWithFilterableDropdown &
  PropsFromButton & {
    /**
     * ボタンのラベルとなる文字列。必ず指定してください。 `iconOnly` を使用する場合も必ず指定してください。
     */
    buttonLabel: string;
    small?: boolean;
    large?: boolean;
    appearance?: ButtonAppearanceType;
    /**
     * trueにすることで、ラベルを省略し「…」アイコンのみのボタンとなります
     */
    iconOnly?: boolean;
    /**
     * スピナーを表示する
     */
    isLoading?: boolean;
  };

/**
 * 選択肢をフィルター可能なドロップダウンボタンです。
 *
 * - 項目が少なく、フィルターが不要な場合は `DropdownButton` を使用してください。
 * - ボタン部分のカスタマイズがどうしても必要な場合は `WithFilterableDropdown` を使用してください。
 * - 上下キーでフォーカス移動、ESCキーで閉じられます。Tabキーでフォーカスを移動させる場合、メニューの外に出るとボタンへのフォーカスに戻ります
 * - メニューに入れられる項目は「クリック可能な項目（ボタンまたはリンク）」「チェックボックス」です
 *   - `DropdownButton` と違い、「テキスト」「区切り線」は使用できません。
 *   - 項目には複数の `keywords` を設定できます。読みがなやショートカットコードなどを指定すると、フィルターに使用できます
 *   - クリック可能な項目は `url` を渡されるとリンクとなります。遷移先のURLを特定できる場合は必ず `url` を渡してください
 *   - リンクに `target="_blank"` を渡した場合、右側に OpenInNew アイコンが表示されます。
 * - `iconOnly` を `true` とすることで、ラベルを表示せず「…」アイコンのみのボタンとなります。 **この場合も `aria-label` として使用するため、必ず `buttonLabel` に意味のある文字列を指定してください**
 */
const FilterableDropdownButton: React.FC<Props> = (props: Props) => {
  const {
    iconOnly,
    appearance,
    buttonLabel,
    small,
    large,
    disabled,
    dropdownContents,
    onFilterChange,
    onOpen,
    iconPosition,
    IconComponent,
    isLoading,
    fixedItems,
    noResultsMessage,
    noDataMessage,
    renderDropdownBottomContent,
  } = props;

  return (
    <WithFilterableDropdown
      disabled={disabled}
      dropdownContents={dropdownContents}
      onFilterChange={onFilterChange}
      onOpen={onOpen}
      isLoading={isLoading}
      fixedItems={fixedItems}
      noResultsMessage={noResultsMessage}
      noDataMessage={noDataMessage}
      renderDropdownBottomContent={renderDropdownBottomContent}
      {...pickCommonProps(props)}
      render={(dropdownId, isOpen, ref) =>
        iconOnly ? (
          <IconOnlyButton
            IconComponent={IconComponent || MdMoreHoriz}
            appearance={appearance}
            aria-controls={dropdownId}
            aria-expanded={isOpen}
            aria-haspopup={true}
            disabled={disabled}
            label={buttonLabel}
            small={small}
            large={large}
            ref={ref as React.Ref<HTMLButtonElement>}
            type="button"
          />
        ) : (
          <Button
            IconComponent={IconComponent || MdArrowDropDown}
            iconPosition={iconPosition || 'right'}
            disabled={disabled}
            small={small}
            large={large}
            appearance={appearance}
            aria-expanded={isOpen}
            aria-haspopup={true}
            aria-controls={dropdownId}
            ref={ref as React.Ref<HTMLButtonElement>}
            type="button"
          >
            {buttonLabel}
          </Button>
        )
      }
    />
  );
};

export default FilterableDropdownButton;

```

### src/lv2/footer/Footer.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Footer from './Footer';

export default {
  component: Footer,
};

export const FooterComponent = () => (
  <Footer
    width={
      select(
        'width',
        { none: '', narrow: 'narrow', normal: 'normal', wide: 'wide' },
        '',
        'Footer'
      ) || undefined
    }
    disableAppStoreBadge={boolean('disableAppStoreBadgbe', false, 'Footer')}
    AppStoreUrl={text('AppStoreUrl', '', 'Footer') || undefined}
    disableGooglePlayBadge={boolean('disableGooglePlayBadge', false, 'Footer')}
    GooglePlayUrl={text('GooglePlayUrl', '', 'Footer') || undefined}
    copyright={text('copyright', '', 'Footer') || undefined}
    {...commonKnobs()}
  />
);

export const WithSectionNode = () => (
  <Footer
    sectionNode={
      <div
        style={{
          alignItems: 'center',
          backgroundColor: 'lightgray',
          display: 'flex',
          height: 40,
          justifyContent: 'center',
          width: 120,
        }}
      >
        <span>dummy badge</span>
      </div>
    }
  />
);

```

### src/lv2/footer/Footer.tsx
```
typescript
import * as React from 'react';
import AppStoreBadge from '../../lv1/images/AppStoreBadge';
import GooglePlayBadge from '../../lv1/images/GooglePlayBadge';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Link = {
  title: string;
  url: string;
};
type Props = {
  links?: Link[];
  AppStoreUrl?: string;
  GooglePlayUrl?: string;
  disableAppStoreBadge?: boolean;
  disableGooglePlayBadge?: boolean;
  copyright?: string;
  width?: 'normal' | 'narrow' | 'wide';
  /**
   * フッタの右側に表示する要素を指定します。（この値を指定すると強制的にバッジは非表示になります。）
   */
  sectionNode?: React.ReactNode;
} & CommonProps;

export const defaultLinks = [
  {
    title: '利用規約',
    url: 'https://www.freee.co.jp/terms/',
  },
  {
    title: 'プライバシーポリシー',
    url: 'https://www.freee.co.jp/privacy_policy/',
  },
  {
    title: '会社情報',
    url: 'https://corp.freee.co.jp/',
  },
];

function createLinks(links?: Link[]): React.ReactNode {
  const linkDatas = links ? links : defaultLinks;
  const linkItems = linkDatas.map((linkCont, index) => (
    <li key={index} className="vb-footerLinks__item">
      <a href={linkCont.url} target="_blank" rel="noreferrer noopener">
        {linkCont.title}
      </a>
    </li>
  ));

  return linkItems;
}

const Footer: React.FC<Props> = (props: Props) => {
  const {
    links,
    AppStoreUrl,
    GooglePlayUrl,
    disableAppStoreBadge,
    disableGooglePlayBadge,
    copyright,
    width,
    sectionNode,
  } = props;

  const defaultAppStoreUrl =
    'https://itunes.apple.com/jp/app/freee/id811207074?l=ja&ls=1&mt=8';
  const defaultGooglePlayUrl =
    'https://play.google.com/store/apps/details?id=jp.co.freee.freee';
  const defaultCopyright =
    '© Copyright 2012-' + new Date().getFullYear() + ' freee K.K.';

  return (
    <footer
      {...commonProps(props, 'vb-footer', {
        widthNarrow: width === 'narrow',
        widthWide: width === 'wide',
      })}
      role="contentinfo"
    >
      <div className="vb-footerLinksArea">
        <ul className="vb-footerLinks">{createLinks(links)}</ul>
        <address className="vb-footerCopyright">
          {copyright ? copyright : defaultCopyright}
        </address>
      </div>

      {sectionNode ? (
        <div className="vb-footerSection">{sectionNode}</div>
      ) : (
        <ul className="vb-footerBadges">
          {!disableAppStoreBadge && (
            <li className="vb-footerBadges__item">
              <a
                href={AppStoreUrl ? AppStoreUrl : defaultAppStoreUrl}
                target="_blank"
                rel="noreferrer noopener"
              >
                <AppStoreBadge />
              </a>
            </li>
          )}

          {!disableGooglePlayBadge && (
            <li className="vb-footerBadges__item">
              <a
                href={GooglePlayUrl ? GooglePlayUrl : defaultGooglePlayUrl}
                target="_blank"
                rel="noreferrer noopener"
              >
                <GooglePlayBadge />
              </a>
            </li>
          )}
        </ul>
      )}
    </footer>
  );
};
export default Footer;

```

### src/lv2/formBlock/DateField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import DateField from './DateField';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
});

export default {
  component: DateField,
};

export const DateFieldComponent = () => (
  <DateField
    selectedDate={text('SelectedDate', '2020-01-01', 'DateField')}
    startDate={text('StartDate', '2019-07-01', 'DateField')}
    endDate={text('EndDate', '2021-06-30', 'DateField')}
    small={boolean('Small', false, 'DateField')}
    disabled={boolean('Disabled', false, 'DateField')}
    error={boolean('Error', false, 'DateField')}
    required={boolean('Required', false, 'DateField')}
    autoComplete={
      select(
        'AutoComplete',
        {
          off: 'off',
          bday: 'bday',
          undefined: '',
        },
        '',
        'DateField'
      ) || undefined
    }
    nullable={boolean('Nullable', false, 'DateField')}
    wareki={boolean('Wareki', false, 'DateField')}
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
    />
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      disabled
    />
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      error
    />
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      wareki
    />
  </>
);

export const Small = () => (
  <>
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      small
    />
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      small
      disabled
    />
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      small
      error
    />
    <DateField
      marginBottom
      selectedDate="2020-01-01"
      startDate="2019-07-01"
      endDate="2021-06-30"
      small
      wareki
    />
  </>
);

export const Nullable = () => (
  <>
    <DateField
      marginBottom
      selectedDate={null}
      startDate="2019-07-01"
      endDate="2021-06-30"
      nullable
    />
    <DateField
      marginBottom
      selectedDate={null}
      startDate="2019-07-01"
      endDate="2021-06-30"
      disabled
      nullable
    />
    <DateField
      marginBottom
      selectedDate={null}
      startDate="2019-07-01"
      endDate="2021-06-30"
      error
      nullable
    />
    <DateField
      marginBottom
      selectedDate={null}
      startDate="2019-07-01"
      endDate="2021-06-30"
      wareki
      nullable
    />
  </>
);

export const InteractiveSample = () => {
  const [value, setValue] = React.useState<string>('2020-01-01');
  return (
    <DateField
      selectedDate={value}
      startDate="2019-07-01"
      endDate="2021-06-30"
      onChange={(v) => setValue(v ?? '')}
    />
  );
};

export const InteractiveSampleWithNullable = () => {
  const [value, setValue] = React.useState<string>('2020-01-01');
  return (
    <DateField
      selectedDate={value}
      startDate="2019-07-01"
      endDate="2021-06-30"
      nullable
      onChange={(v) => setValue(v ?? '')}
    />
  );
};

export const InteractiveSampleWithWareki = () => {
  const [value, setValue] = React.useState<string>('2020-01-01');
  return (
    <DateField
      selectedDate={value}
      startDate="1850-01-01"
      endDate="2050-12-31"
      wareki
      onChange={(v) => setValue(v ?? '')}
    />
  );
};

```

### src/lv2/formBlock/DateField.tsx
```
typescript
import * as React from 'react';
import {
  format,
  getYear,
  getMonth,
  getDate,
  getDaysInMonth,
  isAfter,
  endOfMonth,
  parse,
} from 'date-fns';
import warekiFormat from 'wareki';
import vbClassNames from '../../utilities/vbClassNames';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import SelectBox from '../../lv1/forms/SelectBox';
import useUniqueId from '../../hooks/useUniqueId';

type DateType = 'year' | 'month' | 'day';
type Props = {
  /**
   * 選択中の日付を指定します。 `YYYY-MM-DD` 形式の日付を渡してください。
   */
  selectedDate: string | null;
  /**
   * 選択できる日付の範囲の開始地点を指定します。`YYYY-MM-DD` 形式の日付を渡してください。
   */
  startDate: string;
  /**
   * 選択できる日付の範囲の終了地点を指定します。 `YYYY-MM-DD` 形式の日付を渡してください。
   */
  endDate: string;
  /**
   * 表示サイズを小さくします
   */
  small?: boolean;
  disabled?: boolean;
  error?: boolean;
  required?: boolean;
  /**
   * `autoComplete` 属性の値を指定します。生年月日フィールドの場合は `bday` を指定してください。
   */
  autoComplete?: 'off' | 'bday';
  /**
   * `true` にすると、日付を未選択状態にできるようになります
   */
  nullable?: boolean;
  /**
   * `true` にすると、「年」のセレクトボックスが和暦併記になります
   */
  wareki?: boolean;
  onChange?: (date: string | null) => void;
  onInput?: (date: string | null) => void;
  onFocus?: (date: string | null) => void;
  onBlur?: (date: string | null) => void;
  onKeyDown?: (date: string | null) => void;
} & MarginClassProps &
  CommonProps;

// year, month, dayいずれかを更新した新しい日付を year, month, day で返す
const adjustDateParams = (
  type: DateType,
  value: number | null,
  current: { [dateType in DateType]: number | null },
  startDate: string,
  endDate: string
): { year: number | null; month: number | null; day: number | null } => {
  let { year, month, day } = current;
  switch (type) {
    case 'year':
      year = value;
      break;
    case 'month':
      month = value;
      break;
    case 'day':
      day = value;
      break;
  }

  // いずれかが設定されていない場合は日付の調整を行わずそのまま返却する
  if (year === null || month === null || day === null) {
    return { year, month, day };
  }

  let date = new Date(year, month, day);
  // 月の日数が変わる時、範囲外ならその月の末日にする
  // ex: 2019-03-31 -> 2月に変更 -> 2019-02-28
  const monthEndDate = endOfMonth(format(new Date(year, month), 'YYYY-MM'));
  if (isAfter(date, monthEndDate)) {
    date = new Date(year, month, getDate(monthEndDate));
  }
  // range を超えた場合は超えないように収める
  const minDate = parse(startDate);
  if (date < minDate) {
    date = minDate;
  }
  const maxDate = parse(endDate);
  if (date > maxDate) {
    date = maxDate;
  }
  return { year: getYear(date), month: getMonth(date), day: getDate(date) };
};

const createOptions = (
  type: DateType,
  values: Array<number>,
  nullable?: boolean,
  wareki?: boolean
): Array<{ name: string; value: string }> => {
  const getYearName = (year: number) => {
    if (!wareki) {
      return `${year}`;
    }

    const warekiOnStart = warekiFormat(new Date(year, 0, 1).getTime());
    const warekiOnEnd = warekiFormat(new Date(year, 11, 31).getTime());

    // 明治以前の場合、年号を表示しない
    if (Number(warekiOnEnd) === year) {
      return `${year}`;
    }

    // 明治元年の場合
    if (Number(warekiOnStart) === year) {
      return `${year} (${warekiOnEnd})`;
    }

    // 1989年(昭和64・平成元)のような重なる和暦年の場合、両方とも表示
    const warekiYear =
      warekiOnStart === warekiOnEnd
        ? warekiOnStart
        : `${warekiOnStart} / ${warekiOnEnd}`;

    return `${year} (${warekiYear})`;
  };
  const getName = (value: number) => {
    switch (type) {
      case 'year':
        return getYearName(value);
      case 'month':
        return `${value + 1}`;
      case 'day':
        return `${value}`;
    }
  };
  const options = values.map((value) => {
    return {
      name: getName(value),
      value: `${value}`,
    };
  });
  const emptyOptions = nullable ? [{ name: '', value: '' }] : [];
  return [...emptyOptions, ...options];
};

const getYears = (startDate: string, endDate: string) => {
  const startYear = getYear(startDate);
  const endYear = getYear(endDate);
  const size = endYear - startYear + 1;
  return [...Array(size)].map((_, i) => startYear + i);
};

const getMonths = (
  startDate: string,
  endDate: string,
  { year }: { [dateType in DateType]: number | null }
) => {
  if (year === null) {
    return [];
  }
  const startMonth = year === getYear(startDate) ? getMonth(startDate) : 0;
  const endMonth = year === getYear(endDate) ? getMonth(endDate) : 11;
  const size = endMonth - startMonth + 1;
  return [...Array(size)].map((_, i) => startMonth + i);
};

const getDays = (
  startDate: string,
  endDate: string,
  { year, month }: { [dateType in DateType]: number | null }
) => {
  if (year === null || month === null) {
    return [];
  }
  const startDay =
    year === getYear(startDate) && month === getMonth(startDate)
      ? getDate(startDate)
      : 1;
  const endDay =
    year === getYear(endDate) && month === getMonth(endDate)
      ? getDate(endDate)
      : getDaysInMonth(new Date(year, month));
  const size = endDay - startDay + 1;
  return [...Array(size)].map((_, i) => startDay + i);
};

/**
 *
 * セレクトボックスで年月日を選択するフォーム用のフィールドです。
 *
 * - `DateField` は生年月日など、年単位で離れた日付を入力する場合に使用してください
 *   - 近い日付を入力することが多い場合には `DateInput` を使用してください。
 *     `DateInput` はカレンダーを見ながら入力でき、曜日をヒントにすることができる一方、月単位でカレンダーを移動するため年単位で離れた日付の入力には向きません。
 * - `wareki` オプションを使用すると、「年」のセレクトボックスで和暦を併記することができます
 *   - 和暦で認識しているユーザーが多いと思われる、生年月日のフィールド等にはこちらを使用してください
 *
 */
const DateField: React.FC<Props> = (props: Props) => {
  const {
    selectedDate,
    startDate,
    endDate,
    small,
    disabled,
    error,
    required,
    autoComplete,
    nullable,
    wareki,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const [selectedYear, setSelectedYear] = React.useState(
    selectedDate ? getYear(selectedDate) : null
  );
  const [selectedMonth, setSelectedMonth] = React.useState(
    selectedDate ? getMonth(selectedDate) : null
  );
  const [selectedDay, setSelectedDay] = React.useState(
    selectedDate ? getDate(selectedDate) : null
  );

  React.useEffect(() => {
    setSelectedYear(selectedDate ? getYear(selectedDate) : null);
    setSelectedMonth(selectedDate ? getMonth(selectedDate) : null);
    setSelectedDay(selectedDate ? getDate(selectedDate) : null);
  }, [selectedDate]);

  const selected = {
    year: selectedYear,
    month: selectedMonth,
    day: selectedDay,
  };

  const years = getYears(startDate, endDate);
  const months = getMonths(startDate, endDate, selected);
  const days = getDays(startDate, endDate, selected);

  const unitClassName = vbClassNames('vb-dateField__unit', {
    modifier: { small },
  });
  const id = useUniqueId('vb-dateField');
  const yearId = `${id}__year`;
  const monthId = `${id}__month`;
  const dayId = `${id}__day`;

  const yearWidth = wareki ? 'medium' : 'small';

  const createHandler =
    (
      handler: ((date: string | null) => void) | null | undefined,
      type: DateType,
      selected: { [dateType in DateType]: number | null }
    ) =>
    ({ target }: React.FormEvent | React.KeyboardEvent): void => {
      if (target instanceof HTMLSelectElement) {
        const { value } = target;
        const { year, month, day } = adjustDateParams(
          type,
          value ? parseInt(value) : null,
          selected,
          startDate,
          endDate
        );
        setSelectedYear(year);
        setSelectedMonth(month);
        setSelectedDay(day);
        // 全て選択されている場合は日付を、未選択がある場合は null を返却
        const date =
          year === null || month === null || day === null
            ? null
            : format(new Date(year, month, day), 'YYYY-MM-DD');
        handler && handler(date);
      }
    };

  return (
    <div
      {...commonProps(
        props,
        'vb-dateField',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <label htmlFor={yearId}>
        <SelectBox
          id={yearId}
          options={createOptions('year', years, nullable, wareki)}
          small={small}
          disabled={disabled}
          error={error}
          required={required}
          value={String(selectedYear)}
          width={yearWidth}
          autoComplete={autoComplete === 'bday' ? 'bday-year' : autoComplete}
          onChange={createHandler(onChange, 'year', selected)}
          onInput={createHandler(onInput, 'year', selected)}
          onFocus={createHandler(onFocus, 'year', selected)}
          onBlur={createHandler(onBlur, 'year', selected)}
          onKeyDown={createHandler(onKeyDown, 'year', selected)}
        />
        <span className={unitClassName}>年</span>
      </label>
      <label htmlFor={monthId}>
        <SelectBox
          id={monthId}
          options={createOptions('month', months, nullable, wareki)}
          small={small}
          disabled={disabled}
          error={error}
          required={required}
          value={String(selectedMonth)}
          width="xSmall"
          autoComplete={autoComplete === 'bday' ? 'bday-month' : autoComplete}
          onChange={createHandler(onChange, 'month', selected)}
          onInput={createHandler(onInput, 'month', selected)}
          onFocus={createHandler(onFocus, 'month', selected)}
          onBlur={createHandler(onBlur, 'month', selected)}
          onKeyDown={createHandler(onKeyDown, 'month', selected)}
        />
        <span className={unitClassName}>月</span>
      </label>
      <label htmlFor={dayId}>
        <SelectBox
          id={dayId}
          options={createOptions('day', days, nullable, wareki)}
          small={small}
          disabled={disabled}
          error={error}
          required={required}
          value={String(selectedDay)}
          width="xSmall"
          autoComplete={autoComplete === 'bday' ? 'bday-day' : autoComplete}
          onChange={createHandler(onChange, 'day', selected)}
          onInput={createHandler(onInput, 'day', selected)}
          onFocus={createHandler(onFocus, 'day', selected)}
          onBlur={createHandler(onBlur, 'day', selected)}
          onKeyDown={createHandler(onKeyDown, 'day', selected)}
        />
        <span className={unitClassName}>日</span>
      </label>
    </div>
  );
};
export default DateField;

```

### src/lv2/formBlock/FormActions.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Button from '../../lv1/buttons/Button';
import FormActions from './FormActions';
import Container from '../../lv1/bases/Container';
import Paragraph from '../../lv1/typography/Paragraph';
import ContentsBase from '../../lv1/bases/ContentsBase';
import HeadlineArea from '../headlineArea/HeadlineArea';

export default {
  component: FormActions,
};

export const FormActionsComponent = () => (
  <FormActions
    responsive={boolean('Responsive', true, 'FormActions')}
    position={select(
      'Position',
      { static: 'static', fixed: 'fixed', sticky: 'sticky', undefined },
      undefined,
      'FormActions'
    )}
    align={
      select(
        'Align',
        {
          left: 'left',
          center: 'center',
          undefined: '',
        },
        '',
        'FormActions'
      ) || undefined
    }
    width={
      select(
        'Width',
        {
          normal: 'normal',
          narrow: 'narrow',
          wide: 'wide',
          undefined: '',
        },
        '',
        'FormActions'
      ) || undefined
    }
    {...commonKnobs()}
  >
    <Button primary>保存</Button>
    <Button>キャンセル</Button>
  </FormActions>
);

export const FixedFormActionsWithContainer = () => (
  <Container>
    <ContentsBase>
      <HeadlineArea pageTitle="Fixed FormActions with Container" />
      <Paragraph>Fixed FormActions with Container</Paragraph>
      <FormActions position="fixed" align="left">
        <Button primary>保存</Button>
        <Button>キャンセル</Button>
      </FormActions>
    </ContentsBase>
  </Container>
);

export const StickyFormActionsWithContainer = () => (
  <Container>
    <ContentsBase>
      <HeadlineArea pageTitle="Sticky FormActions with Container" />
      <Paragraph>Sticky FormActions with Container</Paragraph>
      {Array(100)
        .fill(100)
        .map((_, i) => (
          <br key={i} />
        ))}
      <FormActions position="sticky" align="left">
        <Button primary>保存</Button>
        <Button>キャンセル</Button>
      </FormActions>
    </ContentsBase>
  </Container>
);

```

### src/lv2/formBlock/FormActions.tsx
```
typescript
import * as React from 'react';
import { CSSTransition } from 'react-transition-group';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import ButtonGroup from '../buttonGroup/ButtonGroup';
import PopupBase from '../../lv1/bases/PopupBase';
import vbClassNames from '../../utilities/vbClassNames';
import { convertRemToPixel } from '../../utilities/convertRemToPixel';

type Props = {
  /**
   * position を使用してください。 position 指定時は無視されます。
   * @deprecated
   */
  fixed?: boolean;
  /**
   * 表示位置を指定します。
   */
  position?: 'static' | 'fixed' | 'sticky';
  /**
   * 指定するとブラウザ幅に応じてボタンの並び方が変わります。
   */
  responsive?: boolean;
  children?: React.ReactNode;
  /**
   * 水平方向の配置を指定します
   */
  align?: 'left' | 'center';
  /**
   * 固定表示時にボタンを配置する範囲を指定します。position が fixed or sticky の場合にのみ利用されます。
   */
  width?: 'normal' | 'narrow' | 'wide';
} & CommonProps;

const useSticky = (position: Props['position']) => {
  const [sticked, setSticked] = React.useState(false);
  const ref = React.useRef<HTMLDivElement>(null);
  React.useEffect(() => {
    const el = ref.current;
    if (position !== 'sticky' || !el) {
      return;
    }
    const handleScroll = () => {
      const rect = el.getBoundingClientRect();
      // 固定配置する FormActions の表示を切り替えるスクロール位置を FormActions の高さと揃えるため 1rem 減算する（PopupBase の paddingSize 分）
      const sticked = window.innerHeight <= rect.top - convertRemToPixel(1);
      setSticked(sticked);
    };
    handleScroll();
    window.addEventListener('resize', handleScroll);
    window.addEventListener('scroll', handleScroll);
    return () => {
      window.removeEventListener('resize', handleScroll);
      window.removeEventListener('scroll', handleScroll);
    };
  }, [position]);

  return { ref, sticked };
};

const InnerFixedWrapper = (
  {
    children,
    sticked,
    sticky,
  }: {
    children: React.ReactNode;
    sticked: boolean;
    sticky: boolean;
  },
  ref?: React.Ref<HTMLElement>
) =>
  sticky ? (
    <CSSTransition
      classNames="vb-formActions__animation"
      in={sticked}
      timeout={300}
      mountOnEnter
      unmountOnExit
      nodeRef={ref}
    >
      {children}
    </CSSTransition>
  ) : (
    <>{children}</>
  );
const FixedWrapper = React.forwardRef(InnerFixedWrapper);

const FormActions: React.FC<Props> = (props: Props) => {
  const { fixed, position: orgPosition, responsive, children, width } = props;

  const position = orgPosition ? orgPosition : fixed ? 'fixed' : 'static';

  const { ref: staticRef, sticked } = useSticky(position);
  const fixedRef = React.useRef<HTMLDivElement>(null);

  const hasFixedContent = position === 'fixed' || position === 'sticky';
  const hasStaticContent = position === 'static' || position === 'sticky';
  const hideStaticContent = position === 'sticky' && sticked;

  return (
    <>
      {hasFixedContent && (
        <FixedWrapper
          ref={fixedRef}
          sticked={sticked}
          sticky={position === 'sticky'}
        >
          <div
            {...commonProps(props, 'vb-formActions', {
              fixed: true,
              responsive,
            })}
            ref={fixedRef}
          >
            <PopupBase paddingSize="small">
              <div
                className={vbClassNames('vb-formActions__inner', {
                  modifier: {
                    widthNarrow: width === 'narrow',
                    widthWide: width === 'wide',
                  },
                })}
              >
                <ButtonGroup
                  align={props.align ?? 'center'}
                  responsive={responsive}
                >
                  {children}
                </ButtonGroup>
              </div>
            </PopupBase>
          </div>
        </FixedWrapper>
      )}
      {hasStaticContent && (
        <div
          {...commonProps(props, 'vb-formActions', {
            responsive,
          })}
          ref={staticRef}
          style={hideStaticContent ? { visibility: 'hidden' } : undefined}
        >
          <ButtonGroup align={props.align ?? 'left'} responsive={responsive}>
            {children}
          </ButtonGroup>
        </div>
      )}
    </>
  );
};
export default FormActions;

```

### src/lv2/formBlock/NameField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import NameField from './NameField';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
});

export default {
  component: NameField,
};

export const NameFieldComponent = () => (
  <NameField
    lastName={text('LastName', '', 'NameField')}
    firstName={text('FirstName', '', 'NameField')}
    lastNamePlaceholder={text('LastNamePlaceholder', '', 'NameField')}
    firstNamePlaceholder={text('FirstNamePlaceholder', '', 'NameField')}
    small={boolean('Small', false, 'NameField')}
    disabled={boolean('Disabled', false, 'NameField')}
    error={boolean('Error', false, 'NameField')}
    required={boolean('Required', false, 'NameField')}
    autoComplete={
      select(
        'AutoComplete',
        {
          off: 'off',
          name: 'name',
          undefined: '',
        },
        '',
        'NameField'
      ) || undefined
    }
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <NameField marginBottom />
    <NameField marginBottom disabled />
    <NameField marginBottom error />
  </>
);

export const Small = () => (
  <>
    <NameField marginBottom small />
    <NameField marginBottom small disabled />
    <NameField marginBottom small error />
  </>
);

export const InteractiveSample = () => {
  const [values, setValues] = React.useState<{
    lastName: string;
    firstName: string;
  }>({ lastName: '', firstName: '' });

  return (
    <NameField
      lastName={values.lastName}
      firstName={values.firstName}
      onChange={(key, e) => {
        const value = e.currentTarget.value;
        setValues((values) => ({ ...values, [key]: value }));
      }}
    />
  );
};

```

### src/lv2/formBlock/NameField.tsx
```
typescript
import * as React from 'react';

import TextField from '../../lv1/forms/TextField';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type NameKey = 'lastName' | 'firstName';
type Props = {
  lastName?: string;
  firstName?: string;
  lastNamePlaceholder?: string;
  firstNamePlaceholder?: string;
  label?: string;
  /**
   * There are no way to use labelledby.
   * aria-label and aria-labelledby cannot use at the same time,
   *  we cannot resolve the problem in a similar way as aria-label
   * @deprecated
   */
  labelledby?: string;
  disabled?: boolean;
  required?: boolean;
  error?: boolean;
  small?: boolean;
  autoComplete?: 'off' | 'name';
  onChange?: (key: NameKey, e: React.ChangeEvent<HTMLInputElement>) => void;
  onInput?: (key: NameKey, e: React.FormEvent<HTMLInputElement>) => void;
  onFocus?: (key: NameKey, e: React.FormEvent<HTMLInputElement>) => void;
  onBlur?: (key: NameKey, e: React.FormEvent<HTMLInputElement>) => void;
  onKeyDown?: (key: NameKey, e: React.KeyboardEvent<HTMLInputElement>) => void;
} & MarginClassProps &
  CommonProps;

const NameField: React.FC<Props> = (props: Props) => {
  const {
    lastName,
    firstName,
    lastNamePlaceholder,
    firstNamePlaceholder,
    label,
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    labelledby,
    disabled,
    required,
    error,
    small,
    autoComplete,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  return (
    <div
      {...commonProps(
        props,
        'vb-nameField',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <TextField
        name="lastNameField"
        value={lastName}
        label={`姓${label ? `（${label}）` : ''}`}
        placeholder={
          lastNamePlaceholder === undefined ? '姓' : lastNamePlaceholder
        }
        disabled={disabled}
        required={required}
        error={error}
        small={small}
        autoComplete={autoComplete === 'name' ? 'family-name' : autoComplete}
        onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {
          onChange && onChange('lastName', e);
        }}
        onInput={(e: React.FormEvent<HTMLInputElement>): void => {
          onInput && onInput('lastName', e);
        }}
        onFocus={(e: React.FormEvent<HTMLInputElement>): void => {
          onFocus && onFocus('lastName', e);
        }}
        onBlur={(e: React.FormEvent<HTMLInputElement>): void => {
          onBlur && onBlur('lastName', e);
        }}
        onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>): void => {
          onKeyDown && onKeyDown('lastName', e);
        }}
        marginRight
      />
      <TextField
        name="firstNameField"
        value={firstName}
        label={`名${label ? `（${label}）` : ''}`}
        placeholder={
          firstNamePlaceholder === undefined ? '名' : firstNamePlaceholder
        }
        disabled={disabled}
        required={required}
        small={small}
        error={error}
        autoComplete={autoComplete === 'name' ? 'given-name' : autoComplete}
        onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {
          onChange && onChange('firstName', e);
        }}
        onInput={(e: React.FormEvent<HTMLInputElement>): void => {
          onInput && onInput('firstName', e);
        }}
        onFocus={(e: React.FormEvent<HTMLInputElement>): void => {
          onFocus && onFocus('firstName', e);
        }}
        onBlur={(e: React.FormEvent<HTMLInputElement>): void => {
          onBlur && onBlur('firstName', e);
        }}
        onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>): void => {
          onKeyDown && onKeyDown('firstName', e);
        }}
      />
    </div>
  );
};
export default NameField;

```

### src/lv2/formBlock/PhoneNumberField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import PhoneNumberField from './PhoneNumberField';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
});

export default {
  component: PhoneNumberField,
};

export const PhoneNumberFieldComponent = () => (
  <PhoneNumberField
    phoneNumberA={text('PhoneNumberA', '', 'PhoneNumberField')}
    phoneNumberB={text('PhoneNumberB', '', 'PhoneNumberField')}
    phoneNumberC={text('PhoneNumberC', '', 'PhoneNumberField')}
    placeholderA={text('PlaceholderA', '', 'PhoneNumberField')}
    placeholderB={text('PlaceholderB', '', 'PhoneNumberField')}
    placeholderC={text('PlaceholderC', '', 'PhoneNumberField')}
    small={boolean('Small', false, 'PhoneNumberField')}
    disabled={boolean('Disabled', false, 'PhoneNumberField')}
    error={boolean('Error', false, 'PhoneNumberField')}
    autoComplete={
      select(
        'AutoComplete',
        {
          off: 'off',
          tel: 'tel',
          undefined: '',
        },
        '',
        'PhoneNumberField'
      ) || undefined
    }
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <PhoneNumberField marginBottom />
    <PhoneNumberField marginBottom disabled />
    <PhoneNumberField marginBottom error />
  </>
);

export const Small = () => (
  <>
    <PhoneNumberField marginBottom small />
    <PhoneNumberField marginBottom small disabled />
    <PhoneNumberField marginBottom small error />
  </>
);

export const InteractiveSample = () => {
  const [values, setValues] = React.useState<{
    a: string;
    b: string;
    c: string;
  }>({ a: '', b: '', c: '' });

  return (
    <PhoneNumberField
      phoneNumberA={values.a}
      phoneNumberB={values.b}
      phoneNumberC={values.c}
      onChange={(key, e) => {
        const value = e.currentTarget.value;
        setValues((values) => ({ ...values, [key]: value }));
      }}
    />
  );
};

```

### src/lv2/formBlock/PhoneNumberField.tsx
```
typescript
import * as React from 'react';
import TextField from '../../lv1/forms/TextField';
import vbClassNames from '../../utilities/vbClassNames';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

export type PhoneNumberKey = 'a' | 'b' | 'c';
type Props = {
  phoneNumberA?: string;
  phoneNumberB?: string;
  phoneNumberC?: string;
  placeholderA?: string;
  placeholderB?: string;
  placeholderC?: string;
  disabled?: boolean;
  error?: boolean;
  small?: boolean;
  autoComplete?: 'off' | 'tel';
  onChange?: (
    key: PhoneNumberKey,
    e: React.ChangeEvent<HTMLInputElement>
  ) => void;
  onInput?: (key: PhoneNumberKey, e: React.FormEvent<HTMLInputElement>) => void;
  onFocus?: (key: PhoneNumberKey, e: React.FormEvent<HTMLInputElement>) => void;
  onBlur?: (key: PhoneNumberKey, e: React.FormEvent<HTMLInputElement>) => void;
  onKeyDown?: (
    key: PhoneNumberKey,
    e: React.KeyboardEvent<HTMLInputElement>
  ) => void;
} & MarginClassProps &
  CommonProps;

const MAX_LENGTH_A = 5;
const MAX_LENGTH_B = 4;
const MAX_LENGTH_C = 4;

const PhoneNumberField: React.FC<Props> = (props: Props) => {
  const {
    phoneNumberA,
    phoneNumberB,
    phoneNumberC,
    placeholderA,
    placeholderB,
    placeholderC,
    disabled,
    error,
    small,
    autoComplete,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const hyphenClassName = vbClassNames('vb-phoneNumberField__hyphen', {
    modifier: { disabled, error, small },
  });

  return (
    <div
      {...commonProps(
        props,
        'vb-phoneNumberField',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginTop,
          marginSize,
        }
      )}
    >
      <TextField
        type="tel"
        name="areaCode"
        label="電話番号の市外局番"
        value={phoneNumberA}
        placeholder={placeholderA}
        maxLength={MAX_LENGTH_A}
        width="xSmall"
        alignCenter
        disabled={disabled}
        error={error}
        small={small}
        autoComplete={autoComplete === 'tel' ? 'tel-area-code' : autoComplete}
        onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {
          onChange && onChange('a', e);
        }}
        onInput={(e: React.FormEvent<HTMLInputElement>): void => {
          onInput && onInput('a', e);
        }}
        onFocus={(e: React.FormEvent<HTMLInputElement>): void => {
          onFocus && onFocus('a', e);
        }}
        onBlur={(e: React.FormEvent<HTMLInputElement>): void => {
          onBlur && onBlur('a', e);
        }}
        onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>): void => {
          onKeyDown && onKeyDown('a', e);
        }}
      />
      <span className={hyphenClassName}>-</span>
      <TextField
        type="tel"
        name="prefix"
        label="電話番号の市内局番"
        value={phoneNumberB}
        placeholder={placeholderB}
        maxLength={MAX_LENGTH_B}
        width="xSmall"
        alignCenter
        disabled={disabled}
        error={error}
        small={small}
        autoComplete={
          autoComplete === 'tel' ? 'tel-local-prefix' : autoComplete
        }
        onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {
          onChange && onChange('b', e);
        }}
        onInput={(e: React.FormEvent<HTMLInputElement>): void => {
          onInput && onInput('b', e);
        }}
        onFocus={(e: React.FormEvent<HTMLInputElement>): void => {
          onFocus && onFocus('b', e);
        }}
        onBlur={(e: React.FormEvent<HTMLInputElement>): void => {
          onBlur && onBlur('b', e);
        }}
        onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>): void => {
          onKeyDown && onKeyDown('b', e);
        }}
      />
      <span className={hyphenClassName}>-</span>
      <TextField
        type="tel"
        name="lineNumber"
        label="電話番号の加入者番号"
        value={phoneNumberC}
        placeholder={placeholderC}
        maxLength={MAX_LENGTH_C}
        width="xSmall"
        alignCenter
        disabled={disabled}
        error={error}
        small={small}
        autoComplete={
          autoComplete === 'tel' ? 'tel-local-suffix' : autoComplete
        }
        onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {
          onChange && onChange('c', e);
        }}
        onInput={(e: React.FormEvent<HTMLInputElement>): void => {
          onInput && onInput('c', e);
        }}
        onFocus={(e: React.FormEvent<HTMLInputElement>): void => {
          onFocus && onFocus('c', e);
        }}
        onBlur={(e: React.FormEvent<HTMLInputElement>): void => {
          onBlur && onBlur('c', e);
        }}
        onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>): void => {
          onKeyDown && onKeyDown('c', e);
        }}
      />
    </div>
  );
};
export default PhoneNumberField;

```

### src/lv2/formControl/FormControl.stories.tsx
```
typescript
import { boolean, text } from '@storybook/addon-knobs';
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import MarginBase from '../../lv1/bases/MarginBase';
import CheckBox from '../../lv1/forms/CheckBox';
import TextField from '../../lv1/forms/TextField';
import SectionTitle from '../../lv1/typography/SectionTitle';
import FormControl from './FormControl';

export default {
  component: FormControl,
};

export const FormControlComponent = () => {
  return (
    <FormControl
      id={text('Id', 'formControl1', 'FormControl')}
      label={text('Label', 'ラベル', 'FormControl')}
      fieldId="textField-1"
      required={boolean('Required', true, 'FormControl')}
      help={text('Help', '説明文を書くとヘルプアイコンがでます', 'FormControl')}
      {...commonKnobs()}
    >
      <TextField
        placeholder="テキストフィールド"
        name="text"
        id="textField-1"
      />
    </FormControl>
  );
};

export const LabelWithTypography = () => (
  <FormControl
    label={
      <SectionTitle headlineLevel={-1}>
        以下の中で該当するものを選択してください。
      </SectionTitle>
    }
    required
  >
    <MarginBase mb={0.5} mt={0.5}>
      <CheckBox>チェックボックス1</CheckBox>
    </MarginBase>
    <MarginBase mb={0.5} mt={0.5}>
      <CheckBox>チェックボックス2</CheckBox>
    </MarginBase>
    <MarginBase mb={0.5} mt={0.5}>
      <CheckBox>チェックボックス3</CheckBox>
    </MarginBase>
    <MarginBase mb={0.5} mt={0.5}>
      <CheckBox>チェックボックス4</CheckBox>
    </MarginBase>
    <MarginBase mb={0.5} mt={0.5}>
      <CheckBox>チェックボックス5</CheckBox>
    </MarginBase>
  </FormControl>
);

```

### src/lv2/formControl/FormControl.tsx
```
typescript
import * as React from 'react';
import FormControlLabel from '../../lv1/forms/FormControlLabel';
import MessageIcon from '../../lv2/messageIcon/MessageIcon';
import { MarginClassProps } from '../../utilities/marginClasses';
import useUniqueId from '../../hooks/useUniqueId';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children: React.ReactNode;
  label?: React.ReactNode;
  required?: boolean;
  fieldId?: string;
  id?: string;
  help?: React.ReactNode;
} & CommonProps &
  MarginClassProps;

/**
 * フォームの入力欄1つずつを表現するコンポーネントです。
 *
 * * `FormControlGroup` 内に複数個配置することで、水平方向にフィールドの並んだフォームを作ることができます。
 * * `help` propによって入力方法の案内などをヘルプアイコンとして表示することができます
 *   * 案内の内容が複雑であったり、理解・記憶・学習が難しいものについてはヘルプアイコンにせず、常時表示しておくことを検討してください
 *
 * ## accessibility
 * * 中に入るフィールド (`TextField` 等) が1つの場合は、フィールドの `id` 属性を必ず設定し、 `FormControl` の `fieldId` propを必ず同じにしてください。
 *   * [フォーム・コントロールのラベル付け](https://a11y-guidelines.freee.co.jp/explanations/form-labeling.html) のために必要です
 *   * `CheckBox` や `RadioButton` コンポーネントは、内部 (`children` propの部分）に `<label>` 要素を持つため、`fieldId` の指定は必要ありません
 * * 複数のラジオボタンやテキストフィールドが入る場合には、`fieldId` を設定しないでください（`<fieldset>`と`<legend>` による表現になります）。
 *   この場合、個別のフィールドには別の方法でラベル付けを行ってください。
 *   * `CheckBox` や `RadioButton` コンポーネントは、内部 (`children` propの部分）に `<label>` 要素を持つため、何もしなくてOKです
 *   * テキストフィールドやセレクトボックス、Vibesのコンポーネントを使わずに作るラジオボタンやチェックボックス は、`<label>` 要素と並べて配置してください。
 *   * どうしても`<label>`要素が使用できない場合は、 `aria-label` 属性や `aria-labelledby` 属性を使用してください。 `TextField` `SelectBox` `TextArea` の各コンポーネントは、 `label` と `labelledby` propが `aria-label` 属性と `aria-labelledby` 属性に対応します
 */
const FormControl: React.FC<Props> = (props: Props) => {
  const {
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    fieldId,
    id,
    label,
    required,
    help,
    children,
    marginSize,
  } = props;
  const labelId = useUniqueId('vb-formControl', id && `${id}__label`);

  const baseClass = 'vb-formControl';

  const labelInner = label ? (
    <FormControlLabel id={labelId} htmlFor={fieldId} required={required}>
      {label}
    </FormControlLabel>
  ) : null;

  return (
    <div
      {...commonProps(
        props,
        baseClass,
        {},
        { marginTop, marginLeft, marginRight, marginBottom, marginSize }
      )}
    >
      <fieldset className="vb-formControl__fieldset" id={id}>
        <legend className="vb-formControl__legend">
          <div className="vb-formControl__labelArea">
            {labelInner}
            {help ? (
              <MessageIcon label="ヘルプ" ml={0.25} small>
                {help}
              </MessageIcon>
            ) : null}
          </div>
        </legend>
        <div className="vb-formControl__formArea">{children}</div>
      </fieldset>
    </div>
  );
};

export default FormControl;

```

### src/lv2/formControl/FormControlGroup.stories.tsx
```
typescript
import * as React from 'react';

import FormControl from './FormControl';
import FormControlGroup from './FormControlGroup';
import TextField from '../../lv1/forms/TextField';
import RadioButton from '../../lv1/forms/RadioButton';
import CheckBox from '../../lv1/forms/CheckBox';
import SelectBox from '../../lv1/forms/SelectBox';
import TextArea from '../../lv1/forms/TextArea';
import { commonKnobs } from '../../../stories';

export default {
  component: FormControlGroup,
};
export const FormControlGroupComponent = () => (
  <FormControlGroup {...commonKnobs()}>
    <FormControl
      label="ラベル"
      fieldId="textField-1"
      required
      help="ヘルプメッセージ"
      marginRight
      marginBottom
    >
      <TextField
        placeholder="テキストフィールド"
        name="text"
        id="textField-1"
      />
    </FormControl>
    <FormControl label="ラベル" fieldId="selectBox-1" marginRight marginBottom>
      <SelectBox
        id="selectBox-1"
        name="selectbox"
        options={[
          { name: '2016', value: '2016' },
          { name: '2017', value: '2017' },
          { name: '2018', value: '2018' },
          { name: '2019', value: '2019' },
          { name: '2020', value: '2020' },
        ]}
        marginRight
      />
    </FormControl>
  </FormControlGroup>
);

export const Examples = () => (
  <>
    <FormControlGroup>
      <FormControl
        label="ラベル"
        fieldId="textField-1"
        required
        help="ヘルプメッセージ"
        marginRight
        marginBottom
      >
        <TextField
          placeholder="テキストフィールド"
          name="text"
          id="textField-1"
        />
      </FormControl>

      <FormControl
        label="ラベル"
        fieldId="textField-2"
        marginRight
        marginBottom
      >
        <TextField
          placeholder="テキストフィールド"
          id="textField-2"
          name="text"
          small
        />
      </FormControl>
      <FormControl label="ラベル" marginRight marginBottom>
        <RadioButton name="radio" value="ラジオボタン" marginRight>
          ラジオボタン
        </RadioButton>
        <RadioButton name="radio" value="checked" checked>
          checked
        </RadioButton>
      </FormControl>

      <FormControl label="ラベル" marginRight marginBottom>
        <CheckBox name="checkbox" value="チェックボックス">
          チェックボックス
        </CheckBox>
      </FormControl>
      <FormControl label="ラベル" required marginRight marginBottom>
        <SelectBox
          name="year"
          options={[
            { name: '2016', value: '2016' },
            { name: '2017', value: '2017' },
            { name: '2018', value: '2018' },
            { name: '2019', value: '2019' },
            { name: '2020', value: '2020' },
          ]}
          marginRight
        />
        <SelectBox
          name="month"
          options={[
            { name: '1', value: '1' },
            { name: '2', value: '2' },
            { name: '3', value: '3' },
          ]}
          marginRight
        />
        <SelectBox
          name="date"
          options={[
            { name: '1', value: '1' },
            { name: '2', value: '2' },
            { name: '3', value: '3' },
          ]}
        />
      </FormControl>
      <FormControl label="ラベル" marginRight marginBottom fieldId="textArea-1">
        <TextArea
          name="textarea"
          placeholder="テキストエリア"
          id="textArea-1"
        />
      </FormControl>
    </FormControlGroup>
    <FormControlGroup>
      <FormControl label="住所">
        <div>
          <TextField
            label="市区町村・町名・番地"
            placeholder="市区町村・町名・番地"
            width="large"
            marginBottom
          />
        </div>
        <div>
          <TextField
            label="建物名・号室"
            placeholder="建物名・号室"
            width="large"
            marginBottom
          />
        </div>
      </FormControl>
    </FormControlGroup>
    <FormControlGroup>
      <FormControl label="長いフォーム">
        <TextField label="長いフォーム" width="full" />
      </FormControl>
    </FormControlGroup>
  </>
);

```

### src/lv2/formControl/FormControlGroup.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  children: React.ReactNode | React.ReactNodeArray;
} & CommonProps;

const FormControlGroup: React.FC<Props> = (props: Props) => {
  const { children } = props;

  return (
    <div
      {...commonProps(props, 'vb-formControlGroup', {
        block: React.Children.count(children) <= 1,
      })}
    >
      {children}
    </div>
  );
};
export default FormControlGroup;

```

### src/lv2/formFields/AmountRangeField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { text, boolean, number } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import AmountRangeField from './AmountRangeField';

export default {
  component: AmountRangeField,
};

const handlers = actions({
  onChange: 'onChange',
  onInput: 'onInput',
  onFocus: 'onFocus',
  onBlur: 'onBlur',
  onKeyDown: 'onKeyDown',
});

export const AmountRangeFieldComponent = () => (
  <AmountRangeField
    minAmount={number('MinAmount', 0, undefined, 'AmountRangeField')}
    minAmountPlaceholder={text('MinAmountPlaceholder', '', 'AmountRangeField')}
    maxAmount={number('MaxAmount', 0, undefined, 'AmountRangeField')}
    maxAmountPlaceholder={text('MaxAmountPlaceholder', '', 'AmountRangeField')}
    required={boolean('Required', false)}
    disabled={boolean('Disabled', false)}
    error={boolean('Error', false)}
    {...handlers}
    {...commonKnobs()}
  />
);

const InteractiveAmountRangeField = () => {
  const [[minAmount, maxAmount], setRange] = React.useState<
    [number | null, number | null]
  >([null, null]);
  return (
    <AmountRangeField
      minAmount={minAmount}
      maxAmount={maxAmount}
      onChange={(range) => setRange(range)}
    />
  );
};

export const InteractiveSample = () => <InteractiveAmountRangeField />;

```

### src/lv2/formFields/AmountRangeField.tsx
```
typescript
import * as React from 'react';

import commonProps, { CommonProps } from '../../utilities/commonProps';
import DigitInput from '../formFields/DigitsInput';

type Props = {
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * 最小値を指定します
   */
  minAmount?: number | null;
  /**
   * 最小値の id を指定します
   */
  minAmountId?: string;
  /**
   * 最小値の name を指定します
   */
  minAmountName?: string;
  /**
   * 最小値の aria-label を指定します
   */
  minAmountLabel?: string;
  /**
   * 最小値の aria-labelledby を指定します
   */
  minAmountLabelledby?: string;
  /**
   * 最小値の input placeholder を指定します
   */
  minAmountPlaceholder?: string;
  /**
   * 最大値を指定します
   */
  maxAmount?: number | null;
  /**
   * 最大値の id を指定します
   */
  maxAmountId?: string;
  /**
   * 最大値の name を指定します
   */
  maxAmountName?: string;
  /**
   * 最大値の aria-label を指定します
   */
  maxAmountLabel?: string;
  /**
   * 最大値の aria-labelledby を指定します
   */
  maxAmountLabelledby?: string;
  /**
   * 最大値の input placeholder を指定します
   */
  maxAmountPlaceholder?: string;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * null を許可するか指定します
   */
  nullable?: boolean;
  onChange?: (range: [number | null, number | null]) => void;
  onFocus?: React.FormEventHandler;
  onBlur?: React.FormEventHandler;
  onInput?: React.FormEventHandler;
  onKeyDown?: React.KeyboardEventHandler;
} & CommonProps;

const AmountRangeField = ({
  required,
  disabled,
  error,
  minAmount: originalMinAmount,
  minAmountId,
  minAmountName,
  minAmountLabel,
  minAmountLabelledby,
  minAmountPlaceholder,
  maxAmount: originalMaxAmount,
  maxAmountId,
  maxAmountName,
  maxAmountLabel,
  maxAmountLabelledby,
  maxAmountPlaceholder,
  small,
  nullable,
  onChange,
  onFocus,
  onBlur,
  onInput,
  onKeyDown,
  ...rest
}: Props) => {
  const [minAmount, setMinAmount] = React.useState<number | null>(
    originalMinAmount || null
  );
  const [maxAmount, setMaxAmount] = React.useState<number | null>(
    originalMaxAmount || null
  );

  React.useEffect(() => {
    setMinAmount(originalMinAmount || null);
  }, [originalMinAmount]);

  React.useEffect(() => {
    setMaxAmount(originalMaxAmount || null);
  }, [originalMaxAmount]);

  const handleBlurMinAmount = React.useCallback(
    (e: React.FormEvent): void => {
      if (onBlur) {
        onBlur(e);
      }

      if (onChange) {
        if (minAmount && maxAmount && minAmount > maxAmount) {
          // 最小値と最大値が逆行する場合は最大値を最小値に合わせる
          onChange([minAmount, minAmount]);
        } else {
          onChange([minAmount, maxAmount]);
        }
      }
    },
    [maxAmount, minAmount, onBlur, onChange]
  );

  const handleBlurMaxAmount = React.useCallback(
    (e: React.FormEvent): void => {
      if (onBlur) {
        onBlur(e);
      }

      if (onChange) {
        if (minAmount && maxAmount && minAmount > maxAmount) {
          // 最小値と最大値が逆行する場合は最小値を最大値に合わせる
          onChange([maxAmount, maxAmount]);
        } else {
          onChange([minAmount, maxAmount]);
        }
      }
    },
    [maxAmount, minAmount, onBlur, onChange]
  );

  return (
    <div {...commonProps(rest, 'vb-amountRangeField')}>
      <DigitInput
        id={minAmountId}
        label={minAmountLabel ?? '最小値'}
        labelledby={minAmountLabelledby}
        name={minAmountName}
        value={minAmount}
        required={required}
        disabled={disabled}
        error={error}
        placeholder={minAmountPlaceholder}
        onChange={setMinAmount}
        onFocus={onFocus}
        onBlur={handleBlurMinAmount}
        onInput={onInput}
        onKeyDown={onKeyDown}
        small={small}
        nullable={nullable}
        width="small"
      />
      <span>&nbsp;〜&nbsp;</span>
      <DigitInput
        id={maxAmountId}
        label={maxAmountLabel ?? '最大値'}
        labelledby={maxAmountLabelledby}
        name={maxAmountName}
        value={maxAmount}
        required={required}
        disabled={disabled}
        error={error}
        placeholder={maxAmountPlaceholder}
        onChange={setMaxAmount}
        onFocus={onFocus}
        onBlur={handleBlurMaxAmount}
        onInput={onInput}
        onKeyDown={onKeyDown}
        small={small}
        nullable={nullable}
        width="small"
      />
    </div>
  );
};

export default AmountRangeField;

```

### src/lv2/formFields/DateDurationField.stories.tsx
```
typescript
import * as React from 'react';

import { actions, action } from '@storybook/addon-actions';
import { text, boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import DateDurationField from './DateDurationField';

export default {
  component: DateDurationField,
};

const handlers = actions({
  onChange: 'onChange',
  onInput: 'onInput',
  onFocus: 'onFocus',
  onBlur: 'onBlur',
  onKeyDown: 'onKeyDown',
});

export const DateDurationFieldComponent = () => (
  <DateDurationField
    startDate={text('StartDate', '', 'DateDurationField')}
    startDatePlaceholder={text('StartDatePlaceholder', '', 'DateDurationField')}
    endDate={text('EndDate', '', 'DateDurationField')}
    endDatePlaceholder={text('EndDatePlaceholder', '', 'DateDurationField')}
    required={boolean('Required', false, 'DateDurationField')}
    disabled={boolean('Disabled', false, 'DateDurationField')}
    error={boolean('Disabled', false, 'DateDurationField')}
    maxDate={text('MaxDate', '2020-12-15', 'DateDurationField')}
    minDate={text('MinDate', '2017-01-15', 'DateDurationField')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'DateDurationField'
    )}
    {...handlers}
    {...commonKnobs()}
  />
);

const InteractiveDateDurationField = () => {
  const [[startDate, endDate], setDuration] = React.useState(['', '']);
  return (
    <DateDurationField
      startDate={startDate}
      endDate={endDate}
      maxDate={text('MaxDate', '2020-12-15')}
      minDate={text('MinDate', '2017-01-15')}
      width={select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'DateDurationField'
      )}
      {...{
        ...handlers,
        onChange: (duration) => {
          setDuration(duration);
          action('onChange')(duration);
        },
      }}
    />
  );
};

export const InteractiveSample = () => <InteractiveDateDurationField />;

```

### src/lv2/formFields/DateDurationField.tsx
```
typescript
import * as React from 'react';
import { parse, isValid, isBefore, isAfter } from 'date-fns';

import { formatDate } from '../../utilities/date';
import DateInput from '../formFields/DateInput';
import styled from 'styled-components';
import { CommonStyle } from '../../internal/CommonStyle';

type Props = {
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * エラー状態にします
   */
  error?: boolean;
  /**
   * 開始日を指定します
   */
  startDate?: Date | string;
  /**
   * 開始日の id を指定します
   */
  startDateId?: string;
  /**
   * 開始日の name を指定します
   */
  startDateName?: string;
  /**
   * 開始日の input aria-label を指定します
   */
  startDateLabel?: string;
  /**
   * 開始日の input aria-labelledby を指定します
   */
  startDateLabelledby?: string;
  /**
   * 開始日の input placeholder を指定します
   */
  startDatePlaceholder?: string;
  /**
   * 終了日を指定します
   */
  endDate?: Date | string;
  /**
   * 終了日の id を指定します
   */
  endDateId?: string;
  /**
   * 終了日の name を指定します
   */
  endDateName?: string;
  /**
   * 終了日の input aria-label を指定します
   */
  endDateLabel?: string;
  /**
   * 終了日の input aria-labelledby を指定します
   */
  endDateLabelledby?: string;
  /**
   * 終了日の input placeholder を指定します
   */
  endDatePlaceholder?: string;
  /**
   * サイズを小さくします
   */
  small?: boolean;
  /**
   * DateInput の幅を指定します（default: `small`）
   * 後方互換のために default を `small` にしていますが、日付が隠れてしまうため、`medium` 以上を指定するようにしてください。
   */
  width?: React.ComponentProps<typeof DateInput>['width'];
  /**
   * 入力できる最小値を指定します
   */
  minDate?: string;
  /**
   * 入力できる最大値を指定します
   */
  maxDate?: string;
  onChange?: (duration: [string, string]) => void;
  onFocus?: React.FormEventHandler;
  onBlur?: React.FormEventHandler;
  onInput?: React.FormEventHandler;
  onKeyDown?: React.KeyboardEventHandler;
};

const ComponentStyle = styled(CommonStyle)({
  alignItems: 'center',
  display: 'inline-flex',
});

const DateDurationField: React.FC<Props> = ({
  required,
  disabled,
  error,
  startDate: originalStartDate,
  startDateId,
  startDateName,
  startDateLabel,
  startDateLabelledby,
  startDatePlaceholder,
  endDate: originalEndDate,
  endDateId,
  endDateName,
  endDateLabel,
  endDateLabelledby,
  endDatePlaceholder,
  small,
  minDate,
  maxDate,
  width = 'small', // 後方互換のために default を small にしています。
  onChange,
  onFocus,
  onBlur,
  onInput,
  onKeyDown,
}: Props) => {
  const [startDate, setStartDate] = React.useState(originalStartDate);
  const [endDate, setEndDate] = React.useState(originalEndDate);

  React.useEffect(() => setStartDate(originalStartDate), [originalStartDate]);
  React.useEffect(() => setEndDate(originalEndDate), [originalEndDate]);

  const handleChangeStartDate = React.useCallback(
    (date: string) => setStartDate(date),
    []
  );

  const handleChangeEndDate = React.useCallback(
    (date: string) => setEndDate(date),
    []
  );

  const handleBlurStartDate = React.useCallback(
    (e) => {
      if (onChange) {
        const parsedStartDate = parse(startDate ?? '');
        const parsedEndDate = parse(endDate ?? '');
        if (
          isValid(parsedStartDate) &&
          isValid(parsedEndDate) &&
          isAfter(parsedStartDate, parsedEndDate)
        ) {
          // 開始日と終了日が逆行する場合は変更した側ではない側のフィールドを空欄にする
          onChange([formatDate(parsedStartDate), '']);
        } else {
          onChange([formatDate(parsedStartDate), formatDate(parsedEndDate)]);
        }
      }

      onBlur && onBlur(e);
    },
    [endDate, onBlur, onChange, startDate]
  );

  const handleBlurEndDate = React.useCallback(
    (e) => {
      if (onChange) {
        const parsedStartDate = parse(startDate ?? '');
        const parsedEndDate = parse(endDate ?? '');
        if (
          isValid(parsedStartDate) &&
          isValid(parsedEndDate) &&
          isBefore(parsedEndDate, parsedStartDate)
        ) {
          // 開始日と終了日が逆行する場合は変更した側ではない側のフィールドを空欄にする
          onChange(['', formatDate(parsedEndDate)]);
        } else {
          onChange([formatDate(parsedStartDate), formatDate(parsedEndDate)]);
        }
      }

      onBlur && onBlur(e);
    },
    [endDate, onBlur, onChange, startDate]
  );

  return (
    <ComponentStyle>
      <DateInput
        id={startDateId}
        label={startDateLabel ?? '開始日'}
        labelledby={startDateLabelledby}
        name={startDateName}
        value={startDate}
        required={required}
        disabled={disabled}
        error={error}
        placeholder={startDatePlaceholder}
        minDate={minDate}
        maxDate={maxDate}
        onChange={handleChangeStartDate}
        onFocus={onFocus}
        onBlur={handleBlurStartDate}
        onInput={onInput}
        onKeyDown={onKeyDown}
        small={small}
        width={width}
      />
      <span>&nbsp;～&nbsp;</span>
      <DateInput
        id={endDateId}
        label={endDateLabel ?? '終了日'}
        labelledby={endDateLabelledby}
        name={endDateName}
        value={endDate}
        required={required}
        disabled={disabled}
        error={error}
        placeholder={endDatePlaceholder}
        minDate={minDate}
        maxDate={maxDate}
        onChange={handleChangeEndDate}
        onFocus={onFocus}
        onBlur={handleBlurEndDate}
        onInput={onInput}
        onKeyDown={onKeyDown}
        small={small}
        width={width}
      />
    </ComponentStyle>
  );
};

export default DateDurationField;

```

### src/lv2/formFields/DateInput.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { text, boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import DateInput from './DateInput';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import { Note, Stack, WithDescriptionContent } from '../../lv1';
import FormControl from '../formControl/FormControl';
import Button from '../../lv1/buttons/Button';

export default {
  component: DateInput,
};

const handlers = actions({
  onChange: 'onChange',
  onInput: 'onInput',
  onFocus: 'onFocus',
  onBlur: 'onBlur',
  onKeyDown: 'onKeyDown',
});

export const DateInputComponent = () => {
  const [val, setVal] = React.useState('');
  return (
    <DateInput
      value={val}
      label={text('label', 'DateInputのサンプル', 'DateInput')}
      placeholder={text('Placeholder', '', 'DateInput')}
      required={boolean('Required', false, 'DateInput')}
      autofocus={boolean('Autofocus', false, 'DateInput')}
      disabled={boolean('Disabled', false, 'DateInput')}
      error={boolean('Error', false, 'DateInput')}
      small={boolean('Small', false, 'DateInput')}
      minDate={text('MinDate', '2020-12-01', 'DateInput')}
      maxDate={text('MaxDate', '2024-05-15', 'DateInput')}
      width={select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'DateInput'
      )}
      {...{ ...handlers, onChange: (v) => setVal(v) }}
      {...commonKnobs()}
    />
  );
};

export const Disabled = () => {
  const [val, setVal] = React.useState('');
  return (
    <DateInput
      disabled
      value={val}
      label={text('label', 'DateInputのサンプル', 'DateInput')}
      placeholder={text('Placeholder', '', 'DateInput')}
      required={boolean('Required', false, 'DateInput')}
      autofocus={boolean('Autofocus', false, 'DateInput')}
      error={boolean('Error', false, 'DateInput')}
      small={boolean('Small', false, 'DateInput')}
      minDate={text('MinDate', '2022-12-04', 'DateInput')}
      maxDate={text('MaxDate', '2023-05-15', 'DateInput')}
      width={select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'DateInput'
      )}
      {...{ ...handlers, onChange: (v) => setVal(v) }}
    />
  );
};

export const Width = () => (
  <Stack alignItems="stretch">
    <Stack direction="horizontal">
      <FormControl label="medium" fieldId="dateinput-sizes-medium">
        <DateInput
          value="2022-12-01"
          width="medium"
          id="dateinput-sizes-medium"
        />
      </FormControl>
      <FormControl label="large" fieldId="dateinput-sizes-large">
        <DateInput
          value="2022-12-01"
          width="large"
          id="dateinput-sizes-large"
        />
      </FormControl>
    </Stack>
    <FormControl label="full" fieldId="dateinput-sizes-full">
      <DateInput value="2022-12-01" width="full" id="dateinput-sizes-full" />
    </FormControl>
    <WithDescriptionContent
      renderContent={() => (
        <Stack direction="horizontal">
          <FormControl label="xSmall" fieldId="dateinput-sizes-xSmall">
            <DateInput
              value="2022-12-01"
              width="xSmall"
              id="dateinput-sizes-xSmall"
            />
          </FormControl>
          <FormControl label="small" fieldId="dateinput-sizes-small">
            <DateInput
              value="2022-12-01"
              width="small"
              id="dateinput-sizes-small"
            />
          </FormControl>
        </Stack>
      )}
      renderDescriptionContent={() => (
        <Note mt={0.5}>
          <code>xSmall</code>, <code>small</code>{' '}
          は日付が隠れてしまうため、使用しないでください
        </Note>
      )}
    />
  </Stack>
);
function InteractiveExample() {
  const [val, setVal] = React.useState('');
  return (
    <DateInput
      value={val}
      label={text('label', 'DateInputのサンプル', 'DateInput')}
      maxDate={text('MaxDate', '2020-12-15', 'DateInput')}
      minDate={text('MinDate', '2017-01-15', 'DateInput')}
      {...{ ...handlers, onChange: (v) => setVal(v) }}
    />
  );
}

export const InsideScroll = () => (
  <div style={{ width: '30rem', height: '30rem', display: 'flex' }}>
    <ScrollableBase scrollableX scrollableY>
      <div style={{ position: 'relative', width: '80rem', height: '80rem' }}>
        <div style={{ position: 'absolute', left: '35rem', top: '10rem' }}>
          <InteractiveExample />
        </div>
      </div>
    </ScrollableBase>
  </div>
);

export const InBigBlock = () => (
  <div style={{ padding: '20rem 80rem' }}>
    <InteractiveExample />
  </div>
);

export const ManualFocus = () => {
  const ref = React.useRef<HTMLInputElement>(null);
  const onClick = () => {
    ref.current?.focus();
  };

  return (
    <div style={{ display: 'flex' }}>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <DateInput value="2023-07-31" ref={ref} marginRight />
    </div>
  );
};

```

### src/lv2/formFields/DateInput.tsx
```
typescript
import * as React from 'react';
import { MdDateRange } from 'react-icons/md';
import TextField from '../../lv1/forms/TextField';
import {
  MarginClassProps,
  pickMarginClassProps,
} from '../../utilities/marginClasses';
import commonProps, {
  CommonProps,
  pickCommonDataProps,
} from '../../utilities/commonProps';
import Datepicker from '../../lv2/calendar/DatePicker';
import { parse, addDays, isValid, format } from 'date-fns';
import { Keys } from '../../utilities/keyboard';
import {
  isValidDateInRange,
  formatDate,
  getValidDateNearestTarget,
  formatDayOfWeek,
} from '../../utilities/date';
import PopupBase from '../../lv1/bases/PopupBase';
import useUniqueId from '../../hooks/useUniqueId';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import ScrollPortal from '../../utilities/ScrollPortal';
import { FocusTrap } from '../../lv1';
import { pickFunctionalMarginProps } from '../../utilities/functionalMarginClasses';

const DATE_FORMAT = /^\d{4}[-/\s]?\d{2}[-/\s]?\d{2}$/;

/** @deprecated
 `xSmall` と `small` を使うと日付が隠れてしまうので原則使わないでください
*/
type DeprecatedWidth = 'xSmall' | 'small';
type FieldWidth = 'medium' | 'large' | 'full' | DeprecatedWidth;

type Props = {
  value?: Date | string;
  id?: string;
  label?: string;
  labelledby?: string;
  placeholder?: string;
  name?: string;
  required?: boolean;
  autofocus?: boolean;
  disabled?: boolean;
  error?: boolean;
  small?: boolean;
  minDate?: string;
  maxDate?: string;
  /**
   * `medium` `large` `full` を使用してください。
   * `xSmall` `small` は日付が隠れてしまうため、使用しないでください
   */
  width?: FieldWidth;
  onChange?: (date: string) => void;
  onFocus?: React.FormEventHandler;
  onBlur?: React.FormEventHandler;
  onInput?: React.FormEventHandler;
  onKeyDown?: React.KeyboardEventHandler;
} & MarginClassProps &
  CommonProps;

const DateInputInner = (
  props: Props,
  ref?: React.Ref<HTMLInputElement> | React.MutableRefObject<HTMLInputElement>
): React.ReactElement => {
  const {
    value,
    minDate,
    maxDate,
    id,
    label,
    labelledby,
    placeholder,
    name,
    required,
    autofocus,
    disabled,
    error,
    small,
    width,
    onChange,
    onFocus,
    onBlur,
    onInput,
    onKeyDown,
  } = props;

  const [showingValue, setShowingValue] = React.useState(
    value && isValidDateInRange(value, minDate, maxDate)
      ? formatDate(value)
      : ''
  );

  const [showPicker, setShowPicker] = React.useState(false);

  const [horizontalPosition, setHorizontalPosition] = React.useState<
    'left' | 'right'
  >('left');

  const wrapperRef = React.useRef<HTMLDivElement>(null);
  const datePickerRef = React.useRef<HTMLDivElement>(null);

  React.useEffect(() => {
    if (!showPicker) {
      return;
    }
    const handleClickOutside = (e: MouseEvent) => {
      // Shadow DOM 内部で発火した場合、e.target は ShadowRoot になるので、composedPath() で最初の要素を取得する
      const target =
        !!window.ShadowRoot &&
        e.target instanceof Element &&
        e.target.shadowRoot instanceof ShadowRoot
          ? e.composedPath()[0]
          : e.target;

      // 外側を押した時、DatePicker を閉じる
      if (
        wrapperRef.current &&
        !wrapperRef.current.contains(target as Node) &&
        datePickerRef.current &&
        !datePickerRef.current.contains(target as Node)
      ) {
        setShowPicker(false);
      }
    };
    window.addEventListener('mousedown', handleClickOutside);
    return () => {
      window.removeEventListener('mousedown', handleClickOutside);
    };
  }, [showPicker]);

  const onFieldFocus: React.FocusEventHandler = (e) => {
    setShowPicker(true);
    onFocus && onFocus(e);
  };

  const onDateChange = (date: string | Date): void => {
    setShowingValue(formatDate(date));
    if (onChange) {
      if (isValidDateInRange(date, minDate, maxDate)) {
        onChange(formatDate(date));
      } else {
        onChange('');
      }
    }
  };

  const onFieldChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {
    setShowingValue(e.target.value);
    if (e.target.value.length === 0) {
      onDateChange('');
    } else if (e.target.value.match(DATE_FORMAT)) {
      onDateChange(e.target.value);
    }
  };

  const onFieldBlur: React.FocusEventHandler = (e) => {
    if (value && isValidDateInRange(value)) {
      setShowingValue(formatDate(value));
    } else {
      setShowingValue('');
    }
    setShowPicker(false);
    onBlur && onBlur(e);
  };

  const moveDays = (days: number) => {
    // ユーザーの現在の入力値または現在日付
    const parsedDate = showingValue ? parse(showingValue) : new Date();
    // parsedDateにdaysを足して、rangeの範囲内であればそこに移動する
    if (isValidDateInRange(addDays(parsedDate, days), minDate, maxDate)) {
      onDateChange(formatDate(addDays(parsedDate, days)));
    } else {
      // 範囲の外になりそうな場合は、範囲内の最も現在日付に近い日付に移動する
      const tempDate = getValidDateNearestTarget(parsedDate, minDate, maxDate);
      tempDate && onDateChange(tempDate);
    }
  };

  const onFieldKeyDown: React.KeyboardEventHandler = (e) => {
    setShowPicker(true);
    switch (e.key) {
      case Keys.UP:
      case 'h':
        moveDays(-1);
        e.preventDefault();
        break;
      case Keys.DOWN:
      case 'l':
        moveDays(1);
        e.preventDefault();
        break;
      case 'k':
        moveDays(-7);
        e.preventDefault();
        break;
      case 'j':
        moveDays(7);
        e.preventDefault();
        break;
    }
    onKeyDown && onKeyDown(e);
  };

  const fieldRef = React.useRef<HTMLInputElement>();
  const createFieldRef = React.useCallback(
    (node: HTMLInputElement) => {
      fieldRef.current = node;
      if (typeof ref === 'function') {
        ref(node);
      } else if (ref) {
        (ref as React.MutableRefObject<HTMLInputElement>).current = node;
      }
    },
    [ref]
  );

  const popupRef = React.useRef<HTMLDivElement>(null);

  const adjustPosition = () => {
    if (!(fieldRef.current && popupRef.current)) {
      return;
    }
    const fieldRect = fieldRef.current.getBoundingClientRect();
    const popupRect = popupRef.current.getBoundingClientRect();

    setHorizontalPosition(
      fieldRect.left + popupRect.width > window.innerWidth ? 'right' : 'left'
    );
  };

  React.useLayoutEffect(() => {
    adjustPosition();
  }, [showPicker]);

  React.useEffect(() => {
    // 非Focus時のみ値の更新をする
    if (!showPicker) {
      if (value && isValidDateInRange(value)) {
        setShowingValue(formatDate(value));
      } else {
        setShowingValue('');
      }
    }
  }, [value, showPicker]);

  const uniqueId = useUniqueId('vb-dateInput');
  const parsedShowingValue =
    showingValue && showingValue.match(DATE_FORMAT) && parse(showingValue);
  return (
    // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions
    <div
      id={uniqueId}
      ref={wrapperRef}
      {...commonProps(pickCommonDataProps(props), 'vb-dateInput')}
      onClick={(e) => {
        !disabled && setShowPicker(true); // テキストフィールドがクリックされたっぽい時に、DatePickerを再度表示する
        e.stopPropagation();
      }}
    >
      <TextField
        id={id} // テキストボックスはpropsで渡されたidをもつ（<label>等のため）
        label={label}
        labelledby={labelledby}
        placeholder={placeholder}
        name={name}
        required={required}
        autofocus={autofocus}
        disabled={disabled}
        error={error}
        small={small}
        width={width}
        value={showingValue}
        onChange={onFieldChange}
        onFocus={onFieldFocus}
        onBlur={onFieldBlur}
        onInput={onInput}
        onKeyDown={onFieldKeyDown}
        role="combobox"
        aria-expanded={showPicker}
        aria-autocomplete="list"
        aria-controls={`${uniqueId}__listbox`}
        aria-haspopup="listbox"
        aria-describedby={`${uniqueId}__description`}
        aria-atomic={true}
        ref={createFieldRef}
        autoComplete="off"
        IconComponent={MdDateRange}
        iconLabel={showPicker ? 'カレンダーを非表示' : 'カレンダーを表示'}
        onIconClick={(e) => {
          e.stopPropagation();
          if (showPicker) {
            setShowPicker(false);
          } else {
            setShowPicker(true);
            setTimeout(() => popupRef.current?.focus());
          }
        }}
        iconAriaProps={{
          'aria-haspopup': true,
          'aria-expanded': showPicker,
          'aria-controls': `${uniqueId}__listbox`,
        }}
        {...pickFunctionalMarginProps(props)}
        {...pickMarginClassProps(props)}
      />
      <VisuallyHidden>
        <span id={`${uniqueId}__description`}>
          上下キーで前の日、後の日を選択できます
        </span>
      </VisuallyHidden>
      <ScrollPortal
        positionalBaseElement={fieldRef.current || undefined}
        isActive={showPicker}
        onOverflow={() => {
          setShowPicker(false);
          fieldRef.current?.blur();
        }}
        horizontalPosition={horizontalPosition}
        data-masking={props['data-masking']}
      >
        <FocusTrap
          onFocusOutsideTop={() => true}
          onFocusOutsideBottom={() => true}
          onFocusInsideBottom={() => {
            showPicker && fieldRef.current?.focus();
            return true;
          }}
          onFocusInsideTop={() => {
            showPicker && fieldRef.current?.focus();
            return true;
          }}
        >
          <div // eslint-disable-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions
            // blur抑止のため、やむをえずonMouseDownを書いてる
            className={`vb-dateInput__listbox${
              horizontalPosition === 'right'
                ? ' vb-dateInput__listbox--rightAligned'
                : ''
            }`}
            onMouseDown={(e): void => e.preventDefault()}
            onClick={(e) => e.stopPropagation()}
            tabIndex={-1}
            aria-hidden={!showPicker}
            id={`${uniqueId}__listbox`}
            role="region"
            aria-label="カレンダーで日付を選択"
            aria-describedby={`${uniqueId}__popupDescription`}
            ref={popupRef}
            onKeyDown={(e) => {
              switch (e.key) {
                case Keys.ESC:
                case Keys.ENTER:
                  fieldRef.current?.focus();
                  setTimeout(() => {
                    setShowPicker(false);
                  });
                  break;
                case Keys.DOWN:
                case 'j':
                  moveDays(7);
                  e.preventDefault();
                  break;
                case Keys.UP:
                case 'k':
                  moveDays(-7);
                  e.preventDefault();
                  break;
                case Keys.RIGHT:
                case 'l':
                  moveDays(1);
                  e.preventDefault();
                  break;
                case Keys.LEFT:
                case 'h':
                  moveDays(-1);
                  e.preventDefault();
                  break;
              }
            }}
          >
            {showPicker && (
              <PopupBase paddingSize="zero">
                <VisuallyHidden id={`${uniqueId}__popupDescription`}>
                  上下左右キーでカレンダー内の日付を選択できます。左右キーで1日単位で移動、上下キーで7日単位で移動します。
                </VisuallyHidden>
                <VisuallyHidden autoRead>
                  {parsedShowingValue
                    ? isValid(parsedShowingValue)
                      ? `${format(
                          parsedShowingValue,
                          'YYYY年M月D日'
                        )} ${formatDayOfWeek(
                          parsedShowingValue
                        )} が入力されています`
                      : ''
                    : '日付が選択されていません'}
                </VisuallyHidden>
                {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
                <div
                  onKeyDown={(e) => {
                    // 前の月/次の月ボタンの押下時にポップアップが閉じないよう、ここでガードする
                    if (e.key === Keys.ENTER) {
                      e.stopPropagation();
                    }
                  }}
                >
                  <Datepicker
                    date={value}
                    minDate={minDate}
                    maxDate={maxDate}
                    ref={datePickerRef}
                    onDateClick={(d): void => {
                      fieldRef.current?.focus();
                      onDateChange(d);
                      setTimeout(() => {
                        setShowPicker(false);
                      });
                    }}
                  />
                </div>
              </PopupBase>
            )}
          </div>
        </FocusTrap>
      </ScrollPortal>
    </div>
  );
};

/**
 * テキストフィールドになっている日付入力フィールドです。フォーカスまたはアイコンのクリックによりカレンダーを表示し、ユーザーはカレンダーから日付を選んだり、テキストとして編集したりすることができます。
 *
 * - `DateInput`は「現在の日付から前後1年以内」などの近い日付を入力することが多い場合に使用してください
 *   - 生年月日など、年単位で離れた日付を入力する場合には、`DateField` を使用してください。
 *     `DateField` はセレクトボックスで年を選べるため、年単位で離れた年月日を入力するのに最適です。
 */
const DateInput = React.forwardRef(DateInputInner);
export default DateInput;

```

### src/lv2/formFields/DecimalInput.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { CheckBox, ReadOnlyField } from '../..';
import DecimalInput from './DecimalInput';

export default {
  component: DecimalInput,
};

const handlers = actions({
  onBlur: 'onBlur',
  onChange: 'onChange',
  onFocus: 'onFocus',
  onInput: 'onInput',
  onKeyDown: 'onKeyDown',
});

export const DecimalInputComponent = () => (
  <DecimalInput
    value={number('Value', 0, undefined, 'DecimalInput')}
    places={number('Places', 2, undefined, 'DecimalInput')}
    nullable={boolean('Nullable', false, 'DecimalInput')}
    hideSpinner={boolean('hideSpinner', false, 'DecimalInput')}
    alignRight={boolean('AlignRight', false, 'DecimalInput')}
    placeholder={text('Placeholder', '', 'DecimalInput')}
    required={boolean('Required', false, 'DecimalInput')}
    disabled={boolean('Disabled', false, 'DecimalInput')}
    error={boolean('Error', false, 'DecimalInput')}
    small={boolean('Small', false, 'DecimalInput')}
    large={boolean('Large', false, 'DecimalInput')}
    width={
      select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
          undefined: '',
        },
        '',
        'DecimalInput'
      ) || undefined
    }
    suffix={text('Suffix', '', 'DecimalInput')}
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <DecimalInput mr={1} />
    <DecimalInput mr={1} disabled />
    <DecimalInput mr={1} error />
  </>
);

export const Small = () => (
  <>
    <DecimalInput mr={1} small />
    <DecimalInput mr={1} small disabled />
    <DecimalInput mr={1} small error />
  </>
);

export const Large = () => (
  <>
    <DecimalInput mr={1} large />
    <DecimalInput mr={1} large disabled />
    <DecimalInput mr={1} large error />
  </>
);

export const InteractiveSample = () => {
  const [value, setValue] = React.useState<number | null>(0);
  const [isNullable, setIsNullable] = React.useState<boolean>(false);

  return (
    <>
      <DecimalInput
        mr={1.5}
        nullable={isNullable}
        onChange={(value) => {
          setValue(value);
        }}
        value={value}
      />
      <CheckBox
        checked={isNullable}
        mr={1.5}
        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
          setIsNullable(e.target.checked)
        }
      >
        nullable
      </CheckBox>
      <ReadOnlyField
        value={`current value: ${value === null ? 'null' : value}`}
      />
    </>
  );
};

```

### src/lv2/formFields/DecimalInput.tsx
```
typescript
import * as React from 'react';
import TextField from '../../lv1/forms/TextField';
import { Ascii, Digits } from '../../utilities';
import { CommonProps } from '../../utilities/commonProps';

type Props = Pick<
  React.ComponentProps<typeof TextField>,
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'autofocus'
  | 'disabled'
  | 'error'
  | 'small'
  | 'large'
  | 'alignCenter'
  | 'alignRight'
  | 'width'
  | 'suffix'
  | 'onInput'
  | 'onFocus'
  | 'onBlur'
  | 'onKeyDown'
  | 'onKeyUp'
  | 'min'
  | 'max'
  | 'hideSpinner'
  | keyof CommonProps
> & {
  /**
   * 空値の入力を許可します
   * @default false
   */
  nullable?: boolean;
  onChange?: (value: number | null) => void;
  /**
   * spinnerの増減値
   * @default 1 / Math.pow(10, places)
   */
  step?: number;
  /**
   * 小数点以下の表示桁数を指定します
   * @default 2
   */
  places?: number;
  value?: number | null;
};

const useHandleValue = ({
  nullable,
  onBlur,
  onChange,
  onFocus,
  places,
  value,
}: Pick<
  Props,
  'nullable' | 'onBlur' | 'onChange' | 'onFocus' | 'places' | 'value'
>) => {
  // 数値から小数点を含めた文字列に変換する、その際小数点以下の桁数を指定された桁数で丸める
  const numberToString = React.useCallback(
    (value?: number | null) => {
      return nullable && value == null ? '' : (value ?? 0).toFixed(places);
    },
    [nullable, places]
  );
  // 小数点が含まれた文字列を数値に変換する、その際小数点以下の桁数を指定された桁数で丸める
  const stringToNumber = (value: string) => {
    return nullable && !value
      ? null
      : Number(Digits.numberize(Ascii.zenkakuToHankaku(value)).toFixed(places));
  };

  const [isFocused, setFocused] = React.useState(false);
  const [showingValue, setShowingValue] = React.useState(numberToString(value));

  React.useEffect(() => {
    // 非フォーカス時のみ value の値が変わった場合に表示値を更新する
    !isFocused && setShowingValue(numberToString(value));
  }, [isFocused, numberToString, setShowingValue, value]);

  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {
    setFocused(false);
    const value = e.target.value;
    setShowingValue(String(stringToNumber(value) ?? ''));
    onBlur && onBlur(e);
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value;
    setShowingValue(value);
    onChange && onChange(stringToNumber(value));
  };

  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {
    setFocused(true);
    onFocus && onFocus(e);
  };

  return {
    handleBlur,
    handleChange,
    handleFocus,
    showingValue,
  };
};

/**
 * 入力値が1〜2桁のことが大半の場合や、小数点を含む可能性が高い数値入力用のコンポーネントです。
 *
 * - 仕様の多くは `TextField` と共通しています。
 * - `<input type="number">` としてレンダリングされ、 `max` `min` `step` が使用できます。
 *   - ブラウザによってスピナーが表示され、`step` で指定した数値を加算・減産できるようになります。
 * - 金額や、小数点以下の無い大きな数値を扱う場合は DigitsInput を使用してください。
 *   - どちらを使うかは、「整数部分の桁数が3〜4桁以上になる頻度」「`step` 単位で加算・除算して調整する頻度」「小数点が含まれる頻度」などから判断してください
 * - places オプションで小数点以下の表示桁数を指定します。それ以上の精度の小数点以下の数値はフォーカスが離れたときに指定の精度まで `toFixed()` で丸められます。
 */
const DecimalInput: React.FC<Props> = (props: Props) => {
  const {
    nullable,
    onBlur,
    onChange,
    onFocus,
    places = 2,
    step = 1 / Math.pow(10, places),
    value,
    ...others
  } = props;

  const { handleBlur, handleChange, handleFocus, showingValue } =
    useHandleValue({
      nullable,
      onBlur,
      onChange,
      onFocus,
      places,
      value,
    });

  return (
    <TextField
      {...others}
      autoComplete="off"
      onBlur={handleBlur}
      onChange={handleChange}
      onFocus={handleFocus}
      step={step}
      type="number"
      value={showingValue}
    />
  );
};

export default DecimalInput;

```

### src/lv2/formFields/DigitsInput.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import DigitsInput from './DigitsInput';
import Button from '../../lv1/buttons/Button';
import { Text } from '../../lv1';
import DecimalInput from './DecimalInput';
import FormControlGroup from '../formControl/FormControlGroup';
import FormControl from '../formControl/FormControl';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
});

export default {
  component: DigitsInput,
};

export const DigitsInputComponent = () => (
  <DigitsInput
    value={number('Value', 1000000, undefined, 'DigitsInput')}
    nullable={boolean('Nullable', true, 'DigitsInput')}
    placeholder={text('Placeholder', '', 'DigitsInput')}
    required={boolean('Required', false, 'DigitsInput')}
    disabled={boolean('Disabled', false, 'DigitsInput')}
    error={boolean('Error', false, 'DigitsInput')}
    small={boolean('Small', false, 'DigitsInput')}
    borderless={boolean('Borderless', false, 'DigitsInput')}
    width={
      select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
          undefined: '',
        },
        '',
        'DigitsInput'
      ) || undefined
    }
    suffix={text('Suffix', '', 'DigitsInput')}
    decimalLimit={number('decimalLimit', 3, undefined, 'DigitsInput')}
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <DigitsInput mr={1} />
    <DigitsInput mr={1} disabled />
    <DigitsInput mr={1} error />
  </>
);

export const Small = () => (
  <>
    <DigitsInput mr={1} small />
    <DigitsInput mr={1} small disabled />
    <DigitsInput mr={1} small error />
  </>
);

export const InteractiveSample = () => {
  const [value, setValue] = React.useState<number>(0);
  return <DigitsInput value={value} onChange={(v) => setValue(v ?? 0)} />;
};

export const InteractiveSampleWithNullable = () => {
  const [value, setValue] = React.useState<number | null>(0);
  return <DigitsInput nullable value={value} onChange={(v) => setValue(v)} />;
};

export const InteractiveSampleWithDecimal = () => {
  const [value, setValue] = React.useState<number | null>(0);
  const [decimalLimit, setDecimalLimit] = React.useState<number | undefined>(3);

  return (
    <>
      <FormControlGroup>
        <FormControl label="decimalLimit">
          <DecimalInput
            value={decimalLimit}
            onChange={(v) => setDecimalLimit(v ?? undefined)}
            places={0}
          />
        </FormControl>
      </FormControlGroup>
      <FormControlGroup mt={1}>
        <FormControl label="DigitsInput">
          <DigitsInput
            decimalLimit={decimalLimit}
            value={value}
            onChange={(v) => setValue(v)}
          />
          <Text ml={1}>value: {value}</Text>
        </FormControl>
      </FormControlGroup>
    </>
  );
};

export const ManualFocus = () => {
  const ref = React.useRef<HTMLInputElement>(null);
  const onClick = () => {
    ref.current?.focus();
  };
  const [value, setValue] = React.useState<number | null>(0);

  return (
    <>
      <Button mr={1} onClick={onClick}>
        フォーカスを当てる
      </Button>
      <DigitsInput
        ref={ref}
        nullable
        value={value}
        onChange={(v) => setValue(v)}
      />
    </>
  );
};

```

### src/lv2/formFields/DigitsInput.tsx
```
typescript
import * as React from 'react';
import TextField from '../../lv1/forms/TextField';
import { MarginClassProps } from '../../utilities/marginClasses';
import { CommonProps, pickCommonProps } from '../../utilities/commonProps';

import { Ascii, Digits } from '../../utilities';
import {
  TextBoxAriaProps,
  filterTextBoxAriaProps,
} from '../../utilities/AriaProps';

type PropsFromTextField = Pick<
  Parameters<typeof TextField>[0],
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'disabled'
  | 'error'
  | 'small'
  | 'width'
  | 'suffix'
  | 'onFocus'
  | 'onBlur'
  | 'onInput'
  | 'onKeyDown'
  | 'borderless'
>;

type Props = {
  value?: number | null;
  nullable?: boolean;
  onChange?: (value: number | null) => void;
  /**
   * 小数点の桁数上限
   */
  decimalLimit?: number;
} & PropsFromTextField &
  TextBoxAriaProps &
  MarginClassProps &
  CommonProps;

const useHandlers = ({
  value,
  setShowingValue,
  onFocus,
  onBlur,
  onChange,
  nullable,
  decimalLimit,
}: {
  value: number | null | undefined;
  setShowingValue: React.Dispatch<React.SetStateAction<string>>;
  onFocus: React.FormEventHandler | undefined;
  onBlur?: React.FormEventHandler | undefined;
  onChange: ((value: number | null) => void) | undefined;
  nullable: boolean | undefined;
} & Pick<Props, 'decimalLimit'>): {
  onFieldFocus: React.FormEventHandler;
  onFieldBlur: React.FormEventHandler;
  onFieldChange: React.FormEventHandler;
} => {
  const [isFocused, setFocused] = React.useState(false);

  const onFieldFocus = React.useCallback(
    (e) => {
      setFocused(true);

      // フォーカス時、valueがnullまたはnullableではない状態で0なら空欄化
      if (!value && (!nullable || value !== 0)) {
        setShowingValue('');
      }
      if (onFocus) {
        onFocus(e);
      }
    },
    [value, setShowingValue, setFocused, nullable, onFocus]
  );

  const onFieldBlur = React.useCallback(
    (e) => {
      setFocused(false);
      if (value) {
        setShowingValue(Digits.formalize(value));
      } else if (nullable && value !== 0) {
        setShowingValue('');
      } else {
        setShowingValue('0');
      }
      if (onBlur) {
        onBlur(e);
      }
    },
    [value, nullable, onBlur, setShowingValue]
  );

  // decimalLimit が指定されていた場合その桁数以上の小数点を削除する
  const sliceDecimal = React.useCallback(
    (numValue: number) => {
      if (numValue == null || decimalLimit == null) {
        return numValue;
      }

      const [int, decimal] = `${numValue}`.split('.');

      return Number(
        [int, (decimal || '').slice(0, Math.max(decimalLimit, 0)) || undefined]
          .filter((v) => v != null)
          .join('.')
      );
    },
    [decimalLimit]
  );

  const onFieldChange = React.useCallback(
    (e) => {
      const origValue = e.target.value
        .replace('/', '000')
        .replace(/,,$/, ',000');
      setShowingValue(origValue);

      if (onChange) {
        const numValue =
          nullable && !origValue
            ? null
            : sliceDecimal(Digits.numberize(Ascii.zenkakuToHankaku(origValue)));

        onChange(numValue);
      }
    },
    [nullable, onChange, setShowingValue, sliceDecimal]
  );
  React.useEffect(() => {
    // 非Focus時のみ値の更新をする
    if (!isFocused) {
      if (value) {
        setShowingValue(Digits.formalize(value));
      } else if (nullable && value !== 0) {
        setShowingValue('');
      } else {
        setShowingValue('0');
      }
    }
  }, [value, nullable, setShowingValue, isFocused]);
  return { onFieldFocus, onFieldBlur, onFieldChange };
};

const DigitsInputInner = function (
  props: Props,
  ref?: React.Ref<HTMLInputElement> | React.MutableRefObject<HTMLInputElement>
) {
  const {
    id,
    label,
    labelledby,
    placeholder,
    name,
    required,
    disabled,
    error,
    small,
    width,
    suffix,
    onChange,
    onFocus,
    onBlur,
    onInput,
    onKeyDown,
    value,
    nullable,
    borderless,
    decimalLimit,
  } = props;
  const { marginTop, marginBottom, marginLeft, marginRight, marginSize } =
    props;
  const [showingValue, setShowingValue] = React.useState(
    value || nullable ? '' : '0'
  );

  const { onFieldFocus, onFieldBlur, onFieldChange } = useHandlers({
    value,
    setShowingValue,
    onFocus,
    onBlur,
    onChange,
    nullable,
    decimalLimit,
  });

  return (
    <TextField
      ref={ref}
      alignRight
      id={id}
      label={label}
      labelledby={labelledby}
      placeholder={placeholder}
      name={name}
      required={required}
      disabled={disabled}
      error={error}
      small={small}
      width={width}
      autoComplete="off"
      suffix={suffix}
      value={showingValue}
      borderless={borderless}
      onChange={onFieldChange}
      onFocus={onFieldFocus}
      onBlur={onFieldBlur}
      onInput={onInput}
      onKeyDown={onKeyDown}
      {...{ marginTop, marginBottom, marginLeft, marginRight, marginSize }}
      {...pickCommonProps(props)}
      {...filterTextBoxAriaProps(props)}
    />
  );
};

/**
 * 入力された数値を3桁ごとに区切って表示する機能をもつテキストフィールドです。
 * 金額や、大きな数値を扱う場合（目安としては 1,000 以上になるのが通常の場合）に使用してください。
 *
 * - 仕様の多くは `TextField` と共通しています
 * - ユーザーの入力値は、表示上はフィールドからフォーカスを外した時点で数値以外の文字は除去され3桁ごとにカンマが挿入されます
 *   - ユーザーの入力を妨げないよう、入力中（フォーカス中）は表示される値を変化させないようになっています
 *   - `onChange` の発火は、ユーザーのキー入力ごとに行われます
 * - 入力値が1〜2桁のことが大半の場合や、小数点を含む可能性が高い場合には、このコンポーネントではなく、 `DecimalInput` を使用することも検討してください
 *   - `DecimalInput` は、 `<input type="number">` としてレンダリングされ、 `max` `min` `step` が使用できるようになります
 *     （`DigitsInput` はカンマを挿入する関係で  `<input type="text">` としています）
 *     - このとき、ブラウザによってスピナーが表示され、`step` で指定した数値を加算・除算できるようになります
 *   - どちらを使うかは、「整数部分の桁数が3〜4桁以上になる頻度」「`step` 単位で加算・除算して調整する頻度」「小数点が含まれる頻度」などから判断してください
 * - デフォルトの挙動では、空欄にしてフォーカスを外すと入力値は `0` となります。 `nullable={true}` にすることで、空欄にすることができるようになります
 * - ユーザーの入力値は `number | null` として `onChange` で取得できます
 *   - 全角文字を半角文字に変換し、不要な文字を消した上で数値として評価します
 *   - 正の数や整数に限定したり、最大・最小値を指定するような処理はDigitsInputでは行っていません。入力値をそれらに限定したい場合は、使用する側でエラーメッセージを出すなどのハンドリングをしてください
 * - `,`を連続で入力するか`/`を入力すると、`000` が挿入されます
 */
const DigitsInput = React.forwardRef(DigitsInputInner);
export default DigitsInput;

```

### src/lv2/formFields/FormattedTextField.stories.tsx
```
typescript
import React, { useState } from 'react';

import { commonKnobs } from '../../../stories';
import { ReadOnlyField, SelectBox } from '../../lv1';
import { FormControl, FormControlGroup, FormattedTextField } from '../../lv2';
import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';

export default {
  component: FormattedTextField,
};

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export const FormattedTextFieldComponent = () => {
  return (
    <FormattedTextField
      value={text('Value', '', 'FormattedTextField')}
      placeholder={text('Placeholder', '', 'FormattedTextField')}
      required={boolean('Required', false, 'FormattedTextField')}
      disabled={boolean('Disabled', false, 'FormattedTextField')}
      error={boolean('Error', false, 'FormattedTextField')}
      small={boolean('Small', false, 'FormattedTextField')}
      borderless={boolean('Borderless', false, 'FormattedTextField')}
      width={
        select(
          'Width',
          {
            XSmall: 'xSmall',
            Small: 'small',
            Medium: 'medium',
            Large: 'large',
            Full: 'full',
            undefined: '',
          },
          '',
          'FormattedTextField'
        ) || undefined
      }
      preset={select(
        'Preset',
        {
          PostalCode: 'postalCode',
          CorporateNumber: 'corporateNumber',
          InvoiceRegistrationCompanyNumber: 'invoiceRegistrationCompanyNumber',
        },
        'postalCode',
        'FormattedTextField'
      )}
      {...handlers}
      {...commonKnobs()}
    />
  );
};

export const WithPreset = () => {
  type Preset = 'postalCode' | 'corporateNumber';
  const [preset, setPreset] = useState<Preset>('postalCode');
  const [preprocessedValue, setPreprocessedValue] = useState<string>('');
  const [formattedValue, setFormattedValue] = useState<string>('');

  return (
    <FormControlGroup>
      <FormControl label="preset" mr={1}>
        <SelectBox
          options={[
            'postalCode',
            'corporateNumber',
            'invoiceRegistrationCompanyNumber',
          ].map((name) => ({ name }))}
          onChange={(e) => setPreset(e.target.value as Preset)}
        />
      </FormControl>
      <FormControl label="FormattedTextField" mr={1}>
        <FormattedTextField
          preset={preset}
          onChangePreprocessedValue={setPreprocessedValue}
          onChangeFormattedValue={setFormattedValue}
        />
      </FormControl>
      <FormControl label="onChangePreprocessedValue" mr={1}>
        <ReadOnlyField value={preprocessedValue} />
      </FormControl>
      <FormControl label="onChangeFormattedValue">
        <ReadOnlyField value={formattedValue} />
      </FormControl>
    </FormControlGroup>
  );
};

```

### src/lv2/formFields/FormattedTextField.tsx
```
typescript
import React, { ReactElement, useCallback, useEffect, useState } from 'react';
import TextField from '../../lv1/forms/TextField';

type Formatter = {
  /**
   * Preprocess returns an essential unformatted values by removing delimiters and pre/suffixes. /
   * 下処理用の関数です。桁区切りや接頭・接尾辞を除去した純粋な値を返します。
   */
  preprocess?: (inputValue: string) => string;
  /**
   * Format returns a formatted values by adding delimiters and pre/suffixes. /
   * 整形用の関数です。桁区切りや接頭・接尾辞を加えた整形済みの値を返します。
   */
  format: (preprocessedValue: string) => string;
};

type Preset =
  | 'postalCode'
  | 'corporateNumber'
  | 'invoiceRegistrationCompanyNumber';

type Props = (
  | {
      /**
       * Specify a preset formatter. /
       * プリセットのフォーマッターを指定します。
       */
      preset: Preset;
      formatter?: undefined;
    }
  | {
      /**
       * Specify a custom formatter. /
       * 任意のフォーマッターを指定します。
       */
      formatter: Formatter;
      preset?: undefined;
    }
) & {
  /**
   * A callback which receives a preprocessed value without formatting, including no delimiters nor pre/suffixes. /
   * 書式反映前の下処理段階の値が渡されるコールバックです。桁区切り文字や接頭辞・接尾辞などを含まない値を取得できます。
   */
  onChangePreprocessedValue?: (preprocessedValue: string) => any;
  /**
   * A callback which receives a formatted value. /
   * 整形済みの値が渡されるコールバックです。
   */
  onChangeFormattedValue?: (formattedValue: string) => any;
} & Omit<
    React.ComponentPropsWithRef<typeof TextField>,
    'hideSpinner' | 'maxLength' | 'max' | 'min' | 'step' | 'type'
  >;

const presetFormatters: Record<Preset, Formatter> = {
  postalCode: {
    preprocess: (v) => v.normalize('NFKC').replace(/[-\s]/g, ''),
    format: (v) => v.replace(/^(.{3})(.+)/, '$1-$2'),
  },
  corporateNumber: {
    preprocess: (v) => v.normalize('NFKC').replace(/[-\s]/g, ''),
    format: (v) =>
      v.replace(/^(.{1})(.{4})?(.{4})?(.+)/, (_, p1, p2, p3, p4) =>
        [p1, p2, p3, p4].filter((p) => p != null).join(' ')
      ),
  },
  invoiceRegistrationCompanyNumber: {
    preprocess: (v) => v.normalize('NFKC').replace(/^[tT]|[-\s]/g, ''),
    format: (v) => `T${presetFormatters.corporateNumber.format(v)}`,
  },
};

/**
 * 入力された文字を自動的に整形する入力欄です。
 *
 * ## 書式の指定
 *
 *  `preset` で書式を指定できます。
 *
 * | preset | 書式 | 用途 |
 * |:--|:--|:--|
 * | `postalCode` | `###-####` | 郵便番号 |
 * | `corporateNumber` | `# #### #### ####` | 法人番号 |
 * | `invoiceRegistrationCompanyNumber` | `T# #### #### ####` | 適格請求書発行事業者登録番号 |
 *
 *  また `formatter` を指定することで任意の書式に整形することも可能です。
 *
 * ## 値の参照
 *
 * 値を参照する際は `onChangePreprocessedValue` または `onChangeFormattedValue` をご利用ください。
 *
 * `onChange` は処理前の値が参照されるため、表示内容と異なる値が参照されることがあります。
 *
 * なおいずれの値も、桁あふれや不正な文字の除去等は行われません。
 *
 */
export default function FormattedTextField({ ...props }: Props): ReactElement {
  const { onChange, onChangePreprocessedValue, onChangeFormattedValue } = props;
  const [value, setValue] = useState<string>(props.value ?? '');
  const [preprocessedValue, setPreprocessedValue] = useState<string>('');
  const [formattedValue, setFormattedValue] = useState<string>('');

  const onChangeInternal = useCallback(
    (e) => {
      setValue(e.target.value ?? '');
      onChange?.(e);
    },
    [onChange]
  );

  const { format, preprocess } =
    props.formatter ?? presetFormatters[props.preset];

  useEffect(() => {
    setPreprocessedValue(preprocess ? preprocess(value) : value);
  }, [value, preprocess]);

  useEffect(() => {
    setFormattedValue(format(preprocessedValue));
  }, [preprocessedValue, format]);

  useEffect(() => {
    onChangePreprocessedValue?.(preprocessedValue);
  }, [onChangePreprocessedValue, preprocessedValue]);

  useEffect(() => {
    onChangeFormattedValue?.(formattedValue);
  }, [onChangeFormattedValue, formattedValue]);

  return (
    <TextField
      {...{
        ...props,
        onChange: onChangeInternal,
        value: formattedValue,
      }}
    />
  );
}

```

### src/lv2/formFields/NumeralCodeInput.stories.tsx
```
typescript
import * as React from 'react';
import { commonKnobs } from '../../../stories';
import NumeralCodeInput from './NumeralCodeInput';
import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';

export default {
  component: NumeralCodeInput,
};

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export const TextFieldComponent = () => {
  const ref = React.createRef<HTMLInputElement>();
  return (
    <NumeralCodeInput
      type={
        select(
          'Type',
          {
            Text: 'text',
            Tel: 'tel',
            None: '',
          },
          '',
          'TextField'
        ) || undefined
      }
      value={text('Value', '0120', 'NumeralCodeInput')}
      label={text(
        'Label',
        'ここの文字列はaria-labelとして使用されます',
        'NumeralCodeInput'
      )}
      placeholder={text('Placeholder', '', 'NumeralCodeInput')}
      required={boolean('Required', false, 'NumeralCodeInput')}
      disabled={boolean('Disabled', false, 'NumeralCodeInput')}
      error={boolean('Error', false, 'NumeralCodeInput')}
      small={boolean('Small', false, 'NumeralCodeInput')}
      large={boolean('Large', false, 'NumeralCodeInput')}
      width={select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'NumeralCodeInput'
      )}
      autoComplete={select(
        'AutoComplete',
        {
          off: 'off',
          on: 'on',
          name: 'name',
          'honorific-prefix': 'honorific-prefix',
          'given-name': 'given-name',
          'additional-name': 'additional-name',
          'family-name': 'family-name',
          'honorific-suffix': 'honorific-suffix',
          nickname: 'nickname',
          email: 'email',
          username: 'username',
          'new-password': 'new-password',
          'current-password': 'current-password',
          'one-time-code': 'one-time-code',
          'organization-title': 'organization-title',
          organization: 'organization',
          'street-address': 'street-address',
          'address-line1': 'address-line1',
          'address-line2': 'address-line2',
          'address-line3': 'address-line3',
          'address-level4': 'address-level4',
          'address-level3': 'address-level3',
          'address-level2': 'address-level2',
          'address-level1': 'address-level1',
          country: 'country',
          'country-name': 'country-name',
          'postal-code': 'postal-code',
          'cc-name': 'cc-name',
          'cc-given-name': 'cc-given-name',
          'cc-additional-name': 'cc-additional-name',
          'cc-family-name': 'cc-family-name',
          'cc-number': 'cc-number',
          'cc-exp': 'cc-exp',
          'cc-exp-month': 'cc-exp-month',
          'cc-exp-year': 'cc-exp-year',
          'cc-csc': 'cc-csc',
          'cc-type': 'cc-type',
          'transaction-currency': 'transaction-currency',
          'transaction-amount': 'transaction-amount',
          language: 'language',
          bday: 'bday',
          'bday-day': 'bday-day',
          'bday-month': 'bday-month',
          'bday-year': 'bday-year',
          sex: 'sex',
          tel: 'tel',
          'tel-country-code': 'tel-country-code',
          'tel-national': 'tel-national',
          'tel-area-code': 'tel-area-code',
          'tel-local': 'tel-local',
          'tel-extension': 'tel-extension',
          impp: 'impp',
          url: 'url',
          photo: 'photo',
        },
        'off',
        'NumeralCodeInput'
      )}
      ref={ref}
      {...handlers}
      {...commonKnobs()}
    />
  );
};

export const InteractiveSample = () => {
  const ref = React.createRef<HTMLInputElement>();

  const [value, setValue] = React.useState<string>('');
  return (
    <NumeralCodeInput
      value={value}
      onChange={(v) => setValue(v)}
      type={
        select(
          'Type',
          {
            Text: 'text',
            Tel: 'tel',
            None: '',
          },
          '',
          'TextField'
        ) || undefined
      }
      label={text(
        'Label',
        'ここの文字列はaria-labelとして使用されます',
        'NumeralCodeInput'
      )}
      placeholder={text('Placeholder', '', 'NumeralCodeInput')}
      required={boolean('Required', false, 'NumeralCodeInput')}
      disabled={boolean('Disabled', false, 'NumeralCodeInput')}
      error={boolean('Error', false, 'NumeralCodeInput')}
      small={boolean('Small', false, 'NumeralCodeInput')}
      large={boolean('Large', false, 'NumeralCodeInput')}
      width={select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
        },
        'medium',
        'NumeralCodeInput'
      )}
      autoComplete={select(
        'AutoComplete',
        {
          off: 'off',
          on: 'on',
          name: 'name',
          'honorific-prefix': 'honorific-prefix',
          'given-name': 'given-name',
          'additional-name': 'additional-name',
          'family-name': 'family-name',
          'honorific-suffix': 'honorific-suffix',
          nickname: 'nickname',
          email: 'email',
          username: 'username',
          'new-password': 'new-password',
          'current-password': 'current-password',
          'one-time-code': 'one-time-code',
          'organization-title': 'organization-title',
          organization: 'organization',
          'street-address': 'street-address',
          'address-line1': 'address-line1',
          'address-line2': 'address-line2',
          'address-line3': 'address-line3',
          'address-level4': 'address-level4',
          'address-level3': 'address-level3',
          'address-level2': 'address-level2',
          'address-level1': 'address-level1',
          country: 'country',
          'country-name': 'country-name',
          'postal-code': 'postal-code',
          'cc-name': 'cc-name',
          'cc-given-name': 'cc-given-name',
          'cc-additional-name': 'cc-additional-name',
          'cc-family-name': 'cc-family-name',
          'cc-number': 'cc-number',
          'cc-exp': 'cc-exp',
          'cc-exp-month': 'cc-exp-month',
          'cc-exp-year': 'cc-exp-year',
          'cc-csc': 'cc-csc',
          'cc-type': 'cc-type',
          'transaction-currency': 'transaction-currency',
          'transaction-amount': 'transaction-amount',
          language: 'language',
          bday: 'bday',
          'bday-day': 'bday-day',
          'bday-month': 'bday-month',
          'bday-year': 'bday-year',
          sex: 'sex',
          tel: 'tel',
          'tel-country-code': 'tel-country-code',
          'tel-national': 'tel-national',
          'tel-area-code': 'tel-area-code',
          'tel-local': 'tel-local',
          'tel-extension': 'tel-extension',
          impp: 'impp',
          url: 'url',
          photo: 'photo',
        },
        'off',
        'NumeralCodeInput'
      )}
      ref={ref}
      {...commonKnobs()}
    />
  );
};

export const AcceptHyphen = () => {
  const [value, setValue] = React.useState<string>('');
  return (
    <NumeralCodeInput
      value={value}
      onChange={(v) => setValue(v)}
      acceptSymbols={['-', '_']}
    />
  );
};

```

### src/lv2/formFields/NumeralCodeInput.tsx
```
typescript
import * as React from 'react';
import TextField from '../../lv1/forms/TextField';
import { Ascii } from '../../utilities';

type Props = Omit<
  React.ComponentProps<typeof TextField>,
  'onChange' | 'type' | 'min' | 'max' | 'step'
> & {
  /**
   * `input` 要素の `type` 属性に使用します。
   *
   * 電話番号の入力に使用する場合のみ、`tel` を使用してください（IMEをオフにするために `tel` を使用しないでください）
   */
  type?: 'text' | 'tel';
  onChange?: (value: string) => void;
  acceptSymbols?: string[];
};

const NumeralCodeInputInternal: React.ForwardRefRenderFunction<
  HTMLInputElement,
  Props
> = (props: Props, ref?: React.Ref<HTMLInputElement>) => {
  const { acceptSymbols, value } = props;
  const [showingValue, setShowingValue] = React.useState(value || '');
  const [isFocused, setFocused] = React.useState(false);

  React.useEffect(() => {
    if (!isFocused) {
      setShowingValue(value || '');
    }
  }, [isFocused, value]);

  const pattern = new RegExp(
    `[^0-9${acceptSymbols ? acceptSymbols.join('').replace('-', '\\-') : ''}]`,
    'g'
  );

  return (
    <TextField
      {...props}
      value={showingValue}
      onChange={(e) => {
        const currentValue = e.target.value;
        const formatedValue = Ascii.zenkakuToHankaku(currentValue).replace(
          pattern,
          ''
        );
        setShowingValue(currentValue);
        props.onChange && props.onChange(formatedValue);
      }}
      onBlur={(e) => {
        setFocused(false);
        setShowingValue(props.value || '');
        props.onBlur && props.onBlur(e);
      }}
      onFocus={(e) => {
        setFocused(true);
        props.onFocus && props.onFocus(e);
      }}
      ref={ref}
    />
  );
};

/**
 * 電話番号・郵便番号・口座番号のように、数値ではないが数字によって入力する項目に使用できるテキストフィールドです。
 *
 * - 仕様の多くは `TextField` と共通しています
 * - ユーザーの入力値は、表示上はフィールドからフォーカスを外した時点で数字以外の文字は除去されます
 *   - ユーザーの入力を妨げないよう、入力中（フォーカス中）は表示される値を変化させないようになっています
 *   - `onChange` の発火は、ユーザーのキー入力ごとに行われます
 * - 全角文字は半角文字に自動で変換されます
 * - 数字ではなく、数値を扱う場合には `DigitsInput` や `type="number"` にした `TextField` を使用してください
 *   - 入力値として 0 で始まる文字列を期待する場合にはこのコンポーネントを使用してください
 * - `acceptSymbols` に文字の配列を渡すことで、数字以外の文字を許容することができます
 *   -  たとえば `acceptSymbols={['-']}` とすることで、ハイフンの入力を許容することができます
 */
const NumeralCodeInput = React.forwardRef<HTMLInputElement, Props>(
  NumeralCodeInputInternal
);
export default NumeralCodeInput;

```

### src/lv2/formFields/PasswordField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { PasswordField } from './PasswordField';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: PasswordField,
};

export const PasswordFieldComponent = () => (
  <PasswordField
    label={text('Label', 'パスワードフィールドのサンプル', 'PasswordField')}
    required={boolean('Required', false, 'PasswordField')}
    disabled={boolean('Disabled', false, 'PasswordField')}
    error={boolean('Error', false, 'PasswordField')}
    small={boolean('Small', false, 'PasswordField')}
    large={boolean('Large', false, 'PasswordField')}
    width={select(
      'Width',
      {
        XSmall: 'xSmall',
        Small: 'small',
        Medium: 'medium',
        Large: 'large',
        Full: 'full',
      },
      'medium',
      'PasswordField'
    )}
    autoComplete={select(
      'AutoComplete',
      {
        off: 'off',
        'new-password': 'new-password',
        'current-password': 'current-password',
      },
      'off',
      'PasswordField'
    )}
    suffix={text('Suffix', '', 'PasswordField')}
    loading={boolean('Loading', false, 'PasswordField')}
    {...handlers}
    {...commonKnobs()}
  />
);

```

### src/lv2/formFields/PasswordField.tsx
```
typescript
import * as React from 'react';
import { MdVisibility, MdVisibilityOff } from 'react-icons/md';
import { TextField } from '../../lv1';
import { isEdge } from '../../utilities/browsers';

type Props = {
  autoComplete?: 'current-password' | 'new-password' | 'off';
} & Omit<
  React.ComponentPropsWithRef<typeof TextField>,
  | 'type'
  | 'autoComplete'
  | 'IconComponent'
  | 'iconLabel'
  | 'onIconClick'
  | 'onIconFocus'
  | 'onIconBlur'
  | 'min'
  | 'max'
  | 'step'
  | 'maxLength'
>;

/**
 * パスワード表示ボタンのついたパスワード入力フィールドを表示します。
 * It provides password input field with revealing password button.
 *
 * - Microsoft Edgeの場合は、ブラウザがパスワード表示ボタンを提供するため、ただ `type="password"` が指定されただけのフィールドをrenderします
 */
export const PasswordField: React.FC<Props> = ({ ...props }) => {
  const [isPasswordVisible, setPasswordVisible] = React.useState(false);
  const timeoutRef = React.useRef<number | null>(null);

  const setBlurTimeout = () => {
    timeoutRef.current = window.setTimeout(() => {
      setPasswordVisible(false);
    }, 300);
  };
  const clearBlurTimeout = () => {
    if (timeoutRef.current) {
      window.clearTimeout(timeoutRef.current);
      timeoutRef.current = null;
    }
  };
  React.useEffect(() => () => clearBlurTimeout());

  return isEdge() ? (
    // Edgeだと ::ms-reveal でパスワード表示ボタンが出てくるので、ただの type="password" なTextFieldを返す
    <TextField type="password" {...props} />
  ) : (
    <TextField
      type={isPasswordVisible ? 'text' : 'password'}
      IconComponent={isPasswordVisible ? MdVisibilityOff : MdVisibility}
      iconLabel={isPasswordVisible ? 'パスワードを隠す' : 'パスワードを表示'}
      onIconClick={() => setPasswordVisible(!isPasswordVisible)}
      {...{
        ...props,
        onBlur: (e) => {
          setBlurTimeout();
          props.onBlur && props.onBlur(e);
        },
        onFocus: (e) => {
          clearBlurTimeout();
          props.onFocus && props.onFocus(e);
        },
        onIconBlur: setBlurTimeout,
        onIconFocus: clearBlurTimeout,
      }}
    />
  );
};

```

### src/lv2/formFields/TimeInput.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { CheckBox, FormControlLabel, ReadOnlyField } from '../..';
import TimeInput from './TimeInput';

export default {
  component: TimeInput,
};

const handlers = actions({
  onBlur: 'onBlur',
  onChange: 'onChange',
  onFocus: 'onFocus',
  onInput: 'onInput',
  onKeyDown: 'onKeyDown',
});

export const TimeInputComponent = () => (
  <TimeInput
    value={text('Value', '', 'TimeInput')}
    nullable={boolean('Nullable', false, 'TimeInput')}
    maxTime={text('maxTime', '', 'TimeInput')}
    minTime={text('minTime', '', 'TimeInput')}
    placeholder={text('Placeholder', '', 'TimeInput')}
    required={boolean('Required', false, 'TimeInput')}
    disabled={boolean('Disabled', false, 'TimeInput')}
    error={boolean('Error', false, 'TimeInput')}
    small={boolean('Small', false, 'TimeInput')}
    large={boolean('Large', false, 'TimeInput')}
    width={
      select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
          undefined: '',
        },
        '',
        'TimeInput'
      ) || undefined
    }
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <TimeInput mr={1} />
    <TimeInput mr={1} disabled />
    <TimeInput mr={1} error />
  </>
);

export const Small = () => (
  <>
    <TimeInput mr={1} small />
    <TimeInput mr={1} small disabled />
    <TimeInput mr={1} small error />
  </>
);

export const Large = () => (
  <>
    <TimeInput mr={1} large />
    <TimeInput mr={1} large disabled />
    <TimeInput mr={1} large error />
  </>
);

export const InteractiveSample = () => {
  const [value, setValue] = React.useState<string | null>('00:00');
  const [isNullable, setIsNullable] = React.useState<boolean>(false);
  const [maxTime, setMaxTime] = React.useState<string | undefined>(undefined);
  const [minTime, setMinTime] = React.useState<string | undefined>(undefined);

  return (
    <>
      <TimeInput
        maxTime={maxTime}
        minTime={minTime}
        mr={1.5}
        nullable={isNullable}
        onChange={(value: string | null) => {
          setValue(value);
        }}
        value={value}
      />
      <CheckBox
        checked={isNullable}
        mr={1.5}
        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
          setIsNullable(e.target.checked)
        }
      >
        nullable
      </CheckBox>
      <FormControlLabel htmlFor="minTime">minTime</FormControlLabel>
      <TimeInput
        id="minTime"
        mr={1.5}
        nullable
        onChange={(v) => {
          setMinTime(v ?? undefined);
        }}
        value={minTime}
      />
      <FormControlLabel htmlFor="maxTime">maxTime</FormControlLabel>
      <TimeInput
        id="maxTime"
        mr={1.5}
        nullable
        onChange={(v) => {
          setMaxTime(v ?? undefined);
        }}
        value={maxTime}
      />
      <ReadOnlyField
        value={`current value: ${value === null ? 'null' : value}`}
      />
    </>
  );
};

```

### src/lv2/formFields/TimeInput.tsx
```
typescript
import * as React from 'react';
import TextField from '../../lv1/forms/TextField';
import { Ascii, TimeString } from '../../utilities';
import { CommonProps } from '../../utilities/commonProps';

type Props = Pick<
  React.ComponentProps<typeof TextField>,
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'autofocus'
  | 'disabled'
  | 'error'
  | 'small'
  | 'large'
  | 'alignCenter'
  | 'alignRight'
  | 'width'
  | 'onInput'
  | 'onFocus'
  | 'onBlur'
  | 'onKeyDown'
  | 'onKeyUp'
  | keyof CommonProps
> & {
  /**
   * 最小値を指定します
   */
  minTime?: string;
  /**
   * 最大値を指定します
   */
  maxTime?: string;
  /**
   * 空値の入力を許可します
   */
  nullable?: boolean;
  onChange?: (value: string | null) => void;
  value?: string | null;
};

const useHandleValue = ({
  minTime,
  maxTime,
  nullable,
  onBlur,
  onChange,
  onFocus,
  onKeyDown,
  value,
}: Pick<
  Props,
  | 'minTime'
  | 'maxTime'
  | 'nullable'
  | 'onBlur'
  | 'onChange'
  | 'onFocus'
  | 'onKeyDown'
  | 'value'
>) => {
  // hh:mm に変換する
  const convert = React.useCallback(
    (value?: string | null) => {
      return !value && nullable
        ? null
        : TimeString.convert(
            Ascii.zenkakuToHankaku(value ?? ''),
            minTime,
            maxTime
          );
    },
    [nullable, minTime, maxTime]
  );
  const [isFocused, setFocused] = React.useState(false);
  const [showingValue, setShowingValue] = React.useState(convert(value) ?? '');
  const [selectionRange, setSelectionRange] = React.useState<number[] | null>(
    null
  );
  const ref = React.useRef<HTMLInputElement>(null);
  React.useEffect(() => {
    // 非フォーカス時のみ value の値が変わった場合に表示値を更新する
    !isFocused && setShowingValue(convert(value) ?? '');
  }, [convert, isFocused, setShowingValue, value]);
  React.useEffect(() => {
    // 値が変わった場合に選択範囲を再設定する
    if (selectionRange) {
      const [start, end] = selectionRange;
      ref.current?.setSelectionRange(start, end);
    }
  }, [showingValue, selectionRange]);

  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {
    setFocused(false);
    const value = e.target.value;
    setShowingValue(convert(value) ?? '');
    setSelectionRange(null);
    onBlur && onBlur(e);
  };
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value;
    setShowingValue(value);
    onChange && onChange(convert(value));
  };
  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {
    setFocused(true);
    onFocus && onFocus(e);
  };
  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    // 上下矢印キー押下時に時間を増減する
    if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
      e.preventDefault();
      // キャレット位置を取得して、:より前なら時間、後なら分を対象にする
      const position = e.currentTarget.selectionEnd ?? 0;
      const regexp = /[:：]/g;
      const forward =
        regexp.test(e.currentTarget.value) && regexp.lastIndex > position;
      const offset = e.key === 'ArrowUp' ? 1 : -1;

      // 時間 or 分を増減
      let hours = TimeString.getHour(showingValue);
      let minutes = TimeString.getMin(showingValue);
      if (forward) {
        hours += offset;
      } else {
        minutes += offset * 10;
      }
      // 操作の結果 0min 以下だった場合は 00:00 に修正する
      if (hours * 60 + minutes < 0) {
        hours = 0;
        minutes = 0;
      }

      const timeString = TimeString.createTimeString(hours, minutes);
      const newValue = TimeString.convert(timeString, minTime, maxTime);

      // caret の選択範囲を操作中の項目に設定するために range を計算する
      let range: number[];
      if (forward) {
        range = [0, newValue.indexOf(':')];
      } else {
        range = [newValue.indexOf(':') + 1, newValue.length];
      }

      setShowingValue(newValue);
      setSelectionRange(range);

      onChange && onChange(newValue);
    } else {
      setSelectionRange(null);
    }
    onKeyDown && onKeyDown(e);
  };

  return {
    handleBlur,
    handleChange,
    handleFocus,
    handleKeyDown,
    ref,
    showingValue,
  };
};

const TimeInput: React.FC<Props> = (props: Props) => {
  const {
    large,
    minTime,
    maxTime,
    nullable,
    onBlur,
    onChange,
    onFocus,
    onKeyDown,
    value,
    // large の場合は幅が収まらないので一回り大きくする
    width = large ? 'small' : 'xSmall',
    ...others
  } = props;

  const {
    handleBlur,
    handleChange,
    handleFocus,
    handleKeyDown,
    ref,
    showingValue,
  } = useHandleValue({
    minTime,
    maxTime,
    nullable,
    onBlur,
    onChange,
    onFocus,
    onKeyDown,
    value,
  });

  return (
    <TextField
      {...others}
      autoComplete="off"
      large={large}
      onBlur={handleBlur}
      onChange={handleChange}
      onFocus={handleFocus}
      onKeyDown={handleKeyDown}
      ref={ref}
      value={showingValue}
      width={width}
    />
  );
};

export default TimeInput;

```

### src/lv2/formFields/TimeLengthInput.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { CheckBox, ReadOnlyField } from '../..';
import TimeLengthInput from './TimeLengthInput';

export default {
  component: TimeLengthInput,
};

const handlers = actions({
  onBlur: 'onBlur',
  onChange: 'onChange',
  onFocus: 'onFocus',
  onInput: 'onInput',
  onKeyDown: 'onKeyDown',
});

export const TimeLengthInputComponent = () => (
  <TimeLengthInput
    value={number('Value', 0, undefined, 'TimeLengthInput')}
    nullable={boolean('Nullable', false, 'TimeLengthInput')}
    placeholder={text('Placeholder', '', 'TimeLengthInput')}
    required={boolean('Required', false, 'TimeLengthInput')}
    disabled={boolean('Disabled', false, 'TimeLengthInput')}
    error={boolean('Error', false, 'TimeLengthInput')}
    small={boolean('Small', false, 'TimeLengthInput')}
    large={boolean('Large', false, 'TimeLengthInput')}
    width={
      select(
        'Width',
        {
          XSmall: 'xSmall',
          Small: 'small',
          Medium: 'medium',
          Large: 'large',
          Full: 'full',
          undefined: '',
        },
        '',
        'TimeLengthInput'
      ) || undefined
    }
    {...handlers}
    {...commonKnobs()}
  />
);

export const Default = () => (
  <>
    <TimeLengthInput mr={1} />
    <TimeLengthInput mr={1} disabled />
    <TimeLengthInput mr={1} error />
  </>
);

export const Small = () => (
  <>
    <TimeLengthInput mr={1} small />
    <TimeLengthInput mr={1} small disabled />
    <TimeLengthInput mr={1} small error />
  </>
);

export const Large = () => (
  <>
    <TimeLengthInput mr={1} large />
    <TimeLengthInput mr={1} large disabled />
    <TimeLengthInput mr={1} large error />
  </>
);

export const InteractiveSample = () => {
  const [value, setValue] = React.useState<number | null>(0);
  const [isNullable, setIsNullable] = React.useState<boolean>(false);

  return (
    <>
      <TimeLengthInput
        mr={1.5}
        nullable={isNullable}
        onChange={(value: number | null) => {
          setValue(value);
        }}
        value={value}
      />
      <CheckBox
        checked={isNullable}
        mr={1.5}
        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>
          setIsNullable(e.target.checked)
        }
      >
        nullable
      </CheckBox>
      <ReadOnlyField
        value={`current value: ${value === null ? 'null' : value}`}
      />
    </>
  );
};

```

### src/lv2/formFields/TimeLengthInput.tsx
```
typescript
import * as React from 'react';
import TimeInput from './TimeInput';
import { Mins } from '../../utilities';
import { CommonProps } from '../../utilities/commonProps';

type Props = Pick<
  React.ComponentProps<typeof TimeInput>,
  | 'id'
  | 'label'
  | 'labelledby'
  | 'placeholder'
  | 'name'
  | 'required'
  | 'autofocus'
  | 'disabled'
  | 'error'
  | 'small'
  | 'large'
  | 'alignCenter'
  | 'alignRight'
  | 'width'
  | 'onInput'
  | 'onFocus'
  | 'onBlur'
  | 'onKeyDown'
  | 'onKeyUp'
  | 'nullable'
  | keyof CommonProps
> & {
  onChange?: (value: number | null) => void;
  value?: number | null;
};

const useHandleValue = ({
  nullable,
  onBlur,
  onChange,
  onFocus,
  value,
}: Pick<Props, 'nullable' | 'onBlur' | 'onChange' | 'onFocus' | 'value'>) => {
  // mins を hh:mm に変換する
  const numberToString = React.useCallback(
    (value?: number | null) => {
      return value === null && nullable ? null : Mins.minToStr(value ?? 0);
    },
    [nullable]
  );
  // hh:mm を mins に変換する
  const stringToNumber = React.useCallback(
    (value?: string | null) => {
      return value === null && nullable ? null : Mins.strToMin(value ?? '');
    },
    [nullable]
  );
  const [isFocused, setFocused] = React.useState(false);
  const [showingValue, setShowingValue] = React.useState(numberToString(value));
  React.useEffect(() => {
    // 非フォーカス時のみ value の値が変わった場合に表示値を更新する
    !isFocused && setShowingValue(numberToString(value));
  }, [isFocused, numberToString, setShowingValue, value]);

  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {
    setFocused(false);
    onBlur && onBlur(e);
  };
  const handleChange = (value: string | null) => {
    setShowingValue(value);
    onChange && onChange(stringToNumber(value));
  };
  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {
    setFocused(true);
    onFocus && onFocus(e);
  };

  return {
    handleBlur,
    handleChange,
    handleFocus,
    showingValue,
  };
};

const TimeLengthInput: React.FC<Props> = (props: Props) => {
  const { nullable, onBlur, onChange, onFocus, value, ...others } = props;

  const { handleBlur, handleChange, handleFocus, showingValue } =
    useHandleValue({
      nullable,
      onBlur,
      onChange,
      onFocus,
      value,
    });

  return (
    <TimeInput
      {...others}
      nullable={nullable}
      onBlur={handleBlur}
      onChange={handleChange}
      onFocus={handleFocus}
      value={showingValue}
    />
  );
};

export default TimeLengthInput;

```

### src/lv2/globalNavi/GlobalNavi.stories.tsx
```
typescript
import * as React from 'react';
import {
  MdHome,
  MdInbox,
  MdAssessment,
  MdLibraryBooks,
  MdCreditCard,
  MdSettings,
  MdPerson,
  MdEventNote,
  MdReceipt,
  MdDescription,
  MdRouter,
  MdHelp,
} from 'react-icons/md';

import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import GlobalNavi from './GlobalNavi';
import { boolean } from '@storybook/addon-knobs';
import { Button } from '../../lv1';

export default {
  component: GlobalNavi,
};

export const GlobalNaviComponent = () => (
  <GlobalNavi
    disableGutters={boolean('disableGutters', false, 'GlobalNavi')}
    links={[
      {
        title: 'ホーム',
        url: '#',
        IconComponent: MdHome,
        current: true,
        'data-guide': 'home',
        'data-test': 'ホーム',
        'data-tracking': 'home',
      },
      {
        title: '取引',
        url: '#',
        IconComponent: MdInbox,
        'data-guide': 'transaction',
        'data-test': '取引',
        'data-tracking': 'transaction',
      },
      {
        title: 'レポート',
        url: '#',
        IconComponent: MdAssessment,
        'data-guide': 'report',
        'data-test': 'レポート',
        'data-tracking': 'report',
      },
      {
        title: '決算',
        url: '#',
        IconComponent: MdLibraryBooks,
        'data-guide': 'settlement',
        'data-test': '決算',
        'data-tracking': 'settlement',
      },
      {
        title: '口座',
        url: '#',
        IconComponent: MdCreditCard,
        'data-guide': 'account',
        'data-test': '口座',
        'data-tracking': 'account',
      },
      {
        title: '設定',
        url: '#',
        IconComponent: MdSettings,
        'data-guide': 'configuration',
        'data-test': '設定',
        'data-tracking': 'configuration',
      },
      {
        title: 'リンク（with react-router）',
        url: '#',
        IconComponent: MdRouter,
        onSelfWindowNavigation: action('onSelfWindowNavigation'),
      },
    ]}
    hideHelpForm={boolean('hideHelpForm', false, 'GlobalNavi')}
    {...commonKnobs()}
  />
);

export const SampleForHR = () => (
  <GlobalNavi
    label="メニュー"
    links={[
      {
        title: 'ホーム',
        url: '#',
        IconComponent: MdHome,
        current: true,
      },
      {
        title: '従業員',
        url: '#',
        IconComponent: MdPerson,
      },
      {
        title: '勤怠',
        url: '#',
        IconComponent: MdEventNote,
      },
      {
        title: '給与・賞与',
        url: '#',
        IconComponent: MdReceipt,
      },
      {
        title: '書類',
        url: '#',
        IconComponent: MdDescription,
      },
      {
        title: '設定',
        url: '#',
        IconComponent: MdSettings,
      },
    ]}
    searchQueryParams={{
      type: 'category',
      id: '200193760',
      empty_param: '',
    }}
    {...commonKnobs()}
  />
);

export const DisableGutters = () => (
  <GlobalNavi
    disableGutters
    links={[
      {
        title: 'ホーム',
        url: '#',
        IconComponent: MdHome,
        current: true,
      },
    ]}
  />
);

export const WithoutHelpForm = () => (
  <GlobalNavi
    links={[
      {
        title: 'ホーム',
        url: '#',
        IconComponent: MdHome,
        current: true,
      },
    ]}
    hideHelpForm
  />
);

export const WithSectionNode = () => (
  <GlobalNavi
    links={[
      {
        title: 'ホーム',
        url: '#',
        IconComponent: MdHome,
        current: true,
      },
    ]}
    sectionNode={
      <Button IconComponent={MdHelp} appearance="tertiary">
        ヘルプ
      </Button>
    }
  />
);

```

### src/lv2/globalNavi/GlobalNavi.tsx
```
typescript
import * as React from 'react';
import SearchField from '../../lv1/forms/SearchField';
import { MdHome } from 'react-icons/md';
import GlobalNaviButton from '../../lv1/buttons/GlobalNaviButton';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';

export type LinkContent = {
  title: string;
  url: string;
  IconComponent?: React.ElementType;
  current?: boolean;
  'data-guide'?: string;
  'data-test'?: string;
  'data-tracking'?: string;
  'data-masking'?: boolean;
} & SelfWindowNavigationProp;
type Props = {
  /**
   * min-width から Container の左右 margin 分の値を取り除きます。
   */
  disableGutters?: boolean;
  /**
   * nav要素の aria-label を指定します。
   */
  label?: string;
  links?: LinkContent[];
  searchUrl?: string;
  /**
   * 検索フォームを非表示にします。
   */
  hideHelpForm?: boolean;
  /**
   * 検索時に追加でクエリパラメータを付与します。
   */
  searchQueryParams?: { [key: string]: string };
  /**
   * グロナビの右側に表示する要素を指定します。（この値を指定すると強制的に検索フォームは非表示になります。）
   */
  sectionNode?: React.ReactNode;
} & CommonProps;

const baseClass = 'vb-globalNavi';
const listClass = baseClass + 'List';
const defaultLinks: LinkContent[] = [
  {
    title: 'ホーム',
    url: '/',
    IconComponent: MdHome,
    current: true,
  },
];

function createLinks(links?: LinkContent[]): React.ReactNode[] {
  const linkData = links ? links : defaultLinks;
  return linkData.map(
    (linkCont: LinkContent, index: number): React.ReactNode => (
      <li className={listClass + '__item'} key={index}>
        <GlobalNaviButton
          IconComponent={linkCont.IconComponent}
          current={linkCont.current}
          href={linkCont.url}
          onSelfWindowNavigation={linkCont.onSelfWindowNavigation}
          data-guide={linkCont['data-guide']}
          data-test={linkCont['data-test']}
          data-tracking={linkCont['data-tracking']}
          data-masking={linkCont['data-masking']}
        >
          {linkCont.title}
        </GlobalNaviButton>
      </li>
    )
  );
}

const AdditionalQueryParams = ({
  queryParams,
}: {
  queryParams: Props['searchQueryParams'] | undefined;
}) => {
  if (!queryParams) {
    return null;
  }

  return (
    <>
      {Object.keys(queryParams).map((key) =>
        queryParams[key] ? (
          <input key={key} type="hidden" name={key} value={queryParams[key]} />
        ) : null
      )}
    </>
  );
};

export default function GlobalNavi(props: Props) {
  const {
    disableGutters = false,
    label,
    links,
    searchUrl,
    hideHelpForm,
    searchQueryParams,
    sectionNode,
  } = props;
  const actionUrl = searchUrl
    ? searchUrl
    : 'https://support.freee.co.jp/hc/ja/search';
  return (
    <nav
      aria-label={label}
      role="navigation"
      {...commonProps(props, baseClass, { disableGutters })}
    >
      <ul className={baseClass + 'List'}>{createLinks(links)}</ul>

      {sectionNode && <div>{sectionNode}</div>}

      {!sectionNode && !hideHelpForm && (
        <form
          action={actionUrl}
          method="get"
          target="_blank"
          acceptCharset="UTF-8"
          autoComplete="off"
        >
          <input name="utf8" type="hidden" value="✓" />
          <AdditionalQueryParams queryParams={searchQueryParams} />
          <SearchField
            label="ヘルプを検索"
            placeholder="ヘルプを検索"
            name="query"
            small
          />
        </form>
      )}
    </nav>
  );
}

```

### src/lv2/guidanceMessage/GuidanceMessage.stories.tsx
```
typescript
import * as React from 'react';

import GuidanceMessage from './GuidanceMessage';
import ContentsBase from '../../lv1/bases/ContentsBase';
import WithSideContent from '../../lv1/layout/WithSideContent';
import BulletedList from '../bulletedList/BulletedList';
import Button from '../../lv1/buttons/Button';
import { MdLightbulb, MdCardGiftcard } from 'react-icons/md';
import { commonKnobs } from '../../../stories';
import { boolean, text, select } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import InlineLink from '../../lv1/buttons/InlineLink';

export default {
  component: GuidanceMessage,
};

export const GuidanceMessageComponent = () => (
  <ContentsBase>
    <GuidanceMessage
      IconComponent={MdLightbulb}
      verticalAlign={
        select(
          'verticalAlign',
          { top: 'top', middle: 'middle' },
          'middle',
          'GuidanceMessage'
        ) || undefined
      }
      width={
        select(
          'width',
          { 'fit-content': 'fit-content', full: 'full' },
          '',
          'GuidanceMessage'
        ) || undefined
      }
      inline={boolean('Inline', true, 'GuidanceMessage')}
      small={boolean('Small', true, 'GuidanceMessage')}
      renderCloseButton={(CloseButton) => (
        <>{CloseButton && <CloseButton onClick={action('Closed')} />}</>
      )}
      {...commonKnobs()}
    >
      テキストのみ。またはテキストと
      <InlineLink onClick={action('InlineLink: clicked')}>
        InlineLink
      </InlineLink>
      を合わせる形を推奨しています
    </GuidanceMessage>
  </ContentsBase>
);

export const WithoutCloseButton = () => (
  <ContentsBase>
    <GuidanceMessage
      IconComponent={MdLightbulb}
      verticalAlign={
        select(
          'verticalAlign',
          { top: 'top', middle: 'middle' },
          '',
          'GuidanceMessage'
        ) || undefined
      }
      width={
        select(
          'width',
          { 'fit-content': 'fit-content', full: 'full' },
          '',
          'GuidanceMessage'
        ) || undefined
      }
      inline={boolean('Inline', true, 'GuidanceMessage')}
      small={boolean('Small', false, 'GuidanceMessage')}
      url={text('URL', '', 'GuidanceMessage')}
      target={text('Target', '', 'GuidanceMessage')}
      rel={text('Rel', '', 'GuidanceMessage')}
      onClick={action('click')}
      onSelfWindowNavigation={action('selfWindowNavigation')}
      {...commonKnobs()}
    >
      ここは自由領域です。文字だけでも良いですし、ボタンを置いたりもできます。
    </GuidanceMessage>
  </ContentsBase>
);

export const WithButtonExample = () => (
  <ContentsBase>
    <GuidanceMessage
      IconComponent={MdLightbulb}
      verticalAlign={
        select(
          'verticalAlign',
          { top: 'top', middle: 'middle' },
          '',
          'GuidanceMessage'
        ) || undefined
      }
      width={
        select(
          'width',
          { 'fit-content': 'fit-content', full: 'full' },
          '',
          'GuidanceMessage'
        ) || undefined
      }
      {...commonKnobs()}
      renderCloseButton={(CloseButton) => (
        <WithSideContent
          mt={0.5}
          sideContent={
            CloseButton && <CloseButton onClick={action('Closed')} />
          }
        >
          <Button
            onClick={(e) => {
              e.stopPropagation();
            }}
          >
            アクション
          </Button>
        </WithSideContent>
      )}
    >
      <div>
        ここは自由領域です。文字だけでも良いですし、ボタンを置いたりもできます。
      </div>
    </GuidanceMessage>
  </ContentsBase>
);

export const ClickableExample = () => (
  <ContentsBase>
    <GuidanceMessage
      IconComponent={MdCardGiftcard}
      inline
      small={false}
      verticalAlign="middle"
      onClick={action('Clicked')}
      renderCloseButton={(CloseButton) => (
        <>{CloseButton && <CloseButton onClick={action('Closed')} />}</>
      )}
      {...commonKnobs()}
    >
      <span>リリースメッセージ</span>
    </GuidanceMessage>
    inlineのときは横に要素をおけます
  </ContentsBase>
);

export const InteractiveSample = () => {
  const [isClosed, setClosed] = React.useState(false);
  return (
    !isClosed && (
      <ContentsBase>
        <GuidanceMessage
          IconComponent={MdLightbulb}
          verticalAlign={
            select(
              'verticalAlign',
              { top: 'top', middle: 'middle' },
              '',
              'GuidanceMessage'
            ) || undefined
          }
          width={
            select(
              'width',
              { 'fit-content': 'fit-content', full: 'full' },
              '',
              'GuidanceMessage'
            ) || undefined
          }
          inline={boolean('Inline', false, 'GuidanceMessage')}
          small={boolean('Small', false, 'GuidanceMessage')}
          url={text('URL', '', 'GuidanceMessage')}
          target={text('Target', '', 'GuidanceMessage')}
          rel={text('Rel', '', 'GuidanceMessage')}
          onClick={action('click')}
          onSelfWindowNavigation={action('selfWindowNavigation')}
          renderCloseButton={(CloseButton) => (
            <>
              {CloseButton && <CloseButton onClick={() => setClosed(true)} />}
            </>
          )}
          {...commonKnobs()}
        >
          閉じるボタンを押すと、表示が消えるサンプルです。
        </GuidanceMessage>
      </ContentsBase>
    )
  );
};

export const SmallSample = () => {
  const [isClosed, setClosed] = React.useState(false);
  return (
    !isClosed && (
      <ContentsBase>
        <GuidanceMessage
          IconComponent={MdCardGiftcard}
          verticalAlign={
            select(
              'verticalAlign',
              { top: 'top', middle: 'middle' },
              '',
              'GuidanceMessage'
            ) || undefined
          }
          width={
            select(
              'width',
              { 'fit-content': 'fit-content', full: 'full' },
              '',
              'GuidanceMessage'
            ) || undefined
          }
          inline={true}
          small={true}
          url={text('URL', '', 'GuidanceMessage')}
          target={text('Target', '', 'GuidanceMessage')}
          rel={text('Rel', '', 'GuidanceMessage')}
          onClick={action('click')}
          onSelfWindowNavigation={action('selfWindowNavigation')}
          renderCloseButton={(CloseButton) => (
            <>
              {CloseButton && <CloseButton onClick={() => setClosed(true)} />}
            </>
          )}
          {...commonKnobs()}
        >
          inlineが指定されている場合にsmallを有効にできます。
        </GuidanceMessage>
      </ContentsBase>
    )
  );
};

export const MultiLine = () => {
  const [isClosed, setClosed] = React.useState(false);

  return (
    !isClosed && (
      <ContentsBase>
        <GuidanceMessage
          IconComponent={MdCardGiftcard}
          verticalAlign={'middle'}
          width={
            select(
              'width',
              { 'fit-content': 'fit-content', full: 'full' },
              '',
              'GuidanceMessage'
            ) || undefined
          }
          inline={true}
          url={text('URL', '', 'GuidanceMessage')}
          target={text('Target', '', 'GuidanceMessage')}
          rel={text('Rel', '', 'GuidanceMessage')}
          onClick={action('click')}
          onSelfWindowNavigation={action('selfWindowNavigation')}
          renderCloseButton={(CloseButton) => (
            <>
              {CloseButton && <CloseButton onClick={() => setClosed(true)} />}
            </>
          )}
          {...commonKnobs()}
        >
          ○○機能のアップデートがされました
          <BulletedList
            listContents={[
              {
                value:
                  'お知らせしたい内容が複数行に渡る場合はこのように分けて書くことができます。',
              },
              { value: 'こんなことができるようになりました。' },
            ]}
          />
        </GuidanceMessage>
      </ContentsBase>
    )
  );
};

```

### src/lv2/guidanceMessage/GuidanceMessage.tsx
```
typescript
import * as React from 'react';
import commonProps, {
  CommonProps,
  pickCommonProps,
} from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import { MdClose } from 'react-icons/md';
import { useResponsive } from '../../utilities/VibesProvider';

type CloseButtonProps = Pick<
  Parameters<typeof IconOnlyButton>[0],
  'onClick' | 'small'
> &
  CommonProps;

const CloseButton: React.FC<CloseButtonProps> = (props: CloseButtonProps) => {
  const { onClick, small } = props;

  return (
    <IconOnlyButton
      IconComponent={MdClose}
      label="閉じる"
      small={small}
      appearance={'tertiary'}
      onClick={(e) => {
        onClick && onClick(e);
        e.stopPropagation();
      }}
      {...pickCommonProps(props)}
    ></IconOnlyButton>
  );
};

const CloseSmallButton: React.FC<CloseButtonProps> = (
  props: CloseButtonProps
) => {
  const { onClick } = props;

  return <CloseButton onClick={onClick} small />;
};

type Props = {
  /**
   * アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
   */
  IconComponent?: React.ElementType;
  /**
   * アイコンを除くコンテンツが入ります。
   * 内容には文字以外も含められ、配置も自由にできます。
   */
  children: React.ReactNode;
  /**
   * 閉じられる表示の場合に、CloseButtonを含む要素を入れます。
   * 内容に対してinlineに置くことも、改行して置くこともできます。
   */
  renderCloseButton?: (
    CloseButton?: React.FC<CloseButtonProps>
  ) => React.ReactNode;
  /**
   * inline-blockとして配置したい場合に指定します
   * デフォルトはblock要素です。
   */
  inline?: boolean;
  /**
   * 小さいサイズにしたい場合に指定します。
   * ユースケースとしてinlineが指定された場合を想定しているため、inlineを指定しないとsmallを有効にできません。
   * CloseButtonも合わせて小さくなります。
   */
  small?: boolean;
  /**
   * アイコンを含めたコンテンツの縦方向の揃えを指定できます。
   * 指定がない場合は'top'になります。
   */
  verticalAlign?: 'top' | 'middle';
  /**
   * GuidanceMessageの横幅を、中身に応じて可変にするか、親要素の幅まで広げるかを指定できます。
   * 指定がない場合は'fit-content'で、中身に応じて可変になります。
   */
  width?: 'fit-content' | 'full';
  /**
   * 表示全体をクリック可能にし、かつlinkとなる場合はurlで遷移先を指定できます。
   *
   * @deprecated
   * 全体をclickableとさせる使用は廃止となるため、指定しないようにしてください。
   */
  url?: string;
  /**
   * linkになる場合に、targetを指定します。
   *  @deprecated
   * 全体をclickableとさせる使用は廃止となるため、指定しないようにしてください。
   */
  target?: string;
  /**
   * rel を指定します
   *  @deprecated
   * 全体をclickableとさせる使用は廃止となるため、指定しないようにしてください。
   */
  rel?: string;
  /**
   * @deprecated
   * 全体をclickableとさせる使用は廃止となるため、指定しないようにしてください。
   */
  onClick?: React.MouseEventHandler;
} & SelfWindowNavigationProp &
  CommonProps;

/**
 * ## 注意点
 * ＊現状のGuidanceMessageを廃止予定です。clickできる場合とできない場合を見た目から判別することが難しいため、全体クリックの使用は廃止し、inlineでの配置に絞る形で新しく用意する見込みです。
 *
 * block要素として利用したい場合は、MessageBlockのリリース情報(discovery)/アシスタンス（assistance）で対応ください。
 *
 * 暫定対応として、以下のように利用ください。
 * - 全体をclickableとさせないよう、url / onClickは指定しないでください。
 * - inlineかつsmallを指定し、クリックさせたい要素はchildrenに含めてください。（文中にInlineLinkを渡す形を推奨しています）
 * - verticalAlignのdefaultは'top'ですが、inlineかつsmallで改行がない形では'middle'を指定してください。
 *
 */
const GuidanceMessage: React.FC<Props> = (props: Props) => {
  const {
    IconComponent,
    children,
    renderCloseButton,
    inline,
    small,
    verticalAlign = 'top',
    width = 'fit-content',
    url,
    target,
    rel,
    onClick,
    onSelfWindowNavigation,
  } = props;

  const className = 'vb-guidanceMessage';
  const responsive = useResponsive();
  const clickable = !!url || !!onClick;
  const isSmall = inline && small;

  const containerClassName = vbClassNames(`${className}__container`, {
    modifier: {
      responsive,
      small: isSmall,
      alignTop: verticalAlign === 'top',
      alignMiddle: verticalAlign === 'middle',
    },
  });

  const renderButton = (small?: boolean) =>
    renderCloseButton &&
    renderCloseButton(small ? CloseSmallButton : CloseButton);

  const renderIconComponent = (IconComponent?: React.ElementType) =>
    IconComponent && (
      <IconComponent
        className={vbClassNames(`${className}__icon`, {
          modifier: {
            small: isSmall,
          },
        })}
        focusable={false}
      />
    );

  return (
    <div
      {...commonProps(props, className, {
        inline,
        clickable,
        widthFitContent: width === 'fit-content',
        widthFull: width === 'full',
      })}
    >
      {clickable ? (
        url ? (
          <div className={containerClassName}>
            {renderIconComponent(IconComponent)}
            <span
              className={vbClassNames(`${className}__content`, {
                modifier: {
                  alignMiddle: verticalAlign === 'middle',
                },
              })}
            >
              <a
                className={`${className}__link`}
                href={url}
                target={target}
                rel={
                  rel
                    ? rel
                    : target === '_blank'
                    ? 'noopener noreferrer'
                    : undefined
                }
                onClick={(e: React.MouseEvent<HTMLAnchorElement>) => {
                  if (onClick) {
                    onClick(e);
                  }
                  const navigator = selfWindowNavigator(onSelfWindowNavigation);
                  if (navigator) {
                    navigator(e, url);
                  }
                }}
              >
                {children}
              </a>
              {renderButton(isSmall)}
            </span>
          </div>
        ) : (
          <div className={containerClassName}>
            {renderIconComponent(IconComponent)}
            <span
              className={vbClassNames(`${className}__content`, {
                modifier: {
                  alignMiddle: verticalAlign === 'middle',
                },
              })}
            >
              <button className={`${className}__button`} onClick={onClick}>
                {children}
              </button>
              {renderButton(isSmall)}
            </span>
          </div>
        )
      ) : (
        <div className={containerClassName}>
          {renderIconComponent(IconComponent)}
          <span
            className={vbClassNames(`${className}__content`, {
              modifier: {
                alignMiddle: verticalAlign === 'middle',
              },
            })}
          >
            {children}
            {renderButton(isSmall)}
          </span>
        </div>
      )}
    </div>
  );
};

export default GuidanceMessage;

```

### src/lv2/guidedContent/GuidedContent.stories.tsx
```
typescript
import * as React from 'react';

import GuidedContent from './GuidedContent';
import SectionTitle from '../../lv1/typography/SectionTitle';
import Paragraph from '../../lv1/typography/Paragraph';
import ColumnBase from '../../lv1/bases/ColumnBase';
import TextField from '../../lv1/forms/TextField';
import DescriptionListCell from '../../lv1/lists/DescriptionListCell';
import BorderTableListCell from '../../lv1/lists/BorderTableListCell';
import Button from '../../lv1/buttons/Button';
import AccordionPanel from '../../lv2/accordionPanel/AccordionPanel';
import ButtonGroup from '../../lv2/buttonGroup/ButtonGroup';
import { VibesProvider } from '../../utilities';

export default {
  component: GuidedContent,
};

export const GuidedContentComponent = () => (
  <GuidedContent
    title={<SectionTitle>title content</SectionTitle>}
    guide={<SectionTitle>guide content</SectionTitle>}
    content={<SectionTitle>content</SectionTitle>}
  />
);

export const InteractiveSample = () => {
  const [isOpen, setOpen] = React.useState(false);
  return (
    <GuidedContent
      title={
        <>
          <SectionTitle>事業の目的を設定しましょう</SectionTitle>
          <Paragraph>
            事業目的とは、会社を設立するにあたり具体的に会社で何を事業とするのかを目的として設定するものです。事業目的の記載方法のポイントも参考にしましょう。
          </Paragraph>
        </>
      }
      guide={
        <ColumnBase>
          事業目的の設定の仕方
          <AccordionPanel
            title="Q. 許認可を取得するよっていがあるのですが・・・"
            onClick={() => setOpen(!isOpen)}
          ></AccordionPanel>
          <AccordionPanel
            title="Q. 許認可を取得するよっていがあるのですが・・・"
            onClick={() => setOpen(!isOpen)}
          ></AccordionPanel>
          <AccordionPanel
            title="Q. 許認可を取得するよっていがあるのですが・・・"
            onClick={() => setOpen(!isOpen)}
          ></AccordionPanel>
          <AccordionPanel
            title="Q. 許認可を取得するよっていがあるのですが・・・"
            onClick={() => setOpen(!isOpen)}
          ></AccordionPanel>
          <AccordionPanel
            title="Q. 許認可を取得するよっていがあるのですが・・・"
            onClick={() => setOpen(!isOpen)}
          ></AccordionPanel>
        </ColumnBase>
      }
      content={
        <>
          <table>
            <tbody>
              <tr>
                <DescriptionListCell>
                  <span>1.</span>
                  <TextField label="テキストフィールド" ml={0.5}></TextField>
                  <Button appearance="secondary" small ml={0.5}>
                    削除
                  </Button>
                </DescriptionListCell>
              </tr>
              <tr>
                <DescriptionListCell>
                  <span>2.</span>
                  <TextField label="テキストフィールド" ml={0.5}></TextField>
                  <Button appearance="secondary" small ml={0.5}>
                    削除
                  </Button>
                </DescriptionListCell>
              </tr>
              <tr>
                <BorderTableListCell>
                  <span>3.</span>
                  <TextField label="テキストフィールド" ml={0.5}></TextField>
                  <Button appearance="secondary" small ml={0.5}>
                    削除
                  </Button>
                </BorderTableListCell>
              </tr>
            </tbody>
          </table>
          <ButtonGroup align="left" mt={1}>
            <Button primary>保存</Button>
            <Button>キャンセル</Button>
          </ButtonGroup>
        </>
      }
    />
  );
};

export const ResponsiveGuidedContent = () => {
  const [isOpen, setOpen] = React.useState(false);
  return (
    <VibesProvider fixedLayout={false}>
      <GuidedContent
        responsive
        title={
          <>
            <SectionTitle>事業の目的を設定しましょう</SectionTitle>
            <Paragraph>
              事業目的とは、会社を設立するにあたり具体的に会社で何を事業とするのかを目的として設定するものです。事業目的の記載方法のポイントも参考にしましょう。
            </Paragraph>
          </>
        }
        guide={
          <ColumnBase>
            事業目的の設定の仕方
            <AccordionPanel
              title="Q. 許認可を取得するよっていがあるのですが・・・"
              onClick={() => setOpen(!isOpen)}
            ></AccordionPanel>
            <AccordionPanel
              title="Q. 許認可を取得するよっていがあるのですが・・・"
              onClick={() => setOpen(!isOpen)}
            ></AccordionPanel>
            <AccordionPanel
              title="Q. 許認可を取得するよっていがあるのですが・・・"
              onClick={() => setOpen(!isOpen)}
            ></AccordionPanel>
            <AccordionPanel
              title="Q. 許認可を取得するよっていがあるのですが・・・"
              onClick={() => setOpen(!isOpen)}
            ></AccordionPanel>
            <AccordionPanel
              title="Q. 許認可を取得するよっていがあるのですが・・・"
              onClick={() => setOpen(!isOpen)}
            ></AccordionPanel>
          </ColumnBase>
        }
        content={
          <>
            <table>
              <tbody>
                <tr>
                  <DescriptionListCell>
                    <span>1.</span>
                    <TextField label="テキストフィールド" ml={0.5}></TextField>
                    <Button appearance="secondary" small ml={0.5}>
                      削除
                    </Button>
                  </DescriptionListCell>
                </tr>
                <tr>
                  <DescriptionListCell>
                    <span>2.</span>
                    <TextField label="テキストフィールド" ml={0.5}></TextField>
                    <Button appearance="secondary" small ml={0.5}>
                      削除
                    </Button>
                  </DescriptionListCell>
                </tr>
                <tr>
                  <BorderTableListCell>
                    <span>3.</span>
                    <TextField label="テキストフィールド" ml={0.5}></TextField>
                    <Button appearance="secondary" small ml={0.5}>
                      削除
                    </Button>
                  </BorderTableListCell>
                </tr>
              </tbody>
            </table>
            <ButtonGroup align="left" mt={1}>
              <Button primary>保存</Button>
              <Button>キャンセル</Button>
            </ButtonGroup>
          </>
        }
      />
    </VibesProvider>
  );
};

```

### src/lv2/guidedContent/GuidedContent.tsx
```
typescript
import * as React from 'react';
import { useResponsive } from '../../utilities/VibesProvider';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * タイトル部分に表示されるコンテンツです。初めに読み上げられます。
   */
  title: React.ReactNode;
  /**
   * 補助部分に表示されるコンテンツです。title の次に読み上げられます。
   */
  guide: React.ReactNode;
  /**
   * メイン部分に表示されるコンテンツです。最後に読み上げられます。
   */
  content: React.ReactNode;
  /**
   * ブラウザ幅が狭いときに guided content が title content と content の間に縦積みされるようになります。
   */
  responsive?: boolean;
} & CommonProps;

/**
 * メインコンテンツの横に補助コンテンツを表示するためのレイアウト用のコンポーネントです。
 * Interactive Sample のように、メインコンテンツにフォームなどを置き、補助部分にその説明コンテンツなどを置くときなどに使えます。
 *
 * - 読み上げは title, guide, content の順番で行われます。
 */
const GuidedContent: React.FC<Props> = (props: Props) => {
  const { title, guide, content, responsive } = props;
  const baseClass = 'vb-guidedContent';
  const classModifiers = { responsive: useResponsive(responsive) };

  return (
    <div {...commonProps(props, baseClass, classModifiers)}>
      <div className={`${baseClass}__title`}>{title}</div>
      <div className={`${baseClass}__guide`}>{guide}</div>
      <div className={`${baseClass}__content`}>{content}</div>
    </div>
  );
};

export default GuidedContent;

```

### src/lv2/header/Header.stories.tsx
```
typescript
import * as React from 'react';
import { MdDomain, MdPerson, MdExitToApp } from 'react-icons/md';

import { action } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Header from './Header';
import { Button } from '../../lv1';
import ButtonGroup from '../buttonGroup/ButtonGroup';

const sectionDataList = [
  {
    type: 'plan' as const,
    text: 'ビジネスプラン',
    url: '/plan',
  },
  {
    type: 'link' as const,
    IconComponent: MdDomain,
    iconLabel: '事業所',
    text: 'freee株式会社',
    url: '/company',
  },
  {
    type: 'link' as const,
    IconComponent: MdPerson,
    iconLabel: 'アカウント',
    text: 'freee@freee.co.jp',
    url: '/user',
  },
  {
    type: 'button' as const,
    IconComponent: MdExitToApp,
    text: 'ログアウト',
    onClick: action('logout'),
  },
];

export default {
  component: Header,
};

export const HeaderComponent = () => (
  <Header
    disableGutters={boolean('disableGutters', false, 'Header')}
    logo={<p>Logo Component</p>}
    sectionDataList={sectionDataList}
    logoUrl={text('LogoUrl', '#', 'Header')}
    {...commonKnobs()}
  />
);

export const DisableGutters = () => (
  <Header
    disableGutters
    sectionDataList={sectionDataList}
    logoUrl="#"
    logo={<p>Logo Component</p>}
  />
);

export const WithSectionComponent = () => (
  <Header
    logo={<p>Logo Component</p>}
    sectionNode={
      <ButtonGroup>
        <Button
          appearance="tertiary"
          onClick={() => {
            // eslint-disable-next-line no-console
            console.log('ログイン');
          }}
        >
          ログイン
        </Button>
        <Button
          primary
          onClick={() => {
            // eslint-disable-next-line no-console
            console.log('新規登録');
          }}
        >
          新規登録
        </Button>
      </ButtonGroup>
    }
  />
);

```

### src/lv2/header/Header.tsx
```
typescript
import * as React from 'react';
import HeaderSectionContent from './HeaderSectionContent';
import { SectionData } from './types';

import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * min-width から Container の左右 margin 分の値を取り除きます。
   */
  disableGutters?: boolean;
  /**
   * ロゴを指定します。
   */
  logo: React.ReactNode;
} & ( // sectionDataList または sectionNode を必須にするべく、{} | {} の指定にしている
  | {
      sectionDataList: Array<SectionData>;
      sectionNode?: React.ReactNode;
    }
  | {
      sectionDataList?: Array<SectionData>;
      sectionNode: React.ReactNode;
    }
) & {
    logoUrl?: string;
    children?: React.ReactNode;
  } & CommonProps;

const Header: React.FC<Props> = (props: Props) => {
  const {
    disableGutters = false,
    logo,
    sectionDataList,
    sectionNode,
    logoUrl,
    children,
  } = props;

  const logoNode = logo;

  const infoNode = sectionDataList
    ? sectionDataList.map((data, i) => (
        <span key={i} className="vb-header__section">
          <HeaderSectionContent data={data} />
        </span>
      ))
    : sectionNode;

  return (
    <header
      role="banner"
      {...commonProps(props, 'vb-header', { disableGutters })}
    >
      <div className="vb-header__logo">
        {logoUrl ? <a href={logoUrl}>{logoNode}</a> : logoNode}
      </div>

      {children && <div className="vb-header__children">{children}</div>}

      <div className="vb-header__info">{infoNode}</div>
    </header>
  );
};
export default Header;

```

### src/lv2/header/HeaderSectionContent.tsx
```
typescript
import * as React from 'react';
import { VisuallyHidden } from '../../lv1';
import WithDropdown from './../withDropdown/WithDropdown';
import { SectionData } from './types';

type Props = {
  data: SectionData;
};

const HeaderSectionContents: React.FC<Props> = ({
  data: {
    dropdownContents,
    IconComponent,
    iconType,
    iconLabel,
    text,
    type,
    url,
    onClick,
    hasBadge,
  },
}: Props) => {
  const icon = IconComponent ? (
    <IconComponent
      className={`vb-header__icon ${
        iconType ? `vb-header__icon--${iconType}` : ''
      }`}
      role="img"
      aria-label={iconLabel || undefined}
      // iconLabelがあるときだけスクリーンリーダーからは画像として見え、そうでない場合はスクリーンリーダーからは見えなくする
      aria-hidden={!iconLabel}
      focusable={false}
    />
  ) : null;

  switch (type) {
    case 'plan':
      return (
        <a href={url} className="vb-header__plan">
          {text}
        </a>
      );
    case 'link':
      return (
        <a className="vb-header__link" href={url}>
          {icon}
          <span className="vb-header__text">{text}</span>
          {hasBadge && (
            <span className="vb-header__badge">
              <VisuallyHidden>新着情報あり</VisuallyHidden>
            </span>
          )}
        </a>
      );
    case 'button':
      return (
        <button
          className="vb-header__button"
          type="button"
          onClick={(): void => {
            onClick && onClick();
          }}
        >
          {icon}
          <span className="vb-header__text">{text}</span>
          {hasBadge && (
            <span className="vb-header__badge">
              <VisuallyHidden>新着情報あり</VisuallyHidden>
            </span>
          )}
        </button>
      );

    case 'dropdown': {
      if (!dropdownContents) {
        return null;
      }

      return (
        <WithDropdown
          dropdownContents={dropdownContents}
          renderButton={(dropdownId, isOpen, ref) => (
            <button
              className={`vb-header__button ${
                isOpen ? 'vb-header__button--active' : ''
              }`}
              type="button"
              aria-expanded={isOpen}
              aria-haspopup={true}
              aria-controls={dropdownId}
              ref={ref as React.Ref<HTMLButtonElement>}
            >
              {icon}
              <span className="vb-header__text">{text}</span>
              {hasBadge && (
                <span className="vb-header__badge">
                  <VisuallyHidden>新着情報あり</VisuallyHidden>
                </span>
              )}
            </button>
          )}
        />
      );
    }

    case 'text':
    default:
      return (
        <span>
          {icon}
          <span className="vb-header__text">{text}</span>
          {hasBadge && (
            <span className="vb-header__badge">
              <VisuallyHidden>新着情報あり</VisuallyHidden>
            </span>
          )}
        </span>
      );
  }
};
export default HeaderSectionContents;

```

### src/lv2/headlineArea/HeadlineArea.stories.tsx
```
typescript
import * as React from 'react';

import HeadlineArea from './HeadlineArea';
import Button from '../../lv1/buttons/Button';
import { text, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: HeadlineArea,
};

export const HeadlineAreaComponent = () => (
  <HeadlineArea
    pageTitle={text('pageTitle', '画面見出しエリア', 'HeadlineArea')}
    statusIconText={text('statusIconText', 'ステータス', 'HeadlineArea')}
    statusIconType={select(
      'statusIconType',
      {
        progress: 'progress',
        done: 'done',
        success: 'success',
        required: 'required',
        disabled: 'disabled',
        emphasis: 'emphasis',
        warning: 'warning',
        error: 'error',
      },
      'success',
      'HeadlineArea'
    )}
    {...commonKnobs()}
    ref={React.createRef<HTMLHeadingElement>()}
  >
    {text(
      'children',
      'ヘッドラインエリアコンポーネントは画面の見出しと説明文をラップしたコンポーネントです。オプションでステータスアイコンをつけることもできます。 ',
      'HeadlineArea'
    )}
  </HeadlineArea>
);

export const WithRelatedMenu = () => (
  <HeadlineArea
    pageTitle={text('pageTitle', '画面見出しエリア', 'HeadlineArea')}
    statusIconText={text('statusIconText', 'ステータス', 'HeadlineArea')}
    statusIconType={select(
      'statusIconType',
      {
        progress: 'progress',
        done: 'done',
        success: 'success',
        required: 'required',
        disabled: 'disabled',
        emphasis: 'emphasis',
        warning: 'warning',
        error: 'error',
      },
      'success',
      'HeadlineArea'
    )}
    relatedMenus={
      <>
        <Button small mr={1}>
          menu1
        </Button>
        <Button small>menu2</Button>
      </>
    }
    {...commonKnobs()}
  >
    {text(
      'children',
      'ヘッドラインエリアコンポーネントは画面の見出しと説明文をラップしたコンポーネントです。オプションでステータスアイコンをつけることもできます。 ',
      'HeadlineArea'
    )}
  </HeadlineArea>
);

export const WithRef = () => {
  const headlineRef = React.createRef<HTMLHeadingElement>();
  return (
    <>
      <HeadlineArea pageTitle="Refありのサンプル" ref={headlineRef}>
        ボタンを押すとタイトルにフォーカスするよ
      </HeadlineArea>
      <Button onClick={() => headlineRef.current?.focus()}>
        タイトルにフォーカス
      </Button>
    </>
  );
};

export const WithSkeleton = () => (
  <HeadlineArea
    pageTitle={text('pageTitle', '画面見出しエリア', 'HeadlineArea')}
    loading
    statusIconText={text('statusIconText', 'ステータス', 'HeadlineArea')}
    statusIconType={select(
      'statusIconType',
      {
        progress: 'progress',
        done: 'done',
        success: 'success',
        required: 'required',
        disabled: 'disabled',
        emphasis: 'emphasis',
        warning: 'warning',
        error: 'error',
      },
      'success',
      'HeadlineArea'
    )}
    {...commonKnobs()}
    ref={React.createRef<HTMLHeadingElement>()}
  >
    {text(
      'children',
      'ヘッドラインエリアコンポーネントは画面の見出しと説明文をラップしたコンポーネントです。オプションでステータスアイコンをつけることもできます。 ',
      'HeadlineArea'
    )}
  </HeadlineArea>
);

```

### src/lv2/headlineArea/HeadlineArea.tsx
```
typescript
import * as React from 'react';
import PageTitle from '../../lv1/typography/PageTitle';
import Paragraph from '../../lv1/typography/Paragraph';
import WithSideContent from '../../lv1/layout/WithSideContent';
import StatusIcon, { StatusType } from '../../lv1/icons/StatusIcon';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SkeletonPageTitle } from '../skeleton/SkeletonPageTitle';
import { SkeletonParagraph } from '../skeleton/SkeletonParagraph';

type Props = {
  pageTitle: string;
  children?: React.ReactNode;
  loading?: boolean;
  relatedMenus?: React.ReactNode;
  statusIconType?: StatusType;
  statusIconText?: string;
} & CommonProps;

const HeadlineAreaInternal: React.ForwardRefRenderFunction<
  HTMLHeadingElement,
  Props
> = (props: Props, ref) => {
  const {
    pageTitle,
    children,
    statusIconType,
    statusIconText,
    loading,
    relatedMenus,
  } = props;

  return (
    <div {...commonProps(props, 'vb-headlineArea', {})}>
      <WithSideContent sideContent={relatedMenus} mb={children ? 1 : undefined}>
        {loading ? (
          <SkeletonPageTitle />
        ) : (
          <PageTitle ref={ref}>
            {pageTitle}
            {statusIconText && (
              <StatusIcon type={statusIconType} marginLeft marginSize="small">
                {statusIconText}
              </StatusIcon>
            )}
          </PageTitle>
        )}
      </WithSideContent>
      {children && loading ? (
        <SkeletonParagraph />
      ) : (
        <Paragraph>{children}</Paragraph>
      )}
    </div>
  );
};

/**
 * 画面上部に配置する、見出し、関連メニュー、画面の説明が一体となったコンポーネントです
 */
const HeadlineArea = React.forwardRef(HeadlineAreaInternal);
export default HeadlineArea;

```

### src/lv2/hierarchicalTable/HierarchicalTable.stories.tsx
```
typescript
import * as React from 'react';

import HierarchicalTable, {
  HierarchicalTableHeader,
  HierarchicalTableRow,
} from './HierarchicalTable';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import { commonKnobs } from '../../../stories';
import { Order } from '../../lv1/lists/TableListHeadCell';

const sampleHeaders: Array<HierarchicalTableHeader> = [
  { value: '部門(階層表示)', width: 20, minWidth: 20 },
  { value: '見出し1', minWidth: 10, alignRight: true },
  { value: '見出し2', minWidth: 10, alignRight: true },
  { value: '見出し3', minWidth: 10, alignRight: true },
  { value: '見出し4', minWidth: 10, alignRight: true },
];

const sampleRows: Array<HierarchicalTableRow> = [
  {
    cells: [
      { value: '部門1' },
      { value: '1,000', alignRight: true },
      { value: '2,000', alignRight: true },
      { value: '3,000', alignRight: true },
      { value: '4,000', alignRight: true },
    ],
    childRows: [
      {
        cells: [
          { value: '部門1-1' },
          { value: '500', alignRight: true },
          { value: '1,000', alignRight: true },
          { value: '1,500', alignRight: true },
          { value: '2,000', alignRight: true },
        ],
        childRows: [
          {
            cells: [
              { value: '部門1-1-1' },
              { value: '250', alignRight: true },
              { value: '500', alignRight: true },
              { value: '750', alignRight: true },
              { value: '1,000', alignRight: true },
            ],
            childRows: [],
          },
          {
            cells: [
              { value: '部門1-1-2' },
              { value: '250', alignRight: true },
              { value: '500', alignRight: true },
              { value: '750', alignRight: true },
              { value: '1,000', alignRight: true },
            ],
            childRows: [],
          },
        ],
      },
      {
        cells: [
          { value: '部門1-2' },
          { value: '500', alignRight: true },
          { value: '1,000', alignRight: true },
          { value: '1,500', alignRight: true },
          { value: '2,000', alignRight: true },
        ],
        childRows: [],
      },
    ],
  },
  {
    cells: [
      { value: '部門2' },
      { value: '1,000', alignRight: true },
      { value: '2,000', alignRight: true },
      { value: '3,000', alignRight: true },
      { value: '4,000', alignRight: true },
    ],
    childRows: [],
  },
  {
    cells: [
      { value: '部門3' },
      { value: '3,000', alignRight: true },
      { value: '4,000', alignRight: true },
      { value: '5,000', alignRight: true },
      { value: '6,000', alignRight: true },
    ],
    childRows: [
      {
        cells: [
          { value: '部門3-1' },
          { value: '3,000', alignRight: true },
          { value: '4,000', alignRight: true },
          { value: '5,000', alignRight: true },
          { value: '6,000', alignRight: true },
        ],
        childRows: [
          {
            cells: [
              { value: '部門3-1-1' },
              { value: '1,000', alignRight: true },
              { value: '2,000', alignRight: true },
              { value: '3,000', alignRight: true },
              { value: '4,000', alignRight: true },
            ],
            childRows: [
              {
                cells: [
                  { value: '部門3-1-1-1' },
                  { value: '1,000', alignRight: true },
                  { value: '2,000', alignRight: true },
                  { value: '3,000', alignRight: true },
                  { value: '4,000', alignRight: true },
                ],
                childRows: [
                  {
                    cells: [
                      { value: '部門3-1-1-1-1' },
                      { value: '1,000', alignRight: true },
                      { value: '2,000', alignRight: true },
                      { value: '3,000', alignRight: true },
                      { value: '4,000', alignRight: true },
                    ],
                    childRows: [],
                  },
                  {
                    cells: [
                      { value: '部門3-1-1-1-2' },
                      { value: '0', alignRight: true },
                      { value: '0', alignRight: true },
                      { value: '0', alignRight: true },
                      { value: '0', alignRight: true },
                    ],
                    childRows: [],
                  },
                ],
              },
            ],
          },
          {
            cells: [
              { value: '部門3-1-2' },
              { value: '2,000', alignRight: true },
              { value: '2,000', alignRight: true },
              { value: '2,000', alignRight: true },
              { value: '2,000', alignRight: true },
            ],
            childRows: [],
          },
        ],
      },
    ],
  },
];

export default {
  component: HierarchicalTable,
};

const Component = (props: React.ComponentProps<typeof HierarchicalTable>) => (
  <HierarchicalTable {...props} {...commonKnobs()} />
);

export const HierarchicalTableComponent = () => (
  <Component headers={sampleHeaders} rows={sampleRows} />
);

export const FixedHeaderAndFixedRowHeader = () => (
  <ScrollableBase scrollableX scrollableY>
    <div style={{ height: '50vh' }}>
      <Component
        headers={sampleHeaders}
        rows={sampleRows}
        fixedHeader={true}
        fixedRowHeader={true}
      />
    </div>
  </ScrollableBase>
);

export const SortableHeader = () => {
  const [ordering, setOrdering] = React.useState<Order>('init');

  const hierarchilcalSort = (rows: Array<HierarchicalTableRow>) => {
    rows.reverse();
    rows.map((row) => hierarchilcalSort(row.childRows));
    return rows;
  };

  const nextOrder: {
    [key in Order]: Order;
  } = {
    asc: 'desc',
    desc: 'init',
    init: 'asc',
  };

  const headers = [
    {
      ...sampleHeaders[0],
      ordering,
      onClick: () => setOrdering((prev) => nextOrder[prev]),
    } as HierarchicalTableHeader,
  ].concat(sampleHeaders.slice(1));

  const rows = [...sampleRows];
  if (ordering === 'desc') {
    hierarchilcalSort(rows);
  }

  return (
    <ScrollableBase scrollableX scrollableY>
      <Component headers={headers} rows={rows} />
    </ScrollableBase>
  );
};

```

### src/lv2/hierarchicalTable/HierarchicalTable.tsx
```
typescript
import * as React from 'react';
import TableListHead from '../../lv1/lists/TableListHead';
import TableListHeadCell, { Order } from '../../lv1/lists/TableListHeadCell';
import TableListRow from '../../lv1/lists/TableListRow';
import BorderTableListCell from '../../lv1/lists/BorderTableListCell';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import HierarchicalTableRowHeaderCell from './HierarchicalTableRowHeaderCell';
import {
  useHierarchicalTable,
  FlatRowWithStatus,
} from './hooks/useHierarchicalTable';

/**
 * 行見出しを階層構造にできるテーブルです
 *
 * - 現状の仕様では、階層は5段階までしか持つことができません
 * - それ以上指定したい場合は、stylesheets/lv2/hierarchicalTable.scss を修正してください
 */
export type HierarchicalTableHeader = {
  value: React.ReactNode;
  alignCenter?: boolean;
  alignRight?: boolean;
  ordering?: Order;
  /**
   * 固定幅を設定します
   */
  width?: number;
  /**
   * 最小の幅を設定します
   */
  minWidth?: number;
  /**
   * 最大の幅を設定します
   */
  maxWidth?: number;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  onClick?: () => unknown;
} & CommonProps;

export type HierarchicalTableRow = {
  cells: Array<HierarchicalTableCell>;
  childRows: Array<HierarchicalTableRow>;
} & CommonProps;

export type HierarchicalTableCell = {
  value: React.ReactNode;
  alignCenter?: boolean;
  alignRight?: boolean;
  small?: boolean;
  /**
   * なるべく単語の切れ目で改行するようにします(`word-break: break-word`)。メールアドレスや金額のカラムで指定してください。
   */
  breakWord?: boolean;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  onClick?: () => unknown;
};

type Props = {
  headers: Array<HierarchicalTableHeader>;
  rows: Array<HierarchicalTableRow>;
  /**
   * 列見出しを表の上に固定して表示します
   */
  fixedHeader?: boolean;
  /**
   * 行見出しを表の左に固定して表示します
   */
  fixedRowHeader?: boolean;
} & CommonProps;

function createHeader(
  headers: HierarchicalTableHeader[],
  fixedRowHeader?: boolean
): React.ReactNode {
  const headerContents = headers.map(
    (header: HierarchicalTableHeader, index: number) => (
      <TableListHeadCell
        key={index}
        alignCenter={header.alignCenter}
        alignRight={header.alignRight}
        ordering={header.ordering}
        width={header.width}
        minWidth={header.minWidth}
        maxWidth={header.maxWidth}
        noWrap={header.noWrap}
        rowHeader={index === 0}
        fixedRowHeader={index === 0 && fixedRowHeader}
        onClick={header.onClick}
        data-test={header['data-test']}
      >
        {header.value}
      </TableListHeadCell>
    )
  );

  return headerContents;
}

function createCells(
  cells: HierarchicalTableCell[],
  level: number,
  foldable: boolean,
  folded: boolean,
  onToggleFolded: () => void,
  fixedRowHeader?: boolean
): React.ReactNode {
  return cells.map((cell, index) =>
    index === 0 ? (
      <HierarchicalTableRowHeaderCell
        key={0}
        small={cell.small}
        alignCenter={cell.alignCenter}
        alignRight={cell.alignRight}
        breakWord={cell.breakWord}
        noWrap={cell.noWrap}
        rowHeader={true}
        fixedRowHeader={fixedRowHeader}
        onClick={cell.onClick}
        onToggleFolded={onToggleFolded}
        level={level}
        foldable={foldable}
        folded={folded}
      >
        {cell.value}
      </HierarchicalTableRowHeaderCell>
    ) : (
      <BorderTableListCell
        key={index}
        small={cell.small}
        alignCenter={cell.alignCenter}
        alignRight={cell.alignRight}
        breakWord={cell.breakWord}
        noWrap={cell.noWrap}
        onClick={cell.onClick}
      >
        {cell.value}
      </BorderTableListCell>
    )
  );
}

function createRows(
  rows: Array<FlatRowWithStatus<HierarchicalTableRow>>,
  updateRowFoldedStatus: (rowIndex: number) => void,
  fixedRowHeader?: boolean
): React.ReactNode {
  return rows.map((row, rowIndex) => {
    if (row.visible) {
      const foldable = row.childCount > 0;
      return (
        <TableListRow
          key={rowIndex}
          aria-level={row.level}
          aria-setsize={row.setSize}
          aria-posinset={row.posInset}
          aria-expanded={foldable ? !row.folded : undefined}
          data-test={row['data-test']}
        >
          {createCells(
            row.cells,
            row.level,
            foldable,
            row.folded,
            () => updateRowFoldedStatus(rowIndex),
            fixedRowHeader
          )}
        </TableListRow>
      );
    }
  });
}

const HierarchicalTable: React.FC<Props> = (props: Props) => {
  const { headers, rows, fixedHeader, fixedRowHeader } = props;

  const [hierarchicalRows, updateRowFoldedStatus] = useHierarchicalTable(rows);

  return (
    <div {...commonProps(props, 'vb-hierarchicalTable')}>
      <table className="vb-hierarchicalTable__table">
        <thead>
          <TableListHead fixedHeader={fixedHeader}>
            {createHeader(headers, fixedRowHeader)}
          </TableListHead>
        </thead>
        <tbody>
          {createRows(hierarchicalRows, updateRowFoldedStatus, fixedRowHeader)}
        </tbody>
      </table>
    </div>
  );
};

export default HierarchicalTable;

```

### src/lv2/hierarchicalTable/HierarchicalTableRowHeaderCell.tsx
```
typescript
import * as React from 'react';
import BorderTableListCell from '../../lv1/lists/BorderTableListCell';
import { MdChevronRight, MdExpandMore } from 'react-icons/md';

type Props = React.ComponentProps<typeof BorderTableListCell> & {
  onToggleFolded: () => void;
  level: number;
  foldable: boolean;
  folded: boolean;
};

const HierarchicalTableRowHeaderCell: React.FC<Props> = ({
  onToggleFolded,
  level,
  foldable,
  folded,
  children,
  ...rest
}: Props) => {
  const baseClassName = 'vb-hierarchicalTableRowHeaderCell';
  const className = [
    baseClassName,
    `${baseClassName}--level${level}`,
    foldable ? '' : `${baseClassName}--foldable--level${level}`,
  ].join(' ');

  return (
    <BorderTableListCell {...rest}>
      <span className={className}>
        {foldable && (
          <button
            className={`${baseClassName}__button`}
            aria-label={folded ? '展開する' : '折り畳む'}
            aria-expanded={!folded}
            onClick={(e) => {
              onToggleFolded();
              e.stopPropagation();
            }}
          >
            {folded ? (
              <MdChevronRight className={`${baseClassName}__icon`} />
            ) : (
              <MdExpandMore className={`${baseClassName}__icon`} />
            )}
          </button>
        )}
        {children}
      </span>
    </BorderTableListCell>
  );
};

export default HierarchicalTableRowHeaderCell;

```

### src/lv2/indexSearchField/IndexSearchField.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { boolean, number, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import IndexSearchField from './IndexSearchField';
import ColumnBase from '../../lv1/bases/ColumnBase';
import MarginBase from '../../lv1/bases/MarginBase';
import { Text } from '../../lv1/typography/Text';

const handlers = actions({
  onChange: 'change',
  onInput: 'input',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export default {
  component: IndexSearchField,
};

export const SearchFieldComponent = () => {
  const [searchWord, setSearchWord] = React.useState<string | undefined>(
    undefined
  );

  return (
    <>
      <MarginBase mb={1}>
        <Text>検索語句：{searchWord}</Text>
      </MarginBase>
      <MarginBase mb={3}>
        <IndexSearchField
          id={text('Id', 'id', 'SearchField')}
          label={text('Label', '検索フォーム', 'SearchField')}
          placeholder={text('Placeholder', '検索', 'SearchField')}
          name={text('Name', 'search', 'SearchField')}
          width={select(
            'Width',
            {
              xSmall: 'xSmall',
              Small: 'small',
              Medium: 'medium',
              Large: 'large',
              Full: 'full',
            },
            'medium',
            'SearchField'
          )}
          required={boolean('Required', true, 'SearchField')}
          disabled={boolean('Disabled', false, 'SearchField')}
          maxLength={number('MaxLength', 100, undefined, 'SearchField')}
          forceOpen={boolean('forceOpen', false, 'SearchField')}
          onUpdate={setSearchWord}
          {...handlers}
          {...commonKnobs()}
        />
      </MarginBase>
    </>
  );
};

export const Default = () => (
  <>
    <IndexSearchField marginRight />
    <IndexSearchField marginRight disabled />
  </>
);

export const MaxWidth = () => (
  <div style={{ width: `${number('parent element width (rem)', 15)}rem` }}>
    <ColumnBase>
      <IndexSearchField
        value="親要素よりも幅が大きいとき、SearchFieldの幅は小さくなります。"
        width={select(
          'Width',
          {
            XSmall: 'xSmall',
            Small: 'small',
            Medium: 'medium',
            Large: 'large',
            Full: 'full',
          },
          'large',
          'TextField'
        )}
      />
    </ColumnBase>
  </div>
);

export const SearchTarget = () => (
  <>
    <div>
      <IndexSearchField
        marginRight
        width={'full'}
        searchTarget={['取引先名', '備考', 'email', '従業員名']}
        mb={1}
      />
    </div>
  </>
);

export const ForceOpen = () => (
  <>
    <div>
      <IndexSearchField
        marginRight
        width={'full'}
        value={
          'forceOpen を指定すると、入力欄を常に開いた状態にします。モバイルサイズなど限定的な状況で常に開きたい場合に使用してください'
        }
        forceOpen={true}
        mb={1}
      />
    </div>
  </>
);

```

### src/lv2/indexSearchField/IndexSearchField.tsx
```
typescript
import * as React from 'react';
import { MdSearch } from 'react-icons/md';
import vbClassNames from '../../utilities/vbClassNames';
import { MarginClassProps } from '../../utilities/marginClasses';
import { FormHandlers } from '../../lv1/forms/types';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import PopupBase from '../../lv1/bases/PopupBase';
import { Text } from '../../lv1/typography/Text';

type Props = {
  /**
   * label id を指定します
   */
  id?: string;
  /**
   * input aria-label を指定します
   */
  label?: string;
  /**
   * input aria-labelledby を指定します
   */
  labelledby?: string;
  /**
   * input placeholder を指定します
   */
  placeholder?: string;
  /**
   * input name を指定します
   */
  name?: string;
  /**
   * input value を指定します
   */
  value?: string;
  /**
   * input required を指定します
   */
  required?: boolean;
  /**
   * input autofocus を指定します
   */
  autofocus?: boolean;
  /**
   * disabled 状態にします
   */
  disabled?: boolean;
  /**
   * 幅を指定します
   */
  width?: 'xSmall' | 'small' | 'medium' | 'large' | 'full';
  /**
   * input maxlength を指定します
   */
  maxLength?: number;
  /**
   * 検索文字列を更新し、確定したときに発火します
   * 検索文字列の確定は、入力欄のフォーカスを外したときと、入力中にEnterキーを押下したとき、対象表示ポップアップを選択したときです
   */
  onUpdate?: (searchWord?: string | undefined) => void;
  /**
   * 検索対象の項目名一覧を文字列配列で渡す
   * 例: ['取引先名', '備考', 'email', '従業員名']
   */
  searchTarget?: string[];
  /**
   * 入力欄を常に開いた状態にします
   * モバイルサイズなど限定的な状況で常に開きたい場合に使用してください
   */
  forceOpen?: boolean;
} & FormHandlers<HTMLInputElement> &
  MarginClassProps &
  CommonProps;

const IndexSearchFieldInner = (
  props: Props,
  ref: React.Ref<HTMLInputElement>
): React.ReactElement => {
  const {
    id,
    label,
    labelledby,
    placeholder,
    name,
    value,
    required,
    autofocus,
    disabled,
    width,
    maxLength,
    onUpdate,
    searchTarget,
    forceOpen,
    onChange,
    onInput,
    onFocus,
    onBlur,
    onKeyDown,
    onKeyUp,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const [searchWord, setSearchWord] = React.useState<string>(value || '');
  // 検索入力欄が開いている（縮小表示されずに文字入力できる）
  const [isSearchAreaOpen, setIsSearchAreaOpen] = React.useState(
    searchWord !== ''
  );
  // SearchField か ポップアップにフォーカスが当たっている
  const [isSearchAreaFocused, setIsSearchAreaFocused] = React.useState(false);
  // 日本語入力中かどうか
  const [isComposing, setIsComposing] = React.useState(false);

  const popupRef = React.useRef<HTMLDivElement>(null);

  // valueの変更をstateに反映
  // 検索文字がある場合に入力欄を開く（フォーカスは当てない）
  React.useEffect(() => {
    setSearchWord(value || '');
    setIsSearchAreaOpen((value || '') !== '');
  }, [value]);

  // 検索文字列が空の状態で検索フィールド外にフォーカスを移動した場合、検索を終了し閉じる
  const cancelSearch = React.useCallback(() => {
    setSearchWord('');
    onUpdate?.(undefined);
    setIsSearchAreaOpen(false);
    setIsSearchAreaFocused(false);
  }, [onUpdate, setSearchWord]);

  // 検索文字列を更新する
  const updateSearchWord = React.useCallback(() => {
    // 日本語入力中はスルー
    if (isComposing) return;
    // 文字列に変化がない場合は検索しない
    if (searchWord === value) return;

    onUpdate?.(searchWord);
  }, [searchWord, isComposing, onUpdate, value]);

  const fieldClass = 'vb-indexSearchField';
  const inputClass = fieldClass + '__input';
  const iconClass = fieldClass + '__icon';
  const dropdownClass = fieldClass + '__dropdown';
  const dropdownItemClass = fieldClass + '__dropdownItem';

  const inputClassName = vbClassNames(inputClass, {
    modifier: {
      widthXSmall: width === 'xSmall',
      widthSmall: width === 'small',
      widthMedium: width === 'medium' || !width,
      widthLarge: width === 'large',
      widthFull: width === 'full',
      disabled,
      searchAreaClosed: !isSearchAreaOpen && !forceOpen,
    },
  });

  const iconClassName = vbClassNames(iconClass, {
    modifier: {
      searchAreaClosed: !isSearchAreaOpen && !forceOpen,
    },
  });

  const dropdownClaassName = vbClassNames(dropdownClass, {
    modifier: {
      searchAreaOpen: (isSearchAreaOpen || forceOpen) && isSearchAreaFocused,
    },
  });

  return (
    <div
      {...commonProps(
        props,
        fieldClass,
        { widthFull: width === 'full' },
        { marginBottom, marginLeft, marginRight, marginSize, marginTop }
      )}
    >
      <input
        id={id}
        type="search"
        name={name && name}
        value={value && value}
        className={inputClassName}
        placeholder={placeholder && placeholder}
        disabled={disabled && true}
        required={required && true}
        autoFocus={autofocus && true}
        maxLength={maxLength}
        onChange={(e) => {
          setSearchWord(e.target.value);
          onChange?.(e);
        }}
        onInput={onInput}
        onFocus={(e) => {
          setIsSearchAreaFocused(true);
          onFocus?.(e);
        }}
        onBlur={(e) => {
          if (e.relatedTarget === popupRef.current) return;
          if (searchWord === '') {
            cancelSearch();
            return;
          }
          updateSearchWord();
          setIsSearchAreaFocused(false);
          onBlur?.(e);
        }}
        onKeyDown={(e) => {
          if (e.key === 'Enter') {
            if (!isSearchAreaOpen && !forceOpen) {
              setIsSearchAreaOpen(true);
            }
            updateSearchWord();
          }
          if (e.key === ' ') {
            if (!isSearchAreaOpen && !forceOpen) {
              setIsSearchAreaOpen(true);
              e.preventDefault();
            }
          }
          onKeyDown?.(e);
        }}
        onKeyUp={onKeyUp}
        aria-label={
          label ? label : `${searchTarget?.join('、') || '対象'}の文字検索`
        }
        aria-labelledby={labelledby}
        aria-required={required && true}
        ref={ref}
        onClick={() => {
          if (!isSearchAreaOpen && !forceOpen) {
            setIsSearchAreaOpen(true);
            setIsSearchAreaFocused(true);
          }
        }}
        // 日本語入力中にEnterキーを押下したときに、入力確定(検索開始)をしないようにする
        onCompositionStart={() => setIsComposing(true)}
        onCompositionEnd={() => setIsComposing(false)}
      />
      <MdSearch className={iconClassName} />
      {/*
       * 入力欄を開いている間、tabキーでフォーカスを移動できる
       */}
      <div className={dropdownClaassName}>
        <PopupBase paddingSize="zero">
          <div
            role="button"
            className={dropdownItemClass}
            ref={popupRef}
            onClick={() => {
              updateSearchWord();
              setIsSearchAreaFocused(false);
            }}
            tabIndex={
              (isSearchAreaOpen || forceOpen) && isSearchAreaFocused ? 0 : -1
            }
            onKeyDown={(e) => {
              if (e.code === 'Enter') {
                updateSearchWord();
                setIsSearchAreaFocused(false);
              }
            }}
            onBlur={(e) => {
              if (e.relatedTarget === ref) return;
              if (searchWord === '') {
                cancelSearch();
                return;
              }
              updateSearchWord();
              setIsSearchAreaFocused(false);
            }}
          >
            <Text size={0.875}>
              {searchWord === '' ? '' : `「${searchWord}」を含む`}
              {searchTarget?.join('、') || '対象'}を検索
            </Text>
          </div>
        </PopupBase>
      </div>
    </div>
  );
};
const IndexSearchField = React.forwardRef(IndexSearchFieldInner);
export default IndexSearchField;

```

### src/lv2/lineSeparatedList/LineSeparatedList.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import InlineLink from '../../lv1/buttons/InlineLink';
import Paragraph from '../../lv1/typography/Paragraph';
import LineSeparatedList from './LineSeparatedList';

export default {
  component: LineSeparatedList,
};

const listSamples = [
  { value: <Paragraph>リストコンテンツ</Paragraph> },
  {
    value: (
      <Paragraph>
        長いリストコンテンツ長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い
      </Paragraph>
    ),
  },
  {
    value: (
      <Paragraph>
        <InlineLink
          href="https://www.freee.co.jp/"
          rel="noopener noreferrer"
          target="_blank"
        >
          リンク付きリストコンテンツ
        </InlineLink>
      </Paragraph>
    ),
  },
  {
    value: (
      <Paragraph>
        <InlineLink
          href="https://www.freee.co.jp/"
          rel="noopener noreferrer"
          target="_blank"
        >
          長いリンク付きリストコンテンツ長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い長い
        </InlineLink>
      </Paragraph>
    ),
  },
];

export const LineSeparatedListComponent = () => (
  <LineSeparatedList listContents={listSamples} {...commonKnobs()} />
);

```

### src/lv2/lineSeparatedList/LineSeparatedList.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';

export type LineSeparatedListContent = {
  value: React.ReactNode;
};

type Props = {
  /**
   * リスト項目要素を設定します
   */
  listContents?: LineSeparatedListContent[];
} & CommonProps;

/**
 * Block上の見た目をした箇条書きのためのコンポーネントです
 */
const LineSeparatedList: React.FC<Props> = (props: Props) => {
  const { listContents = [] } = props;

  const baseClass = 'vb-lineSeparatedList';

  const listItems = listContents.map((listContent, index) => (
    <li key={index} className={`${baseClass}__list__listItem`}>
      {listContent.value}
    </li>
  ));

  return (
    <div {...commonProps(props, baseClass)}>
      <ul className={vbClassNames(`${baseClass}__list`, {})}>{listItems}</ul>
    </div>
  );
};

export default LineSeparatedList;

```

### src/lv2/listButtonSelector/ListButtonSelector.stories.tsx
```
typescript
import * as React from 'react';
import { MdAdd } from 'react-icons/md';

import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import ListButtonSelector from './ListButtonSelector';

export default {
  title: 'deprecated/listButtonSelector/ListButtonSelector',
  component: ListButtonSelector,
};

export const ListButtonSelectorComponent = () => (
  <div style={{ height: '18rem' }}>
    <ListButtonSelector
      selectedLabel="フリー株式会社にログイン中"
      selectorLabel="ログインする事業所を選択"
      buttons={[
        {
          label: 'Hoge株式会社',
          onClick: action('click'),
        },
        {
          label: 'フリー株式会社',
          selected: true,
          statusIconText: 'ログイン中',
          statusIconType: 'success',
        },
        {
          label: 'foo株式会社',
          onClick: action('click'),
        },
        {
          label: 'bar株式会社',
          onClick: action('click'),
        },
        {
          label: 'アンカー別タブ',
          href: 'https://www.freee.co.jp/',
          target: '_blank',
          rel: 'noopener noreferrer',
        },
      ]}
      {...commonKnobs()}
    />
  </div>
);

export const Disabled = () => (
  <ListButtonSelector
    selectedLabel="フリー株式会社にログイン中"
    selectorLabel="ログインする事業所を選択"
    buttons={[]}
    disabled
  />
);

export const WithActionButton = () => (
  <div style={{ height: '10rem' }}>
    <ListButtonSelector
      selectedLabel="フリー株式会社にログイン中"
      selectorLabel="ログインする事業所を選択"
      buttons={[]}
      actionLabel="新しい事業所をつくる"
      action={action('click')}
      ActionIconComponent={MdAdd}
    />
  </div>
);

```

### src/lv2/listButtonSelector/ListButtonSelector.tsx
```
typescript
import * as React from 'react';
import vbClassNames from '../../utilities/vbClassNames';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { StatusType } from '../../lv1/icons/StatusIcon';
import PopupBase from '../../lv1/bases/PopupBase';
import NegativeMarginBase from '../../lv1/bases/NegativeMarginBase';
import TextButton from '../../lv1/buttons/TextButton';
import ListButtons from '../listButtons/ListButtons';
import Note from '../../lv1/typography/Note';
import { MdArrowDropDown } from 'react-icons/md';
import { KeyCodes } from '../../utilities/keyboard';

type ButtonProps = {
  label: React.ReactNode;
  selected?: boolean;
  href?: string;
  target?: string;
  rel?: string;
  statusIconText?: string;
  statusIconType?: StatusType;
  bgTransparent?: boolean;
  onClick?: React.MouseEventHandler;
};

type Props = {
  selectedLabel: string;
  selectorLabel: string;
  withActionButton?: boolean;
  actionLabel?: string;
  action?: () => any; // ゆるして
  ActionIconComponent?: React.ElementType;
  buttons: Array<ButtonProps>;
  disabled?: boolean;
} & MarginClassProps &
  CommonProps;

type State = {
  isOpen: boolean;
};

/**
 * コンポーネントの位置付けについて議論の余地がある状態なので、新規に使用しないでください。
 *
 * どうしても使用したい場合は必ず相談してください
 */
export default class ListButtonSelector extends React.Component<Props, State> {
  ref: React.RefObject<HTMLDivElement>;
  selectableItemRefs: Array<HTMLAnchorElement | HTMLButtonElement> = [];

  constructor(props: Props) {
    super(props);
    this.ref = React.createRef();
    this.state = { isOpen: false };
  }

  componentDidMount(): void {
    // setTimeOutを0で置くことで、キューの最後に持ってくる
    setTimeout(() => {
      window.addEventListener('click', this.handleClose);
    }, 0);
  }

  componentWillUnmount(): void {
    window.removeEventListener('click', this.handleClose);
  }

  toggleOpen = (): void => {
    this.setState({ isOpen: !this.state.isOpen });
  };

  // これはwindowに対するlistenerなので、eventの型は組込みのMouseEventとなる
  handleClose = (e: MouseEvent): void => {
    if (
      this.ref.current &&
      e.target instanceof HTMLElement &&
      !this.ref.current.contains(e.target)
    ) {
      this.setState({ isOpen: false });
    }
  };

  handleKeyDownSelectableItem(e: React.KeyboardEvent, itemIndex: number): void {
    const prevItem = this.selectableItemRefs[itemIndex - 1];
    const nextItem = this.selectableItemRefs[itemIndex + 1];
    switch (e.keyCode) {
      case KeyCodes.UP:
        e.preventDefault();
        prevItem && prevItem.focus();
        break;
      case KeyCodes.DOWN:
        e.preventDefault();
        nextItem && nextItem.focus();
        break;
    }
  }

  render(): React.ReactNode {
    const {
      selectedLabel,
      selectorLabel,
      actionLabel,
      action,
      ActionIconComponent,
      buttons,
      disabled,
      marginTop,
      marginLeft,
      marginRight,
      marginBottom,
      marginSize,
    } = this.props;

    const buttonClassName = vbClassNames('vb-listButtonSelector__button', {
      modifier: { disabled, isOpen: this.state.isOpen },
    });

    this.selectableItemRefs = [];
    const withAction = actionLabel && ActionIconComponent && action;

    return (
      <div
        ref={this.ref}
        {...commonProps(
          this.props,
          'vb-listButtonSelector',
          {},
          {
            marginTop,
            marginLeft,
            marginRight,
            marginBottom,
            marginSize,
          }
        )}
      >
        <button
          aria-expanded={this.state.isOpen ? 'true' : 'false'}
          onClick={(): void => {
            !disabled && this.toggleOpen();
          }}
          className={buttonClassName}
          disabled={disabled && true}
          type="button"
        >
          {selectedLabel}
          <MdArrowDropDown
            className="vb-listButtonSelector__icon"
            focusable={false}
          />
        </button>
        {this.state.isOpen && (
          <div className="vb-listButtonSelector__popupWrapper">
            <PopupBase small={true}>
              <React.Fragment>
                <Note marginBottom={true} marginSize="small">
                  {selectorLabel}
                </Note>
                <NegativeMarginBase
                  marginSize="small"
                  left
                  right
                  bottom={!withAction}
                >
                  <ListButtons
                    buttons={buttons}
                    selectableItemRef={(el): void => {
                      el && this.selectableItemRefs.push(el);
                    }}
                    onKeyDown={this.handleKeyDownSelectableItem.bind(this)}
                  />
                </NegativeMarginBase>
                {withAction ? (
                  <TextButton
                    onClick={(): void => {
                      action && action();
                    }}
                    IconComponent={
                      ActionIconComponent ? ActionIconComponent : undefined
                    }
                    marginTop={true}
                    small={true}
                    noBorder={true}
                  >
                    {actionLabel}
                  </TextButton>
                ) : null}
              </React.Fragment>
            </PopupBase>
          </div>
        )}
      </div>
    );
  }
}

```

### src/lv2/listButtons/ListButtons.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import ListButtons from './ListButtons';

export default {
  title: 'deprecated/listButtons/ListButtons',
  component: ListButtons,
};

export const ListButtonsComponent = () => (
  <ListButtons
    buttons={[
      {
        label: 'ボタン1',
      },
      {
        label: 'ボタン2（選択中）',
        selected: true,
      },
      {
        label: 'ボタン3（アンカー）',
        href: 'https://www.freee.co.jp/',
      },
      {
        label: 'ボタン4（アンカー別タブ）',
        href: 'https://www.freee.co.jp/',
        target: '_blank',
        rel: 'noopener noreferrer',
      },
      {
        label: 'ボタン5（アイコンつき）',
        statusIconText: 'ステータス',
      },
      {
        label: 'ボタン6（クリックイベント）',
        onClick: action('click'),
      },
    ]}
    {...commonKnobs()}
  />
);

```

### src/lv2/listButtons/ListButtons.tsx
```
typescript
import * as React from 'react';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { StatusType } from '../../lv1/icons/StatusIcon';
import ListButton from '../../lv1/buttons/ListButton';

export type ButtonProps = {
  label: React.ReactNode;
  selected?: boolean;
  href?: string;
  target?: string;
  rel?: string;
  statusIconText?: string;
  statusIconType?: StatusType;
  bgTransparent?: boolean;
  onClick?: React.MouseEventHandler;
};

type Props = {
  buttons: Array<ButtonProps>;
  selectableItemRef?: React.Ref<HTMLAnchorElement | HTMLButtonElement>;
  onKeyDown?: (
    e: React.KeyboardEvent<HTMLAnchorElement | HTMLButtonElement>,
    itemIndex: number
  ) => void;
} & MarginClassProps &
  CommonProps;

/**
 * `lv2/ListButtonSelector` で使用される想定のボタンです。単独で使用しないでください
 */
const ListButtons: React.FC<Props> = (props: Props) => {
  const {
    buttons,
    selectableItemRef,
    onKeyDown,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  let selectableItemIdxCounter = 0;

  return (
    <div
      role="listbox"
      {...commonProps(
        props,
        'vb-listButtons',
        {},
        {
          marginTop,
          marginLeft,
          marginRight,
          marginBottom,
          marginSize,
        }
      )}
    >
      {buttons.map((contents, i) => {
        // 選択済み以外のもので何番めか
        const selectableItemIndex = contents.selected
          ? -1
          : selectableItemIdxCounter++;
        return (
          <ListButton
            key={i}
            selectableItemIndex={selectableItemIndex}
            href={contents.href}
            target={contents.target}
            rel={contents.rel}
            selected={contents.selected}
            statusIconText={contents.statusIconText}
            statusIconType={contents.statusIconType}
            onClick={contents.onClick}
            bgTransparent={i % 2 != 0}
            selectableItemRef={selectableItemRef}
            onKeyDown={onKeyDown}
          >
            {contents.label}
          </ListButton>
        );
      })}
    </div>
  );
};
export default ListButtons;

```

### src/lv2/listCard/ListCard.stories.tsx
```
typescript
import * as React from 'react';

import { MdOutlineDownload } from 'react-icons/md';
import { action } from '@storybook/addon-actions';
import { text, boolean } from '@storybook/addon-knobs';
import Button from '../../lv1/buttons/Button';
import ListCard from './ListCard';

const image =
  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAm0lEQVQ4T6WSoQ4DIRAF2T8/iUQikUgkDovD4pBI5IK6hiYkHG3vaFYQCAmPmc0DRDxrrWys1hpDRLa7QynlEjCH9fMI+vUB5JxpBCklGkGM8fzHuSsNnf4OQghfFXaHCt57GoFzjkZgrX0kmJ3nGfR7MMa8A3ad14KB1ppGoJSiEUgpPwjunNeqgxDiUWEt2qVInHMawXEcJIIX64rsuyC/Fa0AAAAASUVORK5CYII=';

export default {
  component: ListCard,
};

export const ListCardComponent = () => (
  <ListCard
    title={text('Title', 'リストカード', 'ListCard')}
    url={text('Url', '#', 'ListCard')}
    onClick={action('click')}
    target={text('Target', '', 'ListCard')}
    rel={text('Rel', '', 'ListCard')}
    disabled={boolean('Disabled', false, 'ListCard')}
    current={boolean('Current', false, 'ListCard')}
    onSelfWindowNavigation={action('self window navigation')}
    actions={
      <>
        <Button small marginRight>
          ボタン1
        </Button>
        <Button small>ボタン2</Button>
      </>
    }
  >
    {text(
      'Children',
      'コンテンツコンテンツコンテンツコンテンツコンテンツ',
      'ListCard'
    )}
  </ListCard>
);

export const WithOnlyTitle = () => (
  <>
    <ListCard mb={1} title="リストカード" />
    <ListCard mb={1} title="リストカード urlあり" url="#" />
    <ListCard
      mb={1}
      title="リストカード urlあり(_blank)"
      url="#"
      target="_blank"
    />
  </>
);

export const WithoutAction = () => (
  <ListCard title="リストカード">
    コンテンツコンテンツコンテンツコンテンツコンテンツ
  </ListCard>
);

export const WithoutChildren = () => (
  <ListCard
    title="リストカード"
    actions={
      <>
        <Button small marginRight>
          ボタン1
        </Button>
        <Button small>ボタン2</Button>
      </>
    }
  />
);

export const WithThumbnail = () => (
  <ListCard
    title="リストカード"
    thumbnail={<img src={image} alt="" width="160" height="160" />}
    actions={
      <>
        <Button small marginRight>
          ボタン1
        </Button>
        <Button small>ボタン2</Button>
      </>
    }
  >
    コンテンツコンテンツコンテンツコンテンツコンテンツ
  </ListCard>
);

export const WithLargeThumbnail = () => (
  <ListCard
    title="リストカード"
    thumbnail={<img src={image} alt="" width="192" height="108" />}
    thumbnailSize={'large'}
    actions={
      <>
        <Button small marginRight>
          ボタン1
        </Button>
        <Button small>ボタン2</Button>
      </>
    }
  >
    コンテンツコンテンツコンテンツコンテンツコンテンツ
  </ListCard>
);

export const WithDisabled = () => (
  <ListCard
    title="リストカード"
    thumbnail={<img src={image} alt="" width="192" height="108" />}
    actions={
      <>
        <Button small marginRight disabled>
          ボタン1
        </Button>
        <Button small disabled>
          ボタン2
        </Button>
      </>
    }
    disabled
  />
);

export const WithIconComponent = () => (
  <>
    <ListCard title="リストカード" IconComponent={MdOutlineDownload}>
      IconComponentに任意のiconを指定
    </ListCard>
  </>
);

```

### src/lv2/listCard/ListCard.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import selfWindowNavigator, {
  SelfWindowNavigationProp,
} from '../../utilities/selfWindowNavigator';
import Note from '../../lv1/typography/Note';
import { MdChevronRight, MdOpenInNew } from 'react-icons/md';

type Props = {
  title: React.ReactNode;
  url?: string;
  onClick?: React.MouseEventHandler;
  children?: React.ReactNode;
  actions?: React.ReactNode;
  thumbnail?: React.ReactNode;
  thumbnailSize?: 'default' | 'large';
  target?: string;
  rel?: string;
  disabled?: boolean;
  current?: boolean;
  IconComponent?: React.ElementType;
} & SelfWindowNavigationProp &
  CommonProps;

/**
 * コレクションのひとつひとつのオブジェクトの表現に使用する、クリッカブルな要素です。
 *
 * - このコンポーネントは全体がクリッカブルです。全体をクリッカブルにしない場合は `CardBase` を使用してください
 * - モバイル向け画面では積極的に使用してください
 * - オブジェクトの属性を並べたリストを作るには `ListTable` (`BasicTable`) を使用してください。
 * - `title` は必須です
 * - `actions` として、オブジェクトの操作へのショートカットのボタン等を並べることができます
 * - `thumbnail` として、画像などを表示することができます
 * - `thumbnailSize` として画像サイズの指定を行うことができます default = 80px / large = 192px
 * - `title` `children` にはクリック可能な要素を渡さないでください
 * - `disabled` をtrueにしたときは、actionsのボタン等もdisabledにしてください
 * - `IconComponent` アイコンとして表示するコンポーネントを渡します。react-iconsのコンポーネントが想定されています。
 */
const ListCard: React.FC<Props> = (props: Props) => {
  const {
    children,
    url,
    onClick,
    onSelfWindowNavigation,
    title,
    actions,
    target,
    rel,
    disabled,
    current,
    thumbnail,
    IconComponent = url && target === '_blank' ? MdOpenInNew : MdChevronRight,
    thumbnailSize = 'default',
  } = props;
  const className = 'vb-listCard';
  const content = (
    <div className={`${className}__content`}>
      {thumbnail && (
        <div
          className={`${className}__thumbnail${
            !!thumbnailSize && thumbnailSize === 'large'
              ? ` ${className}__thumbnail--large`
              : ''
          }`}
        >
          {thumbnail}
        </div>
      )}
      <div className={`${className}__main`}>
        <div className={`${className}__title`}>{title}</div>
        {children && (
          <Note marginTop marginSize="small">
            {children}
          </Note>
        )}
      </div>
    </div>
  );
  // eslint-disable-next-line @typescript-eslint/naming-convention
  const _listCardProps = commonProps(props, className);
  const listCardProps = {
    ..._listCardProps,
    ...{
      className: `${_listCardProps.className}${
        disabled ? ` ${className}--disabled` : ''
      }${current ? ` ${className}--current` : ''}`,
    },
  };
  return (
    <div {...listCardProps}>
      {url ? (
        <a
          className={`${className}__link${
            disabled ? ` ${className}__link--disabled` : ''
          }${current ? ` ${className}__link--current` : ''}`}
          href={url}
          target={target}
          rel={
            rel ? rel : target === '_blank' ? 'noopener noreferrer' : undefined
          }
          aria-disabled={disabled && true}
          onClick={(e: React.MouseEvent): void => {
            disabled ? e.preventDefault() : onClick && onClick(e);
            if (url) {
              const navigator = selfWindowNavigator(onSelfWindowNavigation);
              navigator && navigator(e, url);
            }
          }}
        >
          {content}
          <IconComponent className={`${className}__icon`} />
        </a>
      ) : (
        <button
          className={`${className}__button${
            disabled ? ` ${className}__button--disabled` : ''
          }${current ? ` ${className}__button--current` : ''}`}
          disabled={disabled && true}
          onClick={onClick}
        >
          {content}
          <IconComponent className={`${className}__icon`} />
        </button>
      )}
      {actions && <div className={`${className}__actions`}>{actions}</div>}
    </div>
  );
};
export default ListCard;

```

### src/lv2/listTable/GroupedListTable.stories.tsx
```
typescript
import * as React from 'react';

import { boolean } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';

import GroupedListTable from './GroupedListTable';
import { Digits } from '../../utilities';
import { Order } from '../../lv1/lists/TableListHeadCell';

export default {
  component: GroupedListTable,
};

export const GroupedListTableComponent = () => {
  return (
    <GroupedListTable
      headers={[
        {
          value: 'タイトル',
          onClick: action('header onClick'),
          'data-test': 'タイトル',
        },
        { value: '日付', onClick: action('header onClick'), ordering: 'desc' },
        { value: '金額', alignRight: true, onClick: action('header onClick') },
        {
          value: '消費税',
          alignRight: true,
          onClick: action('header onClick'),
        },
      ]}
      rowGroups={[
        {
          summaryCells: [
            {
              value: '2020-10-27 の合計',
              colSpan: 2,
              'data-test': '2020-10-27 の合計',
            },
            { value: '4,234', alignRight: true, 'data-test': '金額' },
            { value: '423', alignRight: true, 'data-test': '消費税' },
          ],
          url: 'https://www.freee.co.jp',
          onSelfWindowNavigation: action('rowGroup onSelfWindowNavigation'),
          onToggleFolded: action('rowGroup onToggleFolded'),
          onChangeCheckBox: action('rowGroup onChangeCheckBox'),
          'data-test': 'サマリー行',
          rows: [
            {
              url: 'https://www.freee.co.jp',
              onSelfWindowNavigation: action('row onSelfWindowNavigation'),
              onChangeCheckBox: action('row onChangeCheckBox'),
              cells: [
                {
                  value: '文房具',
                  'data-test': '1つめのセル',
                },
                { value: '2020-10-27', 'data-test': '2つめのセル' },
                {
                  value: '1,234',
                  alignRight: true,
                  'data-test': '3つめのセル',
                },
                { value: '123', alignRight: true, 'data-test': '4つめのセル' },
              ],
            },
            {
              onClick: action('row onClick'),
              onChangeCheckBox: action('row onChangeCheckBox'),
              cells: [
                { value: '交通費' },
                { value: '2020-10-27' },
                { value: '3,000', alignRight: true },
                { value: '300', alignRight: true },
              ],
            },
          ],
        },
        {
          summaryCells: [
            { value: '2020-10-26 の合計', colSpan: 2 },
            { value: '2,200', alignRight: true },
            { value: '220', alignRight: true },
          ],
          onClick: action('rowGroup onClick'),
          onToggleFolded: action('rowGroup onToggleFolded'),
          onChangeCheckBox: action('rowGroup onChangeCheckBox'),
          folded: true,
          rows: [
            {
              onChangeCheckBox: action('row onChangeCheckBox'),
              cells: [
                { value: '昼食' },
                { value: '2020-10-26' },
                { value: '1,200', alignRight: true },
                { value: '120', alignRight: true },
              ],
            },
            {
              onChangeCheckBox: action('row onChangeCheckBox'),
              cells: [
                { value: '交通費' },
                { value: '2020-10-26' },
                { value: '1,000', alignRight: true },
                { value: '100', alignRight: true },
              ],
            },
          ],
        },
      ]}
      onChangeHeaderCheckBox={action('onChangeHeaderCheckBox')}
      withCheckBox={boolean('withCheckBox', true, 'GroupedListTable')}
      foldable={boolean('foldable', false, 'GroupedListTable')}
      fitContent={boolean('fitContent', false, 'GroupedListTable')}
      {...commonKnobs()}
    />
  );
};

const sample: {
  date: string;
  details: { title: string; date: string; amount: number; tax: number }[];
}[] = [
  {
    date: '2020-10-27',
    details: [
      {
        title: '文房具',
        date: '2020-10-27',
        amount: 1234,
        tax: 123,
      },
      {
        title: '交通費',
        date: '2020-10-27',
        amount: 3000,
        tax: 300,
      },
    ],
  },
  {
    date: '2020-10-26',
    details: [
      {
        title: '昼食',
        date: '2020-10-26',
        amount: 1200,
        tax: 120,
      },
      {
        title: '交通費',
        date: '2020-10-26',
        amount: 1000,
        tax: 100,
      },
    ],
  },
];

export const InteractiveSample = () => {
  const [checkBoxStatuses, setCheckBoxStatuses] = React.useState<boolean[][]>(
    Array(sample.length)
      .fill(null)
      .map((_e, i) => Array(sample[i].details.length || 0).fill(false))
  );
  const [foldingStatuses, setFoldingStatuses] = React.useState<boolean[]>(
    Array(sample.length).fill(false)
  );
  type SortKeyT = 'date' | 'amount' | 'tax';
  const [sortKey, setSortKey] = React.useState<SortKeyT>('date');
  const [sortOrder, setSortOrder] = React.useState<Order>('desc');
  const nextOrder: { [key in Order]: Order } = {
    asc: 'desc',
    desc: 'init',
    init: 'asc',
  };
  const changeSort = (key: SortKeyT) => {
    setSortKey(key);
    setSortOrder((prev) => (key === sortKey ? nextOrder[prev] : 'desc'));
  };

  React.useEffect(() => {
    setCheckBoxStatuses(
      Array(sample.length)
        .fill(null)
        .map((_e, i) => Array(sample[i].details.length || 0).fill(false))
    );
    setFoldingStatuses(Array(sample.length).fill(false));
  }, [sortKey, sortOrder]);

  return (
    <GroupedListTable
      headers={[
        {
          value: 'タイトル',
        },
        {
          value: '日付',
          ordering: sortKey === 'date' ? sortOrder : 'init',
          onClick: () => changeSort('date'),
        },
        {
          value: '金額',
          alignRight: true,
          ordering: sortKey === 'amount' ? sortOrder : 'init',
          onClick: () => changeSort('amount'),
        },
        {
          value: '消費税',
          alignRight: true,
          ordering: sortKey === 'tax' ? sortOrder : 'init',
          onClick: () => changeSort('tax'),
        },
      ]}
      rowGroups={(sortOrder === 'init'
        ? sample
        : sample
            .concat()
            .sort(
              (a, b) =>
                (sortKey === 'date'
                  ? a.date.localeCompare(b.date)
                  : a.details.reduce((acc, e) => acc + e[sortKey], 0) -
                    b.details.reduce((acc, e) => acc + e[sortKey], 0)) *
                (sortOrder === 'desc' ? -1 : 1)
            )
      ).map((group, groupIndex) => {
        return {
          summaryCells: [
            { value: `${group.date}の合計`, colSpan: 2 },
            {
              value: Digits.formalize(
                group.details.reduce((acc, current) => acc + current.amount, 0)
              ),
              alignRight: true,
            },
            {
              value: Digits.formalize(
                group.details.reduce((acc, current) => acc + current.tax, 0)
              ),
              alignRight: true,
            },
          ],
          folded: foldingStatuses[groupIndex],
          onToggleFolded: (toggle) => {
            const groupStatuses = [...foldingStatuses];
            groupStatuses[groupIndex] = toggle;
            setFoldingStatuses(groupStatuses);
          },
          onChangeCheckBox: (e) => {
            const groupStatuses = [...checkBoxStatuses];
            groupStatuses[groupIndex] = Array(group.details.length).fill(
              e.target.checked
            );
            setCheckBoxStatuses(groupStatuses);
          },
          rows: group.details.map((row, rowIndex) => ({
            cells: [
              { value: row.title },
              { value: row.date },
              { value: Digits.formalize(row.amount), alignRight: true },
              { value: Digits.formalize(row.tax), alignRight: true },
            ],
            checked: checkBoxStatuses[groupIndex][rowIndex],
            onChangeCheckBox: (e) => {
              const groupStatuses = [...checkBoxStatuses];
              const rowStatuses = [...checkBoxStatuses[groupIndex]];
              rowStatuses[rowIndex] = e.target.checked;
              groupStatuses[groupIndex] = rowStatuses;
              setCheckBoxStatuses(groupStatuses);
            },
          })),
        };
      })}
      onChangeHeaderCheckBox={(e) => {
        setCheckBoxStatuses(
          Array(sample.length)
            .fill(null)
            .map((_e, i) =>
              Array(sample[i].details.length || 0).fill(e.target.checked)
            )
        );
      }}
      withCheckBox={boolean('withCheckBox', true, 'GroupedListTable')}
      foldable={boolean('foldable', true, 'GroupedListTable')}
      {...commonKnobs()}
    />
  );
};

```

### src/lv2/listTable/GroupedListTable.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';

import TableListHead from '../../lv1/lists/TableListHead';
import TableListHeadCell from '../../lv1/lists/TableListHeadCell';
import TableListRow from '../../lv1/lists/TableListRow';
import TableListCell from '../../lv1/lists/TableListCell';
import CheckBoxCell from '../../lv1/lists/CheckBoxCell';
import TreeFoldingButtonCell from '../../lv1/lists/TreeFoldingButtonCell';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import { FitContentProps } from '../../lv1/bases/types';

import { TableHeader, TableRow, TableCell } from './ListTable';

export type TableRowGroup = {
  rows: TableRow[];
  summaryCells: TableCell[];
  /**
   * 行クリック時の処理を渡せます。遷移先のURLが存在する場合にはonClick内で遷移させるのではなく、URLを渡してください。
   * react-routerの遷移処理を入れたい場合は onSelfWindowNavigationを使用してください
   */
  onClick?: () => void;
  url?: string;
  onChangeCheckBox?: React.ChangeEventHandler<HTMLInputElement>;
  checkBoxName?: string;
  checkBoxValue?: string;
  folded?: boolean;
  onToggleFolded?: (fold: boolean) => void;
  'data-test'?: string;
} & SelfWindowNavigationProp;

type Props = {
  headers: TableHeader[];
  rowGroups: TableRowGroup[];
  withCheckBox?: boolean;
  onChangeHeaderCheckBox?: React.ChangeEventHandler<HTMLInputElement>;
  foldable?: boolean;
} & CommonProps &
  FitContentProps;

const GroupedListTable: React.FC<Props> = (props: Props) => {
  const {
    headers,
    withCheckBox,
    rowGroups,
    onChangeHeaderCheckBox,
    foldable,
    fitContent,
  } = props;

  return (
    <div {...commonProps(props, 'vb-groupedListTable', { fitContent })}>
      <table
        className="vb-groupedListTable__table"
        // role="treegrid" にしたいが、するとNVDAで表の中身を読めなくなってしまう
      >
        <thead>
          <TableListHead>
            {withCheckBox && (
              <CheckBoxCell
                header={true}
                aria-label="すべて選択"
                onChange={onChangeHeaderCheckBox}
                checked={rowGroups.every((rowGroup) =>
                  rowGroup.rows.every((row) => row.checked)
                )}
              />
            )}
            {foldable && (
              <TableListHeadCell>
                <VisuallyHidden>行の開閉</VisuallyHidden>
              </TableListHeadCell>
            )}
            {headers.map((header, i) => (
              <TableListHeadCell
                key={i}
                alignCenter={header.alignCenter}
                alignRight={header.alignRight}
                ordering={header.ordering}
                onClick={
                  header.onClick &&
                  ((): void => {
                    header.onClick && header.onClick(i);
                  })
                }
                minWidth={header.minWidth}
                maxWidth={header.maxWidth}
                data-test={header['data-test']}
              >
                {header.value}
              </TableListHeadCell>
            ))}
          </TableListHead>
        </thead>
        <tbody>
          {rowGroups.map((rowGroup, rowGroupIndex) => {
            return (
              <React.Fragment key={rowGroupIndex}>
                <TableListRow
                  key={rowGroupIndex}
                  aria-level={1}
                  aria-setsize={rowGroups.length}
                  aria-posinset={rowGroupIndex + 1}
                  aria-expanded={foldable ? !rowGroup.folded : undefined}
                  url={rowGroup.url}
                  onSelfWindowNavigation={rowGroup.onSelfWindowNavigation}
                  onClick={rowGroup.onClick}
                  data-test={rowGroup['data-test']}
                >
                  {withCheckBox && (
                    <CheckBoxCell
                      header={false}
                      checked={rowGroup.rows.every((row) => row.checked)}
                      onChange={rowGroup.onChangeCheckBox}
                      name={rowGroup.checkBoxName}
                      value={rowGroup.checkBoxValue}
                    />
                  )}
                  {foldable && (
                    <TreeFoldingButtonCell
                      folded={!!rowGroup.folded}
                      onToggleFolded={(fold: boolean) => {
                        rowGroup.onToggleFolded &&
                          rowGroup.onToggleFolded(fold);
                      }}
                    />
                  )}
                  {rowGroup.summaryCells.map((cell, cellIndex) => (
                    <TableListCell
                      key={cellIndex}
                      alignCenter={cell.alignCenter}
                      alignRight={cell.alignRight}
                      small={cell.small}
                      url={rowGroup.url}
                      onSelfWindowNavigation={rowGroup.onSelfWindowNavigation}
                      breakWord={cell.breakWord}
                      colSpan={cell.colSpan}
                      data-test={cell['data-test']}
                    >
                      {cell.value}
                    </TableListCell>
                  ))}
                </TableListRow>
                {(!foldable || !rowGroup.folded) &&
                  rowGroup.rows.map((row, rowIndex) => (
                    <TableListRow
                      key={`${rowGroupIndex}-${rowIndex}`}
                      url={row.url}
                      onSelfWindowNavigation={row.onSelfWindowNavigation}
                      onClick={
                        row.onClick &&
                        ((): void => {
                          row.onClick ? row.onClick(rowIndex) : null;
                        })
                      }
                      aria-level={2}
                      aria-setsize={rowGroup.rows.length}
                      aria-posinset={rowIndex + 1}
                      data-test={row['data-test']}
                    >
                      {withCheckBox && (
                        <CheckBoxCell
                          header={false}
                          checked={row.checked}
                          onChange={row.onChangeCheckBox}
                          name={row.checkBoxName}
                          value={row.checkBoxValue}
                        />
                      )}
                      {foldable && <TableListCell />}
                      {row.cells.map((cell, cellIndex) => (
                        <TableListCell
                          key={cellIndex}
                          alignCenter={cell.alignCenter}
                          alignRight={cell.alignRight}
                          small={cell.small}
                          url={row.url}
                          onSelfWindowNavigation={row.onSelfWindowNavigation}
                          breakWord={cell.breakWord}
                          indentLevel={cellIndex === 0 ? 1 : 0}
                          data-test={cell['data-test']}
                        >
                          {cell.value}
                        </TableListCell>
                      ))}
                    </TableListRow>
                  ))}
              </React.Fragment>
            );
          })}
        </tbody>
      </table>
    </div>
  );
};
export default GroupedListTable;

```

### src/lv2/listTable/ListTable.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';

import JumpButton from '../../lv1/buttons/JumpButton';
import Checkbox from '../../lv1/forms/CheckBox';
import Button from '../../lv1/buttons/Button';
import FullScreenModal from '../../lv2/modals/FullScreenModal';

import ListTable, { TableHeader } from './ListTable';
import Paragraph from '../../lv1/typography/Paragraph';
import MessageIcon from '../messageIcon/MessageIcon';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import { boolean, number } from '@storybook/addon-knobs';
import { Order } from '../../lv1/lists/TableListHeadCell';

const headers: TableHeader[] = [
  {
    value: '左寄せ',
    ordering: 'asc',
    onClick: action('header cell click'),
  },
  {
    value: (
      <>
        左寄せソート不可
        <MessageIcon label="ヘルプ" small>
          hoge
        </MessageIcon>
      </>
    ),
    'data-test': '左寄せソート不可',
  },
  {
    value: (
      <>
        中央寄せ
        {/* クリック可能なヘッダーセルにクリック可能なものを置く場合、クリックが伝播しないようにする必要がある */}
        {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
        <span
          onClick={(e) => e.stopPropagation()}
          onKeyDown={(e) => e.stopPropagation()}
        >
          <MessageIcon label="ヘルプ" small>
            hoge
          </MessageIcon>
        </span>
      </>
    ),
    alignCenter: true,
    onClick: action('header cell click'),
  },
  {
    value: '右寄せ、文字小さめ',
    alignRight: true,
    onClick: action('header cell click'),
  },
];

const rows = [
  {
    cells: [
      { value: 'テーブルリスト', 'data-test': '1つめのセル' },
      {
        value: (
          <>
            テーブルリスト
            <MessageIcon label="ヘルプ">hoge</MessageIcon>
          </>
        ),
        'data-test': '2つめのセル',
      },
      {
        value: 'テーブルリスト',
        alignCenter: true,
        'data-test': '3つめのセル',
      },
      {
        value: 10000000,
        alignRight: true,
        small: true,
        'data-test': '4つめのセル',
      },
    ],
    'data-test': '行',
  },
  {
    url: 'https://www.freee.co.jp/',
    cells: [
      {
        value: <Checkbox></Checkbox>,
      },
      {
        value: (
          <JumpButton url="https://corp.freee.co.jp/" target="_blank" small>
            ボタン
          </JumpButton>
        ),
      },
      { value: '行リンク', alignCenter: true },
      { value: 10000000, alignRight: true, small: true },
    ],
  },
  {
    cells: [
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト', alignCenter: true },
      {
        value: (
          <JumpButton small url="https://www.freee.co.jp/">
            ボタン
          </JumpButton>
        ),
      },
    ],
  },
  {
    onClick: action('row2-clicked'),
    cells: [
      {
        value: (
          // Checkboxにclickイベントを持たせられないのでspanに持たせている
          // eslint-disable-next-line jsx-a11y/no-static-element-interactions
          <span
            onKeyDown={(e) => e.stopPropagation()}
            onClick={(e) => e.stopPropagation()}
          >
            <Checkbox></Checkbox>
          </span>
        ),
      },
      { value: 'テーブルリスト、文字小さめ', small: true },
      { value: 'テーブルリスト、文字小さめ', alignCenter: true, small: true },
      { value: 10000000, alignRight: true },
    ],
  },
  {
    cells: [
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト、上寄せ', alignTop: true },
      {
        value: (
          <div>
            あああ
            <br /> いいい <br /> ううう
            <br />
            えええ
          </div>
        ),
        alignCenter: true,
      },
      {
        value: (
          <JumpButton small url="https://www.freee.co.jp/">
            ボタン
          </JumpButton>
        ),
        alignRight: true,
      },
    ],
  },
  {
    cells: [
      { value: 'テーブルリスト' },
      { value: 'テーブルリスト' },
      {
        value: '結合セル',
        colSpan: 2,
        alignCenter: true,
      },
    ],
  },
];

export default {
  component: ListTable,
};

export const ListTableComponent = () => (
  <ListTable
    withCheckBox={boolean('withCheckBox', false, 'ListTable')}
    fixedHeader={boolean('fixedHeader', false, 'ListTable')}
    fixedHeaderOffset={number('fixedHeaderOffset', 0, {}, 'ListTable')}
    fitContent={boolean('fitContent', false, 'ListTable')}
    {...commonKnobs()}
    headers={headers}
    rows={rows}
  />
);

const CheckBoxSample = () => {
  const [statuses, setStatuses] = React.useState<boolean[]>(
    Array(2).fill(false)
  );
  const updateStatus = (value: boolean, index: number) => {
    const newStatuses = [...statuses];
    newStatuses[index] = value;
    setStatuses(newStatuses);
  };

  return (
    <ListTable
      withCheckBox
      onChangeHeaderCheckBox={(e) => {
        setStatuses(statuses.map(() => e.target.checked));
      }}
      fixedHeader={boolean('fixedHeader', false, 'ListTable')}
      fixedHeaderOffset={number('fixedHeaderOffset', 0, {}, 'ListTable')}
      headers={[
        { value: '氏名' },
        { value: 'メールアドレス' },
        { value: 'ステータス' },
      ]}
      rows={[
        {
          checked: statuses[0],
          onChangeCheckBox: (e) => updateStatus(e.target.checked, 0),
          checkBoxName: 'row0',
          checkBoxValue: 'row0',
          onClick: action('rowClick'),
          cells: [
            { value: '伊藤 美穂' },
            { value: 'ito-miho@example.com' },
            { value: '完了' },
          ],
        },
        {
          checked: statuses[1],
          onChangeCheckBox: (e) => updateStatus(e.target.checked, 1),
          url: 'https://www.freee.co.jp',
          checkBoxName: 'row1',
          checkBoxValue: 'row1',
          cells: [
            { value: '佐藤 雄太' },
            { value: 'sato-yuta@example.com' },
            { value: '未登録' },
          ],
        },
      ]}
    />
  );
};
export const WithCheckBox = () => <CheckBoxSample />;

export const WithSomeDisabledCheckBox = () => {
  const [statuses, setStatuses] = React.useState<boolean[]>(
    Array(3).fill(false)
  );

  const onChangeHeaderCheckBox = (e: any) => {
    const newStatuses = Array(rows.length).fill(e.target.checked);
    rows.forEach((row, i) => {
      if (row.checkBoxDisabled) {
        newStatuses[i] = false;
      }
    });
    setStatuses(newStatuses);
  };

  const onChangeRowCheckBox = (value: boolean, index: number) => {
    const newStatuses = [...statuses];
    newStatuses[index] = value;
    setStatuses(newStatuses);
  };

  const headers = [
    { value: '氏名' },
    { value: 'メールアドレス' },
    { value: 'ステータス' },
  ];

  const rows = [
    {
      checked: statuses[0],
      onChangeCheckBox: (e: any) => onChangeRowCheckBox(e.target.checked, 0),
      checkBoxDisabled: false,
      checkBoxName: 'row0',
      checkBoxValue: 'row0',
      onClick: action('rowClick'),
      cells: [
        { value: '伊藤 美穂' },
        { value: 'ito-miho@example.com' },
        { value: '完了' },
      ],
    },
    {
      checked: statuses[1],
      onChangeCheckBox: (e: any) => onChangeRowCheckBox(e.target.checked, 1),
      url: 'https://www.freee.co.jp',
      checkBoxDisabled: true,
      checkBoxName: 'row1',
      checkBoxValue: 'row1',
      cells: [
        { value: '佐藤 雄太' },
        { value: 'sato-yuta@example.com' },
        { value: '未登録' },
      ],
    },
    {
      checked: statuses[2],
      onChangeCheckBox: (e: any) => onChangeRowCheckBox(e.target.checked, 2),
      url: 'https://www.freee.co.jp',
      checkBoxDisabled: false,
      checkBoxName: 'row2',
      checkBoxValue: 'row2',
      cells: [
        { value: '山田 太郎' },
        { value: 'yamada-taro@example.com' },
        { value: '保留' },
      ],
    },
  ];

  return (
    <ListTable
      withCheckBox
      onChangeHeaderCheckBox={onChangeHeaderCheckBox}
      fixedHeader={boolean('fixedHeader', false, 'ListTable')}
      fixedHeaderOffset={number('fixedHeaderOffset', 0, {}, 'ListTable')}
      headers={headers}
      rows={rows}
    />
  );
};

export const WithCheckBoxAndNoRows = () => {
  return (
    <ListTable
      headers={[
        { value: '氏名' },
        { value: 'メールアドレス' },
        { value: 'ステータス' },
      ]}
      onChangeHeaderCheckBox={() => undefined}
      rows={[]}
      withCheckBox
    />
  );
};

export const HeaderCellWithNoWrap = () => {
  return (
    <ListTable
      headers={[
        {
          noWrap: true,
          value:
            '折り返さないヘッダ折り返さないヘッダ折り返さないヘッダ折り返さないヘッダ折り返さないヘッダ',
        },
        {
          value:
            '折り返すヘッダ折り返すヘッダ折り返すヘッダ折り返すヘッダ折り返すヘッダ折り返すヘッダ',
        },
      ]}
      rows={[{ cells: [{ value: 'column' }, { value: 'column' }] }]}
    />
  );
};

export const FixedHeader = () => (
  <ScrollableBase scrollableX scrollableY>
    <div style={{ height: '50vh' }}>
      <ListTable
        fixedHeader={true}
        fixedHeaderOffset={0}
        {...commonKnobs()}
        headers={[
          { value: 'column-01', minWidth: 20 },
          { value: 'column-02', minWidth: 20 },
          { value: 'column-03', minWidth: 20 },
          { value: 'column-04', minWidth: 20 },
          { value: 'column-05', minWidth: 20 },
          { value: 'column-06', minWidth: 20 },
          { value: 'column-07', minWidth: 20 },
          { value: 'column-08', minWidth: 20 },
          { value: 'column-09', minWidth: 20 },
          { value: 'column-10', minWidth: 20 },
        ]}
        rows={[...new Array(50)].map((_, i) => ({
          cells: [
            { value: `value-${String(i + 1).padStart(2, '0')}-01` },
            { value: `value-${String(i + 1).padStart(2, '0')}-02` },
            { value: `value-${String(i + 1).padStart(2, '0')}-03` },
            { value: `value-${String(i + 1).padStart(2, '0')}-04` },
            { value: `value-${String(i + 1).padStart(2, '0')}-05` },
            { value: `value-${String(i + 1).padStart(2, '0')}-06` },
            { value: `value-${String(i + 1).padStart(2, '0')}-07` },
            { value: `value-${String(i + 1).padStart(2, '0')}-08` },
            { value: `value-${String(i + 1).padStart(2, '0')}-09` },
            { value: `value-${String(i + 1).padStart(2, '0')}-10` },
          ],
        }))}
      />
    </div>
  </ScrollableBase>
);

export const RowClickForReactRouter = () => (
  <>
    <Paragraph marginBottom>
      react-router等で、クリック時にデフォルトとは違う挙動（pushStateなど）をさせたい場合には
      <code>onSelfWindowNavigation</code> を使用します
    </Paragraph>
    <ListTable
      headers={[{ value: 'col1' }, { value: 'col2' }, { value: 'col3' }]}
      rows={[
        {
          url: 'https://www.freee.co.jp/',
          onSelfWindowNavigation: action('selfWindowNavigation'),
          cells: [{ value: 'col1' }, { value: 'col2' }, { value: 'col3' }],
        },
        {
          url: 'https://www.freee.co.jp/',
          onSelfWindowNavigation: action('selfWindowNavigation'),
          cells: [{ value: 'col1' }, { value: 'col2' }, { value: 'col3' }],
        },
        {
          url: 'https://www.freee.co.jp/',
          onSelfWindowNavigation: action('selfWindowNavigation'),
          cells: [{ value: 'col1' }, { value: 'col2' }, { value: 'col3' }],
        },
        {
          url: 'https://www.freee.co.jp/',
          onSelfWindowNavigation: action('selfWindowNavigation'),
          cells: [
            {
              value: (
                <>
                  col1
                  <br />
                  col1
                  <br />
                  col1
                  <br />
                </>
              ),
            },
            { value: 'col2' },
            { value: 'col3' },
          ],
        },
      ]}
      fixedHeader={boolean('fixedHeader', false, 'ListTable')}
      fixedHeaderOffset={number('fixedHeaderOffset', 0, {}, 'ListTable')}
    ></ListTable>
  </>
);

export const ApplyDataMaskingToCell = () => (
  <>
    <Paragraph marginBottom>
      行動追跡ツールで要素にマスキングを設定する一つの方法として、TableCellに個別でマスキングをかけたい場合、cellに
      <code>&#39;data-masking&#39;&#58; true</code>を指定して使用します
    </Paragraph>
    <ListTable
      headers={[{ value: 'col1' }, { value: 'col2' }, { value: 'col3' }]}
      rows={[
        {
          cells: [
            { value: 'cell1' },
            { value: 'cell2' },
            { value: 'マスキング適用cell', 'data-masking': true },
          ],
        },
      ]}
    ></ListTable>
  </>
);

export const ApplFitContent = () => (
  <>
    <Paragraph marginBottom>
      横幅を画面いっぱいまで広げたくない場合は
      <code>&#39;fitContent&#39;&#58; true</code>を指定して使用します
    </Paragraph>
    <ListTable
      fitContent
      headers={[{ value: 'col1' }, { value: 'col2' }, { value: 'col3' }]}
      rows={[
        {
          cells: [{ value: 'cell1' }, { value: 'cell2' }, { value: 'cell3' }],
        },
      ]}
    ></ListTable>
  </>
);

export const OnModalWithButton = () => {
  const [isOpen, setIsOpen] = React.useState<boolean>(false);

  const handleClick = () => {
    action('click row and close the modal');
    setIsOpen(false);
  };

  return (
    <>
      <Paragraph mb={1}>
        行を Enter
        で選択しモーダルが閉じた直後、ボタンにフォーカスがあたるが、そのまま再度モーダルが開いてしまうことはない。
      </Paragraph>
      <Button
        onClick={() => {
          action('click button to open the modal');
          setIsOpen(true);
        }}
      >
        open
      </Button>
      <FullScreenModal
        title="モーダル"
        isOpen={isOpen}
        onRequestClose={() => {
          action('close modal');
          setIsOpen(false);
        }}
      >
        <ListTable
          headers={[{ value: '漢字' }, { value: 'よみ' }]}
          rows={[
            {
              cells: [{ value: '蟀谷' }, { value: 'こめかみ' }],
              onClick: handleClick,
            },
            {
              cells: [{ value: '膕' }, { value: 'ひがかみ' }],
              onClick: handleClick,
            },
            {
              cells: [{ value: '踝' }, { value: 'くるぶし' }],
              onClick: handleClick,
            },
            {
              cells: [{ value: '自由' }, { value: 'ふりー' }],
              url: 'https://www.freee.co.jp/',
            },
          ]}
        />
      </FullScreenModal>
    </>
  );
};

export const WithSortIconAndNoRows = () => {
  const data = [
    { id: 1, value: '砂糖' },
    { id: 2, value: '塩' },
    { id: 3, value: '酢' },
    { id: 4, value: '醤油' },
    { id: 5, value: '味噌' },
  ];

  const [rows, setRows] = React.useState(data);
  const [sortKey, setSortKey] = React.useState<'id' | 'value'>('id');
  const [sortOrder, setSortOrder] = React.useState<Order>('init');

  const nextOrder: { [key in Order]: Order } = {
    init: 'asc',
    asc: 'desc',
    desc: 'init',
  };

  type SortKeyT = 'id' | 'value';
  const changeSort = (key: SortKeyT) => {
    setSortKey(key);
    setSortOrder((prev) => (key === sortKey ? nextOrder[prev] : 'asc'));
  };

  React.useEffect(() => {
    if (sortOrder === 'init') {
      setRows(data);
    } else {
      const sorted = data;
      sorted.sort(
        (a, b) =>
          (typeof a[sortKey] === 'number' && typeof b[sortKey] === 'number'
            ? Number(a[sortKey]) - Number(b[sortKey])
            : String(a[sortKey]).localeCompare(String(b[sortKey]))) *
          (sortOrder === 'desc' ? -1 : 1)
      );
      setRows(sorted);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [sortKey, sortOrder]);

  return (
    <>
      <Paragraph mb={1}>
        TableHeaderのorderingに応じて、矢印アイコンが表示されます。
      </Paragraph>
      <ListTable
        headers={[
          {
            value: 'id',
            ordering: sortKey === 'id' ? sortOrder : 'init',
            onClick: () => changeSort('id'),
          },
          {
            value: 'value',
            ordering: sortKey === 'value' ? sortOrder : 'init',
            onClick: () => changeSort('value'),
          },
        ]}
        rows={rows.map((data) => ({
          cells: [{ value: data.id }, { value: data.value }],
        }))}
        fitContent
      />
    </>
  );
};

```

### src/lv2/listTable/ListTable.tsx
```
typescript
import * as React from 'react';

import TableListHead from '../../lv1/lists/TableListHead';
import TableListHeadCell, { Order } from '../../lv1/lists/TableListHeadCell';
import TableListRow from '../../lv1/lists/TableListRow';
import TableListCell from '../../lv1/lists/TableListCell';
import CheckBoxCell from '../../lv1/lists/CheckBoxCell';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';
import { FitContentProps } from '../../lv1/bases/types';

export type TableHeader = {
  value: React.ReactNode;
  alignCenter?: boolean;
  alignRight?: boolean;
  ordering?: Order;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick?: (rowIndex: number) => any;
  width?: number;
  minWidth?: number;
  maxWidth?: number;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  'data-test'?: string;
};

export type TableRow = {
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  /**
   * 行クリック時の処理を渡せます。遷移先のURLが存在する場合にはonClick内で遷移させるのではなく、URLを渡してください。
   * react-routerの遷移処理を入れたい場合は onSelfWindowNavigationを使用してください
   */
  onClick?: (rowIndex: number) => any;
  url?: string;
  cells: Array<TableCell>;
  checkBoxDisabled?: boolean;
  checked?: boolean;
  onChangeCheckBox?: React.ChangeEventHandler<HTMLInputElement>;
  checkBoxName?: string;
  checkBoxValue?: string;
  'data-test'?: string;
  ref?: React.Ref<HTMLTableRowElement>;
} & SelfWindowNavigationProp;

export type TableCell = {
  value: React.ReactNode;
  alignCenter?: boolean;
  alignRight?: boolean;
  alignTop?: boolean;
  small?: boolean;
  /**
   * なるべく単語の切れ目で改行するようにします(`word-break: break-word`)。メールアドレスや金額のカラムで指定してください。
   */
  breakWord?: boolean;
  colSpan?: number;
  'data-masking'?: boolean;
  'data-test'?: string;
};

type Props = {
  headers: Array<TableHeader>;
  rows: Array<TableRow>;
  withCheckBox?: boolean;
  onChangeHeaderCheckBox?: React.ChangeEventHandler<HTMLInputElement>;
  /**
   * Deprecated 使用しないでください
   */
  margins?: MarginClassProps;
} & Pick<
  React.ComponentPropsWithoutRef<typeof TableListHead>,
  'fixedHeader' | 'fixedHeaderOffset'
> &
  CommonProps &
  FitContentProps;

/**
 * リストを表現するテーブルです
 *
 * * 歴史的な理由で `BasicTable` と呼ばれていることがあります
 * * オブジェクトのリストを、1行につき1つ表現するときに使用してください。
 * * 行全体のクリックでその行の詳細または編集画面へ遷移（画面全体の遷移には限らず、「モーダルを開く」でも良い）するようにしてください
 *   * 詳細または編集画面でのアクションを、セル内にボタンとして配置することも可能です
 * * 行クリックでURLに遷移するときは、必ず `url` を渡してください（Ctrl+クリックの操作やリンクURLのコピーをできるようにするため）
 */
const ListTable: React.FC<Props> = (props: Props) => {
  const {
    margins,
    headers,
    rows,
    withCheckBox,
    onChangeHeaderCheckBox,
    fixedHeaderOffset,
    fixedHeader,
    fitContent,
  } = props;

  const allEnabledCheckBoxesSelected = React.useMemo(() => {
    const filteredRows = rows.filter((row) => !row.checkBoxDisabled);

    return (
      filteredRows.length > 0 &&
      filteredRows
        .filter((row) => !row.checkBoxDisabled)
        .every((row) => row.checked)
    );
  }, [rows]);

  return (
    <div {...commonProps(props, 'vb-listTable', { fitContent }, margins)}>
      <table className="vb-listTable__table">
        <thead>
          <TableListHead
            fixedHeader={fixedHeader}
            fixedHeaderOffset={fixedHeaderOffset}
          >
            {withCheckBox && (
              <CheckBoxCell
                header={true}
                aria-label="すべて選択"
                onChange={onChangeHeaderCheckBox}
                checked={allEnabledCheckBoxesSelected}
              />
            )}
            {headers.map((header, i) => {
              return (
                <TableListHeadCell
                  key={i}
                  alignCenter={header.alignCenter}
                  alignRight={header.alignRight}
                  ordering={header.ordering}
                  onClick={
                    header.onClick &&
                    ((): void => {
                      header.onClick && header.onClick(i);
                    })
                  }
                  width={header.width}
                  minWidth={header.minWidth}
                  maxWidth={header.maxWidth}
                  noWrap={header.noWrap}
                  data-test={header['data-test']}
                >
                  {header.value}
                </TableListHeadCell>
              );
            })}
          </TableListHead>
        </thead>
        <tbody>
          {rows.map((row, i) => {
            return (
              <TableListRow
                key={i}
                url={row.url}
                onSelfWindowNavigation={row.onSelfWindowNavigation}
                onClick={
                  row.onClick &&
                  ((): void => {
                    row.onClick ? row.onClick(i) : null;
                  })
                }
                data-test={row['data-test']}
                ref={row.ref}
              >
                {withCheckBox && (
                  <CheckBoxCell
                    header={false}
                    checked={row.checked}
                    disabled={row.checkBoxDisabled}
                    onChange={row.onChangeCheckBox}
                    name={row.checkBoxName}
                    value={row.checkBoxValue}
                  />
                )}
                {row.cells.map((cell, j) => {
                  return (
                    <TableListCell
                      key={j}
                      alignCenter={cell.alignCenter}
                      alignRight={cell.alignRight}
                      alignTop={cell.alignTop}
                      small={cell.small}
                      url={row.url}
                      onSelfWindowNavigation={row.onSelfWindowNavigation}
                      breakWord={cell.breakWord}
                      colSpan={cell.colSpan}
                      data-masking={cell['data-masking']}
                      data-test={cell['data-test']}
                    >
                      {cell.value}
                    </TableListCell>
                  );
                })}
              </TableListRow>
            );
          })}
        </tbody>
      </table>
    </div>
  );
};

export default ListTable;

```

### src/lv2/messageBlock/FloatingMessageBlock.stories.tsx
```
typescript
import * as React from 'react';

import FloatingMessageBlock from './FloatingMessageBlock';
import { commonKnobs } from '../../../stories';
import { boolean, text } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import Button from '../../lv1/buttons/Button';

export default {
  component: FloatingMessageBlock,
};

export const FloatingMessageBlockComponent = () => (
  <>
    <FloatingMessageBlock
      info={boolean('Info', false, 'FloatingMessageBlock')}
      error={boolean('Error', false, 'FloatingMessageBlock')}
      success={boolean('Success', false, 'FloatingMessageBlock')}
      notice={boolean('Notice', false, 'FloatingMessageBlock')}
      linkTarget={text('LinkTarget', '_blank', 'FloatingMessageBlock')}
      linkTitle={text('LinkTitle', '詳細', 'FloatingMessageBlock')}
      linkUrl={text('LinkURL', '#', 'FloatingMessageBlock')}
      linkRel={text('LinkRel', '', 'FloatingMessageBlock')}
      onLinkClick={action('onLinkClick')}
      onClose={action('close')}
      onSelfWindowNavigation={action('onSelfWindowNavigation')}
      {...commonKnobs()}
    >
      {text('children', '情報メッセージ', 'FloatingMessageBlock')}
    </FloatingMessageBlock>
  </>
);

const CounterInternal = () => {
  const [count, setCount] = React.useState(0);
  const [visible, setVisible] = React.useState(false);
  return (
    <>
      <Button
        mt={3}
        onClick={() => {
          setCount(count + 1);
          setVisible(true);
        }}
      >
        push me
      </Button>
      {visible && (
        <FloatingMessageBlock
          info={boolean('Info', false, 'FloatingMessageBlock')}
          error={boolean('Error', false, 'FloatingMessageBlock')}
          success={boolean('Success', false, 'FloatingMessageBlock')}
          notice={boolean('Notice', false, 'FloatingMessageBlock')}
          linkTarget={text('LinkTarget', '_blank', 'FloatingMessageBlock')}
          linkTitle={text('LinkTitle', '詳細', 'FloatingMessageBlock')}
          linkUrl={text('LinkURL', '#', 'FloatingMessageBlock')}
          linkRel={text('LinkRel', '', 'FloatingMessageBlock')}
          onLinkClick={action('onLinkClick')}
          onClose={() => setVisible(false)}
          {...commonKnobs()}
        >
          {`カウンターは ${count} です`}
        </FloatingMessageBlock>
      )}
    </>
  );
};

export const CounterExample = () => <CounterInternal />;

```

### src/lv2/messageBlock/FloatingMessageBlock.tsx
```
typescript
import * as React from 'react';
import MessageBlock from './MessageBlock';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';
import { MessageTypes } from '../../lv1/messages/Message';
import ReactDOM from 'react-dom';
import { CSSTransition } from 'react-transition-group';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import { usePortalParentContext } from '../../utilities/VibesProvider';

const HIDE_TIMEOUT_SEC = 6;

export type FloatingMessageBlockProps = (
  | {
      /**
       * メッセージ本文
       */
      children: React.ReactNode;
      message?: undefined;
    }
  | {
      children?: undefined;
      /**
       * @deprecated children を使用してください
       */
      message: React.ReactNode;
    }
) & {
  linkRel?: string;
  linkTarget?: string;
  linkTitle?: string;
  linkUrl?: string;
  wrapperRef?: React.RefObject<HTMLDivElement>;
  /**
   * メッセージを閉じる際に呼ばれるコールバック。ただしマウスホバーやフォーカスにより表示が延長されている間に呼ばれる可能性がある。
   */
  onClose?: (autoClose: boolean) => void;
  onLinkClick?: () => any;
} & MessageTypes &
  SelfWindowNavigationProp &
  CommonProps;

let portalEl: HTMLDivElement;
const getPortalEl = (portalParent: HTMLElement) => {
  if (!portalEl) {
    portalEl = document.createElement('div');
    portalEl.setAttribute('class', 'vb-floatingMessageBlockPortal');
    portalParent.appendChild(portalEl);
  }
  return portalEl;
};

/**
 * 画面上部にフロート表示するメッセージ。スクリーンメッセージとして、ユーザーが見ている画面全体に関わるメッセージを表示するために使用してください。
 *
 * - 「エラーが起きた」「送信に成功した」など、短くて画面全体に関わるメッセージを伝えるのに使用してください。
 * - あくまで「ユーザーがフィードバックを見落とさないようにする」のを目的として使用してください。
 *   - 「○○は半角で入力してください」のようなエラーの詳細は、このコンポーネントとは別に、画面レイアウト内で表示してください。
 * - `success` のメッセージは、ユーザーが行った操作の結果が永続化される（そのまま離脱しても結果が残る）場合に使用してください。
 *   - 登録フォームを送信してその結果が保存されたときなどに使うことを想定しています。
 *   - たとえば「登録フォーム内にある `入力欄を追加する` ボタンを押して入力欄を追加した」といった操作に対しては、まだそのフォームを送信しておらず内容が永続化されていないので、`FloatingMessageBlock` を使わないでください。
 *     - `FloatingMessageBlock` が表示されることで「入力内容が送信されて確定した」とユーザーが誤解するのを防ぐためです。
 *     - そういった「操作結果が永続化されない」操作に対しては、明示的に完了メッセージを出すというよりも、トランジションなどによってフィードバックを返すことを検討してください。
 *   - 「操作結果が永続化されない」操作が失敗し、それを何らかの方法で伝えなければならない場合は `error` の `FloatingMessageBlock` を使用できます。
 * - `success` `info` タイプのメッセージは一定時間経過後に非表示となります。 `error` `notice` に関しては自動的には消えません。
 * - **基本的には同時に複数のメッセージを出す使い方は想定していませんが** 、連続した操作のフィードバックなどの際には配列に入れて表示するようにしたほうが、 `aria-live` での読み上げが正しくなる可能性が高まります。
 * - 表示されるメッセージはPortalで `<body>` 要素の最後部に挿入されます。React上の挿入箇所には、`VisuallyHidden` による非表示メッセージが配置されます。
 *
 * ## accessibility
 * **FloatingMessageBlockが表示された際、スクリーンリーダーは`aria-live`により`message`の内容を読み上げますが、MessageTypeによって読み上げられる挙動は異なります。**
 *
 * errorの場合は必ず読み上げられ、他のタイプでは読み上げを妨げるものがない場合に読み上げられます。
 * (errorではaria-live="assertive"、それ以外はaria-live="polite"となるため上記の挙動の違いが起こります）
 * a11yチェックで読み上げを確認する際は、上記の仕様を考慮して判定ください。
 * 例えば、成功のときは aria-live="polite" なので読み上げられない場合がありますが、dialogを閉じたことによるフォーカス移動などで何が起きているのかを把握できるときは自動的に読み上げられなくても構いません。
 *
 * **FloatingMessageBlockにキーボードによるフォーカスやスクリーンリーダーのカーソルを移動させるのは困難です**
 *
 * そのため、置いているメッセージやリンクが見逃されたり、スクリーンリーダーのカーソルで到達できなかったとしても問題のない状況であることが望ましいです。
 * 言い換えると、FloatingMessageBlockのメッセージやリンクが唯一の動線とならないようにユーザーの操作しやすい場所にも配置をしたり、操作対象（フォームやオブジェクト等）のUIの状態変化からユーザーが理解可能である必要があります。
 */
const FloatingMessageBlock: React.FC<FloatingMessageBlockProps> = (
  props: FloatingMessageBlockProps
) => {
  const {
    children,
    message,
    linkTitle,
    linkUrl,
    linkTarget,
    linkRel,
    info,
    notice,
    error,
    success,
    onClose,
    onLinkClick,
    onSelfWindowNavigation,
  } = props;
  const [showing, setShowing] = React.useState(false);
  const [hovered, setHovered] = React.useState(false);
  const [hoverTimeoutId, setHoverTimeoutId] = React.useState<number | null>();
  const tmpWrapperRef = React.useRef<HTMLDivElement>(null);
  const wrapperRef = props.wrapperRef || tmpWrapperRef;
  const [focused, setFocused] = React.useState(false);
  const [focusTimeoutId, setFocusTimeoutId] = React.useState<number | null>();
  const portalParent = usePortalParentContext();

  // errorかnoitice以外は一定時間経過後に非表示
  const autoHide = !error && !notice;

  React.useEffect(() => {
    // メッセージが変わったら表示する
    // アニメーションさせるためにmount時にfalseにしておき、mountedでtrueにしたいのだが、
    // storyshotsがエラーになる関係でsetTimeoutを噛ませている
    setTimeout(() => setShowing(true));
    if (autoHide) {
      const timeoutId = window.setTimeout(() => {
        setShowing(false);
        if (onClose) {
          onClose(true);
        }
      }, HIDE_TIMEOUT_SEC * 1000);
      return () => clearTimeout(timeoutId);
    }
  }, [autoHide, info, error, notice, success, message, onClose]);

  // mouseEnterしたら一定時間表示しつづける
  const onMouseEnter = () => {
    setHovered(true);
    if (hoverTimeoutId) {
      window.clearTimeout(hoverTimeoutId);
      setHoverTimeoutId(null);
    }
  };
  const onMouseLeave = () => {
    if (!hoverTimeoutId) {
      setHoverTimeoutId(
        window.setTimeout(() => {
          setHovered(false);
        }, HIDE_TIMEOUT_SEC * 1000)
      );
    }
  };

  // focusしたら一定時間表示しつづける
  const onFocusEvent = () => {
    const acticveElement = document.activeElement;
    if (
      wrapperRef.current &&
      acticveElement &&
      wrapperRef.current.contains(acticveElement)
    ) {
      setFocused(true);
      if (focusTimeoutId) {
        clearTimeout(focusTimeoutId);
        setFocusTimeoutId(null);
      }
    } else if (!focusTimeoutId) {
      setFocusTimeoutId(
        window.setTimeout(() => {
          setFocused(false);
        }, HIDE_TIMEOUT_SEC * 1000)
      );
    }
  };

  // 閉じるをクリックしたら全てのフラグを折る
  const onRequestClose = () => {
    setShowing(false);
    setHovered(false);
    setFocused(false);
    if (onClose) {
      onClose(false);
    }
  };

  // 自動的に消えるタイプの場合はマウスホバーしている・フォーカスしている場合は消えないようにする
  const visible = showing || (autoHide && (hovered || focused));

  return (
    <>
      <VisuallyHidden autoRead assertive={error}>
        {children || message}
      </VisuallyHidden>
      {ReactDOM.createPortal(
        <CSSTransition
          in={visible}
          classNames="vb-floatingMessageBlock__animation"
          timeout={{ enter: 500, exit: 500 }}
          unmountOnExit={true}
          // StrictModeで、"Warning: findDOMNode is deprecated in StrictMode."が出ないように
          // [FYI] https://github.com/reactjs/react-transition-group/issues/668#issuecomment-695162879
          nodeRef={wrapperRef}
        >
          <div
            {...commonProps(props, 'vb-floatingMessageBlock')}
            ref={wrapperRef}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onFocus={onFocusEvent}
            onBlur={onFocusEvent}
          >
            <MessageBlock
              linkTitle={linkTitle}
              linkUrl={linkUrl}
              linkTarget={linkTarget}
              linkRel={linkRel}
              onLinkClick={onLinkClick}
              onRequestClose={onRequestClose}
              onSelfWindowNavigation={onSelfWindowNavigation}
              info={info}
              notice={notice}
              error={error}
              success={success}
              mb={1.5}
            >
              {children || message}
            </MessageBlock>
          </div>
        </CSSTransition>,
        getPortalEl(portalParent)
      )}
    </>
  );
};
export default FloatingMessageBlock;

```

### src/lv2/messageBlock/MessageBlock.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import MessageBlock from './MessageBlock';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { VStack } from '../../lv1';

export default {
  component: MessageBlock,
};

export const MessageBlockComponent = () => (
  <MessageBlock
    info={boolean('Info', false, 'MessageBlock')}
    error={boolean('Error', false, 'MessageBlock')}
    success={boolean('Success', false, 'MessageBlock')}
    notice={boolean('Notice', false, 'MessageBlock')}
    assistance={boolean('Assistance', false, 'MessageBlock')}
    discovery={boolean('Discovery', false, 'MessageBlock')}
    linkTarget={text('LinkTarget', '_blank', 'MessageBlock')}
    linkTitle={text('LinkTitle', '詳細', 'MessageBlock')}
    linkUrl={text('LinkURL', '#', 'MessageBlock')}
    linkRel={text('LinkRel', '', 'MessageBlock')}
    onLinkClick={action('onLinkClick')}
    onRequestClose={action('onRequestClose')}
    hover={boolean('hover', false, 'MessageBlock')}
    onSelfWindowNavigation={action('onSelfWindowNavigation')}
    {...commonKnobs()}
  >
    {text('children', '情報メッセージ', 'MessageBlock')}
  </MessageBlock>
);

const MessageBlockExamples = () => (
  <>
    <MessageBlock assistance mb={1}>
      アシスタンスメッセージ
    </MessageBlock>
    <MessageBlock discovery mb={1}>
      リリースメッセージ
    </MessageBlock>
    <MessageBlock info mb={1}>
      説明・補足メッセージ
    </MessageBlock>
    <MessageBlock error onRequestClose={action('clickClose')} mb={1}>
      エラーメッセージ
    </MessageBlock>
    <MessageBlock
      notice
      linkTitle="詳しく見る"
      linkUrl="https://www.freee.co.jp/"
      mb={1}
    >
      <span>
        <strong>メンテナンスのお知らせ</strong>
        <br />
        2019年1月1日 0:00 から 2019年12月31日 23:59
        のあいだ、メンテナンスのため会計フリーをお使いいただけませんのでご注意ください。
      </span>
    </MessageBlock>
    <MessageBlock success onRequestClose={action('clickClose')} mb={1}>
      完了メッセージ
    </MessageBlock>
  </>
);
export const Examples = () => (
  <>
    <MessageBlockExamples />
    <div style={{ width: '50%' }}>
      <MessageBlockExamples />
    </div>
  </>
);

export const InVStack = () => (
  <VStack>
    <MessageBlock>
      <code>container-type: inline-size</code> を指定していると{' '}
      <code>display: flex</code>{' '}
      内で表示が崩れることがあったので、それが解消されているか確認するためのストーリーです。
    </MessageBlock>
    <MessageBlock>表示が崩れたりしてないですよね？</MessageBlock>
  </VStack>
);

```

### src/lv2/messageBlock/MessageBlock.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import { MessageTypes } from '../../lv1/messages/Message';
import Button from '../../lv1/buttons/Button';
import {
  MdOpenInNew,
  MdError,
  MdWarning,
  MdCheckCircle,
  MdInfo,
  MdLightbulb,
  MdCardGiftcard,
} from 'react-icons/md';
import { useResponsive } from '../../utilities/VibesProvider';
import vbClassNames from '../../utilities/vbClassNames';
import { SelfWindowNavigationProp } from '../../utilities/selfWindowNavigator';

type InternalMessageProps = {
  children?: React.ReactNode;
  assistance?: boolean;
  discovery?: boolean;
  explanatory?: boolean;
} & MessageTypes;

const InternalMessage: React.FC<InternalMessageProps> = (
  props: InternalMessageProps
) => {
  const {
    children,
    error,
    notice,
    success,
    assistance,
    discovery,
    explanatory,
  } = props;
  return (
    <div className="vb-messageBlockInternalMessage">
      <div className="vb-messageBlockInternalMessage__inner">
        {error ? (
          <MdError className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--alert" />
        ) : notice ? (
          <MdWarning className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--notice" />
        ) : success ? (
          <MdCheckCircle className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--success" />
        ) : assistance ? (
          <MdLightbulb className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--assistance" />
        ) : discovery ? (
          <MdCardGiftcard className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--discovery" />
        ) : explanatory ? (
          <MdInfo className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--explanatory" />
        ) : (
          <MdInfo className="vb-messageBlockInternalMessage__icon vb-messageBlockInternalMessage__icon--info" />
        )}
        <span className="vb-messageBlockInternalMessage__content">
          {children}
        </span>
      </div>
    </div>
  );
};

type Props = (
  | {
      /**
       * メッセージ本文
       */
      children: React.ReactNode;
      message?: undefined;
    }
  | {
      children?: undefined;
      /**
       * @deprecated children を使用してください
       */
      message: React.ReactNode;
    }
) & {
  assistance?: boolean;
  discovery?: boolean;
  explanatory?: boolean;
  linkTitle?: string;
  linkUrl?: string;
  linkTarget?: string;
  linkRel?: string;
  onLinkClick?: () => any;
  onRequestClose?: () => any;
  /**
   * @deprecated shadowが入る表示はFloatingMessageBlockを使用してください。FloatingMessageBlock側でスタイルが付くので指定は不要です。
   */
  hover?: boolean;
} & MessageTypes &
  MarginClassProps &
  SelfWindowNavigationProp &
  CommonProps;

/**
 * セクションメッセージまたはスクリーンメッセージとして使用するコンポーネントです。
 * ただしスクリーンメッセージに関しては `FloatingMessageBlock` を使用してください（このコンポーネントを内包しています）
 *
 * - 画面の大きな部分（セクション）に関するメッセージを表示します
 *   - エラーメッセージに使用する場合には、このコンポーネントではエラーの概要を表示するに留め、
 *     エラーの発生箇所の近くにインラインメッセージとして `Message` コンポーネントを配置して、詳細を伝えてください
 * - 右側にはメッセージの詳細リンクを配置できます。`linkTarget` を `"_blank"` にした場合には OpenInNew アイコンが表示されます。
 * - メッセージを非表示にできるようにする場合は、 `onRequestClose` を渡して「閉じる」ボタンを表示してください
 *
 */
const MessageBlock: React.FC<Props> = (props: Props) => {
  const {
    children,
    message,
    assistance,
    discovery,
    explanatory,
    linkTitle,
    linkUrl,
    linkTarget,
    linkRel,
    onLinkClick,
    onRequestClose,
    hover,
    onSelfWindowNavigation,
  } = props;
  const { error, notice, success } = props;
  const { marginTop, marginBottom, marginLeft, marginRight, marginSize } =
    props;
  const responsive = useResponsive();

  return (
    <div
      {...commonProps(
        props,
        'vb-messageBlock',
        { responsive, hover },
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        }
      )}
    >
      <div
        className={vbClassNames('vb-messageBlock__inner', {
          modifier: {
            responsive,
            success: success,
            alert: error,
            notice: notice,
            assistance: assistance,
            discovery: discovery,
          },
        })}
      >
        <div className="vb-messageBlock__message">
          <InternalMessage
            error={error}
            notice={notice}
            success={success}
            assistance={assistance}
            discovery={discovery}
            explanatory={explanatory}
          >
            {children || message}
          </InternalMessage>
        </div>
        {((linkTitle && (linkUrl || onLinkClick || onSelfWindowNavigation)) ||
          onRequestClose) && (
          <div
            className={vbClassNames('vb-messageBlock__buttons', {
              modifier: { responsive },
            })}
          >
            {linkTitle && (linkUrl || onLinkClick || onSelfWindowNavigation) && (
              <Button
                appearance="tertiary"
                href={linkUrl}
                onClick={onLinkClick}
                target={linkTarget}
                rel={linkRel}
                IconComponent={
                  linkTarget === '_blank' ? MdOpenInNew : undefined
                }
                iconPosition="right"
                ml={0.5}
                onSelfWindowNavigation={onSelfWindowNavigation}
              >
                {linkTitle}
              </Button>
            )}
            {onRequestClose && (
              <Button onClick={onRequestClose} appearance="tertiary" ml={0.5}>
                閉じる
              </Button>
            )}
          </div>
        )}
      </div>
    </div>
  );
};
export default MessageBlock;

```

### src/lv2/messageIcon/MessageIcon.stories.tsx
```
typescript
import * as React from 'react';

import MessageIcon from './MessageIcon';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import InlineLink from '../../lv1/buttons/InlineLink';
import Paragraph from '../../lv1/typography/Paragraph';
import { text, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { Stack } from '../../lv1';

export default {
  component: MessageIcon,
  parameters: { layout: 'fullscreen' },
};
export const MessageIconComponent = () => (
  <MessageIcon
    label={text('Label', 'ヘルプ', 'MessageIcon')}
    error={boolean('Error', false, 'MessageIcon')}
    notice={boolean('Notice', false, 'MessageIcon')}
    success={boolean('Success', false, 'MessageIcon')}
    small={boolean('Small', false, 'MessageIcon')}
    {...commonKnobs()}
  >
    {text(
      'Content',
      'アイコンをマウスオーバーしたりクリックすると吹き出しがでます',
      'MessageIcon'
    )}
  </MessageIcon>
);
export const IncludesLinks = () => (
  <>
    <MessageIcon
      label={text('Label', 'ヘルプ', 'MessageIcon')}
      error={boolean('Error', false, 'MessageIcon')}
      notice={boolean('Notice', false, 'MessageIcon')}
      success={boolean('Success', false, 'MessageIcon')}
      small={boolean('Small', false, 'MessageIcon')}
      {...commonKnobs()}
    >
      こんなふうに
      <InlineLink href="https://www.freee.co.jp" target="_blank">
        リンク
      </InlineLink>
      を中に置くのもOKです。
      <br />
      <InlineLink href="https://corp.freee.co.jp" target="_blank">
        もうひとつリンク
      </InlineLink>
    </MessageIcon>

    <Paragraph>
      <InlineLink href="https://corp.freee.co.jp">
        バルーンのフォーカストラップを試す用のバルーン外のリンク
      </InlineLink>
    </Paragraph>
  </>
);

export const InsideBigScroll = () => (
  <div style={{ width: '100vw', height: '20rem', display: 'flex' }}>
    <ScrollableBase scrollableX scrollableY>
      <div style={{ position: 'relative', width: '80rem', height: '40rem' }}>
        <div style={{ position: 'absolute', top: '15rem', left: '40rem' }}>
          <MessageIcon
            label={text('Label', 'ヘルプ', 'MessageIcon')}
            error={boolean('Error', false, 'MessageIcon')}
            notice={boolean('Notice', false, 'MessageIcon')}
            success={boolean('Success', false, 'MessageIcon')}
            {...commonKnobs()}
          >
            {text(
              'Content',
              'アイコンをマウスオーバーしたりクリックすると吹き出しがでます',
              'MessageIcon'
            )}
          </MessageIcon>
        </div>
      </div>
    </ScrollableBase>
  </div>
);

export const Positions = () => (
  <Stack
    justifyContent="space-between"
    direction="horizontal"
    ml={0.5}
    mr={0.5}
    mt={3}
    mb={3}
  >
    <MessageIcon label="ヘルプ">
      ウインドウの左端に近いときは右側に出ます
    </MessageIcon>
    <MessageIcon label="ヘルプ">左右に余裕があるときは中央に出ます</MessageIcon>
    <MessageIcon label="ヘルプ">
      ウインドウの右端に近いときは左側に出ます
    </MessageIcon>
  </Stack>
);

```

### src/lv2/messageIcon/MessageIcon.tsx
```
typescript
import * as React from 'react';
import { MdError, MdWarning, MdCheckCircle, MdHelp } from 'react-icons/md';
import Balloon from '../../lv1/bases/Balloon';
import { Keys } from '../../utilities/keyboard';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import ScrollPortal from '../../utilities/ScrollPortal';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';
import { useBalloon } from '../withBalloon/useBalloon';
import MessageDialog from '../dialogs/MessageDialog';
import { MobileBoundaryWidth } from '../../constants';

type Props = {
  children?: React.ReactNode;
  /**
   * アイコンの代替テキストとして、「(label)を表示」「(label)を非表示」のように使用されます。必ず指定してください。
   */
  label: string;
  error?: boolean;
  notice?: boolean;
  success?: boolean;
  small?: boolean;
};

type ComponentProps = Props & MarginClassProps & CommonProps;

/**
 * アイコンからバルーンとしてメッセージを表示するコンポーネントです。
 *
 * アイコンと色は `label` `error` `notice` `success` から選べます（カスタマイズはできません）
 *
 * MobileBoundaryWidth以下の画面幅では、アイコンをクリックするとダイアログでメッセージを表示します。
 */
const MessageIcon: React.FC<ComponentProps> = (props: ComponentProps) => {
  const {
    error,
    notice,
    success,
    children,
    label,
    small,
    marginTop,
    marginBottom,
    marginLeft,
    marginRight,
    marginSize,
  } = props;

  const {
    balloonIsVisibleByHover,
    clearHoverFlags,
    handleTargetMouseEnter,
    handleTargetMouseLeave,
    handleBalloonMouseEnter,
    handleBalloonMouseLeave,
    position,
    verticalPosition,
    adjustPosition,
    baseRef,
    balloonRef,
  } = useBalloon();

  const [clicked, setClicked] = React.useState<boolean>(false);
  const balloonWrapperRef = React.useRef<HTMLDivElement>(null);
  const [isOpenDialog, setIsOpenDialog] = React.useState<boolean>(false);
  const isNarrowerThanMobileBoundery = () =>
    window.matchMedia(`(max-width: ${MobileBoundaryWidth})`).matches;

  React.useEffect(() => {
    if (clicked) {
      const closeMenu = () => {
        setClicked(false);
      };
      // 開いた瞬間にwindowにイベントが伝播して閉じてしまうのを防ぐため、setTimeoutしてaddEventListenerを遅らせている
      window.setTimeout(() => window.addEventListener('click', closeMenu));
      return () => window.removeEventListener('click', closeMenu);
    }
  }, [clicked, setClicked]);

  React.useLayoutEffect(() => {
    if (clicked) {
      adjustPosition();
    }
  }, [adjustPosition, clicked]);

  const showBalloon = clicked || balloonIsVisibleByHover;
  const showMessage = isNarrowerThanMobileBoundery()
    ? isOpenDialog
    : showBalloon;
  return (
    <span
      {...commonProps(
        props,
        'vb-messageIcon',
        { small },
        { marginBottom, marginLeft, marginRight, marginSize, marginTop }
      )}
    >
      &nbsp;
      <span
        className="vb-messageIcon__control"
        tabIndex={0}
        role="button"
        aria-label={`${label || 'メッセージ'}を${
          showMessage ? '隠す' : '表示'
        }`}
        onClick={() => {
          if (isNarrowerThanMobileBoundery()) {
            setIsOpenDialog(!isOpenDialog);
          } else {
            /* バルーンが見えてる時にクリックした場合はすぐにバルーンが消えるようhoveredフラグを折る */
            setClicked(!clicked);
            clearHoverFlags();
          }
        }}
        onKeyDown={(e: React.KeyboardEvent): void => {
          /* バルーンが見えてる時にクリックした場合はすぐにバルーンが消えるようhoveredフラグを折る */
          if (e.key === Keys.ENTER || e.key === Keys.SPACE) {
            e.preventDefault();
            setClicked(!clicked);
            clearHoverFlags();
          } else if (clicked && e.key === Keys.ESC) {
            setClicked(false);
            clearHoverFlags();
          } else if (clicked && e.key === Keys.TAB && balloonRef.current) {
            e.preventDefault();
            balloonRef.current.focus();
          }
        }}
        onMouseLeave={() => {
          isNarrowerThanMobileBoundery() ? undefined : handleTargetMouseLeave();
        }}
        onMouseEnter={() => {
          isNarrowerThanMobileBoundery() ? undefined : handleTargetMouseEnter();
        }}
        ref={baseRef}
      >
        {error ? (
          <MdError className="vb-messageIcon__icon vb-messageIcon__icon--error" />
        ) : notice ? (
          <MdWarning className="vb-messageIcon__icon vb-messageIcon__icon--notice" />
        ) : success ? (
          <MdCheckCircle className="vb-messageIcon__icon vb-messageIcon__icon--success" />
        ) : (
          <MdHelp className="vb-messageIcon__icon vb-messageIcon__icon--info" />
        )}
      </span>
      {isNarrowerThanMobileBoundery() ? (
        <MessageDialog
          isOpen={isOpenDialog}
          title={label}
          closeButtonLabel={'閉じる'}
          onRequestClose={() => setIsOpenDialog(false)}
          closeButtonAppearance={'secondary'}
          responsive
        >
          {children}
        </MessageDialog>
      ) : (
        <>
          {showBalloon && (
            <VisuallyHidden>
              <span className="vb-messageIcon__hiddenMessage">{children}</span>
            </VisuallyHidden>
          )}
          <ScrollPortal
            positionalBaseElement={baseRef.current || undefined}
            isActive={showBalloon}
            onOverflow={() => {
              setClicked(false);
              clearHoverFlags();
            }}
            onScroll={adjustPosition}
            verticalPosition={verticalPosition}
            data-masking={props['data-masking']}
          >
            <div
              className={`vb-messageIconMessageWrapper ${
                showBalloon ? '' : 'vb-messageIconMessageWrapper--hidden'
              }`}
            >
              <VisuallyHidden>
                <button
                  tabIndex={0}
                  onFocus={() => baseRef.current?.focus()}
                  onClick={() => baseRef.current?.focus()}
                >
                  {label || 'メッセージ'}を隠すボタンにジャンプ
                </button>
              </VisuallyHidden>
              {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}
              <div
                className="vb-messageIconMessage"
                onMouseEnter={handleBalloonMouseEnter}
                onMouseLeave={handleBalloonMouseLeave}
                onClick={(e) => e.stopPropagation()}
                onKeyDown={(e) => {
                  if (e.key === Keys.ESC) {
                    setClicked(false);
                    clearHoverFlags();
                    baseRef.current?.focus();
                  }
                }}
                tabIndex={-1}
                ref={balloonWrapperRef}
                role="tooltip"
              >
                <Balloon
                  small
                  border={
                    error
                      ? 'alert'
                      : notice
                      ? 'notice'
                      : success
                      ? 'success'
                      : 'default'
                  }
                  position={position}
                  verticalPosition={verticalPosition}
                  ref={balloonRef}
                >
                  {children}
                </Balloon>
              </div>
              <VisuallyHidden>
                <button
                  tabIndex={0}
                  onFocus={() => baseRef.current?.focus()}
                  onClick={() => baseRef.current?.focus()}
                >
                  {label || 'メッセージ'}を隠すボタンにジャンプ
                </button>
              </VisuallyHidden>
            </div>
          </ScrollPortal>
        </>
      )}
    </span>
  );
};

export default MessageIcon;

```

### src/lv2/modals/FullScreenModal.stories.tsx
```
typescript
import * as React from 'react';

import { text, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { Button, ListTable, Paragraph } from '../..';
import FullScreenModal from './FullScreenModal';

export default {
  component: FullScreenModal,
};

export const FullScreenModalComponent = () => {
  const [isOpen, setOpen] = React.useState<boolean>(false);
  const toggle = () => setOpen(!isOpen);
  return (
    <>
      <Button onClick={toggle}>open</Button>
      <FullScreenModal
        id={text('Id', '', 'FullScreenModal')}
        isOpen={isOpen}
        title={text('Title', 'フルスクリーンモーダル', 'FullScreenModal')}
        contentLabel={text(
          'ContentLabel',
          'フルスクリーンモーダル',
          'FullScreenModal'
        )}
        onRequestClose={toggle}
        disabled={boolean('Disabled', false, 'FullScreenModal')}
        shouldCloseOnEsc={boolean('ShouldCloseOnEsc', false, 'FullScreenModal')}
        {...commonKnobs()}
      >
        {[...Array.from(Array(20).keys())].map((value) => (
          <Paragraph key={value}>
            画面いっぱいに広がるモーダルです。TaskDialogに収まりきらない複雑なコンテンツを配置できます。
          </Paragraph>
        ))}
      </FullScreenModal>
    </>
  );
};

export const HeaderSideContentSample = () => {
  const [isOpen, setOpen] = React.useState<boolean>(false);
  const toggle = () => setOpen(!isOpen);
  return (
    <>
      <Button onClick={toggle}>open</Button>
      <FullScreenModal
        id={text('Id', '', 'FullScreenModal')}
        isOpen={isOpen}
        title={text('Title', 'フルスクリーンモーダル', 'FullScreenModal')}
        contentLabel={text(
          'ContentLabel',
          'フルスクリーンモーダル',
          'FullScreenModal'
        )}
        onRequestClose={toggle}
        disabled={boolean('Disabled', false, 'FullScreenModal')}
        shouldCloseOnEsc={boolean('ShouldCloseOnEsc', false, 'FullScreenModal')}
        headerSideContent={<Button>ボタン</Button>}
        {...commonKnobs()}
      >
        {[...Array.from(Array(20).keys())].map((value) => (
          <Paragraph key={value}>
            画面いっぱいに広がるモーダルです。TaskDialogに収まりきらない複雑なコンテンツを配置できます。
          </Paragraph>
        ))}
      </FullScreenModal>
    </>
  );
};

export const FullScreenModalWithListTable = () => {
  const [isOpen, setOpen] = React.useState<boolean>(false);
  const toggle = () => setOpen(!isOpen);
  return (
    <>
      <Button onClick={toggle}>open</Button>
      <FullScreenModal
        isOpen={isOpen}
        title={'ListTableを持つFullScreenModal'}
        onRequestClose={toggle}
        {...commonKnobs()}
      >
        <Paragraph>ListTableの上にいろいろ置いたりするよね</Paragraph>
        <ListTable
          headers={[{ value: 'ヘッダー1' }, { value: 'ヘッダー2' }]}
          rows={Array.from(Array(200).keys()).map(() => ({
            cells: [{ value: 'セル1' }, { value: 'セル2' }],
          }))}
          fixedHeader={true}
          fixedHeaderOffset={'-1.5rem'}
        />
      </FullScreenModal>
    </>
  );
};

```

### src/lv2/modals/FullScreenModal.tsx
```
typescript
import * as React from 'react';
import Modal from 'react-modal';
import { MdClose } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import useUniqueId from '../../hooks/useUniqueId';
import { IconOnlyButton, PageTitle, WithSideContent } from '../../';
import { usePortalParentContext } from '../../utilities/VibesProvider';

const contentStyle: React.CSSProperties = {
  alignSelf: 'center',
  position: 'static',
  background: 'transparent',
  borderRadius: 0,
  border: 0,
  top: 'auto',
  left: 'auto',
  right: 'auto',
  bottom: 'auto',
  padding: 0,
  margin: 'auto',
};

type Props = {
  /**
   * モーダルのid属性を指定します。
   */
  id?: string;
  /**
   * モーダルの見出しのid属性を指定します
   */
  titleId?: string;
  /**
   * モーダルのaria-labelを指定できます。
   * 指定しなかった場合はaria-labelledbyによってタイトルの文言が参照されます。
   */
  contentLabel?: string;
  /**
   * モーダルの見出しとなります。
   * 基本は文字列のみの想定ですが、用途に応じて他の要素を合わせて表示もできます。
   */
  title: React.ReactNode;
  /**
   * モーダルの本文となる要素を指定します。
   */
  children: React.ReactNode;
  /**
   * プライマリボタン、 Close ボタンともに disalbed に設定します。データの読み込み中やプライマリボタンを押した後のレスポンス待ちの間など、ユーザーに何も操作させず待たせたいときに指定します。
   */
  disabled?: boolean;
  /**
   * Esc キーの押下でモーダルを閉じられるようになります。
   *
   *  - 無指定の場合は `false` の状態になっています
   *  - モーダル内にフォーム等がある状態で `true` にする場合は、変更がある場合に確認ダイアログを出すなどして、Esc キーの押下によって作業内容が不意に消えてしまうようなことが起きないようにしてください
   *  - モーダル内にフォーム等がない場合や、フォーム等の値に変更がない場合は、 `true` にして問題ありません
   */
  shouldCloseOnEsc?: boolean;
  /**
   * Close ボタンの click ハンドラを設定します。
   */
  onRequestClose: React.MouseEventHandler;
  /**
   * ヘッダーに右寄せでコンテンツを配置したい場合に使います。
   */
  headerSideContent?: React.ReactNode;
  /**
   * react-modal の contentRef に渡す値です。
   */
  contentRef?: React.ComponentProps<typeof Modal>['contentRef'];
} & CommonProps;

const FullScreenModalContent: React.FC<Props> = (props: Props) => {
  const {
    id,
    titleId,
    title,
    children,
    onRequestClose,
    disabled,
    headerSideContent,
  } = props;
  const baseClassName = 'vb-fullScreenModal';

  const headerRef = React.useRef<HTMLDivElement>(null);
  const [headerHeight, setHeaderHeight] = React.useState<string>('85px');

  const adjustBodyHeight = () => {
    if (headerRef.current) {
      setHeaderHeight(`${headerRef.current.offsetHeight}px`);
    }
  };

  React.useLayoutEffect(() => {
    adjustBodyHeight();
  }, []);

  return (
    <div {...commonProps(props, baseClassName)} id={id}>
      <div className={`${baseClassName}__inner`}>
        <div className={`${baseClassName}__header`} ref={headerRef}>
          <IconOnlyButton
            IconComponent={MdClose}
            label={'閉じる'}
            appearance="tertiary"
            onClick={onRequestClose}
            disabled={!!disabled}
            mr={1}
          />
          <div className={`${baseClassName}__headerInnerContent`}>
            {headerSideContent ? (
              <WithSideContent sideContent={headerSideContent}>
                <PageTitle id={titleId}>{title}</PageTitle>
              </WithSideContent>
            ) : (
              <PageTitle id={titleId}>{title}</PageTitle>
            )}
          </div>
        </div>
        {/* 表示領域が足りないときにスクロールするので、tabIndexをつける（キーボードでスクロールできるようになる） */}
        <div
          className={`${baseClassName}__body`}
          // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
          tabIndex={0}
          style={{
            // header の高さと、body に設定された上下の padding の合計を除いた値を minHeight に設定する
            minHeight: `calc(100vh - ${headerHeight} - 3rem)`,
          }}
        >
          {children}
        </div>
      </div>
    </div>
  );
};

/**
 * TaskDialogに収まりきらないような大きくて複雑なコンテンツをモーダル上に配置したい時に使用します。
 * コンテンツ部分は大きくなるとスクロールします。
 *
 * - `isOpen` propで開閉します
 */
const FullScreenModal = (
  props: Omit<Props, 'titleId'> & { isOpen: boolean }
) => {
  const uniqueId = useUniqueId('vb-Modal', props.id);
  const portalParent = usePortalParentContext();
  const titleId = `${uniqueId}__title`;

  return (
    <Modal
      {...props}
      style={{
        overlay: {
          display: 'flex',
          // $vbModalZIndex
          zIndex: 1000 - 1,
        },
        content: contentStyle,
      }}
      ariaHideApp={false}
      aria={{
        modal: true,
        labelledby: !props.contentLabel ? titleId : undefined,
      }}
      shouldCloseOnEsc={!!props.shouldCloseOnEsc}
      id={`${uniqueId}__screen`}
      bodyOpenClassName="vb-ReactModal__Body--open"
      parentSelector={() => portalParent}
      closeTimeoutMS={300}
    >
      <FullScreenModalContent {...props} {...{ id: uniqueId, titleId }} />
    </Modal>
  );
};

export default FullScreenModal;

```

### src/lv2/numericTable/NumericTable.stories.tsx
```
typescript
import * as React from 'react';

import NumericTable, {
  NumericTableHeader,
  NumericTableRow,
} from './NumericTable';
import { commonKnobs } from '../../../stories';
import { action } from '@storybook/addon-actions';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';

const sampleHeaders: Array<NumericTableHeader> = [
  {
    value: 'テーブル見出し',
    ordering: 'asc',
    onClick: action('header cell click'),
  },
  { value: 'テーブル見出しソート不可' },
  {
    value: 'テーブル見出しちょっと長い',
    alignCenter: true,
    onClick: action('header cell click'),
  },
  {
    value: 'テーブル見出し',
    alignRight: true,
    onClick: action('header cell click'),
  },
];

const sampleRows: Array<NumericTableRow> = [
  {
    cells: [
      { value: 'テーブル内容' },
      { value: 'クリック可能', onClick: action('cell click') },
      { value: 'テーブル内容', alignCenter: true },
      { value: '¥10,000', alignRight: true },
    ],
  },
  {
    cells: [
      { value: 'テーブル内容' },
      { value: 'テーブル内容' },
      { value: 'テーブル内容', alignCenter: true },
      { value: '¥10,000', alignRight: true },
    ],
  },
  {
    cells: [
      { value: 'クリック可能', onClick: action('cell click') },
      { value: 'クリック可能', onClick: action('cell click') },
      {
        value: 'クリック可能',
        onClick: action('cell click'),
        alignCenter: true,
      },
      {
        value: '¥10,000',
        alignRight: true,
        onClick: action('cell click'),
      },
    ],
  },
  {
    cells: [
      { value: 'テーブル内容' },
      { value: 'テーブル内容' },
      { value: 'テーブル内容', alignCenter: true },
      { value: '¥10,000', alignRight: true },
    ],
  },
  {
    cells: [
      {
        value: 'exampleexampleexampleexampleexampleexample@example.com',
        breakWord: true,
      },
      { value: 'テーブル内容' },
      { value: 'テーブル内容', alignCenter: true },
      { value: '¥10,000', alignRight: true },
    ],
  },
  {
    cells: [
      { value: 'ステータスつけれれるよ' },
      { value: 'alert', status: 'alert' },
      { value: 'notice', status: 'notice' },
      { value: 'success', status: 'success' },
    ],
  },
];

export default {
  component: NumericTable,
};

export const NumericTableComponent = () => (
  <NumericTable headers={sampleHeaders} rows={sampleRows} {...commonKnobs()} />
);

export const HeaderCellWithNoWrap = () => (
  <NumericTable
    headers={[
      {
        noWrap: true,
        value:
          '折り返さないヘッダ折り返さないヘッダ折り返さないヘッダ折り返さないヘッダ折り返さないヘッダ',
      },
      {
        value:
          '折り返すヘッダ折り返すヘッダ折り返すヘッダ折り返すヘッダ折り返すヘッダ折り返すヘッダ',
      },
    ]}
    rows={[{ cells: [{ value: 'column' }, { value: 'column' }] }]}
  />
);

export const CellWithNoWrap = () => (
  <NumericTable
    headers={[
      { value: 'column(minWidth: 12rem)', minWidth: 12 },
      { value: 'column' },
      { value: 'column' },
      { value: 'column' },
      { value: 'column' },
    ]}
    rows={Array(50).fill({
      //50くらいあれば1画面埋まるくらいになるやろ
      cells: [
        { value: 'column' },
        { value: 'example@example.com', noWrap: true },
        { value: 'example@example.com', noWrap: true },
        {
          value:
            'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
          noWrap: true,
        },
        { value: 'column', noWrap: true },
      ],
    })}
  />
);

export const FixedHeaderAndFixedRowHeader = () => (
  <ScrollableBase scrollableX scrollableY>
    <div style={{ height: '50vh' }}>
      <NumericTable
        fixedHeader={true}
        fixedHeaderOffset={0}
        rowHeaderCount={1}
        fixedRowHeader={true}
        {...commonKnobs()}
        headers={[
          { value: '', minWidth: 20 },
          { value: 'column-01', minWidth: 20 },
          { value: 'column-02', minWidth: 20 },
          { value: 'column-03', minWidth: 20 },
          { value: 'column-04', minWidth: 20 },
          { value: 'column-05', minWidth: 20 },
          { value: 'column-06', minWidth: 20 },
          { value: 'column-07', minWidth: 20 },
          { value: 'column-08', minWidth: 20 },
          { value: 'column-09', minWidth: 20 },
        ]}
        rows={[...new Array(50)].map((_, i) => ({
          cells: [
            { value: `rowHeader-${String(i + 1).padStart(2, '0')}` },
            { value: `value-${String(i + 1).padStart(2, '0')}-01` },
            { value: `value-${String(i + 1).padStart(2, '0')}-02` },
            { value: `value-${String(i + 1).padStart(2, '0')}-03` },
            { value: `value-${String(i + 1).padStart(2, '0')}-04` },
            { value: `value-${String(i + 1).padStart(2, '0')}-05` },
            { value: `value-${String(i + 1).padStart(2, '0')}-06` },
            { value: `value-${String(i + 1).padStart(2, '0')}-07` },
            { value: `value-${String(i + 1).padStart(2, '0')}-08` },
            { value: `value-${String(i + 1).padStart(2, '0')}-09` },
          ],
        }))}
      />
    </div>
  </ScrollableBase>
);

export const FixedTwoRowHeaderAndFixedRowHeader = () => {
  const headers = [
    { value: '取引先', width: 10, minWidth: 10 },
    { value: '品目', width: 10, minWidth: 10 },
    { value: '2022-01', minWidth: 6, alignRight: true },
    { value: '2022-02', minWidth: 6, alignRight: true },
    { value: '2022-03', minWidth: 6, alignRight: true },
    { value: '2022-04', minWidth: 6, alignRight: true },
    { value: '2022-05', minWidth: 6, alignRight: true },
    { value: '2022-06', minWidth: 6, alignRight: true },
    { value: '2022-07', minWidth: 6, alignRight: true },
    { value: '2022-08', minWidth: 6, alignRight: true },
    { value: '2022-09', minWidth: 6, alignRight: true },
  ];

  const parentData = [...Array(10)].map((_, i) => ({
    id: i + 1,
    name: '取引先' + String(i + 1).padStart(2, '0'),
  }));
  const parentChildMap = parentData.map((parent) => ({
    parentId: parent.id,
    childData: [...Array(3)].map((_, i) => ({
      id: i + 1,
      name: '品目' + String(i + 1).padStart(2, '0'),
    })),
  }));

  const rows: Array<NumericTableRow> = parentData.flatMap(
    ({ id, name: parentName }) => {
      const parentRow: NumericTableRow = {
        cells: [
          { value: parentName },
          { value: '' },
          ...[...Array(headers.length - 2)].map(() => ({
            value: '300',
            alignRight: true,
          })),
        ],
      };

      const childRows: Array<NumericTableRow> = (
        parentChildMap.find((m) => m.parentId === id)?.childData || []
      ).map(({ name: childName }) => ({
        cells: [
          { value: <VisuallyHidden>{parentName}</VisuallyHidden> },
          { value: childName },
          ...[...Array(headers.length - 2)].map(() => ({
            value: '100',
            alignRight: true,
          })),
        ],
      }));

      return [parentRow].concat(childRows);
    }
  );

  return (
    <ScrollableBase scrollableX scrollableY>
      <div style={{ height: '50vh' }}>
        <NumericTable
          fixedHeader={true}
          rowHeaderCount={2}
          fixedRowHeader={true}
          {...commonKnobs()}
          headers={headers}
          rows={rows}
        />
      </div>
    </ScrollableBase>
  );
};

export const WithCheckBox = () => {
  const [checkedStatus, setCheckedStatus] = React.useState<boolean[]>(
    Array(2).fill(false)
  );
  const handleChangeHeaderCheckBox = React.useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      setCheckedStatus(() => Array(2).fill(e.target.checked));
    },
    []
  );
  const handleChangeCheckBox = React.useCallback(
    (index: number) => (e: React.ChangeEvent<HTMLInputElement>) => {
      setCheckedStatus((prev) =>
        prev
          .slice(0, index)
          .concat(e.target.checked)
          .concat(prev.slice(index + 1))
      );
    },
    []
  );

  return (
    <NumericTable
      withCheckBox
      onChangeHeaderCheckBox={handleChangeHeaderCheckBox}
      headers={[
        { value: '氏名' },
        { value: 'メールアドレス' },
        { value: 'ステータス' },
      ]}
      rows={[
        {
          checked: checkedStatus[0],
          onChangeCheckBox: handleChangeCheckBox(0),
          checkBoxName: 'row0',
          checkBoxValue: 'row0',
          cells: [
            { value: '伊藤 美穂' },
            { value: 'ito-miho@example.com' },
            { value: '完了' },
          ],
        },
        {
          checked: checkedStatus[1],
          onChangeCheckBox: handleChangeCheckBox(1),
          checkBoxName: 'row1',
          checkBoxValue: 'row1',
          cells: [
            { value: '佐藤 雄太' },
            { value: 'sato-yuta@example.com' },
            { value: '未登録' },
          ],
        },
      ]}
    />
  );
};

export const WithCheckBoxWithoutHeaderCheckBox = () => {
  const [checkedStatus, setCheckedStatus] = React.useState<boolean[]>(
    Array(2).fill(false)
  );
  const handleChangeCheckBox = React.useCallback(
    (index: number) => (e: React.ChangeEvent<HTMLInputElement>) => {
      setCheckedStatus((prev) =>
        prev
          .slice(0, index)
          .concat(e.target.checked)
          .concat(prev.slice(index + 1))
      );
    },
    []
  );

  return (
    <NumericTable
      withCheckBox
      headers={[
        { value: '不要行', width: 5 },
        { value: '氏名' },
        { value: 'メールアドレス' },
        { value: 'ステータス' },
      ]}
      rows={[
        {
          checked: checkedStatus[0],
          onChangeCheckBox: handleChangeCheckBox(0),
          checkBoxName: 'row0',
          checkBoxValue: 'row0',
          cells: [
            { value: '伊藤 美穂' },
            { value: 'ito-miho@example.com' },
            { value: '完了' },
          ],
        },
        {
          checked: checkedStatus[1],
          onChangeCheckBox: handleChangeCheckBox(1),
          checkBoxName: 'row1',
          checkBoxValue: 'row1',
          cells: [
            { value: '佐藤 雄太' },
            { value: 'sato-yuta@example.com' },
            { value: '未登録' },
          ],
        },
      ]}
    />
  );
};

```

### src/lv2/numericTable/NumericTable.tsx
```
typescript
import * as React from 'react';
import TableListHead from '../../lv1/lists/TableListHead';
import TableListHeadCell, { Order } from '../../lv1/lists/TableListHeadCell';
import TableListRow from '../../lv1/lists/TableListRow';
import BorderTableListCell from '../../lv1/lists/BorderTableListCell';
import CheckBoxCell from '../../lv1/lists/CheckBoxCell';
import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

export type NumericTableHeader = {
  value?: React.ReactNode;
  alignCenter?: boolean;
  alignRight?: boolean;
  ordering?: Order;
  /**
   * 固定幅を設定します
   */
  width?: number;
  /**
   * 最小の幅を設定します
   */
  minWidth?: number;
  /**
   * 最大の幅を設定します
   */
  maxWidth?: number;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick?: (rowIndex: number) => any;
  'data-test'?: string;
};

export type NumericTableRow = {
  cells: Array<NumericTableCell>;
  checkBoxDisabled?: boolean;
  checked?: boolean;
  onChangeCheckBox?: React.ChangeEventHandler<HTMLInputElement>;
  checkBoxName?: string;
  checkBoxValue?: string;
  'data-test'?: string;
};

export type NumericTableCell = {
  value: React.ReactNode;
  alignCenter?: boolean;
  alignRight?: boolean;
  small?: boolean;
  /**
   * なるべく単語の切れ目で改行するようにします(`word-break: break-word`)。メールアドレスや金額のカラムで指定してください。
   */
  breakWord?: boolean;
  /**
   * 折り返さない(`white-space: nowrap`)
   */
  noWrap?: boolean;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onClick?: (rowIndex: number) => any;
  status?: 'alert' | 'notice' | 'success';
  'data-masking'?: boolean;
  'data-test'?: string;
};

type Props = {
  headers: Array<NumericTableHeader>;
  rows: Array<NumericTableRow>;
  withCheckBox?: boolean;
  onChangeHeaderCheckBox?: React.ChangeEventHandler<HTMLInputElement>;
  /**
   * @deprecated 代わりに rowHeaderCount を利用してください
   * 各行の最初のセルを行の見出しとして表示します
   */
  hasRowHeader?: boolean;
  /**
   * この数だけ、各行の左側の列を行の見出しとして表示します
   */
  rowHeaderCount?: number;
  /**
   * 各行の最初のセルを表の左に固定して表示します（rowHeaderCount と同時に利用する想定）
   * rowHeaderCount が 2 以上の場合、fixed で指定する left の値を計算するために、対応する headers の width 指定が必要になります
   */
  fixedRowHeader?: boolean;
} & Pick<
  React.ComponentPropsWithoutRef<typeof TableListHead>,
  'fixedHeader' | 'fixedHeaderOffset'
> &
  MarginClassProps &
  CommonProps;

function createHeader(
  headers: NumericTableHeader[],
  rowHeaderCount: number,
  fixedRowHeader: boolean,
  fixedRowHeaderLeftList: number[],
  checkboxProps?: {
    checked: boolean;
    onChange?: React.ChangeEventHandler<HTMLInputElement>;
  }
): React.ReactNode {
  const headerCheckBox = checkboxProps && (
    <CheckBoxCell
      header={true}
      aria-label="すべて選択"
      onChange={checkboxProps.onChange}
      checked={checkboxProps.checked}
    />
  );

  const headerContents = headers.map(
    (header: NumericTableHeader, index: number) => (
      <TableListHeadCell
        key={index}
        alignCenter={header.alignCenter}
        alignRight={header.alignRight}
        ordering={header.ordering}
        width={header.width}
        minWidth={header.minWidth}
        maxWidth={header.maxWidth}
        noWrap={header.noWrap}
        rowHeader={index < rowHeaderCount}
        fixedRowHeader={index < rowHeaderCount && fixedRowHeader}
        fixedRowHeaderLeft={fixedRowHeaderLeftList?.[index]}
        onClick={header.onClick && (() => header.onClick?.(index))}
        data-test={header['data-test']}
      >
        {header.value}
      </TableListHeadCell>
    )
  );

  return (headerCheckBox ? [headerCheckBox] : []).concat(headerContents);
}

function createCells(
  row: NumericTableRow,
  rowHeaderCount: number,
  fixedRowHeader: boolean,
  fixedRowHeaderLeftList: number[],
  withCheckBox?: boolean
): React.ReactNode {
  const checkBoxCell = withCheckBox && (
    <CheckBoxCell
      header={false}
      checked={row.checked}
      disabled={row.checkBoxDisabled}
      onChange={row.onChangeCheckBox}
      name={row.checkBoxName}
      value={row.checkBoxValue}
    />
  );

  const cellContents = row.cells.map(
    (cell: NumericTableCell, index: number) => (
      <BorderTableListCell
        key={index}
        small={cell.small}
        alignCenter={cell.alignCenter}
        alignRight={cell.alignRight}
        breakWord={cell.breakWord}
        noWrap={cell.noWrap}
        status={cell.status}
        rowHeader={index < rowHeaderCount}
        fixedRowHeader={index < rowHeaderCount && fixedRowHeader}
        fixedRowHeaderLeft={fixedRowHeaderLeftList?.[index]}
        onClick={cell.onClick && (() => cell.onClick?.(index))}
        data-masking={cell['data-masking']}
        data-test={row['data-test']}
      >
        {cell.value}
      </BorderTableListCell>
    )
  );

  return (checkBoxCell ? [checkBoxCell] : []).concat(cellContents);
}

function createRows(
  rows: NumericTableRow[],
  rowHeaderCount: number,
  fixedRowHeader: boolean,
  fixedRowHeaderLeftList: number[],
  withCheckBox?: boolean
): React.ReactNode {
  const rowContents = rows.map((row: NumericTableRow, index: number) => (
    <TableListRow key={index} data-test={row['data-test']}>
      {createCells(
        row,
        rowHeaderCount,
        fixedRowHeader,
        fixedRowHeaderLeftList,
        withCheckBox
      )}
    </TableListRow>
  ));

  return rowContents;
}

const NumericTable: React.FC<Props> = (props: Props) => {
  const {
    headers,
    rows,
    withCheckBox,
    onChangeHeaderCheckBox,
    fixedHeaderOffset,
    fixedHeader,
    hasRowHeader,
    rowHeaderCount: rawRowHeaderCount,
    fixedRowHeader,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const rowHeaderCount = rawRowHeaderCount || (hasRowHeader ? 1 : 0);
  // 今のところ header で colspan を指定できないので、最小単位での width の計算を headers から行う
  // もし指定できるようになった場合は、width の list を受け取るなどして対処する必要がある
  const fixedRowHeaderLeftList = headers
    .slice(0, rowHeaderCount)
    .reduce((acc, _, index, arr) => {
      acc[index] = (acc[index - 1] || 0) + (arr[index - 1]?.width || 0);
      return acc;
    }, Array(rowHeaderCount).fill(0));

  const allEnabledCheckBoxesSelected = React.useMemo(() => {
    const filteredRows = rows.filter((row) => !row.checkBoxDisabled);

    return (
      filteredRows.length > 0 &&
      filteredRows
        .filter((row) => !row.checkBoxDisabled)
        .every((row) => row.checked)
    );
  }, [rows]);

  return (
    <div
      {...commonProps(
        props,
        'vb-numericTable',
        {},
        {
          marginBottom,
          marginLeft,
          marginRight,
          marginSize,
          marginTop,
        }
      )}
    >
      <table className="vb-numericTable__table">
        <thead>
          <TableListHead
            fixedHeader={fixedHeader}
            fixedHeaderOffset={fixedHeaderOffset}
          >
            {createHeader(
              headers,
              rowHeaderCount,
              !!fixedRowHeader,
              fixedRowHeaderLeftList,
              withCheckBox && !!onChangeHeaderCheckBox
                ? {
                    checked: allEnabledCheckBoxesSelected,
                    onChange: onChangeHeaderCheckBox,
                  }
                : undefined
            )}
          </TableListHead>
        </thead>
        <tbody>
          {createRows(
            rows,
            rowHeaderCount,
            !!fixedRowHeader,
            fixedRowHeaderLeftList,
            withCheckBox
          )}
        </tbody>
      </table>
    </div>
  );
};

export default NumericTable;

```

### src/lv2/pageSelector/PageSelector.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import PageSelector from './PageSelector';
import { PopupBase } from '../../lv1';

export default {
  component: PageSelector,
};

export const PageSelectorComponent = () => (
  <PageSelector
    prevDisabled={boolean('PrevDisabled', false, 'PageSelector')}
    nextDisabled={boolean('NextDisabled', false, 'PageSelector')}
    hasDropdown={boolean('HasDropdown', false, 'PageSelector')}
    isExpanded={boolean('IsExpanded', false, 'PageSelector')}
    onClickNext={action('click next')}
    onClickPrev={action('click prev')}
    onClickTitle={action('click title')}
    {...commonKnobs()}
  >
    {text('Children', 'タイトル', 'PageSelector')}
  </PageSelector>
);

export const WithPopup = () => (
  <PageSelector
    renderPopup={() => (
      <PopupBase paddingSize="small">
        <div style={{ minWidth: '11rem' }}>ポップアップ</div>
      </PopupBase>
    )}
    onClickNext={action('click next')}
    onClickPrev={action('click prev')}
    onClickTitle={action('click title')}
  >
    2022年9月
  </PageSelector>
);

export const Samples = () => (
  <>
    <div style={{ marginBottom: '1rem' }}>
      <PageSelector
        onClickNext={action('clickNext')}
        onClickPrev={action('clickPrev')}
      >
        2018年6月
      </PageSelector>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <PageSelector
        onClickNext={action('clickNext')}
        onClickPrev={action('clickPrev')}
        onClickTitle={action('onclickTitle')}
        hasDropdown
      >
        2018年6月
      </PageSelector>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <PageSelector
        nextDisabled
        prevDisabled
        onClickNext={action('clickNext')}
        onClickPrev={action('clickPrev')}
        onClickTitle={action('onclickTitle')}
        hasDropdown
        isExpanded
      >
        2018年6月
      </PageSelector>
    </div>
  </>
);

```

### src/lv2/pageSelector/PageSelector.tsx
```
typescript
import * as React from 'react';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import {
  MdKeyboardArrowLeft,
  MdKeyboardArrowRight,
  MdArrowDropDown,
} from 'react-icons/md';
import { MarginClassProps } from '../../utilities/marginClasses';
import { WithPopup } from '..';
import { Button } from '../../lv1';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type RenderPopupT = Parameters<typeof WithPopup>[0]['renderPopup'];
type Props = {
  prevDisabled?: boolean;
  nextDisabled?: boolean;
  onClickPrev: () => void;
  onClickNext: () => void;
  /**
   * ポップアップを描画するrender functionです。詳細は `WithPopup` の `renderPopup` propを参照してください。
   * Render function for popup. See `renderPopup` prop of `WithPopup for details.
   */
  renderPopup?: RenderPopupT;
  /**
   * タイトル部分 (`children`) をクリックしたときの処理を指定します。 `renderPopup` を使う場合は通常は指定は不要です。
   * 指定すると、タイトル部分はボタンになります。
   * Click-handler for the title (`children`). It is not necessary when using `renderPopup`.
   * If it is defined, title will be rendered as a button.
   */
  onClickTitle?: () => void;
  /**
   * タイトル部分を指定します。 `renderPopup` `onClickTitle` `hasDropdown` のどれかを使う場合、ボタンになります。
   * The title of the page. If `renderPopup` `onClickTitle` or `hasDropdown` is used, it will be rendered as a button.
   */
  children: React.ReactNode;
  /**
   * `renderPopup` を使用してください。`renderPopup` を使う場合は `hasDropdown` の指定は不要です（機能しません）。
   * Use `renderPopup`. If you do, you don't need to set `hasDropdown` (that doesn't make any effect)
   * @deprecated
   */
  hasDropdown?: boolean;
  /**
   * `renderPopup` を使用してください。`renderPopup` を使う場合は `isExpanded` の指定は不要です（機能しません）。
   * Use `renderPopup`. If you do, you don't need to set `isExpanded` (that doesn't make any effect)
   *  @deprecated */
  isExpanded?: boolean;
} & MarginClassProps &
  CommonProps;

/**
 * 月ごとに作られるページなどの切り替えに使用します。
 *
 * - 左右に「前へ」「次へ」ボタンがあります
 * - 中央にタイトル部分があります。クリックすることでポップアップを開くことができます。
 */
const PageSelector: React.FC<Props> = (props: Props) => {
  const {
    prevDisabled,
    nextDisabled,
    onClickNext,
    onClickTitle,
    onClickPrev,
    children,
    renderPopup,
    hasDropdown,
    isExpanded,
    marginTop,
    marginRight,
    marginLeft,
    marginBottom,
    marginSize,
  } = props;
  return (
    <span
      {...commonProps(
        props,
        'vb-pageSelector',
        {},
        {
          marginTop,
          marginRight,
          marginLeft,
          marginBottom,
          marginSize,
        }
      )}
    >
      <IconOnlyButton
        IconComponent={MdKeyboardArrowLeft}
        onClick={onClickPrev}
        disabled={prevDisabled}
        label="前へ"
        mr={0.25}
        small
      />
      {renderPopup ? (
        <WithPopup
          render={(popupId, isOpen, controlRef) => (
            <Button
              aria-haspopup={true}
              aria-expanded={isOpen}
              onClick={onClickTitle}
              aria-controls={popupId}
              ref={
                controlRef as React.RefObject<
                  HTMLButtonElement | HTMLAnchorElement
                >
              }
              iconPosition="right"
              IconComponent={MdArrowDropDown}
              appearance="tertiary"
            >
              {children}
            </Button>
          )}
          renderPopup={renderPopup}
        />
      ) : hasDropdown ? (
        <Button
          aria-haspopup={true}
          aria-expanded={isExpanded}
          onClick={onClickTitle}
          iconPosition="right"
          IconComponent={MdArrowDropDown}
          appearance="tertiary"
        >
          {children}
        </Button>
      ) : onClickTitle ? (
        <Button onClick={onClickTitle} appearance="tertiary">
          {children}
        </Button>
      ) : (
        <span className="vb-pageSelector__currentPage">{children}</span>
      )}
      <IconOnlyButton
        IconComponent={MdKeyboardArrowRight}
        onClick={onClickNext}
        disabled={nextDisabled}
        label="次へ"
        ml={0.25}
        small
      />
    </span>
  );
};
export default PageSelector;

```

### src/lv2/pager/Pager.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { number, boolean } from '@storybook/addon-knobs';
import Pager from './Pager';
import { commonKnobs } from '../../../stories';

export default {
  component: Pager,
};

export const PagerComponent = () => (
  <Pager
    currentPage={number('currentPage', 10, undefined, 'Pager')}
    disabled={boolean('disabled', false, 'Pager')}
    pageCount={number('pageCount', 20, undefined, 'Pager')}
    pageRange={number('pageRange', 5, undefined, 'Pager')}
    sidePageRange={number('sidePageRange', 1, undefined, 'Pager')}
    onPageChange={action('page changed')}
    small={boolean('small', false, 'Pager')}
    {...commonKnobs()}
  />
);
export const Small = () => (
  <Pager
    currentPage={number('currentPage', 500, undefined, 'Pager')}
    pageCount={number('pageCount', 1000, undefined, 'Pager')}
    pageRange={number('pageRange', 7, undefined, 'Pager')}
    sidePageRange={number('sidePageRange', 3, undefined, 'Pager')}
    onPageChange={action('page changed')}
    small
    {...commonKnobs()}
  />
);

class PagerWithHandler extends React.Component<
  Record<string, never>,
  { page: number }
> {
  state = {
    page: 1,
  };

  render() {
    return (
      <Pager
        currentPage={this.state.page}
        pageCount={number('pageCount', 20, undefined, 'Pager')}
        pageRange={number('pageRange', 5, undefined, 'Pager')}
        sidePageRange={number('sidePageRange', 1, undefined, 'Pager')}
        onPageChange={(page: number) => this.setState({ page })}
        {...commonKnobs()}
      />
    );
  }
}
export const WithHandler = () => <PagerWithHandler />;

```

### src/lv2/pager/Pager.tsx
```
typescript
import * as React from 'react';
import PagerButton from '../../lv1/buttons/PagerButton';
import PagerBreak from './PagerBreak';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';
import { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 現在何ページ目にいるか
   */
  currentPage: number;
  /**
   * 全部で何ページあるか
   */
  pageCount: number;
  /**
   * 現在のページを含め、何ページ分のボタンを表示するか（デフォルトは5）
   */
  pageRange?: number;

  /**
   * 最初と最後のページを何ページ分表示するか（デフォルトは1）
   */
  sidePageRange?: number;

  /**
   * Deactivates the page buttons / ページ遷移ボタンを無効化します
   */
  disabled?: boolean;

  onPageChange: (page: number) => void;
  small?: boolean;
} & CommonProps;

const DEFAULT_PAGE_RANGE = 5;
const DEFAULT_SIDE_PAGE_RANGE = 1;
const LEFT_BREAK = 'LEFT_BREAK';
const RIGHT_BREAK = 'RIGHT_BREAK';

// pageの重複を排除
function uniquePages(
  pages: Array<number | string | null>
): Array<number | string | null> {
  const result: Array<number | string | null> = [];
  pages.forEach((page) => {
    if (result.indexOf(page) < 0) {
      result.push(page);
    }
  });
  return result;
}

// buttonとbreakの並びを
// [1,2,LEFT_BREAK,5,6,7,8,9,RIGHT_BREAK,19,20] のように配列で取得
function createPages({
  currentPage,
  pageCount,
  pageRange,
  sidePageRange,
}: {
  currentPage: number;
  pageCount: number;
  pageRange: number;
  sidePageRange: number;
}): Array<number | string | null> {
  // 左端から...までのページ
  const leftSidePages = Array.from(
    { length: sidePageRange },
    (_, i) => i + 1
  ).filter((i) => i > 0 && i <= pageCount);

  // ...から...までのページ
  const centerPages = Array.from(
    { length: pageRange },
    (_, i) => i + currentPage - Math.floor(pageRange / 2)
  )
    .map((_, i) => i + currentPage - Math.floor(pageRange / 2))
    .map((i) => {
      // [-1,0,1,2,3] のようなケースは [1,2,3,4,5] に補正
      if (i < 1) {
        return i + pageRange;
      } else if (i > pageCount) {
        return i - pageRange;
      }
      return i;
    })
    .filter((i) => i > 0 && i <= pageCount)
    .sort((a, b) => a - b);

  // ...から右端までのページ
  const rightSidePages = Array.from(
    { length: sidePageRange },
    (_, i) => pageCount - i
  )
    .filter((i) => i > 0 && i <= pageCount)
    .reverse();

  const pages = [
    ...leftSidePages,
    leftSidePages[leftSidePages.length - 1] < centerPages[0] - 1
      ? LEFT_BREAK
      : null,
    ...centerPages,
    rightSidePages[0] > centerPages[centerPages.length - 1] + 1
      ? RIGHT_BREAK
      : null,
    ...rightSidePages,
  ].filter((i) => i);

  return uniquePages(pages);
}

/**
 * ページャー
 */
const Pager: React.FC<Props> = (props: Props) => {
  const {
    currentPage,
    disabled,
    onPageChange,
    pageCount,
    pageRange = DEFAULT_PAGE_RANGE,
    sidePageRange = DEFAULT_SIDE_PAGE_RANGE,
    small,
  } = props;
  return (
    <nav
      {...commonProps(props, 'vb-pager')}
      role="navigation"
      aria-label="ページ送り"
    >
      <div className="vb-pager__list">
        <IconOnlyButton
          label="前のページへ"
          onClick={(): void => {
            onPageChange(currentPage - 1);
          }}
          disabled={disabled || currentPage === 1}
          mr={1}
          small={small}
          IconComponent={MdKeyboardArrowLeft}
        />

        {createPages({ currentPage, pageCount, pageRange, sidePageRange }).map(
          (page) => {
            if (typeof page === 'number') {
              return (
                <PagerButton
                  key={page}
                  current={page === currentPage}
                  disabled={disabled}
                  onClick={(): void => {
                    page !== currentPage && onPageChange(page);
                  }}
                  marginLeft={page === 1}
                  marginRight
                  small={small}
                  label={`ページ ${page}`}
                >
                  <span>{page}</span>
                </PagerButton>
              );
            }

            return <PagerBreak key={`${page}`} />;
          }
        )}
        <IconOnlyButton
          label="次のページへ"
          onClick={(): void => {
            onPageChange(currentPage + 1);
          }}
          disabled={disabled || currentPage === pageCount}
          ml={1}
          small={small}
          IconComponent={MdKeyboardArrowRight}
        />
      </div>
      <VisuallyHidden autoRead>
        {`${pageCount}ページ中、${currentPage}ページ目を表示中`}
      </VisuallyHidden>
    </nav>
  );
};
export default Pager;

```

### src/lv2/pager/PagerBreak.tsx
```
typescript
import * as React from 'react';
import { MdMoreHoriz } from 'react-icons/md';

const PagerBreak: React.FC = () => {
  return (
    <div className="vb-pager__break">
      <MdMoreHoriz aria-label="中略" />
    </div>
  );
};

export default PagerBreak;

```

### src/lv2/pager/Pagination.stories.tsx
```
typescript
import * as React from 'react';

import { actions } from '@storybook/addon-actions';
import { text, number, select, boolean } from '@storybook/addon-knobs';
import Pagination from './Pagination';
import { commonKnobs } from '../../../stories';

export default {
  component: Pagination,
};

const handlers = actions({
  onChange: 'change',
  onFocus: 'focus',
  onBlur: 'blur',
  onKeyDown: 'keydown',
  onKeyUp: 'keyup',
});

export const PaginationComponent = () => (
  <Pagination
    rowsPerPageOptions={[
      { value: '10' },
      { value: '20' },
      { value: '50' },
      { value: '100' },
      { value: '200' },
    ]}
    currentPage={number('currentPage', 1, {}, 'Pagination')}
    rowCount={number('rowCount', 999, {}, 'Pagination')}
    displayRowCount={text('displayRowCount', '', 'Pagination')}
    selectBoxWidth={
      select(
        'selectBoxWidth',
        {
          xSmall: 'xSmall',
          small: 'small',
          medium: 'medium',
          large: 'large',
        },
        'small',
        'Pagination'
      ) || undefined
    }
    disabled={boolean('disabled', false, 'Pagination')}
    rowsPerPageValue={number('value', 20, {}, 'Pagination')}
    {...handlers}
    {...commonKnobs()}
  />
);

export const InteractiveSample = () => {
  const [rowsPerPageValue, setRowsPerPageValue] = React.useState<string>('20');
  return (
    <Pagination
      rowsPerPageOptions={[
        { value: '10' },
        { value: '20' },
        { value: '50' },
        { value: '100' },
        { value: '200' },
      ]}
      currentPage={number('currentPage', 1, {}, 'Pagination')}
      rowCount={number('rowCount', 999, {}, 'Pagination')}
      displayRowCount={text('displayRowCount', '', 'Pagination')}
      selectBoxWidth={
        select(
          'selectBoxWidth',
          {
            xSmall: 'xSmall',
            small: 'small',
            medium: 'medium',
            large: 'large',
          },
          'small',
          'Pagination'
        ) || undefined
      }
      disabled={boolean('disabled', false, 'Pagination')}
      rowsPerPageValue={Number(rowsPerPageValue)}
      onChange={(e) => setRowsPerPageValue(e.target.value)}
      {...commonKnobs()}
    />
  );
};

export const RowsPerPageOptionName = () => (
  <Pagination
    rowsPerPageOptions={[
      { value: '10', name: 'ten' },
      { value: '20', name: 'twenty' },
      { value: '50', name: 'fifty' },
      { value: '100', name: 'one hundred' },
      { value: '200', name: 'two hundreds' },
    ]}
    currentPage={number('currentPage', 1, {}, 'Pagination')}
    rowCount={number('rowCount', 999, {}, 'Pagination')}
    displayRowCount={text('displayRowCount', '', 'Pagination')}
    selectBoxWidth={
      select(
        'selectBoxWidth',
        {
          xSmall: 'xSmall',
          small: 'small',
          medium: 'medium',
          large: 'large',
        },
        'small',
        'Pagination'
      ) || undefined
    }
    disabled={boolean('disabled', false, 'Pagination')}
    rowsPerPageValue={number('value', 20, {}, 'Pagination')}
    {...handlers}
    {...commonKnobs()}
  />
);

export const WithThousandsSeparator = () => (
  <Pagination
    rowsPerPageOptions={[
      { value: '1000' },
      { value: '2000' },
      { value: '3000' },
    ]}
    currentPage={1}
    rowCount={1500}
    selectBoxWidth="small"
    rowsPerPageValue={1000}
    {...handlers}
    {...commonKnobs()}
  />
);

export const WithSuffixedRowCount = () => (
  <Pagination
    rowsPerPageOptions={[
      { value: '1000' },
      { value: '2000' },
      { value: '3000' },
    ]}
    currentPage={1}
    rowCount={1500}
    displayRowCount={'1000件以上'}
    selectBoxWidth="small"
    rowsPerPageValue={1000}
    {...handlers}
    {...commonKnobs()}
  />
);

export const WithCurrentPageRowCount = () => (
  <Pagination
    rowsPerPageOptions={[{ value: '20' }, { value: '50' }, { value: '100' }]}
    currentPage={3}
    currentPageRowCount={15}
    selectBoxWidth="small"
    rowsPerPageValue={20}
    {...handlers}
    {...commonKnobs()}
  />
);

```

### src/lv2/pager/Pagination.tsx
```
typescript
import * as React from 'react';
import Paragraph from '../../lv1/typography/Paragraph';
import SelectBox from '../../lv1/forms/SelectBox';
import { CommonProps, pickCommonProps } from '../../utilities/commonProps';
import { HStack } from '../../lv1';
import { Digits } from '../../utilities/Digits';

type Props = {
  /**
   * 1ページあたりの表示件数の選択肢。nameの指定がなければ「value件」にする
   */
  rowsPerPageOptions: {
    value: string;
    name?: string;
  }[];

  /**
   * 「1ページあたりの表示件数」 select 要素の value。rowsPerPageValueかdefaultRowsPerPageValueのどちらかを必ず指定してください。（ページ表示の計算のため）
   */
  rowsPerPageValue?: number;

  /**
   * 「1ページあたりの表示件数」 select 要素が非制御の場合の初期値。rowsPerPageValueかdefaultRowsPerPageValueのどちらかを必ず指定してください。（ページ表示の計算のため）
   */
  defaultRowsPerPageValue?: number;

  /**
   * 現在何ページ目にいるか（Pagerと併用するならそれの currentPage と合わせる）
   */
  currentPage: number;

  /**
   * 全部で何レコードあるか
   * rowCountもdisplayRowCountも未指定の場合、レコード総数は表示されません
   */
  rowCount?: number;

  /**
   * 「全部で何レコードあるか」の表示（「XX件以上」といった表示をするときにstringで指定します。指定がなければrowCountの値が表示されます）
   */
  displayRowCount?: string;

  /**
   * 現在のページに何レコードあるか
   * 全件数を持たないなどの理由でrowCountを指定しない場合に渡します
   * 未指定の場合はrowsPerPageValueが参照されます
   * 例） rowsPerPageValueが20、currentPageが3、currentPageRowCountが15の場合、「41 - 55」と表示
   */
  currentPageRowCount?: number;

  /**
   * 表示件数 select 要素の幅です。デフォルトはsmall
   */
  selectBoxWidth?: 'xSmall' | 'small' | 'medium' | 'large';

  /**
   * trueにすると表示件数 select 要素がdisabledになります
   */
  disabled?: boolean;

  /**
   * 表示件数の値が変わったときに発火します。e.target.value で表示件数を取得できます。
   */
  onChange?: (e: React.ChangeEvent<HTMLSelectElement>) => void;

  /**
   * 表示件数のinputにフォーカスが当たったときに発火します。e.target.value で表示件数を取得できます。
   */
  onFocus?: (e: React.FocusEvent<HTMLSelectElement>) => void;

  /**
   * 表示件数のinputからフォーカスがはずれたときに発火します。e.target.value で表示件数を取得できます。
   */
  onBlur?: (e: React.FocusEvent<HTMLSelectElement>) => void;
} & CommonProps;

/**
 * ページネーションがあるコレクション画面で、「1ページの表示件数」と「いま表示されているページ（何件目から何件目が表示されてるのか）」を表示するコンポーネント
 *
 * - 使用例は Examples の Collection を参照してください
 *   - ListTable等の右上に配置することを想定しています
 * - 表示件数の選択肢、表示件数の初期値、いま何ページ目なのか、レコード総数表示は外からpropsで渡します
 *   - Pager コンポーネントと併用する場合、currentPage は Pager と同じ値を渡してください
 *   - レコード総数は実際のレコード数をわたすだけでなく、「1000件以上」といった文字列で渡すことも可能です
 */
const Pagination: React.FC<Props> = (props: Props) => {
  const {
    rowsPerPageOptions,
    currentPage,
    defaultRowsPerPageValue,
    rowsPerPageValue,
    rowCount,
    displayRowCount,
    currentPageRowCount,
    selectBoxWidth,
    disabled,
    onChange,
    onFocus,
    onBlur,
  } = props;

  const options = rowsPerPageOptions.map((option) => {
    return {
      value: option.value,
      name: option.name || Digits.formalize(option.value) + '件',
    };
  });

  const rowsPerPage = rowsPerPageValue || defaultRowsPerPageValue || 0;
  const startNum = Math.min(
    (currentPage - 1) * rowsPerPage + 1,
    rowCount || Infinity
  );
  const endNum = Math.min(
    (currentPage - 1) * rowsPerPage + (currentPageRowCount || rowsPerPage),
    rowCount || Infinity
  );

  return (
    <HStack
      inline
      alignItems="center"
      gap={1}
      wrap="nowrap"
      {...pickCommonProps(props)}
    >
      <SelectBox
        label="表示件数"
        width={selectBoxWidth || 'small'}
        options={options}
        defaultValue={defaultRowsPerPageValue?.toString()}
        disabled={disabled}
        value={rowsPerPageValue?.toString()}
        onChange={onChange}
        onFocus={onFocus}
        onBlur={onBlur}
      />
      <Paragraph inline>
        {Digits.formalize(startNum)} - {Digits.formalize(endNum)}
        {displayRowCount || rowCount
          ? ` / ${Digits.formalize(displayRowCount || rowCount)}`
          : ''}
      </Paragraph>
    </HStack>
  );
};

export default Pagination;

```

### src/lv2/personTag/PersonTag.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import PersonTag from './PersonTag';
import dsSquare from '../../lv1/icons/storyAssets/ds_square.jpeg';

export default {
  component: PersonTag,
};

export const PersonTagComponent = () => (
  <PersonTag
    removable={boolean('Removable', true, 'PersonTag')}
    color={
      select(
        'Color',
        {
          success: 'success',
          error: 'error',
          undefined: '',
        },
        '',
        'PersonTag'
      ) || undefined
    }
    onRemove={action('remove')}
    disabledRemoveButton={boolean('DisabledRemoveButton', false, 'PersonTag')}
    imageUrl={dsSquare}
    {...commonKnobs()}
  >
    {text('Children', '佐々木大輔', 'PersonTag')}
  </PersonTag>
);

export const Color = () => (
  <>
    <div style={{ marginBottom: '1rem' }}>
      <PersonTag imageUrl={dsSquare} color="success" type="success">
        佐々木大輔
      </PersonTag>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <PersonTag imageUrl={dsSquare} color="error" type="error">
        佐々木大輔
      </PersonTag>
    </div>
  </>
);

export const DisabledRemoveButton = () => (
  <div>
    <PersonTag
      removable
      imageUrl={dsSquare}
      disabledRemoveButton
      onRemove={action('onRemove')}
    >
      佐々木大輔
    </PersonTag>
  </div>
);

```

### src/lv2/personTag/PersonTag.tsx
```
typescript
import * as React from 'react';
import { MdCancel } from 'react-icons/md';
import { Keys } from '../../utilities/keyboard';

import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { Avatar } from '../../lv1';

type PersonTagColor = 'success' | 'error';

type Props = {
  children?: string;
  onRemove?: () => any;
  disabledRemoveButton?: boolean;
  removable?: boolean;
  type?: string;
  color?: PersonTagColor;
  imageUrl: string;
} & MarginClassProps &
  CommonProps;

const PersonTag: React.FC<Props> = (props: Props) => {
  const {
    type,
    children,
    removable,
    onRemove,
    disabledRemoveButton,
    color,
    imageUrl,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  const baseClass = 'vb-personTag';
  const classModifier = {
    removable,
    success: color === 'success',
    error: color === 'error',
  };

  const bodyClassName = color
    ? `${baseClass}__body ${baseClass}__body--${color}`
    : `${baseClass}__body`;

  return (
    <span
      {...commonProps(props, baseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    >
      <span className={`${baseClass}__inner`}>
        <Avatar imageUrl={imageUrl} size="small" mr={0.25} />
        {type && <span className={`${baseClass}__type`}>{type}</span>}
        <span className={bodyClassName} title={children}>
          {children}
        </span>
        {removable && (
          <span
            className={`${baseClass}__removeButton${
              disabledRemoveButton
                ? ` ${baseClass}__removeButton--disabled`
                : ''
            }`}
            aria-label={`${children || 'この人'}を削除`}
            tabIndex={disabledRemoveButton ? -1 : 0}
            role="button"
            onClick={() => onRemove && onRemove()}
            onKeyDown={(e) => {
              if (onRemove && (e.key === Keys.ENTER || e.key === Keys.SPACE)) {
                e.preventDefault();
                onRemove();
              }
            }}
          >
            <MdCancel className={`${baseClass}__removeIcon`} />
          </span>
        )}
      </span>
    </span>
  );
};

export default PersonTag;

```

### src/lv2/popupProgressBar/PopupProgressBar.stories.tsx
```
typescript
import * as React from 'react';

import { text, select, number } from '@storybook/addon-knobs';
import PopupProgressBar from './PopupProgressBar';

export default {
  component: PopupProgressBar,
};

export const PopupProgressBarComponent = () => (
  <PopupProgressBar
    status={select(
      'status',
      {
        doing: 'doing',
        done: 'done',
        error: 'error',
      },
      'doing',
      'PopupProgressBar'
    )}
    message={text('message', 'メッセージ', 'PopupProgressBar')}
    progressValue={number('progressValue', 30, undefined, 'PopupProgressBar')}
    progressMaxValue={number(
      'progressMaxValue',
      100,
      undefined,
      'PopupProgressBar'
    )}
    onClose={() => undefined}
  />
);

```

### src/lv2/popupProgressBar/PopupProgressBar.tsx
```
typescript
import * as React from 'react';
import { MdClose, MdDone, MdError } from 'react-icons/md';
import {
  IconOnlyButton,
  InlineSpinner,
  PopupBase,
  ProgressBar,
  MaterialIcon,
} from '../..';
import { CommonProps } from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';

export type ProgressState = {
  status: 'doing' | 'done' | 'error';
  message: string;
  progressValue?: number;
  progressMaxValue?: number;
};

type Props = ProgressState & { onClose: () => void } & CommonProps;

/**
 * 非同期処理の進捗を表示するメッセージ。非同期処理の進捗、完了、エラーに関するメッセージを表示するために使用してください。
 *
 * - 「エラーが起きた」「完了した」など、短いメッセージを伝えるのに使用してください。
 * - あくまで「ユーザーがフィードバックを見落とさないようにする」のを目的として使用してください。
 *   - 「○○は半角で入力してください」のようなエラーの詳細は、このコンポーネントとは別に、画面レイアウト内で表示してください。
 * - `progressValue` または `progressMaxValue` のどちらかが指定されていない場合、ProgressBarではなくアイコンでの表示になります。
 * - onCloseで閉じるボタンを押したときの挙動を指定してください。
 */
const PopupProgressBar: React.FC<Props> = ({
  status,
  message,
  progressValue,
  progressMaxValue,
  onClose,
}: Props) => {
  const indeterminate = progressValue == null || progressMaxValue == null;
  const baseClass = 'vb-popupProgressBar';

  return (
    <PopupBase paddingSize="zero" fitContent>
      <div className={`${baseClass}`}>
        <div className={`${baseClass}__contents`}>
          <div className={`${baseClass}__message`}>
            <div
              className={vbClassNames(`${baseClass}__message-block`, {
                modifier: { small: status === 'done' && !indeterminate },
              })}
            >
              <div className={`${baseClass}__icon`}>
                {indeterminate && status === 'doing' && (
                  <InlineSpinner isLoading large mr={0.5} />
                )}
                {(status === 'done' || status === 'error') && (
                  <MaterialIcon
                    IconComponent={status === 'done' ? MdDone : MdError}
                    success={status === 'done'}
                    error={status === 'error'}
                    small={status === 'done' && !indeterminate}
                    mr={0.5}
                    mt={status === 'done' && !indeterminate ? 0.25 : undefined}
                  />
                )}
              </div>
              <div
                aria-live={status === 'error' ? 'assertive' : 'polite'}
                aria-atomic="true"
              >
                {message}
              </div>
            </div>
            <div>
              {indeterminate ||
                status === 'error' ||
                `${progressValue}/${progressMaxValue}`}
            </div>
          </div>
          {indeterminate || status === 'error' || (
            <ProgressBar
              mt={0.5}
              mb={0.5}
              value={progressValue}
              maxValue={progressMaxValue}
              width="full"
            />
          )}
        </div>
        <div className={`${baseClass}__close`}>
          <IconOnlyButton
            ml={0.5}
            IconComponent={MdClose}
            label="閉じる"
            appearance="tertiary"
            onClick={() => onClose()}
          />
        </div>
      </div>
    </PopupBase>
  );
};
export default PopupProgressBar;

```

### src/lv2/popupProgressBarPortal/PopupProgressBarPortal.stories.tsx
```
typescript
import * as React from 'react';

import PopupProgressBarPortal from './PopupProgressBarPortal';
import { Button } from '../..';

export default {
  component: PopupProgressBarPortal,
};

export const PopupProgressBarComponent = () => (
  <PopupProgressBarPortal
    progressStates={[
      {
        status: 'doing' as const,
        message: 'メッセージ',
        progressValue: 30,
        progressMaxValue: 100,
      },
    ]}
  />
);

export const MultipleExample = () => {
  const exampleProps = [
    {
      status: 'doing' as const,
      message: 'メッセージ',
      progressValue: 30,
      progressMaxValue: 100,
    },
    {
      status: 'done' as const,
      message: 'メッセージ',
    },
    {
      status: 'error' as const,
      message: 'メッセージ',
    },
  ];

  const [example, setExample] = React.useState<number>(0);
  const [examples, setExamples] = React.useState<Array<number>>([]);

  return (
    <>
      <Button
        onClick={() => {
          setExamples([...examples, example]);
          setExample((example + 1) % 3);
        }}
      >
        追加
      </Button>
      <PopupProgressBarPortal
        progressStates={examples.map((example) => exampleProps[example])}
      />
    </>
  );
};

```

### src/lv2/popupProgressBarPortal/PopupProgressBarPortal.tsx
```
typescript
import * as React from 'react';

import { CommonProps } from '../../utilities/commonProps';
import AnimateHeight from 'react-animate-height';
import PopupProgressBar, {
  ProgressState,
} from '../popupProgressBar/PopupProgressBar';

type Props = {
  progressStates: ProgressState[];
} & CommonProps;

const PopupProgressBarWithAnimation = (state: ProgressState) => {
  const [isShow, setIsShow] = React.useState<boolean>(false);

  // フェードインさせるために初期値はfalseにしておく
  React.useEffect(() => {
    setTimeout(() => setIsShow(true), 100);
  }, []);

  React.useEffect(() => {
    if (state.status === 'done') {
      setTimeout(() => {
        setIsShow(false);
      }, 5000);
    }
  }, [state.status]);

  return (
    <AnimateHeight
      duration={isShow ? 250 : 200}
      height={isShow ? 'auto' : 0}
      animateOpacity={true}
    >
      <div className="vb-popupProgressBarPortal__element">
        <PopupProgressBar {...state} onClose={() => setIsShow(false)} />
      </div>
    </AnimateHeight>
  );
};

/**
 * 画面左下にフロート表示するメッセージ。非同期処理の進捗、完了、エラーに関するメッセージを表示するために使用してください。
 *
 * - 「エラーが起きた」「完了した」など、短いメッセージを伝えるのに使用してください。
 * - あくまで「ユーザーがフィードバックを見落とさないようにする」のを目的として使用してください。
 *   - 「○○は半角で入力してください」のようなエラーの詳細は、このコンポーネントとは別に、画面レイアウト内で表示してください。
 * - `done` タイプのメッセージは一定時間経過後に非表示となります。 `error` `doing` に関しては自動的には消えません。
 * - 複数表示する際には、上から古い順に並ぶように表示して下さい。
 * - `progressValue` または `progressMaxValue` のどちらかが指定されていない場合、ProgressBarではなくアイコンでの表示になります。
 */
const PopupProgressBarPortal: React.FC<Props> = ({
  progressStates: states,
}: Props) => {
  return (
    <div className="vb-popupProgressBarPortal">
      {states.map((state, index) => (
        <PopupProgressBarWithAnimation key={index} {...state} />
      ))}
    </div>
  );
};
export default PopupProgressBarPortal;

```

### src/lv2/propsListForm/PropsListForm.stories.tsx
```
typescript
import * as React from 'react';
import PropsListForm from './PropsListForm';
import { commonKnobs } from '../../../stories';
import { number, boolean } from '@storybook/addon-knobs';
import { CheckBox, RadioButton, SelectBox } from '../../lv1';
import { MiniTag } from '../tagBox/MiniTag';

export default {
  component: PropsListForm,
  parameters: {},
};

export const PropsListFormComponent = () => {
  const [values, setValues] = React.useState({
    name: '',
    displayName: '',
    number: 'A0001',
    age: 0,
    entryDate: '2020-01-01',
    custom1: '',
    custom2: 'false',
    custom3: '',
    phoneNumber: '',
    note: '',
  });
  type Values = typeof values;
  const blocks = [
    [
      {
        label: '姓名',
        key: 'name',
        required: true,
        help: ({ readOnly }) => (readOnly ? null : '書類等で使用されます。'),
        annotation: ({ readOnly }) =>
          readOnly ? null : '姓と名の間は空白を入れないでください。',
        field: {
          factor: 'text',
          onChange: (e) => {
            setValues({
              ...values,
              name: e.target.value,
              displayName: e.target.value,
            });
          },
        },
      },
      {
        label: '表示名 （ニックネーム）',
        key: 'displayName',
        help: ({ readOnly }) =>
          readOnly ? null : '書類等には使用されません。',
        required: true,
        field: {
          factor: 'text',
        },
      },
    ],
    [
      {
        label: '従業員番号',
        key: 'number',
        annotation: ({ readOnly }) =>
          readOnly ? null : 'この項目は管理者のみ編集できます。',
        field: { factor: 'read-only-text' },
      },
    ],
    [
      {
        label: '年齢',
        key: 'age',
        field: { factor: 'number', width: 'small' },
      },
    ],
    [
      {
        label: '入社日',
        key: 'entryDate',
        field: { factor: 'date' },
      },
    ],
    [
      {
        label: '電話番号',
        key: 'phoneNumber',
        field: { factor: 'numeral-code' },
      },
    ],
    {
      numberOfColumns: 2,
      definitions: [
        {
          label: '障害 ',
          key: 'custom1',
          field: ({ id }) => (
            <SelectBox
              id={id}
              options={[
                { name: '対象外', value: '0' },
                { name: '障害者', value: '1' },
                { name: '特別障害者', value: '2' },
              ]}
              onChange={(e) => {
                setValues({
                  ...values,
                  custom1: e.target.value,
                });
              }}
            />
          ),
        },
        {
          label: '配偶者',
          key: 'custom2',
          field: () => (
            <>
              <RadioButton
                value="true"
                checked={values.custom2 === 'true'}
                onChange={(e) => {
                  setValues({
                    ...values,
                    custom2: e.target.value,
                  });
                }}
                mr={1}
              >
                有
              </RadioButton>
              <RadioButton
                value="false"
                checked={values.custom2 === 'false'}
                onChange={(e) => {
                  setValues({
                    ...values,
                    custom2: e.target.value,
                  });
                }}
              >
                無
              </RadioButton>
            </>
          ),
        },
        {
          label: '勤労学生',
          key: 'custom3',
          field: () => <CheckBox>該当する</CheckBox>,
        },
      ],
    },
    [
      {
        label: '備考欄',
        key: 'note',
        field: { factor: 'text-area' },
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm
      blocks={blocks}
      width={{ label: number('width.label', 10) }}
      readOnly={boolean('readOnly', false)}
      onChange={(values) => {
        setValues(values as Values);
      }}
      values={values}
      errors={{
        name: ['姓名は必須です。'],
        displayName: [],
        number: [],
        age: [],
        entryDate: [],
        custom1: [],
        custom2: [],
        custom3: [],
        phoneNumber: [],
        note: ['備考欄は200文字以内で入力してください。'],
      }}
      {...commonKnobs()}
    />
  );
};

/**
 * フィールドを固定のカラムで表示したい場合は二次元配列で定義します。<br>
 * 以下のように定義することで、縦一列のフォームが表示されます。<br>
 *
 * ```tsx
 * blocks={[
 *   [
 *     {
 *       label: 'item1',
 *       key: 'item1',
 *       field: { factor: 'text' },
 *     },
 *   ],
 *   [
 *     {
 *       label: 'item2',
 *       key: 'item2',
 *       field: { factor: 'text' },
 *     },
 *   ],
 *   [
 *     {
 *       label: 'item3',
 *       key: 'item3',
 *       field: { factor: 'text' },
 *     },
 *   ],
 * ]}
 * ```
 */
export const OneColumnFixedLengthBlock = () => {
  const values = {
    item1: 'value1',
    item2: 'value2',
    item3: 'value3',
  };
  type Values = typeof values;
  const blocks = [
    [
      {
        label: 'item1',
        key: 'item1',
        field: { factor: 'text' },
      },
    ],
    [
      {
        label: 'item2',
        key: 'item2',
        field: { factor: 'text' },
      },
    ],
    [
      {
        label: 'item3',
        key: 'item3',
        field: { factor: 'text' },
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm blocks={blocks} readOnly={false} values={values as Values} />
  );
};

/**
 * 縦2列で表示したい場合は以下のように定義します。
 *
 * ```tsx
 * blocks={[
 *   [
 *     {
 *       label: 'item1',
 *       key: 'item1',
 *       field: { factor: 'text' },
 *     },
 *     {
 *       label: 'item2',
 *       key: 'item2',
 *       field: { factor: 'text' },
 *     },
 *   ],
 *   [
 *     {
 *       label: 'item3',
 *       key: 'item3',
 *       field: { factor: 'text' },
 *     },
 *     {
 *       label: 'item4',
 *       key: 'item4',
 *       field: { factor: 'text' },
 *     },
 *   ],
 * ]}
 * ```
 */
export const TwoColumnFixedLengthBlock = () => {
  const values = {
    item1: 'value1',
    item2: 'value2',
    item3: 'value3',
    item4: 'value4',
  };
  type Values = typeof values;
  const blocks = [
    [
      {
        label: 'item1',
        key: 'item1',
        field: { factor: 'text' },
      },
      {
        label: 'item2',
        key: 'item2',
        field: { factor: 'text' },
      },
    ],
    [
      {
        label: 'item3',
        key: 'item3',
        field: { factor: 'text' },
      },
      {
        label: 'item4',
        key: 'item4',
        field: { factor: 'text' },
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm blocks={blocks} readOnly={false} values={values as Values} />
  );
};

/**
 * 指定したカラム数で折り返したい場合は、numberOfColumnsとdefinitionsを使用して定義します。<br>
 * numberOfColumnsは折り返すカラム数を表し、definitionsはフィールドの定義を配列で指定します。<br>
 * この方法は、項目を条件に応じて出し分けたい場合に有効です。<br>
 *
 * ```tsx
 * blocks={[{
 *   numberOfColumns: 2,
 *   definitions: [
 *     {
 *       label: 'item1',
 *       key: 'item1',
 *       field: { factor: 'text' },
 *     },
 *     {
 *       label: 'item2',
 *       key: 'item2',
 *       field: { factor: 'text' },
 *     },
 *     {
 *       label: 'item3',
 *       key: 'item3',
 *       field: { factor: 'text' },
 *     },
 *   ],
 * }]}
 * ```
 */
export const VariableLengthBlock = () => {
  const values = {
    item1: 'value1',
    item2: 'value2',
    item3: 'value3',
  };
  const blocks = [
    {
      numberOfColumns: 2,
      definitions: [
        {
          label: 'item1',
          key: 'item1',
          field: { factor: 'text' },
        },
        {
          label: 'item2',
          key: 'item2',
          field: { factor: 'text' },
        },
        {
          label: 'item3',
          key: 'item3',
          field: { factor: 'text' },
        },
      ],
    },
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];
  type Values = typeof values;

  return (
    <PropsListForm blocks={blocks} readOnly={false} values={values as Values} />
  );
};

/**
 * 項目の定義は以下が指定できます。<br>
 *
 * - `label`: 項目名を表すラベルです。
 * - `key`: ユニークな識別子です。
 * - `required`: 必須項目であることを示します。trueの場合、必須ラベルが表示されます。
 * - `help`: ヘルプメッセージです。文字列または関数を指定できます。関数の場合、readOnlyが引数として渡されます。
 * - `annotation`:  項目の説明です。文字列または関数を指定できます。関数の場合、readOnlyが引数として渡されます。
 * - `field`: フィールドの定義です。[フィールドの種別](#field-factors)をfactorで指定します。[カスタムフィールド](#custom-field)を指定する場合は関数を指定します。
 * - `readOnlyValue`:  読み取り専用の値です。readOnlyがtrueの場合に表示されます。指定されていない場合はvalueの値がそのまま表示されます。文字列または関数を指定できます。関数の場合、valueが引数として渡されます。[readOnlyの例](#read-only)を参照してください。
 *
 * ```tsx
 * blocks={[
 *   [
 *     {
 *       label: '姓名',
 *       key: 'name',
 *       required: true,
 *       help: ({ readOnly }) => (readOnly ? null : '書類等で使用されます。'),
 *       annotation: ({ readOnly }) =>
 *         readOnly ? null : '姓と名の間は空白を入れないでください。',
 *       field: { factor: 'text' },
 *     },
 *   ],
 * ]}
 * ```
 */
export const Item = () => {
  const values = {
    name: '',
  };
  type Values = typeof values;
  const blocks = [
    [
      {
        label: '姓名',
        key: 'name',
        required: true,
        help: ({ readOnly }) => (readOnly ? null : '書類等で使用されます。'),
        annotation: ({ readOnly }) =>
          readOnly ? null : '姓と名の間は空白を入れないでください。',
        field: { factor: 'text' },
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm
      blocks={blocks}
      width={{ label: number('width.label', 8) }}
      readOnly={false}
      values={values as Values}
      {...commonKnobs()}
    />
  );
};

/**
 * フィールドごとのfactorは以下のいずれかを指定できます。<br>
 * また、onChangeが指定されている場合は共通のonChangeが無視され、onBlurが指定されている場合は共通のonBlurが無視されます。<br>
 *
 * - `text`: TextFieldのpropsを指定できます。<br>
 * - `text-area`: TextAreaのpropsを指定できます。<br>
 * - `number`: DigitsInputのpropsを指定できます。<br>
 * - `date`: DateInputのpropsを指定できます。<br>
 * - `numeral-code`: NumeralCodeInputのpropsを指定できます。<br>
 * - `read-only-text`: ReadOnlyFieldのpropsを指定できます。<br>
 *
 * TextFieldのpropsをoptionとして指定したtextフィールドの例
 *
 * ```tsx
 * field: {
 *   factor: 'text',
 *   placeholder: 'placeholder',
 *   maxLength: 10,
 *   onChange: (e) => {
 *     console.log(e.target.value);
 * },
 * ```
 *
 * カスタムフィールドを指定したい場合は[カスタムフィールド](#custom-field)を参照してください。
 *
 */
export const FieldFactors = () => {
  const [values, setValues] = React.useState({
    text: '',
    text_area: '',
    number: 0,
    date: '',
    numeral_code: '',
    read_only_text: '',
    custom_field: '',
  });
  type Values = typeof values;
  const blocks = [
    [
      {
        label: 'text',
        key: 'text',
        field: {
          factor: 'text',
        },
      },
    ],
    [
      {
        label: 'text-area',
        key: 'text_area',
        field: {
          factor: 'text-area',
        },
      },
    ],
    [
      {
        label: 'number',
        key: 'number',
        field: {
          factor: 'number',
        },
      },
    ],
    [
      {
        label: 'date',
        key: 'date',
        field: {
          factor: 'date',
        },
      },
    ],
    [
      {
        label: 'numeral-code',
        key: 'numeral_code',
        field: {
          factor: 'numeral-code',
        },
      },
    ],
    [
      {
        label: 'read-only-text',
        key: 'read_only_text',
        field: {
          factor: 'read-only-text',
        },
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm
      blocks={blocks}
      width={{ label: number('width.label', 10) }}
      readOnly={boolean('readOnly', false)}
      onChange={(values) => {
        setValues(values as Values);
      }}
      values={values}
      {...commonKnobs()}
    />
  );
};

/**
 * カスタムフィールドを指定したい場合はfieldにReactNodeを返す関数を渡してください。<br>
 * idとvalueが引数として渡されます。<br>
 * PropsListFormの共通のonChange、onBlurは無視されます。<br>
 *
 * ```tsx
 * field: ({ id, value }) => <SelectBox id={id} value={String(value)} />
 * ```
 */
export const CustomField = () => {
  const [values, setValues] = React.useState({
    custom_field: '',
  });
  type Values = typeof values;
  const blocks = [
    [
      {
        label: 'custom field',
        key: 'custom_field',
        field: ({ id, value }) => <SelectBox id={id} value={String(value)} />,
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm
      blocks={blocks}
      width={{ label: number('width.label', 10) }}
      readOnly={boolean('readOnly', false)}
      onChange={(values) => {
        setValues(values as Values);
      }}
      values={values}
      {...commonKnobs()}
    />
  );
};

/**
 * readOnlyにtrueを指定すると全てのフィールドが読み取り専用になります。<br>
 * fieldごとのreadOnlyValueは省略することができます。<br>
 * readOnlyValueはstring、ReactNodeを指定できます。<br>
 * readOnlyValueが指定されていない場合は、valueがそのまま表示されます。<br>
 * 以下のstoryのコードを参考にしてください。
 */
export const ReadOnly = () => {
  const values = {
    name: 'freee会計',
    is_sales: true,
    tags: [1, 2],
    modified_employee: null,
  };
  type Values = typeof values;
  const blocks = [
    [
      {
        label: '商品名',
        key: 'name',
        field: { factor: 'text' },
        help: ({ readOnly }) => (readOnly ? null : 'フィールド1のヘルプ'),
        annotation: ({ readOnly }) => (readOnly ? null : 'フィールド1の注釈'),
      },
    ],
    [
      {
        label: '販売で利用',
        key: 'is_sales',
        readOnlyValue: '利用する',
        field: { factor: 'text' },
      },
    ],
    [
      {
        label: '会計品目タグ',
        key: 'tags',
        readOnlyValue: () => (
          <>
            <MiniTag mr={0.5}>タグ1</MiniTag>
            <MiniTag mr={0.5}>タグ2</MiniTag>
          </>
        ),
        field: { factor: 'text' },
      },
    ],
    [
      {
        label: '最終更新者',
        key: 'modified_employee',
        field: { factor: 'text' },
      },
    ],
  ] as React.ComponentProps<typeof PropsListForm>['blocks'];

  return (
    <PropsListForm
      blocks={blocks}
      width={{ label: number('width.label', 8) }}
      readOnly={true}
      values={values as Values}
      errors={{ modified_employee: ['従業員の取得に失敗しました'] }}
      {...commonKnobs()}
    />
  );
};

```

### src/lv2/propsListForm/PropsListForm.tsx
```
typescript
import * as React from 'react';
import TextField from '../../lv1/forms/TextField';
import DigitsInput from '../formFields/DigitsInput';
import DateInput from '../formFields/DateInput';
import TextArea from '../../lv1/forms/TextArea';
import FormControlLabel from '../../lv1/forms/FormControlLabel';
import NumeralCodeInput from '../formFields/NumeralCodeInput';
import MessageIcon from '../../lv2/messageIcon/MessageIcon';
import { MarginBase, ReadOnlyField } from '../../lv1';
import Note from '../../lv1/typography/Note';
import { RequiredIcon } from '../../lv1/icons/RequiredIcon';
import WithDescriptionContent from '../../lv1/layout/WithDescriptionContent';
import useUniqueId from '../../hooks/useUniqueId';

type Values = {
  [key: string]: string | number | boolean | object | null;
};

type FixedLengthBlock<T> =
  | [PropsListFormFieldDefinition<T>]
  | [PropsListFormFieldDefinition<T>, PropsListFormFieldDefinition<T>];

type VariableLengthBlock<T> = {
  numberOfColumns: number;
  definitions: Array<PropsListFormFieldDefinition<T>>;
};

type Errors<T extends Values> = Partial<Record<keyof T, string[]>>;

type Props<T extends Values> = {
  /**
   * フィールドの定義です。
   */
  blocks: Array<FixedLengthBlock<T> | VariableLengthBlock<T>>;
  /**
   * labelの幅(rem)を指定します。
   * @default { label: 8 }
   */
  width?: { label?: number };
  /**
   * readOnlyがtrueの場合、入力フィールドを表示しません。
   * @default false
   */
  readOnly: boolean;
  /**
   * 共通のonChangeイベントハンドラーです。
   * fieldのonChangeイベントハンドラーが指定されていた場合は実行されません。
   * `(values) => { console.log(values) }`
   */
  onChange?: (values: T) => void;
  /**
   * 共通のonBlurイベントハンドラーです。<br>
   * fieldのonBlurイベントハンドラーが指定されていた場合は実行されません。<br>
   * `(values) => { console.log(values) }`
   */
  onBlur?: (values: T) => void;
  /**
   * フィールドの値です。<br>
   * keyにはdefinitionのkeyを指定します。
   */
  values: T;
  /**
   * エラーの内容です。<br>
   * keyにはdefinitionのkeyを指定します。
   */
  errors?: Errors<T>;
};

export type PropsListFormFieldDefinition<T> = {
  label: string;
  key: keyof T;
  help?:
    | ((options: { readOnly: boolean }) => React.ReactNode)
    | React.ReactNode;
  readOnlyValue?:
    | ((options: { value: T[keyof T] }) => React.ReactNode)
    | React.ReactNode;
  field?: PropsListFormFieldType<T[keyof T]>;
  annotation?:
    | ((options: { readOnly: boolean }) => React.ReactNode)
    | React.ReactNode;
  required?: boolean;
};

type OmitProps<T> = Omit<T, 'value'>;
type TextFieldProps = OmitProps<React.ComponentProps<typeof TextField>>;
type TextAreaProps = OmitProps<React.ComponentProps<typeof TextArea>>;
type NumberFieldProps = OmitProps<React.ComponentProps<typeof DigitsInput>>;
type DateFieldProps = OmitProps<React.ComponentProps<typeof DateInput>>;
type NumeralCodeInputProps = OmitProps<
  React.ComponentProps<typeof NumeralCodeInput>
>;
type ReadOnlyFieldProps = OmitProps<React.ComponentProps<typeof ReadOnlyField>>;

export type PropsListFormFieldType<V> =
  | ({ factor: 'text' } & TextFieldProps)
  | ({ factor: 'text-area' } & TextAreaProps)
  | ({ factor: 'number' } & NumberFieldProps)
  | ({ factor: 'date' } & DateFieldProps)
  | ({ factor: 'numeral-code' } & NumeralCodeInputProps)
  | ({ factor: 'read-only-text' } & ReadOnlyFieldProps)
  | ((options: { id: string; value: V }) => React.ReactNode);

/**
 * フォームの定義をすることでフォームの一覧表示をすることができるコンポーネントです。<br>
 * DescriptionListとデザイン面で大きく異なるのは2カラム以上で表示することができ、一画面で多くの項目を表示できる点です。
 */
const PropsListForm = <T extends Values>(props: Props<T>) => {
  const { blocks, ...rest } = props;

  return (
    <dl className="vb-propListForm__list--wrap">
      {blocks.map((block, i) => (
        <DLBlock block={block} {...rest} key={i} />
      ))}
    </dl>
  );
};

const Item = <T extends Values>({
  definition,
  itemWidth,
  itemMarginRight,
  ...rest
}: {
  definition: PropsListFormFieldDefinition<T>;
  itemWidth: string;
  itemMarginRight: number;
  values: T;
  errors?: Errors<T>;
  readOnly: boolean;
} & FieldProps) => {
  const { values, errors, readOnly, width } = rest;
  const value = values[definition.key];
  const id = useUniqueId('vb-propListForm__form');
  const readOnlyValue =
    typeof definition.readOnlyValue === 'function' ? (
      definition.readOnlyValue({ value })
    ) : typeof definition.readOnlyValue === 'string' ? (
      <ReadOnlyField valueText={definition.readOnlyValue} />
    ) : (
      definition.readOnlyValue
    );
  const field =
    readOnly && readOnlyValue ? (
      readOnlyValue
    ) : readOnly ? (
      <ReadOnlyField valueText={value != null ? String(value) : undefined} />
    ) : (
      createField(definition, rest, id)
    );
  const fieldErrors = (errors?.[definition.key] || []) as string[];
  const annotation =
    typeof definition.annotation === 'function'
      ? definition.annotation({ readOnly })
      : definition.annotation;
  const help =
    typeof definition.help === 'function'
      ? definition.help({ readOnly })
      : definition.help;

  return (
    <div
      className="vb-propListForm__item"
      style={{
        width: itemWidth,
        marginRight: `${itemMarginRight}rem`,
      }}
    >
      <dt
        className="vb-propListForm__term"
        style={{
          maxWidth: `${width?.label || 8}rem`,
          minWidth: `${width?.label || 8}rem`,
        }}
      >
        <MarginBase mb={0.25} mt={0.25}>
          <span className="vb-propListForm__termInner">
            <FormControlLabel htmlFor={id}>
              <span className="vb-propListForm__termLabel">
                {definition.label}
                {(definition.required || help) && (
                  <span className="vb-propListForm__termIcons">
                    {!readOnly && definition.required && (
                      <RequiredIcon ml={0.5} />
                    )}
                    {help && (
                      <MessageIcon label="ヘルプ" ml={0.25} small>
                        {help}
                      </MessageIcon>
                    )}
                  </span>
                )}
              </span>
            </FormControlLabel>
          </span>
        </MarginBase>
      </dt>
      <dd className="vb-propListForm__description">
        <MarginBase mb={0.25} mt={0.25}>
          <div className="vb-propListForm__descriptionInner">
            <WithDescriptionContent
              renderContent={() => (
                <div className="vb-propListForm__field">
                  {field}
                  {fieldErrors.length > 0 && (
                    <ErrorMessageIcon errors={fieldErrors || []} />
                  )}
                </div>
              )}
              renderDescriptionContent={() =>
                annotation && <Note>{annotation}</Note>
              }
            />
          </div>
        </MarginBase>
      </dd>
    </div>
  );
};

const DLBlock = <T extends Values>({
  block,
  ...rest
}: {
  block: FixedLengthBlock<T> | VariableLengthBlock<T>;
  values: T;
  errors?: Errors<T>;
  readOnly: boolean;
} & FieldProps) => {
  if (Array.isArray(block)) {
    return (
      <>
        {block.map((definition, i) => (
          <Item
            key={i}
            definition={definition}
            itemWidth={`calc((100% - ${1.5 * (block.length - 1)}rem)/${
              block.length
            })`}
            itemMarginRight={i + 1 === block.length ? 0 : 1.5}
            {...rest}
          />
        ))}
      </>
    );
  } else {
    const { definitions, numberOfColumns } = block;

    return (
      <>
        {definitions.map((definition, i) => (
          <Item
            key={i}
            definition={definition}
            itemWidth={`calc((100% - ${
              1.5 * (numberOfColumns - 1)
            }rem)/${numberOfColumns})`}
            itemMarginRight={(i + 1) % numberOfColumns === 0 ? 0 : 1.5}
            {...rest}
          />
        ))}
      </>
    );
  }
};

type FieldProps = {
  /* 列の幅を rem で指定 */
  width?: { label?: number };
};

const ErrorMessageIcon = ({
  errors,
}: {
  errors: string[];
}): React.ReactElement | null => {
  return (
    <MessageIcon error label="エラー" ml={0.5}>
      {errors.map((error, i) => {
        return (
          <li key={i} style={{ listStyle: 'none' }}>
            {error}
          </li>
        );
      })}
    </MessageIcon>
  );
};

const createField = <T extends Values>(
  { label, key, field = { factor: 'text' } }: PropsListFormFieldDefinition<T>,
  props: Omit<Props<T>, 'blocks'>,
  id: string
) => {
  const { values, errors } = props;
  const options = {
    id: id,
    error: errors && ((errors[key] || []) as string[]).length > 0,
    commonOnChange: (value: string | number | null) => {
      const newValues = { ...values, [key]: value };
      props.onChange && props.onChange(newValues);
    },
    commonOnBlur: (value: string | number | null) => {
      const newValues = { ...values, [key]: value };
      props.onBlur && props.onBlur(newValues);
    },
    label: label,
  };

  // フィールドの型指定がシンプルな型名だけの処理
  if (typeof field === 'object') {
    switch (field.factor) {
      case 'text':
        return createTextField(key, values, { ...field, ...options });
      case 'text-area':
        return createTextArea(key, values, { ...field, ...options });
      case 'number':
        return createNumberField(key, values, { ...field, ...options });
      case 'date':
        return createDateField(key, values, { ...field, ...options });
      case 'read-only-text':
        return <ReadOnlyField valueText={String(values[key])} {...field} />;
      case 'numeral-code':
        return createNumeralCodeField(key, values, { ...field, ...options });
    }
  } else if (typeof field === 'function') {
    return field({ id: id, value: values[key] });
  }
};

const createTextField = <T extends Values>(
  key: keyof T,
  values: T,
  options?: TextFieldProps & {
    factor: 'text';
    commonOnChange: (value: string) => void;
  }
) => (
  <TextField
    {...options}
    value={(values[key] || '') + ''}
    onChange={
      options?.onChange
        ? options?.onChange
        : (e) => options?.commonOnChange(e.target.value)
    }
  />
);

const createTextArea = <T extends Values>(
  key: keyof T,
  values: T,
  options?: TextAreaProps & {
    commonOnChange: (value: string) => void;
  }
) => (
  <TextArea
    {...options}
    width={options?.width || 'small'}
    value={(values[key] || '') + ''}
    autoResize={true}
    onChange={
      options?.onChange
        ? options?.onChange
        : (e) =>
            options?.commonOnChange && options?.commonOnChange(e.target.value)
    }
  />
);

const createNumberField = <T extends Values>(
  key: keyof T,
  values: T,
  options?: NumberFieldProps & {
    commonOnChange?: (value: number | null) => void;
  }
) => (
  <DigitsInput
    {...options}
    value={+values[key]}
    onChange={options?.onChange ? options?.onChange : options?.commonOnChange}
  />
);

const createDateField = <T extends Values>(
  key: keyof T,
  values: T,
  options?: DateFieldProps & {
    commonOnChange: (value: string) => void;
    commonOnBlur: (value: string) => void;
  }
) => (
  <DateInput
    {...options}
    value={(values[key] || '') + ''}
    onChange={
      options?.onChange ? options?.onChange : (e) => options?.commonOnChange(e)
    }
    onBlur={
      options?.onBlur
        ? options?.onBlur
        : (e) => options?.commonOnBlur((e.target as HTMLInputElement).value)
    }
  />
);

const createNumeralCodeField = <T extends Values>(
  key: keyof T,
  values: T,
  options?: NumeralCodeInputProps & {
    commonOnChange?: (value: number | null) => void;
  }
) => (
  <NumeralCodeInput
    {...options}
    value={(values[key] || '') + ''}
    onChange={
      options?.onChange
        ? options?.onChange
        : (v) => {
            if (!options?.commonOnChange) return;
            if (v !== '') return options?.commonOnChange(Number(v));
            options?.commonOnChange(null);
          }
    }
  />
);

export default PropsListForm;

```

### src/lv2/scrimCoveredContent/ScrimCoveredContent.stories.tsx
```
typescript
import * as React from 'react';
import { boolean, text } from '@storybook/addon-knobs';

import ScrimCoveredContent from './ScrimCoveredContent';
import Button from '../../lv1/buttons/Button';
import SectionTitle from '../../lv1/typography/SectionTitle';
import TextField from '../../lv1/forms/TextField';
import FormControl from '../formControl/FormControl';
import { commonKnobs } from '../../../stories';

const LOREM =
  'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.';

export default {
  component: ScrimCoveredContent,
};

export const WithKnobs = () => (
  <ScrimCoveredContent
    inline={boolean('inline', false)}
    message={text('message', 'このコンテンツは利用できません')}
    {...commonKnobs()}
  >
    {LOREM}
  </ScrimCoveredContent>
);

export const IsInline = () => (
  <ScrimCoveredContent message="このコンテンツは利用できません" inline>
    <SectionTitle>タイトル</SectionTitle>
    <FormControl>
      <TextField disabled />
      <Button ml={1} disabled>
        Submit
      </Button>
    </FormControl>
  </ScrimCoveredContent>
);

```

### src/lv2/scrimCoveredContent/ScrimCoveredContent.tsx
```
typescript
import * as React from 'react';
import { CommonProps, pickCommonProps } from '../../utilities/commonProps';
import Paragraph from '../../lv1/typography/Paragraph';
import styled from 'styled-components';
import { OverlayZIndex } from '../../constants';
import { CommonStyle } from '../../internal/CommonStyle';

type Props = {
  children: React.ReactNode;
  inline?: boolean;
  message?: React.ReactNode;
} & CommonProps;

const Style = styled(CommonStyle).attrs(({ inline }: { inline?: boolean }) => ({
  inline,
  as: 'div',
}))`
  position: relative;
  ${({ inline }) => ({ display: inline ? 'inline-block' : 'block' })}

  .vb-scrimCoveredContent__cover {
    z-index: ${OverlayZIndex};
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(0.1rem);
  }
`;

/**
 * 非活性なコンテンツにメッセージ付きのスクリムを被せるコンポーネント
 */
const ScrimCoveredContent: React.FC<Props> = ({
  children,
  inline,
  message,
  ...props
}: Props) => (
  <Style inline={inline} {...pickCommonProps(props)}>
    <div className="vb-scrimCoveredContent__cover">
      {message && <Paragraph>{message}</Paragraph>}
    </div>
    {children}
  </Style>
);

export default ScrimCoveredContent;

```

### src/lv2/selectableButton/SelectableButton.stories.tsx
```
typescript
import * as React from 'react';
import { commonKnobs } from '../../../stories';
import SelectableButton from './SelectableButton';
import { HStack } from '../..';

export default {
  component: SelectableButton,
};

export const Base = () => {
  const [selected, setSelected] = React.useState(0);
  return (
    <HStack>
      <SelectableButton
        label="デフォルト"
        selected={selected === 0}
        onClick={() => setSelected(0)}
        {...commonKnobs()}
      />
      <SelectableButton
        label="システムビュー"
        selected={selected === 1}
        onClick={() => setSelected(1)}
        {...commonKnobs()}
      />
      <SelectableButton
        label="バッジ付き"
        selected={selected === 2}
        onClick={() => setSelected(2)}
        badge={3}
        {...commonKnobs()}
      />
      <SelectableButton
        label="カスタムビュー"
        selected={selected === 3}
        onClick={() => setSelected(3)}
        dropdownContents={[
          {
            text: 'ビューを更新',
            type: 'selectable',
            onClick: () => {
              // no-op
            },
          },
          {
            text: 'ビューの名前を変更',
            type: 'selectable',
            onClick: () => {
              // no-op
            },
          },
          {
            text: 'ビューをコピー',
            type: 'selectable',
            onClick: () => {
              // no-op
            },
          },
          {
            text: 'ビューを削除',
            type: 'selectable',
            onClick: () => {
              // no-op
            },
          },
        ]}
        {...commonKnobs()}
      />
    </HStack>
  );
};

```

### src/lv2/selectableButton/SelectableButton.tsx
```
typescript
import * as React from 'react';
import { MdArrowDropDown } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { WithDropdown } from '..';
import { DropdownContent } from '../dropdown/types';

type Props = {
  /**
   * ボタンの選択状態を指定します。
   * The selection state of the button.
   */
  selected?: boolean;
  /**
   * ボタン内に表示するラベルを指定します。
   * The label of the button.
   */
  label: string;
  /**
   * ボタンを押下したときの処理を指定します。
   * The handler when the button is clicked.
   */
  onClick?: () => void;
  /**
   * 選択中のボタンを再選択したときに表示するドロップダウンの内容を指定します。
   * 指定を行わない場合、ドロップダウンは表示されず、通常のボタンのように動作します。
   * The contents of the dropdown to be displayed when the selected button is reselected.
   * If not specified, the dropdown will not be displayed and will behave like a normal button.
   */
  dropdownContents?: DropdownContent[];
  /**
   * バッジに表示する数値を指定します。
   * 0を指定した場合はバッジは表示されません。
   * The number to be displayed in the badge.
   * If 0 is specified, the badge will not be displayed.
   */
  badge?: number;
} & CommonProps;

/**
 * 選択中に再度選択するとドロップダウンを表示できるボタンです。
 */
const SelectableButton: React.FC<Props> = ({
  selected,
  label,
  onClick,
  dropdownContents,
  badge,
  ...props
}: Props) => {
  const baseClass = 'vb-selectableButton';

  return (
    <span {...commonProps(props, baseClass)}>
      {dropdownContents && dropdownContents.length > 0 ? (
        <WithDropdown
          disabled={!selected}
          dropdownContents={dropdownContents}
          renderButton={(popupId, isOpen, controlRef) => (
            <button
              className={`${baseClass}__button ${selected ? 'active' : ''}`}
              onClick={onClick}
              aria-controls={popupId}
              aria-expanded={isOpen}
              ref={controlRef as React.RefObject<HTMLButtonElement>}
            >
              <span className={`${baseClass}__label`}>{label}</span>
              {badge != null && badge > 0 && (
                <span className={`${baseClass}__badge`}>{badge}</span>
              )}
              {selected && (
                <MdArrowDropDown className={`${baseClass}__icon `} />
              )}
            </button>
          )}
        />
      ) : (
        <button
          className={`${baseClass}__button ${selected ? 'active' : ''}`}
          onClick={onClick}
        >
          <span className={`${baseClass}__label`}>{label}</span>
          {badge != null && badge > 0 && (
            <span className={`${baseClass}__badge`}>{badge}</span>
          )}
        </button>
      )}
    </span>
  );
};

export default SelectableButton;

```

### src/lv2/skeleton/SkeletonBlock.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { SkeletonBlock } from './SkeletonBlock';
import { select } from '@storybook/addon-knobs';

export default {
  component: SkeletonBlock,
};
export const SkeletonBlockComponent = () => (
  <SkeletonBlock
    size={select(
      'size',
      {
        small: 'small',
        medium: 'medium',
        large: 'large',
      },
      'medium',
      'SkeletonBlock'
    )}
    {...commonKnobs()}
  />
);

```

### src/lv2/skeleton/SkeletonBlock.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

type Props = {
  /**
   * サイズを指定します
   */
  size?: 'small' | 'medium' | 'large';
} & CommonProps;

const getWidth = (size: 'small' | 'medium' | 'large' = 'medium') => {
  switch (size) {
    case 'small':
      return 4;
    case 'medium':
      return 7.5;
    case 'large':
      return 11;
  }
};

const getHeight = (size: 'small' | 'medium' | 'large' = 'medium') => {
  switch (size) {
    case 'small':
      return 1.5;
    case 'medium':
      return 2.25;
    case 'large':
      return 3;
  }
};

/**
 * ボタンやフォームのフィールドなど用のスケルトンイメージのコンポーネントです
 * This component provides skeleton images for buttons, form fields, and so on.
 */
export const SkeletonBlock: React.FC<Props> = (props) => (
  <div
    {...commonProps(props, 'vb-skeltonBlock', {
      small: props.size === 'small',
      large: props.size === 'large',
    })}
  >
    <SkeletonBase width={getWidth(props.size)} height={getHeight(props.size)} />
  </div>
);

/**
 * @deprecated SkeletonBlock を使ってください。 Use SkeletonBlock instead.
 */
export const SkeltonBlock = SkeletonBlock;

```

### src/lv2/skeleton/SkeletonCircle.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { SkeletonCircle } from './SkeletonCircle';
import { select } from '@storybook/addon-knobs';

export default {
  component: SkeletonCircle,
};
export const SkeletonCircleComponent = () => (
  <SkeletonCircle
    size={select(
      'size',
      {
        small: 'small',
        medium: 'medium',
        large: 'large',
        xlarge: 'xlarge',
      },
      'medium',
      'SkeletonCircle'
    )}
    {...commonKnobs()}
  />
);

```

### src/lv2/skeleton/SkeletonCircle.tsx
```
typescript
import * as React from 'react';
import ContentLoader from 'react-content-loader';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';
import { convertRemToPixel } from '../../utilities/convertRemToPixel';

type Props = {
  /**
   * サイズを指定します
   */
  size?: 'small' | 'medium' | 'large' | 'xlarge';
} & CommonProps;

const getLength = (
  size: 'small' | 'medium' | 'large' | 'xlarge' = 'medium'
) => {
  switch (size) {
    case 'small':
      return 0.75;
    case 'medium':
      return 1;
    case 'large':
      return 1.5;
    case 'xlarge':
      return 3;
  }
};

/**
 * ユーザーアバターなど、円形で表示されるUIパーツ用のスケルトンイメージのコンポーネントです。
 * This component provides a skeleton image of circular UI parts such as user avaters.
 */
export const SkeletonCircle: React.FC<Props> = (props) => {
  const lengthPixel = convertRemToPixel(getLength(props.size));

  return (
    <div
      {...commonProps(props, 'vb-skeltonCircle', {
        small: props.size === 'small',
        large: props.size === 'large',
        xlarge: props.size === 'xlarge',
      })}
    >
      <ContentLoader
        speed={1}
        width={lengthPixel * 2}
        height={lengthPixel * 2}
        viewBox={`0 0 ${lengthPixel * 2} ${lengthPixel * 2}`}
        backgroundColor="rgba(212,212,212,0.3)" // #FFFFFF 上で #F2F2F2
        foregroundColor="rgba(188,188,188,0.3)" // #FFFFFF 上で #ebebeb
      >
        <circle cx={lengthPixel} cy={lengthPixel} r={lengthPixel} />
      </ContentLoader>
    </div>
  );
};

/**
 * @deprecated SkeletonCircle を使ってください。 Use SkeletonCircle instead.
 */
export const SkeltonCircle = SkeletonCircle;

```

### src/lv2/skeleton/SkeletonDescriptionList.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { number } from '@storybook/addon-knobs';
import { SkeletonDescriptionList } from './SkeletonDescriptionList';

export default {
  component: SkeletonDescriptionList,
};

export const SkeletonDescriptionListComponent = () => (
  <SkeletonDescriptionList
    rowCount={number('rowCount', 3, undefined, 'SkeletonDescriptionList')}
    {...commonKnobs()}
  />
);

```

### src/lv2/skeleton/SkeletonDescriptionList.tsx
```
typescript
import React from 'react';
import DescriptionList from '../descriptionList/DescriptionList';
import { SkeletonParagraph } from './SkeletonParagraph';
import { CommonProps } from '../../utilities';

type Props = {
  /**
   * 行数を指定します。デフォルトは３です。
   */
  rowCount?: number;
} & CommonProps;

/**
 * ローディング中の DescriptionList を表現するために使います
 * This component provides a skeleton image of DescriptionList.
 */
export const SkeletonDescriptionList: React.FC<Props> = (props) => {
  const { rowCount = 3, ...commonProps } = props;

  return (
    <DescriptionList
      listContents={Array(rowCount).fill({
        title: <SkeletonParagraph size="small" />,
        value: <SkeletonParagraph size="medium" />,
      })}
      {...commonProps}
    />
  );
};

```

### src/lv2/skeleton/SkeletonIcon.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { SkeletonIcon } from './SkeletonIcon';
import { select } from '@storybook/addon-knobs';

export default {
  component: SkeletonIcon,
};
export const SkeletonIconComponent = () => (
  <SkeletonIcon
    size={select(
      'size',
      {
        small: 'small',
        medium: 'medium',
        large: 'large',
      },
      'medium',
      'SkeletonIcon'
    )}
    {...commonKnobs()}
  />
);

```

### src/lv2/skeleton/SkeletonIcon.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

type Props = {
  /**
   * サイズを指定します
   */
  size?: 'small' | 'medium' | 'large';
} & CommonProps;

const getLength = (size: 'small' | 'medium' | 'large' = 'medium') => {
  switch (size) {
    case 'small':
      return 1.5;
    case 'medium':
      return 2;
    case 'large':
      return 3;
  }
};

/**
 * アイコン用のスケルトンイメージのコンポーネントです。
 * This component provides a skeleton image of icons.
 */
export const SkeletonIcon: React.FC<Props> = (props) => (
  <div
    {...commonProps(props, 'vb-skeltonIcon', {
      small: props.size === 'small',
      large: props.size === 'large',
    })}
  >
    <SkeletonBase
      width={getLength(props.size)}
      height={getLength(props.size)}
    />
  </div>
);

/**
 * @deprecated SkeletonIcon を使ってください。 Use SkeletonIcon instead.
 */
export const SkeltonIcon = SkeletonIcon;

```

### src/lv2/skeleton/SkeletonInput.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import {
  FormControl,
  Paragraph,
  SectionTitle,
  SkeletonInput,
  Stack,
  TextField,
} from '../../';

export default {
  component: SkeletonInput,
};

export const SkeletonInputComponent = () => (
  <SkeletonInput {...commonKnobs()} />
);

const value =
  'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus scelerisque viverra ex ac finibus.';

export const SizeComparison = () => (
  <>
    <Stack gap={1}>
      <SectionTitle>{'<SkeletonInput small width={*} />'}</SectionTitle>
      <Stack direction="horizontal" gap={1}>
        <FormControl label="xSmall">
          <SkeletonInput small width="xSmall" />
        </FormControl>
        <FormControl label="small">
          <SkeletonInput small width="small" />
        </FormControl>
        <FormControl label="medium">
          <SkeletonInput small />
        </FormControl>
        <FormControl label="large">
          <SkeletonInput small width="large" />
        </FormControl>
      </Stack>
      <Stack direction="horizontal" gap={1}>
        <TextField value={value} small width="xSmall" />
        <TextField value={value} small width="small" />
        <TextField value={value} small />
        <TextField value={value} small width="large" />
      </Stack>
      <SectionTitle>{'<SkeletonInput width={*} />'}</SectionTitle>
      <Stack direction="horizontal" gap={1}>
        <FormControl label="xSmall">
          <SkeletonInput width="xSmall" />
        </FormControl>
        <FormControl label="small">
          <SkeletonInput width="small" />
        </FormControl>
        <FormControl label="medium">
          <SkeletonInput />
        </FormControl>
        <FormControl label="large">
          <SkeletonInput width="large" />
        </FormControl>
      </Stack>
      <Stack direction="horizontal" gap={1}>
        <TextField value={value} width="xSmall" />
        <TextField value={value} width="small" />
        <TextField value={value} />
        <TextField value={value} width="large" />
      </Stack>
      <SectionTitle>{'<SkeletonInput large width={*} />'}</SectionTitle>
      <Stack direction="horizontal" gap={1}>
        <FormControl label="xSmall">
          <SkeletonInput large width="xSmall" />
        </FormControl>
        <FormControl label="small">
          <SkeletonInput large width="small" />
        </FormControl>
        <FormControl label="medium">
          <SkeletonInput large />
        </FormControl>
        <FormControl label="large">
          <SkeletonInput large width="large" />
        </FormControl>
      </Stack>
      <Stack direction="horizontal" gap={1}>
        <TextField value={value} large width="xSmall" />
        <TextField value={value} large width="small" />
        <TextField value={value} large />
        <TextField value={value} large width="large" />
      </Stack>
      <SectionTitle>{'<SkeletonInput width="full" />'}</SectionTitle>
    </Stack>
    {/* Stack children does not expand to 100% width  */}
    <Paragraph mt={1}>
      <SkeletonInput small width="full" />
    </Paragraph>
    <Paragraph mt={1}>
      <SkeletonInput width="full" />
    </Paragraph>
    <Paragraph mt={1}>
      <SkeletonInput large width="full" />
    </Paragraph>
  </>
);

```

### src/lv2/skeleton/SkeletonInput.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import commonProps, { CommonProps } from '../../utilities/commonProps';

import { TextFieldWidth } from '../../lv1/forms/TextField';

type Props = {
  /**
   * Makes the height smaller /サイズを小さくします
   */
  small?: boolean;
  /**
   * Makes the height larger / サイズを大きくします
   */
  large?: boolean;
  /**
   * Changes the width / 幅を指定します
   *
   * - xSmall: 4rem (64px)
   * - small: 7rem (112px)
   * - medium (default): 11rem (176px)
   * - large: 24rem (384px)
   * - full: 100%
   */
  width?: TextFieldWidth;
} & CommonProps;

const widthMap = { xSmall: 2, small: 4, medium: 7, large: 16, full: 12 };

/**
 * TextField 等のスケルトンイメージのコンポーネントです。
 * Skeleton image component for TextField related components.
 */
export const SkeletonInput: React.FC<Props> = (props) => {
  const { small, large, width } = props;

  return (
    <span
      {...commonProps(props, 'vb-skeletonInput', {
        small,
        large,
        widthXSmall: width === 'xSmall',
        widthSmall: width === 'small',
        widthMedium: width === 'medium' || !width,
        widthLarge: width === 'large',
        widthFull: width === 'full',
      })}
    >
      <SkeletonBase
        width={widthMap[width || 'medium']}
        height={small ? 0.75 : large ? 1.5 : 1}
      />
    </span>
  );
};

```

### src/lv2/skeleton/SkeletonListTable.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { number } from '@storybook/addon-knobs';
import { SkeletonListTable } from './SkeletonListTable';
import { SkeletonRectangle } from './SkeletonRectangle';
import { SkeletonCircle } from './SkeletonCircle';
import { SkeletonIcon } from './SkeletonIcon';

export default {
  component: SkeletonListTable,
};

export const SkeletonListTableComponent = () => (
  <SkeletonListTable
    columnCount={number('columnCount', 5, undefined, 'SkeletonListTable')}
    rowCount={number('rowCount', 3, undefined, 'SkeletonListTable')}
    {...commonKnobs()}
  />
);

export const CustomSkeletonComponents = () => (
  <SkeletonListTable
    rowCells={[
      { value: <SkeletonRectangle /> },
      { value: <SkeletonCircle /> },
      { value: <SkeletonIcon /> },
    ]}
  />
);

```

### src/lv2/skeleton/SkeletonListTable.tsx
```
typescript
import React from 'react';
import ListTable, { TableCell } from '../listTable/ListTable';
import { SkeletonParagraph } from './SkeletonParagraph';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';

type Props = {
  /**
   * 列数を指定します。デフォルトは５です。
   */
  columnCount?: number;
  /**
   * 行数を指定します。デフォルトは３です。
   */
  rowCount?: number;
  /**
   * 各行に表示するコンポーネント等を指定します。
   * デフォルトでは、１列目に `SkeletonParagraph` の `"medium"`サイズが、２列目以降には `SkeletonParagraph` の `"small"` サイズが表示されます。
   */
  rowCells?: Array<TableCell>;
} & CommonProps;

/**
 * ローディング中のテーブルを表現するために使います
 * This component provides a skeleton image of ListTable.
 */
export const SkeletonListTable: React.FC<Props> = (props) => {
  const { columnCount = 5, rowCount = 3, rowCells, ...commonProps } = props;
  const numberOfColumns = rowCells?.length || columnCount;

  return (
    <ListTable
      headers={Array(numberOfColumns).fill({
        value: <SkeletonBase width={3} height={0.75} />,
      })}
      rows={Array(rowCount).fill({
        cells: rowCells
          ? rowCells
          : Array(numberOfColumns)
              .fill(1)
              .map((_, i) => ({
                value: (
                  <SkeletonParagraph size={i === 0 ? 'medium' : 'small'} />
                ),
              })),
      })}
      {...commonProps}
    />
  );
};

/**
 * @deprecated SkeletonListTable を使ってください。 Use SkeletonListTable instead.
 */
export const SkeltonListTable = SkeletonListTable;

```

### src/lv2/skeleton/SkeletonPageTitle.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { SkeletonPageTitle } from './SkeletonPageTitle';

export default {
  component: SkeletonPageTitle,
};

export const SkeletonPageTitleComponent = () => (
  <SkeletonPageTitle {...commonKnobs()} />
);

```

### src/lv2/skeleton/SkeletonPageTitle.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

/**
 * PageTitle用のスケルトンイメージのコンポーネントです。
 * This component provides a skeleton image of PageTitle component.
 */
export const SkeletonPageTitle: React.FC<CommonProps> = (props) => (
  <div {...commonProps(props, 'vb-skeltonPageTitle')}>
    <SkeletonBase width={12} height={1.5} />
  </div>
);

/**
 * @deprecated SkeletonPageTitle を使ってください。 Use SkeletonPageTitle instead.
 */
export const SkeltonPageTitle = SkeletonPageTitle;

```

### src/lv2/skeleton/SkeletonParagraph.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { select } from '@storybook/addon-knobs';
import { SkeletonParagraph } from './SkeletonParagraph';

export default {
  component: SkeletonParagraph,
};
export const SkeletonParagraphComponent = () => (
  <SkeletonParagraph
    size={select(
      'size',
      {
        small: 'small',
        medium: 'medium',
        large: 'large',
      },
      'medium',
      'SkeletonParagraph'
    )}
    {...commonKnobs()}
  />
);

```

### src/lv2/skeleton/SkeletonParagraph.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

type Props = {
  /**
   * サイズを指定します
   */
  size?: 'small' | 'medium' | 'large';
} & CommonProps;

const getWidth = (size: 'small' | 'medium' | 'large' = 'medium') => {
  switch (size) {
    case 'small':
      return 6;
    case 'medium':
      return 11;
    case 'large':
      return 24;
  }
};
/**
 * Paragraph用のスケルトンイメージのコンポーネントです。
 * This component provides a skeleton image of Paragraph component.
 */
export const SkeletonParagraph: React.FC<Props> = (props) => (
  <div {...commonProps(props, 'vb-skeltonParagraph')}>
    <SkeletonBase width={getWidth(props.size)} height={0.875} />
  </div>
);

/**
 * @deprecated SkeletonParagraph を使ってください。 Use SkeletonParagraph instead.
 */
export const SkeltonParagraph = SkeletonParagraph;

```

### src/lv2/skeleton/SkeletonRectangle.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { SkeletonRectangle } from './SkeletonRectangle';
import { select } from '@storybook/addon-knobs';

export default {
  component: SkeletonRectangle,
};
export const SkeletonRectangleComponent = () => (
  <SkeletonRectangle
    size={select(
      'size',
      {
        default: 'default',
        large: 'large',
      },
      'default',
      'SkeletonRectangle'
    )}
    {...commonKnobs()}
  />
);

```

### src/lv2/skeleton/SkeletonRectangle.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

type Props = {
  /**
   * サイズを指定します
   */
  size?: 'default' | 'large';
} & CommonProps;

const getWidth = (size: 'default' | 'large' = 'default') => {
  switch (size) {
    case 'default':
      return 5;
    case 'large':
      return 18;
  }
};

/**
 * 画像サムネイルなど、大きめの正方形・長方形用のスケルトンイメージのコンポーネントです。
 * This component provides a skeleton images for larger squares or rectangles, such as image thumbnails.
 */
export const SkeletonRectangle: React.FC<Props> = (props) => (
  <div {...commonProps(props, 'vb-skeltonRectangle')}>
    <SkeletonBase width={getWidth(props.size)} height={5} />
  </div>
);

/**
 * @deprecated SkeletonRectangle を使ってください。 Use SkeletonRectangle instead.
 */
export const SkeltonRectangle = SkeletonRectangle;

```

### src/lv2/skeleton/SkeletonSectionTitle.stories.tsx
```
typescript
import * as React from 'react';

import { commonKnobs } from '../../../stories';
import { SkeletonSectionTitle } from './SkeletonSectionTitle';

export default {
  component: SkeletonSectionTitle,
};
export const SkeletonSectionTitleComponent = () => (
  <SkeletonSectionTitle {...commonKnobs()} />
);

```

### src/lv2/skeleton/SkeletonSectionTitle.tsx
```
typescript
import * as React from 'react';
import { SkeletonBase } from '../../lv1/skeleton/SkeletonBase';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

/**
 * SectionTitle用のスケルトンイメージのコンポーネントです。
 * This component provides a skeleton image of SectionTitle component.
 */
export const SkeletonSectionTitle: React.FC<CommonProps> = (props) => (
  <div {...commonProps(props, 'vb-skeltonSectionTitle')}>
    <SkeletonBase width={9} height={1} />
  </div>
);

/**
 * @deprecated SkeletonSectionTitle を使ってください。 Use SkeletonSectionTitle instead.
 */
export const SkeltonSectionTitle = SkeletonSectionTitle;

```

### src/lv2/skeleton/SkeletonStackedBarChart.stories.tsx
```
typescript
import * as React from 'react';

import { SkeletonStackedBarChart } from '../skeleton/SkeletonStackedBarChart';
import { commonKnobs } from '../../../stories';

export default {
  component: SkeletonStackedBarChart,
};

export const SkeletonStackedBarChartComponent = () => (
  <SkeletonStackedBarChart {...commonKnobs()} />
);

```

### src/lv2/skeleton/SkeletonStackedBarChart.tsx
```
typescript
import * as React from 'react';
import ContentLoader from 'react-content-loader';
import { CommonProps } from '../../utilities';
import commonProps from '../../utilities/commonProps';

type Props = CommonProps;

export const SkeletonStackedBarChart: React.FC<Props> = (props) => {
  const width = '100%';
  const height = '0.875rem';

  return (
    <div {...commonProps(props, 'vb-skeletonStackedBarChart')}>
      <ContentLoader
        speed={1}
        width={width}
        height={height}
        viewBox={`0 0 ${width} ${height}`}
        backgroundColor="rgba(212,212,212,0.3)" // #FFFFFF 上で #F2F2F2
        foregroundColor="rgba(188,188,188,0.3)" // #FFFFFF 上で #ebebeb
      >
        <rect x="0" y="0" rx="4" ry="4" width={width} height={height} />
      </ContentLoader>
    </div>
  );
};

```

### src/lv2/stackedBarChart/StackedBarChart.stories.tsx
```
typescript
import * as React from 'react';
import { action } from '@storybook/addon-actions';

import { StackedBarChart } from './StackedBarChart';
import { Paragraph } from '../../lv1';
import { commonKnobs } from '../../../stories';

export default {
  component: StackedBarChart,
};

const colors = ['RE', 'OR', 'YE', 'YG', 'GR', 'BG', 'PU', 'GY'] as const;
const items = colors.map((color, i) => ({
  label: color,
  value: (100 / colors.length) * (i + 1),
  valueLabel: `${(i + 1) * 10}個`,
  color: color,
}));

export const StackedBarChartComponent = () => (
  <StackedBarChart
    items={items}
    onClickItem={action('onClickItem')}
    {...commonKnobs()}
  />
);

export const WithLongLabelItem = () => (
  <>
    <Paragraph mb={1}>ラベルが長い項目は省略されます。</Paragraph>
    <StackedBarChart
      items={[
        {
          label:
            'ラベルが長い項目は省略されますラベルが長い項目は省略されますラベルが長い項目は省略されます',
          value: 30,
          valueLabel: '30%',
          color: 'RE',
        },
        {
          label: '別の項目',
          value: 70,
          valueLabel: '70%',
          color: 'OR',
        },
      ]}
      onClickItem={action('onClickItem')}
    />
  </>
);

export const WithTooSmallValueItem = () => (
  <>
    <Paragraph mb={1}>
      非情に小さな値をもつ項目であっても消失しないように、一定の幅で表示されます。それ以外の項目には残った領域が割り当てられます。
    </Paragraph>
    <StackedBarChart
      items={[
        {
          label: '非情に小さな値をもつ項目であっても、一定の幅で表示されます',
          value: 1,
          valueLabel: '1%',
          color: 'RE',
        },
        {
          label: 'それ以外の項目には残った領域が割り当てられます',
          value: 29,
          valueLabel: '29%',
          color: 'OR',
        },
        {
          label: 'それ以外の項目には残った領域が割り当てられます',
          value: 70,
          valueLabel: '70%',
          color: 'YE',
        },
      ]}
      onClickItem={action('onClickItem')}
    />
    <Paragraph mb={1} mt={2}>
      ただし、項目の値が 0（すなわち割合が 0
      ％）の場合は、項目は表示されません。
    </Paragraph>
    <StackedBarChart
      items={[
        {
          label: '項目の値が 0 の場合は非表示になります',
          value: 0,
          valueLabel: '0%',
          color: 'RE',
        },
        {
          label: 'それ以外の項目には残った領域が割り当てられます',
          value: 30,
          valueLabel: '30%',
          color: 'OR',
        },
        {
          label: '項目の値が 0 の場合は非表示になります',
          value: 0,
          valueLabel: '0%',
          color: 'RE',
        },
        {
          label: 'それ以外の項目には残った領域が割り当てられます',
          value: 70,
          valueLabel: '70%',
          color: 'YE',
        },
        {
          label: '項目の値が 0 の場合は非表示になります',
          value: 0,
          valueLabel: '0%',
          color: 'RE',
        },
      ]}
      onClickItem={action('onClickItem')}
    />
  </>
);

export const TooManyItems = () => {
  const tooManyItems = items.concat(items, items, items);
  return (
    <>
      <Paragraph mb={1}>
        親要素の幅に対して項目の数が多すぎる場合、項目が溢れることがあります。そのため、
        最小幅の 3.375rem × 項目数
        が親要素の幅よりも小さくなることを保証する必要があります。
      </Paragraph>
      <StackedBarChart
        items={tooManyItems}
        onClickItem={action('onClickItem')}
      />
    </>
  );
};

```

### src/lv2/stackedBarChart/StackedBarChart.tsx
```
typescript
import * as React from 'react';
import { CommonProps } from '../../utilities';
import WithBalloon from '../withBalloon/WithBalloon';
import commonProps from '../../utilities/commonProps';
import vbClassNames from '../../utilities/vbClassNames';

export type StackedBarChartItem = {
  color: 'RE' | 'OR' | 'YE' | 'YG' | 'GR' | 'BG' | 'PU' | 'GY';
  /**
   * 項目名
   */
  label: string;
  /**
   * 項目の値。各項目の値の比率に基づいて項目の幅を決定します
   */
  value: number;
  /**
   * 実際に表示される項目の値のラベル。例えば「100名」など
   */
  valueLabel: string;
};

type Props = {
  items: Array<StackedBarChartItem>;
  /**
   * 項目のクリック時に呼び出されるコールバック
   * @param index クリックされた item の index
   */
  onClickItem: (index: number) => void;
} & CommonProps;

/**
 * 与えられた各項目の構成比を、項目の幅によって視覚的に示す帯グラフ。
 * - コンポーネントの振る舞い
 *   - 割合が 0 の項目は表示されません。
 *   - 表示されている項目はクリッカブルで、クリックすることができます。
 *   - 親要素の幅に対して項目の数が多すぎる場合、項目が溢れることがあります。そのため、最小幅の 3.375rem × 項目数が親要素の幅よりも小さくなることを保証する必要があります。
 * - コンポーネントの使用方針
 *   - 全体量に対する割合がある項目を視覚化、フィルターとして利用したい時に使用してください。
 *   - このコンポーネントを使用する場合は、このコンポーネント以外にすべての項目を網羅して表示させることのできるフィルターを同画面内に配置してください。
 *     - Tab や SelectBox など、表示されるものを切り替えられるもの
 *     - 割合が 0 の場合などに、このコンポーネントのみだとありうる項目を網羅して表示させることができないため
 *   - 項目がクリックされフィルタリングされる際は、項目の詳細コンテンツを表示してください。
 *     - 割合が少ない場合、StackedBarChart 内では項目表記が省略されるので視認性観点でも代わりに説明できる手段を残してください。
 *   - 最終的に StackedBarChart を使用するにあたって同画面内に必要なパーツ
 *     - ありうる項目を網羅するフィルターUI（Tab や SelectBox）
 *     - フィルターUIや StackedBarChart の項目をクリックすることで表示される詳細コンテンツ
 */
export const StackedBarChart: React.FC<Props> = (props) => {
  const { items, onClickItem, ...others } = props;
  const sum = items.reduce((acc, item) => acc + item.value, 0);

  // 割合が 0 の項目は非表示
  const visibleItems = React.useMemo(
    () =>
      items.flatMap((item, i) => {
        const proportion = sum > 0 ? item.value / sum : 0;

        if (proportion === 0) {
          return [];
        }

        return {
          ...item,
          proportion,
          originalIndex: i,
        };
      }),
    [items, sum]
  );

  const baseClass = 'vb-stackedBarChart';

  return (
    <ul {...commonProps(others, `${baseClass}__container`)}>
      {visibleItems.map((item, i) => {
        const isFirst = i === 0;
        const isLast = i === visibleItems.length - 1;

        const classModifier = {
          first: isFirst,
          last: isLast,
          RE: item.color === 'RE',
          OR: item.color === 'OR',
          YE: item.color === 'YE',
          YG: item.color === 'YG',
          GR: item.color === 'GR',
          BG: item.color === 'BG',
          PU: item.color === 'PU',
          GY: item.color === 'GY',
        };

        return (
          <li
            className={`${baseClass}__item`}
            key={i}
            style={{
              // ある幅以上の大きさで、割合に応じて幅を伸縮させる
              minWidth: '3.375rem',
              width: `calc(100% * ${item.proportion})`,
              flexGrow: item.proportion,
            }}
          >
            <WithBalloon
              renderBalloonContent={() => `${item.label} ${item.valueLabel}`}
              renderContent={() => (
                <button
                  className={vbClassNames(`${baseClass}__item__button`, {
                    modifier: classModifier,
                  })}
                  onClick={() => onClickItem(item.originalIndex)}
                >
                  {`${item.label} ${item.valueLabel}`}
                </button>
              )}
            />
          </li>
        );
      })}
    </ul>
  );
};

```

### src/lv2/statusSelector/StatusSelector.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select, text } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { commonKnobs } from '../../../stories';
import StatusSelector from './StatusSelector';
import { DropdownContent } from '../dropdown/types';

export default {
  component: StatusSelector,
};

const dropdownContents: DropdownContent[] = [
  {
    type: 'selectable',
    text: '完了',
    onClick: action('onClick-done'),
  },
  {
    type: 'selectable',
    text: '進行中',
    onClick: action('onClick-success'),
  },
  {
    type: 'selectable',
    text: '却下',
    onClick: action('onClick-warning'),
  },
];

export const StatusSelectorComponent = () => (
  <StatusSelector
    dropdownContents={dropdownContents}
    disabled={boolean('disabled', false, 'StatusSelector')}
    type={
      select(
        'Type',
        [
          '',
          'done',
          'success',
          'progress',
          'required',
          'disabled',
          'emphasis',
          'warning',
          'error',
        ],
        '',
        'StatusSelector'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text('Children', 'ラベル', 'StatusSelectorComponent')}
  </StatusSelector>
);

export const Samples = () => (
  <div>
    <StatusSelector
      type="done"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      done
    </StatusSelector>
    <StatusSelector
      type="success"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      success
    </StatusSelector>
    <StatusSelector
      type="progress"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      progress
    </StatusSelector>
    <StatusSelector
      type="required"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      required
    </StatusSelector>
    <StatusSelector
      type="disabled"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      disabled
    </StatusSelector>
    <StatusSelector
      type="emphasis"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      emphasis
    </StatusSelector>
    <StatusSelector
      type="warning"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      warning
    </StatusSelector>
    <StatusSelector
      type="error"
      dropdownContents={dropdownContents}
      marginRight
      marginBottom
    >
      error
    </StatusSelector>
  </div>
);

```

### src/lv2/statusSelector/StatusSelector.tsx
```
typescript
import * as React from 'react';
import { StatusType } from '../../lv1/icons/StatusIcon';
import WithDropdown from '../withDropdown/WithDropdown';
import { DropdownContent } from '../dropdown/types';
import { MdArrowDropDown } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { MarginClassProps } from '../../utilities/marginClasses';

type Props = {
  children?: React.ReactNode;
  /**
   * color type を指定します
   */
  type?: StatusType;
  /**
   * ドロップダウンで選択するステータスを指定します
   */
  dropdownContents: DropdownContent[];
  /**
   * ドロップダウン選択を disabled に設定します
   */
  disabled?: boolean;
} & MarginClassProps &
  CommonProps;

/**
 * StatusIconをクリッカブルにし、ドロップダウンから選択してステータスを切り替えられるようにしたコンポーネントです。
 *
 * 用途や type の使い分けについては StatusIcon の doc を参照してください。
 */
const StatusSelector: React.FC<Props> = (props: Props) => {
  const {
    dropdownContents,
    disabled,
    children,
    type,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;

  const statusSelectorBaseClass = 'vb-statusSelector';

  const camelCase = (str: string) => {
    const s = str.charAt(0).toLowerCase() + str.slice(1);
    return s.replace(/[-_](.)/g, (_, group1) => group1.toUpperCase());
  };

  const classModifier = [
    'done',
    'success',
    'progress',
    'required',
    'disabled',
    'emphasis',
    'warning',
    'error',
  ].reduce(
    (acm, mod) => ({ ...acm, [camelCase(`type_${mod}`)]: type === mod }),
    {
      disabled,
    }
  );

  return (
    <WithDropdown
      dropdownContents={dropdownContents}
      disabled={disabled}
      renderButton={(dropdownId, isOpen, buttonRef) => (
        <button
          {...commonProps(props, statusSelectorBaseClass, classModifier, {
            marginBottom,
            marginLeft,
            marginRight,
            marginTop,
            marginSize,
          })}
          aria-disabled={disabled}
          aria-haspopup={true}
          aria-controls={dropdownId}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          {children}
          <MdArrowDropDown
            className={`${statusSelectorBaseClass}__dropdownIcon`}
          />
        </button>
      )}
    />
  );
};
export default StatusSelector;

```

### src/lv2/stepper/Stepper.stories.tsx
```
typescript
import * as React from 'react';

import Stepper from './Stepper';
import { number, boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';

export default {
  component: Stepper,
};

export const StepperComponent = () => (
  <Stepper
    steps={['step1', 'step2', 'step3', 'step4', 'step5']}
    currentStepIndex={number(
      'currentStepIndex',
      2,
      { min: 0, max: 4 },
      'Stepper'
    )}
    disabledStepIndex={[3, 4]}
    small={boolean('small', false, 'Stepper')}
    {...commonKnobs()}
  />
);

export const Small = () => (
  <Stepper
    steps={['step1', 'step2', 'step3', 'step4', 'step5']}
    currentStepIndex={2}
    disabledStepIndex={[3, 4]}
    small
    {...commonKnobs()}
  />
);

export const StepperWithReactNode = () => (
  <Stepper
    steps={[
      <>
        長いと
        <br />
        改行したく
        <br />
        なる
      </>,
      <>
        ちょっと
        <br />
        <strong>強調</strong>
        <br />
        してみる
      </>,
      'step3',
      'step4',
      'step5',
    ]}
    currentStepIndex={number(
      'currentStepIndex',
      2,
      { min: 0, max: 4 },
      'Stepper'
    )}
    disabledStepIndex={[3, 4]}
    small={boolean('small', false, 'Stepper')}
    {...commonKnobs()}
  />
);

```

### src/lv2/stepper/Stepper.tsx
```
typescript
import * as React from 'react';
import { Stack, StepNumber, Text } from '../../lv1';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  currentStepIndex: number;
  disabledStepIndex: Array<number>;
  small?: boolean;
  steps: Array<React.ReactNode>;
} & CommonProps;

const Stepper: React.FC<Props> = (props: Props) => {
  const { steps, currentStepIndex, disabledStepIndex, small } = props;
  const stepperBaseClass = 'vb-stepper';

  return (
    <ul {...commonProps(props, stepperBaseClass, { small })}>
      {steps.map((name, i) => (
        <li key={i} className={`${stepperBaseClass}__listItem`}>
          <div className={`${stepperBaseClass}__listContent`}>
            <Stack
              direction="vertical"
              gap={small ? 0.25 : 0.5}
              alignItems="center"
            >
              <StepNumber
                number={(i + 1).toString()}
                current={currentStepIndex === i}
                done={currentStepIndex > i}
                small={small}
                disabled={disabledStepIndex.includes(i)}
              />
              <Text color={currentStepIndex === i ? 'P5' : 'S9'} size={0.75}>
                {name}
              </Text>
            </Stack>
          </div>
        </li>
      ))}
    </ul>
  );
};

export default Stepper;

```

### src/lv2/stepper/VerticalSteps.stories.tsx
```
typescript
import * as React from 'react';
import { select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { VerticalSteps } from './VerticalSteps';
import {
  Button,
  Paragraph,
  HStack,
  OptionButton,
  RadioButton,
  VStack,
  TextField,
  CheckBox,
} from '../../lv1';
import { DescriptionList, FormattedTextField, FormControl } from '..';

export default {
  component: VerticalSteps,
};

export const StepperComponent = () => {
  const [stepIndex, setStepIndex] = React.useState(0);
  const [formValues, setFormValues] = React.useState({
    paymentMethod: 'prepayment',
    postalCode: '',
    address: '',
    name: '',
    cool: false,
  });
  return (
    <VerticalSteps
      currentStepIndex={stepIndex}
      stepHeadlineLevel={select(
        'stepHeadlineLevel',
        {
          '1': 1,
          '2': 2,
          '3': 3,
          '4': 4,
          '5': 5,
          '6': 6,
          '-1': -1,
          undefined: undefined,
        },

        undefined,
        'VerticalSteps'
      )}
      steps={[
        {
          title: '料金の支払い方法を選んでください',
          content: (
            <>
              <HStack>
                <OptionButton
                  size="large"
                  checked={formValues.paymentMethod === 'prepayment'}
                >
                  <RadioButton
                    name="paymentMethod"
                    value="prepaid"
                    checked={formValues.paymentMethod === 'prepayment'}
                    onChange={(e) =>
                      e.target.checked &&
                      setFormValues({
                        ...formValues,
                        paymentMethod: 'prepayment',
                      })
                    }
                  >
                    元払い
                  </RadioButton>
                </OptionButton>
                <OptionButton
                  size="large"
                  checked={formValues.paymentMethod === 'postpayment'}
                >
                  <RadioButton
                    name="paymentMethod"
                    value="postpayment"
                    checked={formValues.paymentMethod === 'postpayment'}
                    onChange={(e) =>
                      e.target.checked &&
                      setFormValues({
                        ...formValues,
                        paymentMethod: 'postpayment',
                      })
                    }
                  >
                    着払い
                  </RadioButton>
                </OptionButton>
              </HStack>
            </>
          ),
          contentSummary: (
            <Paragraph>
              {formValues.paymentMethod === 'postpayment' ? '着' : '元'}払い
            </Paragraph>
          ),
          actions: (
            <Button
              appearance="primary"
              onClick={() => setStepIndex(stepIndex + 1)}
            >
              次へ
            </Button>
          ),
        },
        {
          title: '送り先情報を入力してください',
          content: (
            <VStack>
              <FormControl label="郵便番号" fieldId="stepper-2-postal-code">
                <FormattedTextField
                  preset="postalCode"
                  id="stepper-2-postal-code"
                  value={formValues.postalCode}
                  onChange={(e) =>
                    setFormValues({ ...formValues, postalCode: e.target.value })
                  }
                  autoComplete="postal-code"
                />
              </FormControl>
              <FormControl label="住所" fieldId="stepper-2-address">
                <TextField
                  id="stepper-2-address"
                  width="large"
                  value={formValues.address}
                  onChange={(e) =>
                    setFormValues({ ...formValues, address: e.target.value })
                  }
                  autoComplete="street-address"
                />
              </FormControl>
              <FormControl label="受取人" fieldId="stepper-2-postal-code">
                <TextField
                  id="stepper-2-postal-code"
                  width="large"
                  value={formValues.name}
                  onChange={(e) =>
                    setFormValues({ ...formValues, name: e.target.value })
                  }
                />
              </FormControl>
            </VStack>
          ),
          contentSummary: (
            <>
              {formValues.postalCode ? (
                <Paragraph>〒{formValues.postalCode}</Paragraph>
              ) : (
                ''
              )}
              {formValues.address || formValues.name ? (
                <Paragraph>
                  {formValues.address} {formValues.name}
                </Paragraph>
              ) : (
                ''
              )}
            </>
          ),
          actions: (
            <HStack>
              <Button
                appearance="primary"
                onClick={() => setStepIndex(stepIndex + 1)}
              >
                次へ
              </Button>
              <Button onClick={() => setStepIndex(stepIndex - 1)}>戻る</Button>
            </HStack>
          ),
        },
        {
          title: 'オプションを選択しましょう',
          content: (
            <OptionButton checked={formValues.cool} size="medium">
              <CheckBox
                name="cool"
                checked={formValues.cool}
                onChange={(e) =>
                  setFormValues({ ...formValues, cool: e.target.checked })
                }
              >
                クール便を使用する
              </CheckBox>
            </OptionButton>
          ),
          contentSummary: (
            <>
              {formValues.cool ? <Paragraph>クール便を使用する</Paragraph> : ''}
            </>
          ),
          actions: (
            <HStack>
              <Button
                appearance="primary"
                onClick={() => setStepIndex(stepIndex + 1)}
              >
                次へ
              </Button>
              <Button onClick={() => setStepIndex(stepIndex - 1)}>戻る</Button>
            </HStack>
          ),
        },
        {
          title: '内容を確認して、送信しましょう',
          content: (
            <>
              <DescriptionList
                listContents={[
                  {
                    title: '支払い方法',
                    value:
                      formValues.paymentMethod === 'postpayment'
                        ? '着払い'
                        : '元払い',
                  },
                  {
                    title: '送付先',
                    value: (
                      <>
                        {formValues.postalCode ? (
                          <Paragraph>〒{formValues.postalCode}</Paragraph>
                        ) : (
                          ''
                        )}
                        {formValues.address || formValues.name ? (
                          <Paragraph>
                            {formValues.address} {formValues.name}
                          </Paragraph>
                        ) : (
                          ''
                        )}
                      </>
                    ),
                  },
                  {
                    title: 'オプション',
                    value: formValues.cool ? 'クール便を使用する' : '',
                  },
                ]}
              />
            </>
          ),
          actions: (
            <HStack>
              <Button appearance="primary">送信</Button>
              <Button onClick={() => setStepIndex(stepIndex - 1)}>戻る</Button>
            </HStack>
          ),
        },
      ]}
      {...commonKnobs()}
    />
  );
};

```

### src/lv2/stepper/VerticalSteps.tsx
```
typescript
import * as React from 'react';
import useUniqueId from '../../hooks/useUniqueId';
import { StepNumber, VisuallyHidden } from '../../lv1';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type Props = {
  /**
   * 現在のステップの位置（0始まり）
   */
  currentStepIndex: number;
  steps: {
    /**
     * ステップのタイトル
     */
    title: React.ReactNode;
    /**
     * ステップの内容。現在のステップの内容のみ表示されます。
     */
    content: React.ReactNode;
    /**
     * ステップから次へ進む/目に戻るアクションのボタン
     */
    actions?: React.ReactNode;
    /**
     * 以前のステップでのユーザーの入力内容のサマリー
     */
    contentSummary?: React.ReactNode;
  }[];
  /**
   * ステップのタイトル部分の見出しレベル。`-1` にすると見出し要素ではなくなります。
   */
  stepHeadlineLevel?: 1 | 2 | 3 | 4 | 5 | 6 | -1;
} & CommonProps;

/**
 * ユーザーに手順を提示し、順番に沿って操作させるためのコンポーネントです。
 *
 * - 手順ごとに `title` `content` `contentSummary` `actions` を指定できます。
 *   - `title` は常に表示されます
 *   - `content` はステップの内容で、フォーム等を配置します。現在のステップのみ表示されます
 *   - `actions` はステップを完了する、または前のステップに戻るボタンを配置します。現在のステップにのみ表示されます。
 *   - `contentSummary` はステップでのユーザーの入力・選択内容の概要を表現します。通過したステップにのみ表示されます
 *     - `contentSummary` にはステップで入力・選択した結果のみを含め、インタラクティブなものを含めないでください
 * - 各ステップの `title` は見出しとなります。デフォルトの見出しレベルは2ですが、 `stepHeadlineLevel` により変更ができます
 *   - `-1` にすると、見出しではなくなります。
 */
export const VerticalSteps: React.FC<Props> = ({
  currentStepIndex,
  steps,
  stepHeadlineLevel = 2,
  ...props
}) => {
  const className = 'vb-verticalSteps';
  const StepHeadlineTag =
    stepHeadlineLevel === 1
      ? 'h1'
      : stepHeadlineLevel === 2
      ? 'h2'
      : stepHeadlineLevel === 3
      ? 'h3'
      : stepHeadlineLevel === 4
      ? 'h4'
      : stepHeadlineLevel === 5
      ? 'h5'
      : stepHeadlineLevel === 6
      ? 'h6'
      : 'div';
  const uniqueId = useUniqueId(className);
  const selfRef = React.useRef<HTMLDivElement>(null);
  const renderedFlagRef = React.useRef(false);
  const getStepTitleIdFromIndex = (index: number, uniqueId: string) =>
    `${uniqueId}__title-${index + 1}`;
  React.useEffect(() => {
    if (renderedFlagRef.current && selfRef.current) {
      const elm = selfRef.current.querySelector(
        `#${getStepTitleIdFromIndex(currentStepIndex, uniqueId)}`
      );
      if (elm) {
        (elm as HTMLElement).focus();
      }
    } else if (uniqueId) {
      renderedFlagRef.current = true;
    }
  }, [currentStepIndex, uniqueId]);

  return (
    <div {...commonProps(props, className)} ref={selfRef} id={uniqueId}>
      {steps.map(({ title, content, contentSummary, actions }, i) => (
        <div key={i} className={`${className}__step`}>
          {/* マークアップ都合でStepNumber部分を見出しに含められないため、aria-hiddenして、見出し側にVisuallyHiddenで番号を書いている */}
          <div className={`${className}__number`} aria-hidden="true">
            <StepNumber
              number={i + 1}
              current={currentStepIndex === i}
              done={i < currentStepIndex}
            />
          </div>
          <StepHeadlineTag
            className={`${className}__title${
              i > currentStepIndex ? ` ${className}__title--future` : ''
            }`}
            id={getStepTitleIdFromIndex(i, uniqueId)}
            tabIndex={-1}
            aria-current={currentStepIndex === i ? 'step' : undefined}
          >
            <VisuallyHidden>{i + 1}</VisuallyHidden>
            {title}
          </StepHeadlineTag>
          <div className={`${className}__content`}>
            {i === currentStepIndex
              ? content
              : i < currentStepIndex
              ? contentSummary
              : ''}

            {actions && i === currentStepIndex && (
              <div className={`${className}__actions`}>{actions}</div>
            )}
          </div>
        </div>
      ))}
    </div>
  );
};

```

### src/lv2/tabBar/TabBar.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';

import TabBar from './TabBar';
import { commonKnobs } from '../../../stories';
import { select, boolean } from '@storybook/addon-knobs';
import Button from '../../lv1/buttons/Button';
import IconOnlyButton from '../../lv1/buttons/IconOnlyButton';
import { MdDelete, MdEdit } from 'react-icons/md';
import StatusIcon from '../../lv1/icons/StatusIcon';

export default {
  component: TabBar,
};

export const TabBarComponent = () => (
  <TabBar
    tabs={['tab1', 'tab2', 'tab3', 'tab4', 'tab5']}
    currentTabIndex={select(
      'currentTabIndex',
      {
        '0': 0,
        '1': 1,
        '2': 2,
        '3': 3,
        '4': 4,
      },
      3,
      'TabBar'
    )}
    small={boolean('small', false, 'TabBar')}
    onClickTab={action('tabclicked')}
    {...commonKnobs()}
  />
);

export const WithDataAttributes = () => (
  <TabBar
    tabs={['tab1', 'tab2', 'tab3', 'tab4', 'tab5'].map((name) => ({
      name,
      'data-guide': name,
      'data-test': name,
      'data-tracking': name,
    }))}
    currentTabIndex={3}
    onClickTab={action('tabclicked')}
    {...commonKnobs()}
  />
);

export const WithDataAttributesAndReactElement = () => (
  <TabBar
    tabs={['tab1', 'tab2', 'tab3', 'tab4', 'tab5'].map((name) => ({
      name: (
        <>
          {name}
          <StatusIcon type="success" marginLeft>
            success
          </StatusIcon>
        </>
      ),
      'data-guide': name,
      'data-test': name,
      'data-tracking': name,
    }))}
    currentTabIndex={3}
    onClickTab={action('tabclicked')}
    {...commonKnobs()}
  />
);

export const WithButtons = () => (
  <TabBar
    tabs={['tab1', 'tab2', 'tab3', 'tab4', 'tab5']}
    currentTabIndex={3}
    onClickTab={action('tabclicked')}
    renderButtons={() => [
      <Button key={0} appearance="tertiary">
        新規登録
      </Button>,
      <IconOnlyButton
        label="編集"
        IconComponent={MdEdit}
        key={1}
        appearance="tertiary"
      />,
      <IconOnlyButton
        label="削除"
        IconComponent={MdDelete}
        key={2}
        appearance="tertiary"
      />,
    ]}
    {...commonKnobs()}
  />
);

export const WithNotifications = () => (
  <TabBar
    tabs={[
      {
        name: 'tab1',
        notification: 'New message has arrived',
      },
      {
        name: 'tab2',
      },
      {
        name: 'tab3',
        notification: 'New message has arrived',
      },
    ]}
    currentTabIndex={1}
    onClickTab={action('tabclicked')}
    {...commonKnobs()}
  />
);

```

### src/lv2/tabBar/TabBar.tsx
```
typescript
import * as React from 'react';
import Tab from '../../lv1/interactiveParts/Tab';
import { KeyCodes } from '../../utilities/keyboard';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import ButtonGroup from '../buttonGroup/ButtonGroup';

export type TabElement =
  | string
  | {
      name: React.ReactNode;
      notification?: string;
      'data-guide'?: string;
      'data-test'?: string;
      'data-tracking'?: string;
      'data-masking'?: boolean;
    };
type Props = {
  tabs: Array<TabElement>;
  currentTabIndex: number;
  small?: boolean;
  onClickTab: (i: number) => void;
  renderButtons?: () => React.ReactNode | React.ReactNodeArray;
} & CommonProps;

const TabBar: React.FC<Props> = ({
  currentTabIndex,
  onClickTab,
  small,
  tabs,
  renderButtons,
  ...props
}: Props) => {
  const selfRef = React.useRef<HTMLDivElement>(null);
  const [selectedTabIndex, setSelectedTabIndex] =
    React.useState<number>(currentTabIndex);

  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>): void => {
    const focusableItems = selfRef.current
      ? selfRef.current.querySelectorAll('.vb-tab')
      : null;

    if (!focusableItems) {
      return;
    }

    switch (e.keyCode) {
      case KeyCodes.LEFT: {
        const newIndex =
          (selectedTabIndex < 0 ? currentTabIndex : selectedTabIndex) - 1;
        const newTab = focusableItems[newIndex];
        if (newTab) {
          setSelectedTabIndex(newIndex);
          (newTab as HTMLButtonElement).focus();
        }
        break;
      }
      case KeyCodes.RIGHT: {
        const newIndex =
          (selectedTabIndex < 0 ? currentTabIndex : selectedTabIndex) + 1;

        const newTab = focusableItems[newIndex];
        if (newTab) {
          setSelectedTabIndex(newIndex);
          (newTab as HTMLButtonElement).focus();
        }
        break;
      }
      case KeyCodes.TAB: {
        setSelectedTabIndex(currentTabIndex);
        break;
      }
    }
  };
  const handleFocus = (e: React.FocusEvent<HTMLDivElement>): void => {
    const focusableItems = selfRef.current
      ? selfRef.current.querySelectorAll('.vb-tab')
      : null;
    if (focusableItems && e.target) {
      const index = Array.prototype.indexOf.call(focusableItems, e.target);
      if (index >= 0) {
        setSelectedTabIndex(index);
      }
    }
  };

  return (
    <div
      onKeyDown={handleKeyDown}
      onFocus={handleFocus}
      role="tablist"
      tabIndex={-1}
      {...commonProps(props, 'vb-tabBar')}
      ref={selfRef}
    >
      <div>
        {tabs.map((tab: TabElement, i: number) => (
          <Tab
            key={i}
            current={currentTabIndex === i}
            small={small && true}
            selected={selectedTabIndex === i}
            onClick={(): void => onClickTab(i)}
            data-guide={typeof tab !== 'string' ? tab['data-guide'] : undefined}
            data-test={typeof tab !== 'string' ? tab['data-test'] : undefined}
            data-tracking={
              typeof tab !== 'string' ? tab['data-tracking'] : undefined
            }
            data-masking={
              typeof tab !== 'string' ? tab['data-masking'] : undefined
            }
            notification={
              typeof tab !== 'string' && tab.notification
                ? tab.notification
                : undefined
            }
          >
            {typeof tab !== 'string' ? tab.name : tab}
          </Tab>
        ))}
      </div>
      {renderButtons && <ButtonGroup ml={1}>{renderButtons()}</ButtonGroup>}
    </div>
  );
};
export default TabBar;

```

### src/lv2/tagBox/MiniTag.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import { MiniTag } from './MiniTag';

export default {
  component: MiniTag,
};

export const MiniTagComponent = () => (
  <MiniTag
    type={text('type', '取引先', 'MiniTag')}
    disabledRemoveButton={boolean('disabledRemoveButton', true, 'MiniTag')}
    removable={boolean('removable', true, 'MiniTag')}
    removeButtonTabIndex={select(
      'removeButtonTabIndex',
      { none: undefined, '0': 0, '-1': -1 },
      undefined,
      'MiniTag'
    )}
    onRemove={action('onRemove')}
    color={
      select(
        'Color',
        {
          RE: 'RE',
          OR: 'OR',
          YE: 'YE',
          YG: 'YG',
          GR: 'GR',
          BG: 'BG',
          PU: 'PU',
          GY: 'GY',
          undefined: '',
        },
        '',
        'MiniTag'
      ) || undefined
    }
    {...commonKnobs()}
  >
    {text('children', 'フリー株式会社', 'MiniTag')}
  </MiniTag>
);

export const AccentColor = () => (
  <>
    <MiniTag type="色" removable mr={1} mb={1}>
      None
    </MiniTag>
    <MiniTag color="RE" type="色" removable mr={1} mb={1}>
      RE
    </MiniTag>
    <MiniTag color="OR" type="色" removable mr={1} mb={1}>
      OR
    </MiniTag>
    <MiniTag color="YE" type="色" removable mr={1} mb={1}>
      YE
    </MiniTag>
    <MiniTag color="YG" type="色" removable mr={1} mb={1}>
      YG
    </MiniTag>
    <MiniTag color="GR" type="色" removable mr={1} mb={1}>
      GR
    </MiniTag>
    <MiniTag color="BG" type="色" removable mr={1} mb={1}>
      BG
    </MiniTag>
    <MiniTag color="PU" type="色" removable mr={1} mb={1}>
      PU
    </MiniTag>
    <MiniTag color="GY" type="色" removable mr={1} mb={1}>
      GY
    </MiniTag>
  </>
);

export const LongText = () => (
  <>
    <MiniTag mb={0.25}>{Array(1000).fill('あ').join('')}</MiniTag>
    <MiniTag removable>{Array(1000).fill('あ').join('')}</MiniTag>
  </>
);

```

### src/lv2/tagBox/MiniTag.tsx
```
typescript
import * as React from 'react';
import { MdClear } from 'react-icons/md';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import { VisuallyHidden } from '../../lv1';

type Props = {
  /**
   * タグの名前を指定します
   */
  children: string;
  /**
   * タグの種別（取引先、品目、etc...）を指定します
   */
  type?: string;
  /**
   * 削除ボタンが押せない場合 true を指定します
   */
  disabledRemoveButton?: boolean;
  /**
   * 削除ボタンを表示するかを指定します
   */
  removable?: boolean;
  /**
   * 削除時の処理を指定します
   */
  onRemove?: () => void;
  color?: 'RE' | 'OR' | 'YE' | 'YG' | 'GR' | 'BG' | 'PU' | 'GY';
  /**
   * 削除ボタンの `tabIndex` を指定します。
   * コンボボックスなどで、ボタンにフォーカスして押下する以外のキーボード操作による削除が可能な場合のみ `-1` を指定してください。
   */
  removeButtonTabIndex?: 0 | -1;
} & CommonProps;

/**
 * TagBoxよりも小さいサイズの、タグ表示用コンポーネントです。コンボボックスの内部などで使う想定です。
 *
 * コンボボックスの内部以外では、**TagBoxを使用することを強く推奨します**。
 * どうしてもこのコンポーネントである必要がある場合のみ、アクセシビリティに細心の注意を払ったうえで使ってください。
 *
 * - サイズを小さくするため、タグの種別が非表示になっています
 *   - 可能な限り、色と種別の対応をユーザーが理解できるようにしてください
 * - 色と種別の対応は、Vibes内では定義していません。プロダクト内では一貫したものを使用してください
 * - 種別 (`type`) はoptionalにしていますが、複数の種別を並べて表示する場合には必ず指定してください
 *   - VisuallyHiddenにて、スクリーンリーダーからは読み取れるようにしてあります
 */
export const MiniTag: React.FC<Props> = ({
  type,
  children,
  disabledRemoveButton,
  removable,
  onRemove,
  color = 'YE',
  removeButtonTabIndex,
  ...props
}: Props) => {
  const baseClass = 'vb-miniTag';
  const classModifier = {
    removable,
    RE: color === 'RE',
    OR: color === 'OR',
    YE: color === 'YE',
    YG: color === 'YG',
    GR: color === 'GR',
    BG: color === 'BG',
    PU: color === 'PU',
    GY: color === 'GY',
  };

  const bodyClassName = `${baseClass}__body`;
  const removeButtonColorClassName = ` ${baseClass}__removeButton--${color}`;

  return (
    <span {...commonProps(props, baseClass, classModifier)}>
      <span className={`${baseClass}__inner`}>
        <span className={bodyClassName} title={children}>
          {children}
        </span>
        {type && <VisuallyHidden>({type})</VisuallyHidden>}
        {removable && (
          <button
            className={`${baseClass}__removeButton${
              disabledRemoveButton
                ? ` ${baseClass}__removeButton--disabled`
                : ''
            }${removeButtonColorClassName}`}
            aria-label={`${children}${type ? `(${type})` : ''}を削除`}
            tabIndex={removeButtonTabIndex}
            onClick={() => onRemove && onRemove()}
          >
            <MdClear className={`${baseClass}__removeIcon`} />
          </button>
        )}
      </span>
    </span>
  );
};

```

### src/lv2/tagBox/TagBox.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean, select, text } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import TagBox from './TagBox';

export default {
  component: TagBox,
};

export const TagBoxComponent = () => (
  <TagBox
    type={text('Type', '取引先', 'TagBox')}
    removable={boolean('Removable', true, 'TagBox')}
    maxWidth={
      select(
        'MaxWidth',
        {
          small: 'small',
          medium: 'medium',
          large: 'large',
          undefined: '',
        },
        '',
        'TagBox'
      ) || undefined
    }
    color={
      select(
        'Color',
        {
          success: 'success',
          error: 'error',
          RE: 'RE',
          OR: 'OR',
          YE: 'YE',
          YG: 'YG',
          GR: 'GR',
          BG: 'BG',
          PU: 'PU',
          GY: 'GY',
          undefined: '',
        },
        '',
        'TagBox'
      ) || undefined
    }
    onRemove={action('remove')}
    disabledRemoveButton={boolean('DisabledRemoveButton', false, 'TagBox')}
    {...commonKnobs()}
  >
    {text('Children', 'フリー株式会社', 'TagBox')}
  </TagBox>
);

export const MaxWidth = () => (
  <>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox type="small" removable maxWidth="small">
        これは要素をはみ出るほど長い名前の会社です。とてもながーーーーーーーい
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox type="medium" removable maxWidth="medium">
        これは要素をはみ出るほど長い名前の会社です。とてもながーーーーーーーい
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox type="large" removable maxWidth="large">
        これは要素をはみ出るほど長い名前の会社です。とてもながーーーーーーーい
      </TagBox>
    </div>
  </>
);

export const Color = () => (
  <>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="success">正常系の色</TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="error">異常系の色</TagBox>
    </div>
  </>
);

export const AccentColor = () => (
  <>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="RE" type="type" removable>
        RE
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="OR" type="type" removable>
        OR
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="YE" type="type" removable>
        YE
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="YG" type="type" removable>
        YG
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="GR" type="type" removable>
        GR
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="BG" type="type" removable>
        BG
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="PU" type="type" removable>
        PU
      </TagBox>
    </div>
    <div style={{ marginBottom: '1rem' }}>
      <TagBox color="GY" type="type" removable>
        GY
      </TagBox>
    </div>
  </>
);

export const DisabledRemoveButton = () => (
  <div>
    <TagBox removable disabledRemoveButton onRemove={action('onRemove')}>
      フリー株式会社
    </TagBox>
  </div>
);

```

### src/lv2/tagBox/TagBox.tsx
```
typescript
import * as React from 'react';
import { MdCancel } from 'react-icons/md';
import { Keys } from '../../utilities/keyboard';

import { MarginClassProps } from '../../utilities/marginClasses';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type TagBoxMaxWidth = 'small' | 'medium' | 'large';
type TagBoxColor = 'success' | 'error' | AccentColor;
type AccentColor = 'RE' | 'OR' | 'YE' | 'YG' | 'GR' | 'BG' | 'PU' | 'GY';

type Props = {
  children?: string;
  onRemove?: () => any;
  disabledRemoveButton?: boolean;
  removable?: boolean;
  type?: string;
  maxWidth?: TagBoxMaxWidth;
  color?: TagBoxColor;
} & MarginClassProps &
  CommonProps;

const TagBox: React.FC<Props> = (props: Props) => {
  const {
    type,
    children,
    removable,
    onRemove,
    disabledRemoveButton,
    maxWidth,
    color,
    marginTop,
    marginLeft,
    marginRight,
    marginBottom,
    marginSize,
  } = props;
  const baseClass = 'vb-tagBox';
  const classModifier = {
    removable,
    maxWidthSmall: maxWidth === 'small',
    maxWidthMedium: maxWidth === 'medium' || !maxWidth,
    maxWidthLarge: maxWidth === 'large',
    success: color === 'success',
    error: color === 'error',
    RE: color === 'RE',
    OR: color === 'OR',
    YE: color === 'YE',
    YG: color === 'YG',
    GR: color === 'GR',
    BG: color === 'BG',
    PU: color === 'PU',
    GY: color === 'GY',
  };

  const isAccentColor = color && color !== 'success' && color !== 'error';

  const bodyClassName = color
    ? `${baseClass}__body ${baseClass}__body--${color}`
    : `${baseClass}__body`;

  const typeClassName = isAccentColor
    ? `${baseClass}__type ${baseClass}__type--${color}`
    : `${baseClass}__type`;

  const removeButtonColorClassName = isAccentColor
    ? ` ${baseClass}__removeButton--${color}`
    : '';

  return (
    <span
      {...commonProps(props, baseClass, classModifier, {
        marginBottom,
        marginLeft,
        marginRight,
        marginTop,
        marginSize,
      })}
    >
      <span className={`${baseClass}__inner`}>
        {type && <span className={typeClassName}>{type}</span>}
        <span className={bodyClassName} title={children}>
          {children}
        </span>
        {removable && (
          <span
            className={`${baseClass}__removeButton${
              disabledRemoveButton
                ? ` ${baseClass}__removeButton--disabled`
                : ''
            }${removeButtonColorClassName}`}
            aria-label={`${children || 'このタグ'}を削除`}
            tabIndex={disabledRemoveButton ? -1 : 0}
            role="button"
            onClick={() => onRemove && onRemove()}
            onKeyDown={(e) => {
              if (onRemove && (e.key === Keys.ENTER || e.key === Keys.SPACE)) {
                e.preventDefault();
                onRemove();
              }
            }}
          >
            <MdCancel className={`${baseClass}__removeIcon`} />
          </span>
        )}
      </span>
    </span>
  );
};

export default TagBox;

```

### src/lv2/withAccordionContent/WithAccordionContent.stories.tsx
```
typescript
import * as React from 'react';

import { boolean, select } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import Paragraph from '../../lv1/typography/Paragraph';
import ColumnBase from '../../lv1/bases/ColumnBase';
import WithAccordionContent from './WithAccordionContent';

export default {
  component: WithAccordionContent,
};

export const WithAccordionContentComponent = () => {
  const [isOpen, setOpen] = React.useState(false);
  return (
    <WithAccordionContent
      renderAccordionButtonArea={(AccordionButton, contentId) => (
        <AccordionButton
          contentId={contentId}
          open={isOpen}
          small={boolean('Small', false, 'WithAccordionContent')}
          large={boolean('Large', false, 'WithAccordionContent')}
          appearance={
            select(
              'Appearance',
              {
                primary: 'primary',
                secondary: 'secondary',
                tertiary: 'tertiary',
                undefined: '',
              },
              '',
              'WithAccordionContent'
            ) || undefined
          }
          onClick={() => setOpen(!isOpen)}
          {...commonKnobs()}
        >
          アコーディオンボタン
        </AccordionButton>
      )}
      isOpen={isOpen}
      {...commonKnobs()}
    >
      <ColumnBase mt={0.5}>
        <Paragraph marginBottom>ほげほげほげほげ</Paragraph>
        <Paragraph>ふがふがふがふが</Paragraph>
      </ColumnBase>
    </WithAccordionContent>
  );
};

export const UseAsHeading = () => {
  const [isOpen, setOpen] = React.useState(false);
  return (
    <WithAccordionContent
      renderAccordionButtonArea={(AccordionButton, contentId) => (
        <h3
          style={{
            margin: 0,
          }}
        >
          <AccordionButton
            contentId={contentId}
            open={isOpen}
            small={boolean('Small', false, 'WithAccordionContent')}
            large={boolean('Large', false, 'WithAccordionContent')}
            appearance={
              select(
                'Appearance',
                {
                  primary: 'primary',
                  secondary: 'secondary',
                  tertiary: 'tertiary',
                  undefined: '',
                },
                '',
                'WithAccordionContent'
              ) || undefined
            }
            onClick={() => setOpen(!isOpen)}
            {...commonKnobs()}
          >
            見出しを入れられるよ
          </AccordionButton>
        </h3>
      )}
      isOpen={isOpen}
      {...commonKnobs()}
    >
      <ColumnBase mt={0.5}>
        <Paragraph marginBottom>
          そのまま見出しを入れると <code>h</code>
          タグ標準のスタイルがついてくるので自分でスタイル打ち消しとか入れないといけないかも
        </Paragraph>
        <Paragraph>ふがふがふがふが</Paragraph>
      </ColumnBase>
    </WithAccordionContent>
  );
};

```

### src/lv2/withAccordionContent/WithAccordionContent.tsx
```
typescript
import * as React from 'react';
import { MdExpandLess, MdExpandMore } from 'react-icons/md';
import Button from '../../lv1/buttons/Button';
import commonProps, {
  CommonProps,
  pickCommonProps,
} from '../../utilities/commonProps';
import useUniqueId from '../../hooks/useUniqueId';

type AccordionButtonProps = {
  /**
   * 開閉される要素のidを設定します。このidはaria-controlsに用います。
   */
  contentId: string;
  /**
   * 開閉状態を設定します。
   */
  open: boolean;
} & Pick<
  Parameters<typeof Button>[0],
  'onClick' | 'children' | 'appearance' | 'small' | 'large'
> &
  CommonProps;

const AccordionButton: React.FC<AccordionButtonProps> = (
  props: AccordionButtonProps
) => {
  const { contentId, open, onClick, children, appearance, small, large } =
    props;

  return (
    <Button
      IconComponent={open ? MdExpandLess : MdExpandMore}
      iconPosition="right"
      appearance={appearance}
      small={small}
      large={large}
      aria-controls={contentId}
      aria-expanded={open}
      onClick={onClick}
      {...pickCommonProps(props)}
    >
      {children}
    </Button>
  );
};

type Props = {
  /**
   * AccordionButtonを含む要素を返します。
   * contentIdはAccordionButtonの引数として渡してください。
   */
  renderAccordionButtonArea: (
    AccordionButton: React.FC<AccordionButtonProps>,
    contentId: string
  ) => React.ReactNode;
  /**
   * 開閉状態を設定します。
   */
  isOpen: boolean;
  /**
   * 開閉される要素を設定します。
   */
  children: React.ReactNode;
} & CommonProps;

/**
 * 開閉される要素に用いるコンポーネントです。
 * 同ファイル内に定義されているAccordionButtonと併せて使われる想定です。
 */
const WithAccordionContent: React.FC<Props> = (props: Props) => {
  const { renderAccordionButtonArea, isOpen, children } = props;
  const contentId = useUniqueId('accordionContent');

  return (
    <div {...commonProps(props, 'vb-withAccordionContent')}>
      {renderAccordionButtonArea(AccordionButton, contentId)}
      {isOpen && (
        <div id={contentId} aria-hidden={!isOpen}>
          {children}
        </div>
      )}
    </div>
  );
};

export default WithAccordionContent;

```

### src/lv2/withBalloon/WithBalloon.stories.tsx
```
typescript
import * as React from 'react';

import WithBalloon from './WithBalloon';
import { commonKnobs } from '../../../stories';
import ScrollableBase from '../../lv1/bases/ScrollableBase';
import { select, text } from '@storybook/addon-knobs';
import Button from '../../lv1/buttons/Button';
import { Avatar, Paragraph } from '../../lv1';
import dsSquare from '../../lv1/icons/storyAssets/ds_square.jpeg';

export default {
  component: WithBalloon,
};

export const WithBalloonComponent = () => (
  <WithBalloon
    border={
      select(
        'border',
        {
          alert: 'alert',
          success: 'success',
          notice: 'notice',
          default: 'default',
          none: '',
        },
        'default',
        'WithBalloon'
      ) || undefined
    }
    renderBalloonContent={() =>
      text('balloonContent', 'こういう感じでバルーンを出せます', 'WithBalloon')
    }
    renderContent={() =>
      text(
        'content',
        'コンテンツに対する注釈をバルーンで表示できます。タッチ操作やキーボード操作では開けないことがあるため、バルーンコンテンツには代替アクセス手段を用意してください。',
        'WithBalloon'
      )
    }
    {...commonKnobs()}
  />
);

export const FocusableElement = () => (
  <WithBalloon
    border={
      select(
        'border',
        {
          alert: 'alert',
          success: 'success',
          notice: 'notice',
          default: 'default',
          none: '',
        },
        'default',
        'WithBalloon'
      ) || undefined
    }
    balloonContent={text(
      'balloonContent',
      'こういう感じでバルーンを出せます',
      'WithBalloon'
    )}
    renderContent={(balloonId) => (
      <>
        このように
        <a href="https://www.freee.co.jp/" aria-describedby={balloonId}>
          フォーカス可能な要素
        </a>
        があると、フォーカス時にバルーンが表示されます。
        <a href="https://jobs.freee.co.jp">採用情報</a>
      </>
    )}
    {...commonKnobs()}
  />
);

export const LazyImageLoading = () => (
  <WithBalloon
    border={
      select(
        'border',
        {
          alert: 'alert',
          success: 'success',
          notice: 'notice',
          default: 'default',
          none: '',
        },
        'default',
        'WithBalloon'
      ) || undefined
    }
    renderBalloonContent={(isVisible) => (
      <>
        <Avatar size="small" imageUrl={isVisible ? dsSquare : ''} />
        <Paragraph inline ml={0.5}>
          freee株式会社 CEO
        </Paragraph>
      </>
    )}
    renderContent={() => '佐々木大輔'}
    {...commonKnobs()}
  />
);
export const InsideBigScroll = () => (
  <div style={{ width: '40rem', height: '20rem', display: 'flex' }}>
    <ScrollableBase scrollableX scrollableY>
      <div style={{ position: 'relative', width: '80rem', height: '40rem' }}>
        <div style={{ position: 'absolute', top: '15rem', left: '40rem' }}>
          <WithBalloon
            border={
              select(
                'border',
                {
                  alert: 'alert',
                  success: 'success',
                  notice: 'notice',
                  default: 'default',
                  none: '',
                },
                'default',
                'WithBalloon'
              ) || undefined
            }
            renderBalloonContent={() =>
              text(
                'balloonContent',
                'こういう感じでバルーンを出せます',
                'WithBalloon'
              )
            }
            {...commonKnobs()}
            renderContent={() => 'あああ'}
          />
        </div>
      </div>
    </ScrollableBase>
  </div>
);

export const DisabledButton = () => (
  <div lang="ja">
    <WithBalloon
      border={
        select(
          'border',
          {
            alert: 'alert',
            success: 'success',
            notice: 'notice',
            default: 'default',
            none: '',
          },
          'default',
          'WithBalloon'
        ) || undefined
      }
      renderBalloonContent={() => 'こういう感じでバルーンを出せます'}
      renderContent={(balloonId) => (
        <Button disabled aria-describedby={balloonId}>
          非活性なボタン
        </Button>
      )}
      {...commonKnobs()}
    ></WithBalloon>
  </div>
);

export const DeprecatedProps = () => (
  <WithBalloon
    border={
      select(
        'border',
        {
          alert: 'alert',
          success: 'success',
          notice: 'notice',
          default: 'default',
          none: '',
        },
        'default',
        'WithBalloon'
      ) || undefined
    }
    balloonContent={text(
      'balloonContent',
      'こういう感じでバルーンを出せます',
      'WithBalloon'
    )}
    {...commonKnobs()}
  >
    {text(
      'content',
      'コンテンツに対する注釈をバルーンで表示できます。タッチ操作やキーボード操作では開けないことがあるため、バルーンコンテンツには代替アクセス手段を用意してください。',
      'WithBalloon'
    )}
  </WithBalloon>
);

```

### src/lv2/withBalloon/WithBalloon.tsx
```
typescript
import * as React from 'react';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import Balloon from '../../lv1/bases/Balloon';
import ScrollPortal from '../../utilities/ScrollPortal';
import { FocusTrap } from '../../lv1';
import useUniqueId from '../../hooks/useUniqueId';
import { Keys } from '../../utilities/keyboard';
import { getFocusableElements, isFocusableElement } from '../../utilities';
import { useBalloon } from './useBalloon';

type Props = Pick<Parameters<typeof Balloon>[0], 'border'> & {
  /**
   * バルーンの中身を描画します。ホバーやフォーカスによってバルーンが表示されているとき、`isVisible` が `true` になります。 `balloonContent` より優先して使用されます。
   */
  renderBalloonContent?: (isVisible: boolean) => React.ReactNode;
  /**
   * (deprecated) バルーンの中身を描画します。バルーンの表示状態を取得できないため、なるべく `renderBalloonContent` を使用してください。
   * @deprecated `renderBalloonContent` を使用してください
   */
  balloonContent?: React.ReactNode;
  /**
   * バルーンを付ける側（呼び出し側）をrenderします。
   * ボタンや入力フォームなどのインタラクティブなコンポーネントがある場合には、`balloonId` を `aria-describedby` に渡してください
   */
  renderContent?: (balloonId: string) => React.ReactNode;
  /**
   * (deprecated) renderContentが渡されていない場合に使用されます。aria-describedbyが使用できないため、なるべく `renderContent` を使用してください。
   * @deprecated `renderContent` を使用してください
   */
  children?: React.ReactNode;

  /**
   * trueにしておくとバルーンを表示しません。特定の条件でのみバルーンを表示したい場合に使用してください。
   */
  balloonDisabled?: boolean;
} & CommonProps;

const findNextFocusable = (
  el: HTMLElement,
  backward = false
): Element | undefined => {
  let e = backward ? el.previousElementSibling : el.nextElementSibling;
  while (e) {
    if (isFocusableElement(e)) {
      return e;
    }
    const focusables = getFocusableElements(e as HTMLElement);
    const focusableIndex = findFocusableElIndex(focusables);
    if (focusables.length > 0) {
      return focusables[backward ? focusableIndex : 0];
    }
    e = backward ? e.previousElementSibling : e.nextElementSibling;
  }
  const parent = el.parentElement;
  return parent ? findNextFocusable(parent, backward) : undefined;
};

const findFocusableElIndex = (focusables: NodeListOf<Element>): number => {
  let focusableLastIndex = 0;
  focusables.forEach((node, i) => {
    let isVisible = true;
    let parent = node.parentElement;
    while (parent) {
      if (parent.style.display === 'none') {
        isVisible = false;
        break;
      }
      parent = parent.parentElement;
    }
    if (isVisible) {
      focusableLastIndex = i;
    }
  });
  return focusableLastIndex;
};

/**
 * `children` の要素にマウスホバーした際に表示されるバルーンを付与します。
 *
 * - タッチスクリーンによる操作ではバルーンを表示できません。**読めないことで使用できなくなる情報を配置しないでください**。
 * - バルーン内にはキーボード操作で到達できないため、何かの操作のUIを配置する場合は **必ず代替アクセス手段を用意してください**。
 * - バルーンの要素の `id` を `renderContent` の `balloonId` 引数で取得できます。`aria-describedby` で使用してください。
 * - バルーン表示中に `Esc` キーを押下すると、バルーンを非表示にできます。
 */
const WithBalloon: React.FC<Props> = (props: Props) => {
  const {
    children,
    renderContent,
    balloonContent,
    renderBalloonContent,
    balloonDisabled,
    border,
  } = props;
  const baseClass = 'vb-withBalloon';
  const wrapperRef = React.useRef<HTMLSpanElement>(null);
  const uniqueId = useUniqueId(baseClass);

  const {
    balloonIsVisibleByHover,
    clearHoverFlags,
    handleTargetMouseEnter,
    handleTargetMouseLeave,
    handleBalloonMouseEnter,
    handleBalloonMouseLeave,
    position,
    verticalPosition,
    adjustPosition,
    baseRef,
    balloonRef,
  } = useBalloon();
  const [focused, setFocused] = React.useState<boolean>(false);
  const showBalloon = !balloonDisabled && (balloonIsVisibleByHover || focused);
  const balloonId = `${uniqueId}__balloonWrapper`;

  React.useEffect(() => {
    const handleEsc = (e: KeyboardEvent) => {
      if (e.key === Keys.ESC) {
        clearHoverFlags();
        setFocused(false);
      }
    };
    if (showBalloon) {
      window.addEventListener('keydown', handleEsc);
      return () => window.removeEventListener('keydown', handleEsc);
    }
  }, [showBalloon, clearHoverFlags]);

  return (
    <span
      {...commonProps(props, baseClass)}
      ref={baseRef}
      id={uniqueId}
      aria-describedby={balloonId}
    >
      {/* フォーカス可能なものがrenderContentに存在しなかった場合に、無理やりフォーカスする挙動を作るために、FocusTrapを使用している */}
      <FocusTrap
        onFocusInsideTop={() => {
          // Shift+Tabでフォーカスを外に出そうとしたときの挙動
          // 前のほうのフォーカス可能な要素を探してフォーカスする
          const target = baseRef.current
            ? findNextFocusable(baseRef.current, true)
            : undefined;
          if (target) {
            (target as HTMLElement).focus();
          }
          return true;
        }}
        onFocusInsideBottom={() => {
          // Tabでフォーカスを外に出そうとしたときの挙動
          // 後ろのほうのフォーカス可能な要素を探してフォーカスする
          const target = baseRef.current
            ? findNextFocusable(baseRef.current)
            : undefined;
          if (target) {
            (target as HTMLElement).focus();
          }
          return true;
        }}
        onFocusOutsideTop={() => {
          // Tabでフォーカスを内側に入れるときの挙動
          // フォーカス可能なものがあればそれに、無ければwrapperにフォーカスを移す
          if (wrapperRef.current) {
            const focusable = getFocusableElements(wrapperRef.current);
            if (focusable.length > 0) {
              (focusable.item(0) as HTMLElement).focus();
            } else {
              wrapperRef.current.focus();
            }
          }
          return true;
        }}
        onFocusOutsideBottom={() => {
          // Shift+Tabでフォーカスを内側に入れるときの挙動
          // フォーカス可能なものがあればそれに、無ければwrapperにフォーカスを移す
          if (wrapperRef.current) {
            const focusable = getFocusableElements(wrapperRef.current);
            if (focusable.length > 0) {
              (focusable.item(focusable.length - 1) as HTMLElement).focus();
            } else {
              wrapperRef.current.focus();
            }
          }
          return true;
        }}
      >
        <span
          className={`${baseClass}__contentWrapper`}
          tabIndex={-1}
          ref={wrapperRef}
          onMouseEnter={handleTargetMouseEnter}
          onMouseLeave={handleTargetMouseLeave}
          onFocus={() => setFocused(true)}
          onBlur={() => setFocused(false)}
        >
          {renderContent ? renderContent(balloonId) : children}
        </span>
      </FocusTrap>
      <ScrollPortal
        isActive={showBalloon}
        positionalBaseElement={baseRef.current || undefined}
        verticalPosition={verticalPosition}
        horizontalPosition={position}
        onOverflow={() => {
          clearHoverFlags();
          setFocused(false);
        }}
        onScroll={adjustPosition}
        data-masking={props['data-masking']}
      >
        <div
          className={`${baseClass}__balloonWrapper${
            showBalloon ? '' : ` ${baseClass}__balloonWrapper--hidden`
          }`}
          onMouseEnter={handleBalloonMouseEnter}
          onMouseLeave={handleBalloonMouseLeave}
          id={balloonId}
          role="tooltip"
          aria-hidden={!showBalloon}
        >
          <Balloon
            border={border}
            position={position}
            verticalPosition={verticalPosition}
            ref={balloonRef}
          >
            {renderBalloonContent
              ? renderBalloonContent(showBalloon)
              : balloonContent}
          </Balloon>
        </div>
      </ScrollPortal>
    </span>
  );
};

export default WithBalloon;

```

### src/lv2/withDropdown/WithDropdown.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import WithDropdown from './WithDropdown';
import { boolean } from '@storybook/addon-knobs';

export default {
  component: WithDropdown,
};

export const WithDropdownComponent = () => {
  const disabled = boolean('disabled', false, 'WithDropdown');
  return (
    <WithDropdown
      dropdownContents={[
        {
          type: 'selectable',
          text: 'menu1',
          ariaLabel: 'menu1',
          onClick: action('click'),
        },
        {
          type: 'selectable',
          text: 'menu2',
          ariaLabel: 'menu2',
          onClick: action('click'),
        },
        {
          type: 'selectable',
          text: 'とてもとてもとてもとてもとてもとてもとてもとてもとてもとてもとてもとてもとてもとても長い',
          ariaLabel: 'menu3',
          onClick: action('click'),
        },
        {
          type: 'selectable',
          text: 'menu4 (disabled)',
          ariaLabel: 'menu4',
          disabled: true,
        },
        { type: 'selectable', text: '発注（あなたが作成中）' },
        { type: 'selectable', text: '発注（取引先の確認待ち）' },
        { type: 'selectable', text: '発注（確認済み）' },
        { type: 'selectable', text: 'もっと見る', disableOnRequestClose: true },
      ]}
      disabled={disabled}
      renderButton={(dropdownId, isOpen, buttonRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={dropdownId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
      onOpen={action('open')}
      onClose={action('close')}
    ></WithDropdown>
  );
};

```

### src/lv2/withDropdown/WithDropdown.tsx
```
typescript
import * as React from 'react';
import PopupBase from '../../lv1/bases/PopupBase';
import { CommonProps, pickCommonProps } from '../../utilities/commonProps';
import DropdownMenuContent from '../dropdown/DropdownMenuContent';
import { DropdownContent } from '../dropdown/types';
import WithPopup from '../withPopup/WithPopup';

type Props = {
  /**
   * メニュー開閉ボタン描画用 render function
   *
   * - `dropdownId` を開閉ボタンの `aria-controls` に渡してください
   * - `isOpen` を開閉ボタンの `aria-expanded` に渡してください
   * - `buttonRef` を開閉ボタンの `ref` に渡してください
   */
  renderButton: Pick<Parameters<typeof WithPopup>[0], 'render'>['render'];
  disabled?: boolean;
  dropdownContents: Array<DropdownContent>;
  /**
   * @deprecated このプロパティは使用されません
   */
  contentsFixed?: boolean;
  /**
   * dropdownを開いた時に発火します。useEffectのトリガーになるためメモ化したものを渡すことを推奨します。
   */
  onOpen?: () => void;
  /**
   * dropdownを閉じた時に発火します。useEffectのトリガーになるためメモ化したものを渡すことを推奨します。
   */
  onClose?: () => void;
} & CommonProps;

/**
 * ドロップダウンメニューを実装するためのコンポーネントです。
 *
 * - ボタンからドロップダウンメニューを表示したい場合は、 `DropdownButton` コンポーネントを使用してください
 * - どうしてもという場合でなければ `DropdownButton` コンポーネントを使用してください。このコンポーネントは扱いが面倒です。
 * - 開閉ボタンを `Button` `IconOnlyButton` 以外にしたい場合のみ、こちらのコンポーネントを使用してください
 * - `renderButton` の引数は以下のように使用してください
 *   - `dropdownId` を開閉ボタンの `aria-controls` に渡してください
 *   - `isOpen` を開閉ボタンの `aria-expanded` に渡してください
 *   - `buttonRef` を開閉ボタンの `ref` に渡してください
 */
const WithDropdown: React.FC<Props> = (props: Props) => {
  const { renderButton, disabled, dropdownContents, onOpen, onClose } = props;

  return (
    <WithPopup
      disabled={disabled}
      render={renderButton}
      renderPopup={(requestClose, firstSelectableRef, controlRef) => (
        <PopupBase paddingSize="zero">
          <DropdownMenuContent
            contents={dropdownContents}
            onRequestClose={requestClose}
            onFocusOut={() => controlRef.current?.focus()}
            ref={firstSelectableRef as React.RefObject<HTMLDivElement>}
          />
        </PopupBase>
      )}
      onOpen={onOpen}
      onClose={onClose}
      {...pickCommonProps(props)}
    />
  );
};
export default WithDropdown;

```

### src/lv2/withFilterableDropdown/WithFilterableDropdown.stories.tsx
```
typescript
import * as React from 'react';

import { action } from '@storybook/addon-actions';
import { boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import WithFilterableDropdown from './WithFilterableDropdown';
import { Button } from '../..';
import { MdAdd } from 'react-icons/md';

export default {
  component: WithFilterableDropdown,
};

export const WithDropdownComponent = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  const disabled = boolean('disabled', false, 'WithFilterableDropdown');
  return (
    <WithFilterableDropdown
      disabled={disabled}
      isLoading={boolean('isLoading', false, 'WithFilterableDropdown')}
      {...commonKnobs()}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      render={(dropdownId, isOpen, buttonRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={dropdownId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
    ></WithFilterableDropdown>
  );
};

export const FilterableMenu = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  const disabled = boolean('disabled', false, 'WithFilterableDropdown');
  return (
    <WithFilterableDropdown
      disabled={disabled}
      {...commonKnobs()}
      dropdownContents={data.map((d) => ({
        type: 'selectable',
        text: d.label,
        keywords: d.keywords,
        onClick: action(`click menu ${d.label}`),
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      render={(dropdownId, isOpen, buttonRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={dropdownId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
    ></WithFilterableDropdown>
  );
};

export const WithFixedItems = () => {
  const data = [{ label: '杏', keywords: ['あんず', 'anzu'] }];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  const disabled = boolean('disabled', false, 'WithFilterableDropdown');
  return (
    <WithFilterableDropdown
      disabled={disabled}
      isLoading={boolean('isLoading', false, 'WithFilterableDropdown')}
      {...commonKnobs()}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      render={(dropdownId, isOpen, buttonRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={dropdownId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
      fixedItems={[
        {
          onSelect: () => {
            // no-op
          },
          isVisible: () => true,
          label: 'もっと見る',
          disableOnRequestClose: true,
        },
        {
          onSelect: () => {
            // no-op
          },
          isVisible: () => true,
          label: (value) => `${value}を新規登録`,
        },
        {
          onSelect: () => {
            // no-op
          },
          isVisible: (value) => !value,
          label: 'valueが空の時だけ表示',
        },
      ]}
    ></WithFilterableDropdown>
  );
};

export const WithNoItems = () => {
  const data: any[] = [];
  const disabled = boolean('disabled', false, 'WithFilterableDropdown');
  return (
    <WithFilterableDropdown
      disabled={disabled}
      {...commonKnobs()}
      dropdownContents={data.map((d) => ({
        type: 'selectable',
        text: d.label,
        keywords: d.keywords,
        onClick: action(`click menu ${d.label}`),
      }))}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      render={(dropdownId, isOpen, buttonRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={dropdownId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
    ></WithFilterableDropdown>
  );
};

export const WithDropdownBottomContent = () => {
  const data = [
    { label: '杏', keywords: ['あんず', 'anzu'] },
    { label: '円', keywords: ['まどか', 'madoka'] },
    { label: '桜', keywords: ['さくら', 'sakura'] },
    { label: '巴', keywords: ['ともえ', 'tomoe'] },
    { label: '焔', keywords: ['ほむら', 'homura'] },
    { label: '渚', keywords: ['なぎさ', 'nagisa'] },
    {
      label: '海鮮助六',
      keywords: ['かいせんすけろく', 'kaisensukeroku', 'さやか', 'sayaka'],
    },
    {
      label: '助六',
      keywords: ['すけろく', 'sukeroku', 'さやか', 'sayaka'],
    },
  ];
  const [status, setStatus] = React.useState<boolean[]>(
    Array(data.length).fill(false)
  );

  const disabled = boolean('disabled', false, 'WithFilterableDropdown');
  return (
    <WithFilterableDropdown
      disabled={disabled}
      isLoading={boolean('isLoading', false, 'WithFilterableDropdown')}
      {...commonKnobs()}
      dropdownContents={data.map((d, i) => ({
        type: 'checkbox',
        text: d.label,
        keywords: d.keywords,
        checked: status[i],
        onChange: (e) => {
          const newStatus = [...status];
          newStatus[i] = e.target.checked;
          setStatus(newStatus);
        },
      }))}
      renderDropdownBottomContent={(requestClose) => (
        <Button
          type="button"
          appearance="tertiary"
          iconPosition="left"
          IconComponent={MdAdd}
          onClick={() => requestClose()}
          mr={1}
        >
          取引先を追加
        </Button>
      )}
      onFilterChange={action('onFilterChange')}
      onOpen={action('onOpen')}
      render={(dropdownId, isOpen, buttonRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={dropdownId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={buttonRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
    ></WithFilterableDropdown>
  );
};

```

### src/lv2/withFilterableDropdown/WithFilterableDropdown.tsx
```
typescript
import * as React from 'react';
import { pickCommonProps, CommonProps } from '../../utilities/commonProps';
import SearchField from '../../lv1/forms/SearchField';
import WithPopup from '../withPopup/WithPopup';
import PopupBase from '../../lv1/bases/PopupBase';
import DropdownMenuContent from '../dropdown/DropdownMenuContent';
import {
  DropdownContentCheckbox,
  DropdownContentSelectable,
} from '../dropdown/types';
import Note from '../../lv1/typography/Note';
import { Keys } from '../../utilities/keyboard';
import Loading from '../../lv1/Loading';
import MarginBase from '../../lv1/bases/MarginBase';

type WithFilterableDropdownContentProps = {
  controlRef: React.RefObject<HTMLElement>;
  dropdownContents: FilterableDropdownContent[];
  filterValue: string;
  firstSelectableItemRef: React.RefObject<HTMLElement>;
  handleFilterChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
  isLoading: boolean;
  menuContentRef: React.RefObject<HTMLDivElement>;
  noDataMessage?: React.ReactNode;
  noResultsMessage?: React.ReactNode;
  renderDropdownBottomContent?: (requestClose: () => void) => React.ReactNode;
  requestClose: () => void;
  visibleContents: FilterableDropdownContent[];
};

const WithFilterableDropdownContent: React.FC<
  WithFilterableDropdownContentProps
> = (props: WithFilterableDropdownContentProps) => {
  const {
    controlRef,
    dropdownContents,
    filterValue,
    firstSelectableItemRef,
    handleFilterChange,
    isLoading,
    menuContentRef,
    noDataMessage,
    noResultsMessage,
    renderDropdownBottomContent,
    requestClose,
    visibleContents,
  } = props;

  const [menuMaxHeightOffset, setMenuMaxHeightOffset] = React.useState<
    number | undefined
  >();

  const bottomContentRef = React.useRef<HTMLElement>(null);

  React.useEffect(() => {
    if (bottomContentRef?.current) {
      setMenuMaxHeightOffset(
        bottomContentRef?.current?.getBoundingClientRect().height
      );
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [bottomContentRef?.current?.getBoundingClientRect().height]);

  return (
    <div className="vb-withFilterableDropdown__popup">
      <SearchField
        mb={1}
        label="検索"
        width="full"
        value={filterValue}
        onKeyDown={(e) => {
          if (
            // 変換中のイベントを無視する。isComposingがないブラウザでは（IEのこと）、全て無視する
            !('isComposing' in e.nativeEvent) ||
            e.nativeEvent.isComposing
          ) {
            return;
          }
          if (e.key === Keys.DOWN) {
            //下キーならメニューにフォーカス（すると1個めの項目にフォーカスする）
            menuContentRef.current?.focus();
            e.preventDefault();
          } else if (e.key === Keys.UP) {
            //上キーなら開閉ボタンにフォーカス
            controlRef.current?.focus();
            e.preventDefault();
          }
        }}
        onChange={handleFilterChange}
        ref={firstSelectableItemRef as React.RefObject<HTMLInputElement>}
      />
      {visibleContents.length > 0 ? (
        <MarginBase mr={-1} ml={-1}>
          <Loading isLoading={!!isLoading}>
            <DropdownMenuContent
              contents={visibleContents}
              menuMaxHeightOffset={
                renderDropdownBottomContent ? menuMaxHeightOffset : 0
              }
              onRequestClose={requestClose}
              onFocusOut={(direction) => {
                if (direction === 'upward') {
                  firstSelectableItemRef.current?.focus();
                } else {
                  if (renderDropdownBottomContent) {
                    // bottomContentRef.current?.focus();
                    controlRef.current?.focus();
                  } else {
                    controlRef.current?.focus();
                  }
                }
              }}
              ref={menuContentRef}
            />
          </Loading>
        </MarginBase>
      ) : !isLoading &&
        filterValue.length > 0 &&
        dropdownContents.length > 0 ? (
        <div className="vb-withFilterableDropdown__note">
          <Note textAlign="center">
            {noResultsMessage ?? '該当する候補がありません'}
          </Note>
        </div>
      ) : (
        <div className="vb-withFilterableDropdown__note">
          <Note textAlign="center">
            {noDataMessage ?? 'データが登録されていません'}
          </Note>
        </div>
      )}
      {renderDropdownBottomContent && (
        <div
          className="vb-withFilterableDropdown__footer"
          // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex
          tabIndex={0}
          ref={bottomContentRef as React.RefObject<HTMLInputElement>}
        >
          {renderDropdownBottomContent(requestClose)}
        </div>
      )}
    </div>
  );
};

type FixedItem = {
  disableOnRequestClose?: boolean;
  isVisible: (filterValue: string) => boolean;
  label: React.ReactNode | ((filterValue: string) => React.ReactNode);
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onSelect: (filterValue: string) => any;
};

export type FilterableDropdownContent = (
  | DropdownContentCheckbox
  | DropdownContentSelectable
) & {
  /**
   * 項目の読みがなやショートカットコードを指定してください（複数指定可能）
   */
  keywords?: string[];
};
type Props = Pick<Parameters<typeof WithPopup>[0], 'render' | 'disabled'> & {
  /**
   * メニューの項目です。`keywords` として、複数の読みがなやショートカットコードを指定できます。
   */
  dropdownContents: FilterableDropdownContent[];
  /**
   * `SearchField` の変化時に発火します
   */
  onFilterChange?: React.ChangeEventHandler<HTMLInputElement>;
  /**
   * Dropdownの展開時に発火します
   */
  onOpen?: () => void;
  /**
   * スピナーを表示します。
   */
  isLoading?: boolean;
  /**
   * リストの最後尾に追加するアイテム 一つ目はもっと見る、二つ目新規登録を想定しています
   */
  fixedItems?: FixedItem[];
  noResultsMessage?: React.ReactNode;
  noDataMessage?: React.ReactNode;
  renderDropdownBottomContent?: (requestClose: () => void) => React.ReactNode;
} & CommonProps;

/**
 * ボタン部分のカスタマイズがどうしても必要な場合を除いて `FilterableDropdownButton` を使用してください。
 */
const WithFilterableDropdown: React.FC<Props> = (props: Props) => {
  const {
    disabled,
    dropdownContents,
    fixedItems = [],
    isLoading,
    onFilterChange,
    onOpen,
    render,
    noResultsMessage,
    noDataMessage,
    renderDropdownBottomContent,
  } = props;
  const [filterValue, setFilterValue] = React.useState('');
  const menuContentRef = React.useRef<HTMLDivElement>(null);

  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setFilterValue(e.target.value);
    onFilterChange && onFilterChange(e);
  };

  const filteredContents =
    filterValue.length > 0
      ? dropdownContents.filter(
          (c) =>
            (c.type === 'checkbox' && c.checked) ||
            (typeof c.text === 'string' && c.text.indexOf(filterValue) >= 0) ||
            (c.keywords &&
              c.keywords.some((k) =>
                filterValue
                  .toLowerCase()
                  .split(/\s+/)
                  .every((word) => k.toLowerCase().indexOf(word) >= 0)
              ))
        )
      : dropdownContents;

  const visibleContents = [
    ...filteredContents,
    ...fixedItems
      .filter((fixedItem) => fixedItem.isVisible(filterValue))
      .map(
        ({ label, onSelect, disableOnRequestClose }) =>
          ({
            type: 'selectable',
            text: typeof label === 'function' ? label(filterValue) : label,
            onClick: () => onSelect(filterValue),
            disableOnRequestClose,
          } as DropdownContentSelectable)
      ),
  ];

  const memorizedOnClose = React.useCallback(
    () => setFilterValue(''),
    [setFilterValue]
  );

  return (
    <WithPopup
      onClose={memorizedOnClose}
      render={render}
      disabled={disabled}
      onOpen={onOpen}
      renderPopup={(requestClose, firstSelectableItemRef, controlRef) => (
        <PopupBase paddingSize="zero">
          <WithFilterableDropdownContent
            handleFilterChange={handleFilterChange}
            visibleContents={visibleContents}
            isLoading={!!isLoading}
            firstSelectableItemRef={firstSelectableItemRef}
            menuContentRef={menuContentRef}
            controlRef={controlRef}
            filterValue={filterValue}
            dropdownContents={dropdownContents}
            noResultsMessage={noResultsMessage}
            noDataMessage={noDataMessage}
            requestClose={requestClose}
            renderDropdownBottomContent={renderDropdownBottomContent}
          />
        </PopupBase>
      )}
      {...pickCommonProps(props)}
    />
  );
};

export default WithFilterableDropdown;

```

### src/lv2/withPopup/WithPopup.stories.tsx
```
typescript
import * as React from 'react';

import WithPopup from './WithPopup';
import { action } from '@storybook/addon-actions';
import { boolean } from '@storybook/addon-knobs';
import { commonKnobs } from '../../../stories';
import PopupBase from '../../lv1/bases/PopupBase';
import Button from '../../lv1/buttons/Button';
import Paragraph from '../../lv1/typography/Paragraph';
import TextField from '../../lv1/forms/TextField';
import TaskDialog from '../dialogs/TaskDialog';
import Container from '../../lv1/bases/Container';

export default {
  component: WithPopup,
};

export const WithWithPopupComponent = () => {
  const disabled = boolean('disabled', false, 'WithPopup');
  return (
    <WithPopup
      render={(popupId, isOpen, controlRef, togglePopup) => (
        <span
          // 例として、<span> で実装した例を載せています。
          // あくまでメニューの開閉ボタンはボタンであり、本来<button>で実装されるべきことに注意してください。
          role="button"
          // キーボード操作が可能になるよう、フォーカス可能にする
          tabIndex={0}
          // <span>ではクリックイベントが発火しないため、Enterキー押下時にtogglePopupする
          onKeyDown={(e) => e.key === 'Enter' && togglePopup(!isOpen)}
          // <span> なのでaria-disabledを使用しています。
          // <button> で実装する場合は、WithFilterableDropdownに渡すのと同じ条件をボタンのdisabledにも渡してください
          aria-disabled={disabled}
          aria-controls={popupId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={controlRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </span>
      )}
      renderPopup={(requestClose, firstSelectableItemRef) => (
        <PopupBase paddingSize="small">
          <Button
            ref={firstSelectableItemRef as React.RefObject<HTMLButtonElement>}
            onClick={() => requestClose()}
            mr={1}
          >
            ボタン1
          </Button>
          <Button onClick={() => requestClose()}>ボタン2</Button>
        </PopupBase>
      )}
      disabled={disabled}
      onOpen={action('open')}
      onClose={action('close')}
      {...commonKnobs()}
    ></WithPopup>
  );
};

export const MultipleComponents = () => (
  <>
    <WithPopup
      render={(popupId, isOpen, controlRef) => (
        <Button
          aria-controls={popupId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={controlRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </Button>
      )}
      renderPopup={(requestClose, firstSelectableItemRef) => (
        <PopupBase paddingSize="small">
          <Button
            ref={firstSelectableItemRef as React.RefObject<HTMLButtonElement>}
            onClick={() => requestClose()}
            mr={1}
          >
            ボタン1
          </Button>
          <Button onClick={() => requestClose()}>ボタン2</Button>
        </PopupBase>
      )}
      disabled={boolean('disabled', false, 'WithPopup')}
      {...commonKnobs()}
    ></WithPopup>
    <WithPopup
      render={(popupId, isOpen, controlRef) => (
        <Button
          aria-controls={popupId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={controlRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </Button>
      )}
      renderPopup={(requestClose, firstSelectableItemRef) => (
        <PopupBase paddingSize="small">
          <Button
            ref={firstSelectableItemRef as React.RefObject<HTMLButtonElement>}
            onClick={() => requestClose()}
            mr={1}
          >
            ボタン1
          </Button>
          <Button onClick={() => requestClose()}>ボタン2</Button>
        </PopupBase>
      )}
      disabled={boolean('disabled', false, 'WithPopup')}
      {...commonKnobs()}
    ></WithPopup>
  </>
);

export const WithoutFirstSelectableItemRef = () => (
  <WithPopup
    render={(popupId, isOpen, controlRef) => (
      <Button
        aria-controls={popupId}
        aria-haspopup={true}
        aria-expanded={isOpen}
        ref={controlRef as React.RefObject<HTMLButtonElement>}
      >
        開閉ボタン
      </Button>
    )}
    renderPopup={(requestClose) => (
      <PopupBase paddingSize="small">
        <Paragraph mb={1}>
          firstSelectableItemRef
          使わない場合、最初にTabキーでフォーカスするのはPopupになります。
        </Paragraph>
        <Paragraph mb={1}>
          ボタンやフォームコントロールより前に説明を乗せたりする場合はfirstSelectableItemRefを使わないようにすると良いです
        </Paragraph>
        <Button onClick={() => requestClose()} mr={1}>
          ボタン1
        </Button>
        <Button onClick={() => requestClose()}>ボタン2</Button>
      </PopupBase>
    )}
    disabled={boolean('disabled', false, 'WithPopup')}
    {...commonKnobs()}
  ></WithPopup>
);
export const InBigBlock = () => (
  <div style={{ padding: '20rem 80rem' }}>
    <WithPopup
      render={(popupId, isOpen, controlRef) => (
        <Button
          aria-controls={popupId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={controlRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </Button>
      )}
      renderPopup={(requestClose, firstSelectableItemRef) => (
        <PopupBase paddingSize="small">
          <Button
            ref={firstSelectableItemRef as React.RefObject<HTMLButtonElement>}
            onClick={() => requestClose()}
            mr={1}
          >
            ボタン1
          </Button>
          <Button onClick={() => requestClose()}>ボタン2</Button>
        </PopupBase>
      )}
      disabled={boolean('disabled', false, 'WithPopup')}
      {...commonKnobs()}
    ></WithPopup>
  </div>
);

const TaskDialogSample = () => {
  const [isOpen, setIsOpen] = React.useState(false);

  return (
    <>
      <Button onClick={() => setIsOpen(true)}>open dialog</Button>

      <TaskDialog
        onRequestClose={() => {
          setIsOpen(false);
        }}
        title="TaskDialog"
        isOpen={isOpen}
        closeButtonLabel="閉じる"
      >
        <div style={{ height: '5rem' }}></div>
        <WithPopup
          render={(popupId, isOpen, controlRef) => (
            <Button
              aria-controls={popupId}
              aria-haspopup={true}
              aria-expanded={isOpen}
              ref={controlRef as React.RefObject<HTMLButtonElement>}
            >
              開閉ボタン
            </Button>
          )}
          renderPopup={(requestClose, firstSelectableItemRef) => (
            <PopupBase paddingSize="small">
              <Button
                ref={
                  firstSelectableItemRef as React.RefObject<HTMLButtonElement>
                }
                onClick={() => requestClose()}
                mr={1}
              >
                ボタン1
              </Button>
              <Button onClick={() => requestClose()}>ボタン2</Button>
            </PopupBase>
          )}
          disabled={boolean('disabled', false, 'WithPopup')}
          {...commonKnobs()}
        ></WithPopup>
        <div style={{ height: '40rem' }}></div>
      </TaskDialog>
    </>
  );
};

export const InsideTaskDialog = () => <TaskDialogSample />;
export const InsideContainer = () => (
  <Container>
    <div style={{ height: '5rem' }}></div>
    <WithPopup
      render={(popupId, isOpen, controlRef) => (
        <Button
          aria-controls={popupId}
          aria-haspopup={true}
          aria-expanded={isOpen}
          ref={controlRef as React.RefObject<HTMLButtonElement>}
        >
          開閉ボタン
        </Button>
      )}
      renderPopup={(requestClose, firstSelectableItemRef) => (
        <PopupBase paddingSize="small">
          <Button
            ref={firstSelectableItemRef as React.RefObject<HTMLButtonElement>}
            onClick={() => requestClose()}
            mr={1}
          >
            ボタン1
          </Button>
          <Button onClick={() => requestClose()}>ボタン2</Button>
        </PopupBase>
      )}
      disabled={boolean('disabled', false, 'WithPopup')}
      {...commonKnobs()}
    ></WithPopup>
    <div style={{ height: '40rem' }}></div>
  </Container>
);

export const OpenCloseCallback = () => {
  const [log, setLog] = React.useState<string[]>([]);
  return (
    <>
      <WithPopup
        renderPopup={(requestClose) => (
          <PopupBase>
            <Button onClick={() => requestClose()}>閉じる</Button>
          </PopupBase>
        )}
        render={(popupId, isOpen, controlRef) => (
          <Button
            aria-controls={popupId}
            aria-expanded={isOpen}
            ref={controlRef as React.RefObject<HTMLButtonElement>}
          >
            Open Popup
          </Button>
        )}
        onOpen={() => setLog(log.concat(['open']))}
        onClose={() => setLog(log.concat(['close']))}
      />
      <output>
        {log.map((e, i) => (
          <div key={i}>{e}</div>
        ))}
      </output>
    </>
  );
};

const InputSupportExample = () => {
  const [handling, setHandling] = React.useState<boolean>(false);
  const [value, setValue] = React.useState<number>(0);

  React.useEffect(() => {
    if (handling) {
      const closeMenu = () => {
        setHandling(false);
      };
      window.addEventListener('click', closeMenu);
      return () => window.removeEventListener('click', closeMenu);
    }
  }, [handling]);
  return (
    <WithPopup
      render={(popupId, isOpen, controlRef, toggleOpen) => (
        // eslint-disable-next-line jsx-a11y/no-static-element-interactions
        <span
          onClick={(e) => e.stopPropagation()}
          onKeyDown={() => {
            /* do nothing */
          }}
        >
          <TextField
            label="数字"
            value={`${value}`}
            onChange={(e) => setValue(Number(e.target.value))}
            aria-controls={popupId}
            aria-haspopup={true}
            aria-expanded={isOpen}
            role="combobox"
            ref={controlRef as React.RefObject<HTMLInputElement>}
            onFocus={() => {
              if (!handling) {
                toggleOpen(true);
                setHandling(true);
              }
            }}
            onBlur={() => {
              if (!isOpen) {
                setHandling(false);
              }
            }}
            onKeyDown={(e) => {
              if (e.keyCode === 27 /* ESC */) {
                toggleOpen(false);
              } else if (e.keyCode !== 9 /* TAB */) {
                toggleOpen(true);
              }
            }}
          />
        </span>
      )}
      renderPopup={(_requestClose, firstSelectableItemRef) => (
        <PopupBase paddingSize="small">
          <Button
            ref={firstSelectableItemRef as React.RefObject<HTMLButtonElement>}
            onClick={() => {
              setValue(value + 1);
            }}
            mr={1}
          >
            +1
          </Button>
          <Button
            onClick={() => {
              setValue(value + 10);
            }}
            mr={1}
          >
            +10
          </Button>
          <Button
            onClick={() => {
              setValue(value + 100);
            }}
            mr={1}
          >
            +100
          </Button>
        </PopupBase>
      )}
      disabled={boolean('disabled', false, 'WithPopup')}
      {...commonKnobs()}
    ></WithPopup>
  );
};

export const InputSupport = () => (
  <>
    <Paragraph>
      入力サポートUIみたいなものを作れないか実験してみているサンプル
    </Paragraph>
    <InputSupportExample />
  </>
);

```

### src/lv2/withPopup/WithPopup.tsx
```
typescript
import * as React from 'react';
import { CSSTransition } from 'react-transition-group';
import commonProps, { CommonProps } from '../../utilities/commonProps';
import ScrollPortal from '../../utilities/ScrollPortal';
import { Keys } from '../../utilities/keyboard';
import useUniqueId from '../../hooks/useUniqueId';
import { FocusTrap } from '../../lv1';
import Button from '../../lv1/buttons/Button';
import VisuallyHidden from '../../lv1/a11y/VisuallyHidden';

type Props = {
  /**
   * ポップアップ開閉コントロール描画用 render function
   *
   * - `popupId` を開閉コントロールの `aria-controls` に渡してください
   * - `isOpen` を開閉コントロールの `aria-expanded` に渡してください
   * - `controlRef` を開閉コントロールの `ref` に渡してください
   * - `togglePopup` はクリック以外のタイミングでポップアップを開閉したい際に使用してください。
   */
  render: (
    /**
     * ポップアップのid: ボタンのaria-controlsに渡してください
     */
    popupId: string,
    /**
     * ドロップダウンメニューの開閉状況: ボタンのaria-expandedに渡してください
     */
    isOpen: boolean,
    /**
     * 開閉コントロールのrefに渡してください
     */
    controlRef: React.RefObject<HTMLElement>,
    /**
     * 強制的に表示/非表示を切り替えます。要素のクリック以外のタイミングでポップアップを開閉する際に使用します。
     */
    togglePopup: (open: boolean) => void
  ) => React.ReactNode;
  /**
   * ポップアップ描画用 render function
   *
   * - requestClose を呼ぶことでポップアップを閉じさせます
   * - firstSelectedItemRef は、フォーカス可能な要素のうち最初の要素のrefに渡してください。
   * - フォーカス可能な要素より前に説明文等がある場合は、firstSelectedItemRef をどの要素にも渡さないでください
   */
  renderPopup: (
    /**
     * これを呼ぶことでポップアップを閉じます
     */
    requestClose: () => void,
    /**
     * - フォーカス可能な要素のうち最初の要素のrefに渡してください。
     * - フォーカス可能な要素より前に説明文等がある場合は、firstSelectedItemRef をどの要素にも渡さないでください
     */
    firstSelectableItemRef: React.RefObject<HTMLElement>,
    /**
     * renderに渡さるのと同じRefオブジェクトです。ボタンへの参照として使用し、ref属性には渡さないでください。
     */
    controlRefDoNotUseAsRefAttribute: React.RefObject<HTMLElement>
  ) => React.ReactNode;
  disabled?: boolean;
  /**
   * popupを開いた時に発火します。useEffectのトリガーになるためメモ化したものを渡すことを推奨します。
   */
  onOpen?: () => void;
  /**
   * popupを閉じた時に発火します。useEffectのトリガーになるためメモ化したものを渡すことを推奨します。
   */
  onClose?: () => void;
} & CommonProps;

/**
 * ポップアップを実装するためのコンポーネントです。
 *
 * - ボタンからドロップダウンメニューを表示したい場合は、 `DropdownButton` コンポーネントを使用してください
 * - 作ろうとしている機能と同じ機能を持つコンポーネントが存在する場合はそちらを使用してください。このコンポーネントは扱いが面倒です。
 * - `render` の引数は以下のように使用してください
 *   - `popupId` を開閉コントロールの `aria-controls` に渡してください
 *   - `isOpen` を開閉コントロールの `aria-expanded` に渡してください
 *   - `controlRef` を開閉コントロールの `ref` に渡してください
 * - `renderPopup` の引数は以下のように使用してください
 *   - requestClose を呼ぶことでポップアップを閉じさせます
 *   - firstSelectedItemRef は、フォーカス可能な要素のうち最初の要素のrefに渡してください。
 *   - フォーカス可能な要素より前に説明文等がある場合は、firstSelectedItemRef をどの要素にも渡さないでください
 */
const WithPopup: React.FC<Props> = (props: Props) => {
  const { render, disabled, renderPopup, onOpen, onClose } = props;
  const baseClass = 'vb-withPopup';
  const [open, setOpen] = React.useState(false);
  const firstSelectableItemRef = React.useRef<HTMLElement>(null);
  const popupRef = React.useRef<HTMLDivElement>(null);

  const contentWrapperRef = React.useRef<HTMLSpanElement>(null);
  const [horizontalPosition, setHorizontalPosition] = React.useState<
    'left' | 'right'
  >('left');
  const [verticalPosition, setVerticalPosition] = React.useState<
    'top' | 'bottom'
  >('bottom');
  const uid = useUniqueId(baseClass);
  const popupId = `${uid}__popup`;
  const controlRef = React.useRef<HTMLElement>(null);

  const adjustPosition = () => {
    if (!(contentWrapperRef.current && popupRef.current)) {
      return;
    }
    const buttonRect = contentWrapperRef.current.getBoundingClientRect();
    const popupRect = popupRef.current.getBoundingClientRect();

    setHorizontalPosition(
      buttonRect.left + popupRect.width > document.documentElement.clientWidth
        ? 'right'
        : 'left'
    );
    setVerticalPosition(
      buttonRect.bottom + popupRect.height >
        document.documentElement.clientHeight &&
        buttonRect.bottom > popupRect.height
        ? 'top'
        : 'bottom'
    );
  };

  const openCallbackFlagRef = React.useRef(false);
  const closeCallbackFlagRef = React.useRef(false);

  const openMenu = () => {
    setOpen(true);
    openCallbackFlagRef.current = true;
  };
  const closeMenu = React.useCallback(() => {
    setOpen(false);
    closeCallbackFlagRef.current = true;
  }, []);

  const openCallback = React.useCallback(() => {
    if (openCallbackFlagRef.current) {
      onOpen?.();
      openCallbackFlagRef.current = false;
    }
  }, [onOpen]);
  const closeCallback = React.useCallback(() => {
    if (closeCallbackFlagRef.current) {
      onClose?.();
      closeCallbackFlagRef.current = false;
    }
  }, [onClose]);

  React.useEffect(() => {
    if (open) {
      openCallback();
      // 開いた瞬間にwindowにイベントが伝播して閉じてしまうのを防ぐため、setTimeoutしてaddEventListenerを遅らせている
      setTimeout(() => {
        (firstSelectableItemRef.current || popupRef.current)?.focus();
        window.addEventListener('click', closeMenu);
      });
      return () => window.removeEventListener('click', closeMenu);
    } else {
      closeCallback();
    }
  }, [closeMenu, open, openCallback, closeCallback]);

  React.useLayoutEffect(() => {
    adjustPosition();
  }, [open]);

  const requestClose = () => {
    closeMenu();
    if (controlRef.current) {
      controlRef.current.focus();
    }
  };

  const togglePopup = (open: boolean) => {
    if (disabled) {
      return;
    }
    if (open) {
      openMenu();
    } else {
      closeMenu();
    }
    if (controlRef.current) {
      controlRef.current.focus();
    }
  };

  const popupWrapper = () => {
    return (
      <CSSTransition
        in={open}
        classNames={`${baseClass}__animation`}
        timeout={{
          enter: 300,
          exit: 300,
        }}
        unmountOnExit={true}
      >
        <div className={`${baseClass}__popupWrapper`}>
          <FocusTrap
            // ポップアップの始まり・終わりまでTabキーで移動した場合、ボタンあるいはポップアップ自体にフォーカスを戻す
            onFocusInsideTop={() => {
              if (controlRef.current) {
                controlRef.current.focus();
              } else if (popupRef.current) {
                popupRef.current.focus();
              }
              return true;
            }}
            onFocusInsideBottom={() => {
              if (controlRef.current) {
                controlRef.current.focus();
              } else if (popupRef.current) {
                popupRef.current.focus();
              }
              return true;
            }}
          >
            {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}
            <div
              className={`${baseClass}__popup${
                horizontalPosition === 'right'
                  ? ` ${baseClass}__popup--rightAligned`
                  : ''
              }`}
              tabIndex={-1}
              id={popupId}
              onKeyDown={(e) => {
                e.stopPropagation();
                if (e.key === Keys.ESC) {
                  closeMenu();
                  if (controlRef.current) {
                    controlRef.current.focus();
                  }
                }
              }}
              onClick={(e) => e.stopPropagation()}
              ref={popupRef}
            >
              {renderPopup(requestClose, firstSelectableItemRef, controlRef)}
            </div>
          </FocusTrap>
          {/* iOS VoiceOver/Android Talkbackでポップアップを閉じられるように明示的に閉じるUIを置いておく */}
          <VisuallyHidden>
            <Button onClick={closeMenu}>閉じる</Button>
          </VisuallyHidden>
        </div>
      </CSSTransition>
    );
  };

  return (
    // eslint-disable-next-line jsx-a11y/no-static-element-interactions
    <span
      {...commonProps(props, baseClass)}
      onClick={(e): void => {
        open && e.stopPropagation();
        if (!disabled) {
          if (open) {
            closeMenu();
          } else {
            openMenu();
          }
        }
      }}
      onKeyDown={(e) => {
        if (!open) {
          return;
        }
        if (
          (e.key === Keys.TAB || e.key === Keys.DOWN) &&
          (popupRef.current || firstSelectableItemRef.current)
        ) {
          e.preventDefault();
          if (firstSelectableItemRef.current) {
            firstSelectableItemRef.current.focus();
          } else if (popupRef.current) {
            popupRef.current.focus();
          }
        }
      }}
    >
      {/* Dropdownの位置調整は、contentWrapperをdisplay:blockにして、これを基準にする */}
      <span className={`${baseClass}__contentWrapper`} ref={contentWrapperRef}>
        {render(popupId, open, controlRef, togglePopup)}
      </span>
      <ScrollPortal
        isActive={open}
        positionalBaseElement={contentWrapperRef.current || undefined}
        horizontalPosition={horizontalPosition}
        verticalPosition={verticalPosition}
        onOverflow={() => closeMenu()}
        popupRef={popupRef}
        data-masking={props['data-masking']}
      >
        {popupWrapper()}
      </ScrollPortal>
    </span>
  );
};
export default WithPopup;

```

### src/lv2/withTOC/WithTOC.stories.tsx
```
typescript
import React, { useMemo } from 'react';

import { MdHome } from 'react-icons/md';
import {
  Colors2021GY02,
  ColumnBase,
  GlobalNavi,
  MarginBase,
  PageTitle,
  Paragraph,
  SectionTitle,
  WithTOC,
} from '../../';
import { commonKnobs } from '../../../stories';

export default {
  component: WithTOC,
};

const Skelton = () => (
  <svg width={600} height={30} viewBox="0 0 600 30" fill={Colors2021GY02}>
    <rect x="0" y="0" rx="15" ry="15" width="200" height="30" />
    <rect x="220" y="0" rx="15" ry="15" width="380" height="30" />
  </svg>
);

export const WithTOCComponent = () => {
  const contents = useMemo(
    () =>
      ['Section 1', 'Section 2', 'Lorem ipsum dolor sit amet'].map(
        (label, i) => ({
          id: `WithTOCComponent--section${i}`,
          label,
          content: (
            <ColumnBase mb={1}>
              <SectionTitle mb={1}>{label}</SectionTitle>
              <Skelton />
            </ColumnBase>
          ),
        })
      ),
    []
  );
  return <WithTOC contents={contents} {...commonKnobs()} />;
};

export const OffsetExample = () => {
  const contents = useMemo(
    () =>
      [
        'Section 1',
        'Section 2',
        'セクション３',
        'Lorem ipsum dolor sit amet',
        '寿限無寿限無五劫のすりきれ海砂利水魚の水行末雲来末風来末',
      ].map((label, i) => ({
        id: `OffsetExample--section${i}`,
        label,
        content: (
          <ColumnBase mb={3}>
            <SectionTitle mb={1}>{label}</SectionTitle>
            <Paragraph mb={2}>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam
              vitae ligula id augue ultrices mollis vitae eget neque.
              Pellentesque nibh ex, dictum ac tempor eget, mollis a nulla. Sed
              semper velit lectus, eu convallis tellus dapibus nec. Orci varius
              natoque penatibus et magnis dis parturient montes, nascetur
              ridiculus mus. Fusce eget enim nunc. Morbi ac egestas mi. Integer
              aliquet quam vel commodo molestie.
            </Paragraph>
            {[...Array(5)].map((_, n) => (
              <MarginBase key={n} mt={1}>
                <Skelton />
              </MarginBase>
            ))}
          </ColumnBase>
        ),
      })),
    []
  );

  return (
    <div
      id="OffsetExample--ScrollContainer"
      style={{ position: 'relative', overflow: 'auto', height: '30rem' }}
    >
      <div style={{ position: 'sticky', top: 0, zIndex: 1 }}>
        <GlobalNavi
          links={[
            {
              title: 'Some Sticky Header',
              url: '#',
              IconComponent: MdHome,
              current: true,
            },
          ]}
        />
      </div>
      <PageTitle mt={2} mb={1}>
        Lorem Ipsum Dolor
      </PageTitle>
      {[...Array(3)].map((_, n) => (
        <MarginBase key={n} mb={1}>
          <Skelton />
        </MarginBase>
      ))}
      <WithTOC
        contents={contents}
        containerID="OffsetExample--ScrollContainer"
        offsetTop={48}
        mt={2}
        mb={2}
      />
      {[...Array(10)].map((_, n) => (
        <MarginBase key={n} mt={1}>
          <Skelton />
        </MarginBase>
      ))}
    </div>
  );
};

```

### src/lv2/withTOC/WithTOC.tsx
```
typescript
import React, { useMemo, useRef } from 'react';
import { Link } from 'react-scroll';
import commonProps, { CommonProps } from '../../utilities/commonProps';

type WithTOCContent = {
  id: string;
  label: string;
  content: React.ReactNode;
};

type Props = {
  /**
   * Content bodies and definitions across each sections.
   * 項目ごとの内容および定義一覧。
   *
   * - `id`: Section ID which users can refer to as an anchor. アンカーとして利用される、各項目ごとの要素ID。
   * - `label`: Section name appears in the ToC. 目次に表示される項目名。
   * - `content`: Body of each sections. 各項目の内容。
   */
  contents: Array<WithTOCContent>;

  /**
   * Container to perform scrolling in.
   * スクロールさせる親コンテナ要素。
   */
  containerID?: string;

  /**
   * Scroll position offset from top in screen pixels (`px`).
   * スクロールのオフセット値を指定。
   */
  offsetTop?: number;

  /**
   * Callback fired on ToC link clicks.
   * 目次のリンク押下時に呼び出されるコールバック。
   *
   * Usage example: `id => history.push({ hash: id })`
   */
  onNavigateTo?: (id: string) => void;
} & CommonProps;

/**
 * `<WithTOC/>` represents a list of content sections with an automatically generated table of contents.
 * 目次付きのコンテンツリストです。
 */
const WithTOC: React.FC<Props> = (props: Props) => {
  const baseClass = 'vb-withTOC';
  const { containerID, contents, offsetTop, onNavigateTo } = props;

  const contentsRef = useRef<HTMLDivElement>(null);

  const toc = useMemo(
    () =>
      contents.map((c) => (
        <li key={`index-${c.id}`}>
          <Link
            to={c.id}
            className={`${baseClass}__toc__link`}
            activeClass={`${baseClass}__toc__link--current`}
            href={`#${c.id}`}
            onClick={() => {
              (
                contentsRef.current?.querySelector(
                  `.${baseClass}__contents__section#${c.id}`
                ) as HTMLElement | null
              )?.focus({ preventScroll: true });
              onNavigateTo && onNavigateTo(c.id);
            }}
            containerId={containerID}
            offset={offsetTop && 0 - offsetTop}
            smooth="easeOutCubic"
            duration={500}
            spy
            hashSpy
          >
            {c.label}
          </Link>
        </li>
      )),
    [containerID, contents, offsetTop, onNavigateTo]
  );

  const bodies = useMemo(
    () =>
      contents.map((c) => (
        <section
          key={`body-${c.id}`}
          id={c.id}
          className={`${baseClass}__contents__section`}
          aria-label={c.label}
          tabIndex={-1}
        >
          {c.content}
        </section>
      )),
    [contents]
  );

  const containerStyle = useMemo(
    () => (offsetTop ? { top: `${offsetTop}px` } : {}),
    [offsetTop]
  );

  return (
    <section {...commonProps(props, baseClass)}>
      <nav className={`${baseClass}__toc`} aria-label="目次">
        <ol className={`${baseClass}__toc__container`} style={containerStyle}>
          {toc}
        </ol>
      </nav>
      <div ref={contentsRef} className={`${baseClass}__contents`}>
        {bodies}
      </div>
    </section>
  );
};
export default WithTOC;

```

